"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["74392"],{67314:function(e,n,t){t.d(n,{Ay:()=>r,RM:()=>l});var o=t(74848),i=t(84429);let l=[];function s(e){let n={a:"a",admonition:"admonition",em:"em",p:"p",strong:"strong",...(0,i.R)(),...e.components};return(0,o.jsxs)(n.admonition,{type:"note",children:[(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Role"})}),(0,o.jsxs)(n.p,{children:["After agent installation, you can enable the log monitoring settings only when you have the ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.em,{children:"edit permission"})})," on the project. For more information about the roles, see ",(0,o.jsx)(n.a,{href:"../project/project-structure",children:"the following"}),"."]})]})}function r(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(s,{...e})}):s(e)}},59814:function(e,n,t){t.d(n,{Ay:()=>r,RM:()=>l});var o=t(74848),i=t(84429);let l=[];function s(e){let n={img:"img",li:"li",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["If you turn on ",(0,o.jsx)(n.img,{alt:"Icon",src:t(30490).A+"",width:"32",height:"16"}),", the log monitoring is enabled. You can try for free for 15 days from the activation date."]}),"\n",(0,o.jsxs)(n.li,{children:["If you turn off ",(0,o.jsx)(n.img,{alt:"Icon",src:t(45792).A+"",width:"32",height:"16"}),", the log monitoring is disabled. Logs are no longer saved."]}),"\n"]})}function r(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(s,{...e})}):s(e)}},42074:function(e,n,t){t.r(n),t.d(n,{metadata:()=>o,default:()=>u,frontMatter:()=>a,contentTitle:()=>c,toc:()=>h,assets:()=>g});var o=JSON.parse('{"id":"log/log-python","title":"Python","description":"It guides you how to collect logs from your Python application.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/log/log-python.mdx","sourceDirName":"log","slug":"/log/log-python","permalink":"/whatap-docs/en/log/log-python","draft":false,"unlisted":false,"editUrl":"undefined/docs/log/log-python.mdx","tags":[],"version":"current","frontMatter":{"id":"log-python","title":"Python","description":"It guides you how to collect logs from your Python application.","keywords":["Log Monitoring","Python"],"isTranslationMissing":false},"sidebar":"logSidebar","previous":{"title":"Node.js","permalink":"/whatap-docs/en/log/log-nodejs"},"next":{"title":"Go","permalink":"/whatap-docs/en/log/log-go"}}'),i=t(74848),l=t(84429),s=t(59814),r=t(67314);let a={id:"log-python",title:"Python",description:"It guides you how to collect logs from your Python application.",keywords:["Log Monitoring","Python"],isTranslationMissing:!1},c,g={},h=[{value:"Agent Update",id:"agent-update",level:2},{value:"Checking the agent settings",id:"checking-the-agent-settings",level:2},{value:"Enabling the collection of logs",id:"enabling-the-collection-of-logs",level:3},{value:"Linking the log and web transaction",id:"linking-the-log-and-web-transaction",level:3},{value:"Version 1.3.6 or later",id:"version-136-or-later",level:4},{value:"Version 1.3.6 or earlier",id:"version-136-or-earlier",level:4},{value:"Enabling the log monitoring",id:"enabling-the-log-monitoring",level:2},...s.RM,...r.RM];function d(e){let n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"To collect logs by your Python application, check the following."}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"agent-update",children:"Agent Update"}),(0,i.jsxs)(n.p,{children:["It is available from Python agent 1.2.2. For more information about update, see ",(0,i.jsx)(n.a,{href:"../python/manage-pkg#update-pkg",children:"the following"}),"."]})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"checking-the-agent-settings",children:"Checking the agent settings"}),(0,i.jsxs)(n.p,{children:["Home > Select Project > ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Log"})})," > ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Log Setting"})})]}),(0,i.jsxs)(n.p,{children:["Select a project in the initial screen of the WhaTap monitoring service, and then select ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Log"})})," > ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Log Setting"})})," under Project Menu. Proceed with the process according to the instructions in the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Check Agent Settings"})})," tab of the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Start Log Monitoring"})})," section."]})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,i.jsx)(n.h3,{id:"enabling-the-collection-of-logs",children:"Enabling the collection of logs"}),(0,i.jsxs)(n.p,{children:["If you enter the command including the configuration file path (",(0,i.jsx)(n.em,{children:"WHATAP_HOME"}),"), log collection starts."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:'export LOGFILES={Log file\'s full path},...\necho "logsink_enabled=true" | sudo tee -a {Configuration file path}/whatap.conf\necho "logsink.files=$LOGFILES" | sudo tee -a {Configuration file path}/whatap.conf\n'})})]}),"\n",(0,i.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,i.jsx)(n.h3,{id:"linking-the-log-and-web-transaction",children:"Linking the log and web transaction"})}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,i.jsx)(n.h4,{id:"version-136-or-later",children:"Version 1.3.6 or later"}),(0,i.jsxs)(n.p,{children:["Starting from the version 1.3.6, transactions and logs can be integrated using the following methods. Currently, WhaTap supports the Python's logging and loguru libraries. Configure ",(0,i.jsx)(n.em,{children:"whatap.conf"})," according to your Python log libraries."]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"logging module"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",metastring:"title='logging'",children:'\necho "trace_logging_enabled=true" | sudo tee -a {configuration file path}/whatap.conf\n\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"loguru module"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",metastring:"title='loguru'",children:'\necho "trace_loguru_enabled=true" | sudo tee -a {configuration file path}/whatap.conf\n\n'})}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,i.jsx)(n.h4,{id:"version-136-or-earlier",children:"Version 1.3.6 or earlier"}),(0,i.jsxs)(n.p,{children:["The transaction ID ",(0,i.jsx)(n.code,{children:"{txid}"})," is output to the log so that the logs generated by each transaction can be viewed separately. WhaTap Monitoring automatically injects ",(0,i.jsx)(n.code,{children:"{txid}"})," into Python LogRecord so that ",(0,i.jsx)(n.code,{children:"{txid}"})," can be output to the log file when setting the formatter."]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"settings.py\n...\nLOGGING = {\n...\n    'formatters': {\n        ...\n    },\n    'handlers': {\n        ...\n    },\n    'loggers': {\n        ...\n        '{\uB85C\uAC70\uC774\uB984}': {\n            'handlers': [...],\n        ...\n        },\n    },\n}\n\ntry:\n    import whatap.trace.mod.logging as whatap_logging\n    if whatap_logging.logging_injection_processed:\n        LOGGING['formatters']['whatap.formatter']={\n                '()': 'django.utils.log.ServerFormatter',\n                'format': '[{server_time}] -- {{ \"@txid\" : \"{txid}\" }} -- {message}',\n                'style': '{',\n            }\n        LOGGING['handlers']['whatap']={\n                'level': 'DEBUG',\n                'class': 'logging.handlers.RotatingFileHandler',\n                'filename': os.path.join(BASE_DIR, 'logs','whatap_log.log'),\n                'formatter': 'whatap.formatter',\n            }\n        LOGGING['loggers'][{Logger name}]['handlers'].append('whatap')\nexcept:\n    pass\n...\n"})})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"enabling-the-log-monitoring",children:"Enabling the log monitoring"}),(0,i.jsxs)(n.p,{children:["Home > Select Project > ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Log"})})," > ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Log Setting"})})]}),(0,i.jsxs)(n.p,{children:["You can enable or disable the WhaTap log monitoring with the toggle button in the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Activate log monitoring"})})," tab of the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Starting the log monitoring"})})," section."]}),(0,i.jsx)(s.Ay,{}),(0,i.jsx)(r.Ay,{})]})]})}function u(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},45792:function(e,n,t){t.d(n,{A:()=>o});let o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAzMiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3QgeD0iMC41IiB5PSIwLjUiIHdpZHRoPSIzMSIgaGVpZ2h0PSIxNSIgcng9IjcuNSIgZmlsbD0iIzk5OTk5OSIgc3Ryb2tlPSIjOTk5OTk5Ii8+CjxjaXJjbGUgY3g9IjguMDAwMTYiIGN5PSI3Ljk5OTkyIiByPSI2LjY2NjY3IiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K"},30490:function(e,n,t){t.d(n,{A:()=>o});let o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAzMiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjE2IiByeD0iOCIgZmlsbD0iIzAwQjU0MyIvPgo8ZWxsaXBzZSBjeD0iMjQuMDAwMiIgY3k9IjcuOTk5OTIiIHJ4PSI2LjY2NjY3IiByeT0iNi42NjY2NyIgZmlsbD0id2hpdGUiLz4KPC9zdmc+Cg=="},84429:function(e,n,t){t.d(n,{R:()=>s,x:()=>r});var o=t(96540);let i={},l=o.createContext(i);function s(e){let n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);