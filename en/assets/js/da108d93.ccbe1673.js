"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["7830"],{7472:function(e,n,i){i.r(n),i.d(n,{metadata:()=>s,default:()=>b,frontMatter:()=>j,contentTitle:()=>g,toc:()=>f,assets:()=>P});var s=JSON.parse('{"id":"php/agent-troubleshooting","title":"Troubleshooting","description":"You can check the problems that may occur during PHP agent installation.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/php/agent-troubleshooting.mdx","sourceDirName":"php","slug":"/php/agent-troubleshooting","permalink":"/whatap-docs/en/php/agent-troubleshooting","draft":false,"unlisted":false,"editUrl":"undefined/docs/php/agent-troubleshooting.mdx","tags":[],"version":"current","frontMatter":{"id":"agent-troubleshooting","title":"Troubleshooting","description":"You can check the problems that may occur during PHP agent installation.","toc_max_heading_level":2,"keywords":["PHP","PHP Monitoring","Application","Application Monitoring","Troubleshooting","Troubleshooting"],"isTranslationMissing":false},"sidebar":"phpSidebar","previous":{"title":"\uC124\uCE58 \uC810\uAC80","permalink":"/whatap-docs/en/php/install-check"},"next":{"title":"PHP agent configuration","permalink":"/whatap-docs/en/php/set-agent"}}'),t=i(74848),a=i(84429);function r(e){let n={code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"extension-modul-manual-setting",children:"Manual configuration of PHP extension module and whatap-php service"}),(0,t.jsxs)(n.p,{children:["If installation of the PHP extension module and whatap-php service (",(0,t.jsx)(n.em,{children:"install.sh"}),") has not been successful, you can install them manually. Use this method when environment information cannot be checked for any reasons such as PHP compile installation."]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"creation-of-whatapini",children:"Creation of whatap.ini"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ cp /usr/whatap/php/template.ini /usr/whatap/php/whatap.ini\n$ vi /usr/whatap/php/whatap.ini\n\n# Add this content at the top\n; Enable whatap extension module\nextension=whatap.so\nwhatap.license=            # Issued access key\nwhatap.server.host=        # Issued server IP\nwhatap.app_name=           # Web server classification: APHP, FPHP (apache: APHP, php-fpm : FPHP)\nwhatap.app_process_name=   # Process name of apache and php-fpm (httpd,php-fpm)\n"})}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Configuration"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"whatap.license"}),(0,t.jsxs)(n.td,{children:["The access key issued from ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"Project Menu"})})," > ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"Management"})})," > ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"Agent Installation"})})," can be checked."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"whatap.server.host"}),(0,t.jsxs)(n.td,{children:["You can see the server IP issued from ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"Project Menu"})})," > ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"Management"})})," > ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"Agent Installation"})}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"whatap.app_name"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"APHP"})," is used for the Apache server and ",(0,t.jsx)(n.code,{children:"FPHP"})," is used for php-fpm."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"whatap.app_process_name"}),(0,t.jsxs)(n.td,{children:["If you enter the exact value as the execution process name of Apache or php-fpm, the memory usage for the process is collected. For example, they are ",(0,t.jsx)(n.code,{children:"httpd"}),", ",(0,t.jsx)(n.code,{children:"apache2"}),", ",(0,t.jsx)(n.code,{children:"php-fpm"}),", and such."]})]})]})]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"check-php-cli-path",children:"Checking the PHP command (CLI)"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ which php\n\n/usr/bin/php\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"configuring-the-environment-variables-for-the-whatap-php-service",children:"Configuring the environment variables for the whatap-php service"}),(0,t.jsxs)(n.p,{children:["Set the PHP CLI command's path in the ",(0,t.jsx)(n.code,{children:"$WHATAP_PHP_BIN"})," environment variable."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo vi /etc/init.d/whatap-php\n\nexport WHATAP_PHP_BIN=    # PHP command's location (/usr/bin/php)\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"checking-the-php-api-version",children:"Checking the PHP API version"}),(0,t.jsxs)(n.p,{children:["Set the PHP CLI command's path in the ",(0,t.jsx)(n.code,{children:"$WHATAP_PHP_BIN"})," environment variable."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo php -i | grep 'PHP API'\n\nPHP API => 20100412\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"checking-whether-php-zts-zend-thread-safe-is-available",children:"Checking whether PHP ZTS (Zend Thread Safe) is available"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"title=apache",children:"$ sudo apachectl -V | grep MPM\n\nServer MPM: Prefork      # ZTS unavailable\nServer MPM: Worker       # ZTS available\n"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"title=PHP-FPM",children:"$ sudo php-fpm -i | grep Thread\n\nThread Safety => disabled       # ZTS unavailable\nThread Safety => enabled       	# ZTS available\n"})})]}),"\n",(0,t.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,t.jsx)(n.h3,{id:"checking-and-configuring-the-php-extension-modules-path",children:"Checking and configuring the PHP extension module's path"})}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"check-php-extension-module",children:"Checking the PHP extension module's path"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo php -i | grep extension_dir\n\nextension_dir => /usr/lib64/php/modules => /usr/lib64/php/modules\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"configuring-the-php-extension-module",children:"Configuring the PHP extension module"}),(0,t.jsxs)(n.p,{children:["After checking the PHP API version and PHP ZTS's availability, select a library that meets the environment. In the PHP extension module's path, copy the ",(0,t.jsx)(n.em,{children:"whatap.so"})," file name."]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["In case PHP ZTS is available - ",(0,t.jsx)(n.em,{children:"whatap_zts_[PHP API version].so"})]}),"\n",(0,t.jsxs)(n.li,{children:["In case PHP ZTS is unavailable - ",(0,t.jsx)(n.em,{children:"whatap_[PHP API version].so"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Example in case the PHP ZTS is not supported\n$ sudo cp /usr/whatap/php/modules/x64/whatap_20100412.so /usr/lib64/php/modules/whatap.so\n"})}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"configuring-the-environment-variables-for-the-whatap-php-service-1",children:"Configuring the environment variables for the whatap-php service"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo vi /etc/init.d/whatap-php\n\nexport WHATAP_PHP_EXT_HOME=   # PHP extension path (/usr/lib64/php/modules)\nexport WHATAP_PHP_EXT_SRC=    # whatap library path and file name\n                              # (/usr/whatap/php/modules/x64/whatap_20100412.so)]\n"})}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In the ",(0,t.jsx)(n.code,{children:"$WHATAP_PHP_EXT_HOME"})," environment variable, set the PHP extension module's path."]}),"\n",(0,t.jsxs)(n.li,{children:["In the ",(0,t.jsx)(n.code,{children:"$WHATAP_PHP_EXT_SRC"})," environment variable, set the whatap library's full file path."]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"php-ini-path",children:"whatap.ini configuration"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Check the PHP ini file's path that has been added."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo php -i | grep '.ini files'\n\nScan this dir for additional .ini files => /etc/php.d\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Copy ",(0,t.jsx)(n.em,{children:"whatap.ini"})," and paste it to the path."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo cp /usr/whatap/php/whatap.ini /etc/php.d/whtap/ini\n"})}),"\n"]}),"\n"]})]})]})}function h(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}function c(e){let n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",section:"section",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"cannot-check-the-php-ini-files-path-that-has-been-added",children:"Cannot check the PHP ini file's path that has been added"}),(0,t.jsxs)(n.p,{children:["This happens if the PHP compile installation option, ",(0,t.jsx)(n.code,{children:"--with-config-file-scan-dir=PATH"})," has not been set."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo php -i | grep '.ini files'\n\nScan this dir for additional .ini files => (none)\n"})}),(0,t.jsxs)(n.p,{children:["Add the content in ",(0,t.jsx)(n.em,{children:"whatap.ini"})," at the end of ",(0,t.jsx)(n.em,{children:"php.ini"}),"."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ php -i | grep 'php.ini'\n\nLoaded Configuration File => /etc/php.ini\n\n$ sudo vi php.ini\n\n# Add at the end of a file\n[whatap]\n;Enable whatap extension module\nextension=whatap.so\nwhatap.ext.error_enabled=true\nwhatap.ext.exception_enabled=true\nwhatap.trace_user_enabled=true\nwhatap.trace_user_using_ip=false\n"})}),(0,t.jsxs)(n.p,{children:["For other options, use ",(0,t.jsx)(n.em,{children:"/usr/whatap/php/whatap.ini"}),"."]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"configuring-the-whatap-php-services-environment-variables",children:"Configuring the whatap-php service's environment variables"}),(0,t.jsxs)(n.p,{children:["In the ",(0,t.jsx)(n.code,{children:"$WHATAP_CONFIG_HOME"})," environment variable, set the path for ",(0,t.jsx)(n.em,{children:"whatap.ini"}),"."]}),(0,t.jsxs)(n.p,{children:["If the added PHP's ini path cannot be checked, set the ",(0,t.jsx)(n.em,{children:"/usr/whatap/php"})," path in which ",(0,t.jsx)(n.em,{children:"whatap.ini"})," has been created."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo vi /etc/init.d/whatap-php\n\nexport WHATAP_CONFIG_HOME=      # whatap.ini path (/etc/php.d)\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"restarting-the-service",children:"Restarting the service"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Restart Apache and PHP-FPM services."}),"\n",(0,t.jsx)(n.li,{children:"Restart the whatap-php service."}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"error-not-found-php-api",children:"Error: Not found PHP API"}),(0,t.jsx)(n.p,{children:"This occurs if the PHP command (CLI) cannot be found."}),(0,t.jsxs)(n.p,{children:["Check the correct ",(0,t.jsx)(n.a,{href:"#check-php-cli-path",children:"PHP command (CLI) location"})," and then proceed with ",(0,t.jsx)(n.a,{href:"#extension-modul-manual-setting",children:"Optional installation of the PHP extension module and whatap-php service"}),"."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"title='Check PHP API version'",children:"$ sudo php -i | grep 'PHP API'\n\nPHP API => 20100412\n"})})]})]})}function o(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}function l(e){let n={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",section:"section",...(0,a.R)(),...e.components};return(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"error-not-found-php-ini-directory",children:"Error: Not found PHP ini directory"}),(0,t.jsxs)(n.p,{children:["This error occurs when the value in ",(0,t.jsx)(n.code,{children:"Scan this dir for additional.ini files"})," has not been checked. If the PHP compile installation option, ",(0,t.jsx)(n.code,{children:"--with-config-file-scan-dir=PATH"})," has not been installed, the environment information does not exist."]}),(0,t.jsxs)(n.p,{children:["After referring to the following guide, check the correct ",(0,t.jsx)(n.a,{href:"#check-php-cli-path",children:"PHP command (CLI) location"})," and then proceed with ",(0,t.jsx)(n.a,{href:"#extension-modul-manual-setting",children:"Optional installation of the PHP extension module and whatap-php service"}),"."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo php -i | grep '.ini files'\n\nScan this dir for additional .ini files => (none)\n"})})]})}function d(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}function p(e){let n={a:"a",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"in-case-transactions-do-not-appear-in-the-response-time-distribution-chart",children:"In case transactions do not appear in the response time distribution chart"}),(0,t.jsx)(n.p,{children:"The CPU and memory graphs appear but the response time distribution chart (hitmap) does not appear in the following cases:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The agent is connected to the collection server but the tracer is not applied to the PHP extension module."}),"\n",(0,t.jsx)(n.li,{children:"Apache and PHP-FPM have not been restarted after configuration."}),"\n"]}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Check whether the PHP extension module has been applied."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"$ sudo php -m\n\n[PHP Modules]\nbz2\ncalendar\nCore\nctype\ncurl\ndate\n\u2026\nwhatap               # Check the WhaTap module load\n\u2026\n[Zend Modules]\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Restart Apache and PHP-FPM services."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If the PHP extension module has not been applied, it indicates abnormal installation. Check whether the path of ",(0,t.jsx)(n.em,{children:"whatap.so"})," or ",(0,t.jsx)(n.em,{children:"whatap.ini"})," meets the PHP environment."]}),"\n",(0,t.jsxs)(n.p,{children:["With referring to the following guide, check the items like ",(0,t.jsx)(n.a,{href:"#check-php-cli-path",children:"PHP command (CLI) path"}),", ",(0,t.jsx)(n.a,{href:"#check-php-extension-module",children:"PHP extension module path"}),", and ",(0,t.jsx)(n.a,{href:"#php-ini-path",children:"Additional PHP ini configuration file path"}),"."]}),"\n"]}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}function m(e){let n={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"segmentation-fault-sig-bus-error",children:"Segmentation fault, Sig bus error"}),(0,t.jsx)(n.p,{children:"If any service failure occurs after applying the PHP Monitoring, check the error log for Apache or PHP-FPM."}),(0,t.jsxs)(n.p,{children:["In the content of the error log, check for any error messages such as ",(0,t.jsx)(n.code,{children:"segmentation fault"})," and ",(0,t.jsx)(n.code,{children:"sig bus"}),". The messages include phrases like ",(0,t.jsx)(n.code,{children:"kill child process"}),", ",(0,t.jsx)(n.code,{children:"exit child"}),", and ",(0,t.jsx)(n.code,{children:"exit process"}),"."]}),(0,t.jsxs)(n.p,{children:["If any error occurs, it can be seen that a conflict happened in the PHP extension module, ",(0,t.jsx)(n.em,{children:"whatap.so"}),". Stop the PHP extension module, ",(0,t.jsx)(n.em,{children:"whatap.so"}),", and then restart Apache or PHP-FPM."]}),(0,t.jsxs)(n.p,{children:["In the environment that does not affect the service, add the ",(0,t.jsx)(n.code,{children:"Core dump"})," setting and then reload ",(0,t.jsx)(n.em,{children:"whatap.so"}),". If any error occurs, the ",(0,t.jsx)(n.em,{children:"dump"})," file is generated. Analyze the ",(0,t.jsx)(n.em,{children:"dump"})," file by using gdb for resolving the root cause."]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"core-dump-configuration",children:"Core dump configuration"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Give permission for the directory to generate the ",(0,t.jsx)(n.em,{children:"dump"})," file."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"chmod 0777 /home/httpd-core\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Perform system configuration."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"ulimit -c unlimited\nsysctl fs.suid_dumpable=2\nsysctl kernel.core_uses_pid=0\nsysctl kernel.core_pattern='| /home/httpd-core/core-%e.%p'\n"})}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"apache",children:"Apache"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Set the CoreDumpDirectory item in the Apache conf."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"vi /etc/httpd/conf/httpd.conf\n\nCoreDumpDirectory /home/httpd-core\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Restart Apache to complete the configuration."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If any error occurs, the ",(0,t.jsx)(n.em,{children:"dump"})," file is generated. If the ",(0,t.jsx)(n.em,{children:"dump"})," file has been generated, check the root cause of the error through gdb. Use the ",(0,t.jsx)(n.code,{children:"bt full"})," command to check the entire stack information."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"# gdb /usr/sbin/httpd /home/httpd-core/core-httpd.31832\n...\n...\n\n> bt full\n"})}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"php-fpm",children:"PHP-FPM"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In the FPM configuration file, set ",(0,t.jsx)(n.code,{children:"rlimit_core"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"rlimit_core = unlimited\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Restart PHP-FPM to complete the configuration."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If any error occurs, the ",(0,t.jsx)(n.em,{children:"dump"})," file is generated. If the ",(0,t.jsx)(n.em,{children:"dump"})," file has been generated, check the root cause of the error through gdb. Use the ",(0,t.jsx)(n.code,{children:"bt full"})," command to check the entire stack information."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"# gdb /usr/sbin/php-fpm /home/httpd-core/core-php-fpm.31832\n...\n...\n\n> bt full\n"})}),"\n"]}),"\n"]})]})]})}function x(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}let j={id:"agent-troubleshooting",title:"Troubleshooting",description:"You can check the problems that may occur during PHP agent installation.",toc_max_heading_level:2,keywords:["PHP","PHP Monitoring","Application","Application Monitoring","Troubleshooting","Troubleshooting"],isTranslationMissing:!1},g,P={},f=[{value:"Manual configuration of PHP extension module and whatap-php service",id:"extension-modul-manual-setting",level:2},{value:"Creation of whatap.ini",id:"creation-of-whatapini",level:3},{value:"Checking the PHP command (CLI)",id:"check-php-cli-path",level:3},{value:"Configuring the environment variables for the whatap-php service",id:"configuring-the-environment-variables-for-the-whatap-php-service",level:3},{value:"Checking the PHP API version",id:"checking-the-php-api-version",level:3},{value:"Checking whether PHP ZTS (Zend Thread Safe) is available",id:"checking-whether-php-zts-zend-thread-safe-is-available",level:3},{value:"Checking and configuring the PHP extension module&#39;s path",id:"checking-and-configuring-the-php-extension-modules-path",level:3},{value:"Checking the PHP extension module&#39;s path",id:"check-php-extension-module",level:4},{value:"Configuring the PHP extension module",id:"configuring-the-php-extension-module",level:4},{value:"Configuring the environment variables for the whatap-php service",id:"configuring-the-environment-variables-for-the-whatap-php-service-1",level:4},{value:"whatap.ini configuration",id:"php-ini-path",level:3},{value:"Cannot check the PHP ini file&#39;s path that has been added",id:"cannot-check-the-php-ini-files-path-that-has-been-added",level:2},{value:"Configuring the whatap-php service&#39;s environment variables",id:"configuring-the-whatap-php-services-environment-variables",level:3},{value:"Restarting the service",id:"restarting-the-service",level:3},{value:"Error: Not found PHP API",id:"error-not-found-php-api",level:3},{value:"Error: Not found PHP ini directory",id:"error-not-found-php-ini-directory",level:2},{value:"In case transactions do not appear in the response time distribution chart",id:"in-case-transactions-do-not-appear-in-the-response-time-distribution-chart",level:2},{value:"Segmentation fault, Sig bus error",id:"segmentation-fault-sig-bus-error",level:2},{value:"Core dump configuration",id:"core-dump-configuration",level:3},{value:"Apache",id:"apache",level:3},{value:"PHP-FPM",id:"php-fpm",level:3}];function v(e){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h,{}),"\n","\n",(0,t.jsx)(o,{}),"\n","\n",(0,t.jsx)(d,{}),"\n","\n",(0,t.jsx)(u,{}),"\n","\n",(0,t.jsx)(x,{})]})}function b(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(v,{...e})}):v(e)}},84429:function(e,n,i){i.d(n,{R:()=>r,x:()=>h});var s=i(96540);let t={},a=s.createContext(t);function r(e){let n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function h(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);