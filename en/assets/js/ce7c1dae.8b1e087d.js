"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["71717"],{19036:function(e,n,t){t.d(n,{Ay:()=>l,RM:()=>r});var s=t(74848),i=t(84429);let r=[];function c(e){let n={admonition:"admonition",li:"li",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsx)(n.admonition,{type:"caution",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The agent names must be unique on a project basis."}),"\n",(0,s.jsx)(n.li,{children:"If the agent ID and name have been changed, previous data is not connected."}),"\n"]})})}function l(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},54301:function(e,n,t){t.r(n),t.d(n,{metadata:()=>s,default:()=>p,frontMatter:()=>l,contentTitle:()=>a,toc:()=>d,assets:()=>o});var s=JSON.parse('{"id":"telegraf/set-agent","title":"Configuration","description":"Let\'s learn about the options you can set through the whatap.conf file in the Telegraf agent server.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/telegraf/set-agent.mdx","sourceDirName":"telegraf","slug":"/telegraf/set-agent","permalink":"/whatap-docs/en/telegraf/set-agent","draft":false,"unlisted":false,"editUrl":"undefined/docs/telegraf/set-agent.mdx","tags":[],"version":"current","frontMatter":{"id":"set-agent","title":"Configuration","description":"Let\'s learn about the options you can set through the whatap.conf file in the Telegraf agent server.","keywords":["Telegraf","Configuration"],"isTranslationMissing":false},"sidebar":"pluginSidebar","previous":{"title":"Troubleshooting","permalink":"/whatap-docs/en/telegraf/agent-troubleshooting"},"next":{"title":"Management","permalink":"/whatap-docs/en/telegraf/manage"}}'),i=t(74848),r=t(84429),c=t(19036);let l={id:"set-agent",title:"Configuration",description:"Let's learn about the options you can set through the whatap.conf file in the Telegraf agent server.",keywords:["Telegraf","Configuration"],isTranslationMissing:!1},a,o={},d=[{value:"Agent name identification",id:"agent-name-identification",level:2},...c.RM,{value:"Agent communication settings",id:"agent-communication-settings",level:2},{value:"Telegraf",id:"telegraf",level:2},{value:"Log",id:"log",level:2}];function h(e){let n={admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",li:"li",p:"p",section:"section",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["The Whatap agent writes the necessary settings for each agent in ",(0,i.jsx)(n.em,{children:"whatap.conf"}),". The agent locates and loads the configuration file through the environment variables. The options that can be set through the ",(0,i.jsx)(n.em,{children:"whatap.conf"})," file are as follows:"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"The Telegraf agent must be manually configured."})}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"agent-name-identification",children:"Agent name identification"}),(0,i.jsx)(n.p,{children:"WhaTap basically uses the data collected from the server for identifying the infrastructure server that is the target of monitoring data collection."}),(0,i.jsx)(c.Ay,{}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"object_name"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"{type}"}),"-",(0,i.jsx)(n.code,{children:"{hostname}"}),"-",(0,i.jsx)(n.code,{children:"{ip2}"}),"-",(0,i.jsx)(n.code,{children:"{ip3}"}),"-",(0,i.jsx)(n.code,{children:"{docker}"})]}),"\n",(0,i.jsx)(n.p,{children:"It is an agent naming (ONAME) scheme to identify applications. An OID is created based on the ONAME."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"{type}"})}),(0,i.jsx)(n.td,{children:'Use the value set in app_name. The default value is "Telegraf."'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"{ip#}"})}),(0,i.jsx)(n.td,{children:"When IPs are divided, the #th digit is used."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"{hostname}"})}),(0,i.jsx)(n.td,{children:"The server host name is used."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"{docker}"})}),(0,i.jsx)(n.td,{children:"Use the IP of the Docker container."})]})]})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"app_name"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsxs)(n.p,{children:["It is a component used in the agent naming (ONAME) scheme to identify applications. It corresponds to the ",(0,i.jsx)(n.code,{children:"{type}"})," among the ",(0,i.jsx)(n.code,{children:"object_name"})," options."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["It is applied after restarting the ",(0,i.jsx)(n.code,{children:"whatap-telegraf"})," service."]})}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"agent-communication-settings",children:"Agent communication settings"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"license"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsx)(n.p,{children:"To install the agent, set the project access key granted from the server. The project access key includes the agent's project and the encryption key for secured communication."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.server.host"})," ",(0,i.jsx)("span",{class:"type",children:"ip_address"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"127.0.0.1,127.0.0.1"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the server to transfer the data collected by the agent. If there are multiple IPs due to the collection server redundancy, they can be specified by separating with comma (,). The collection server's proxy daemon must be serviced in the listening state for the specified IP."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.server.port"})," ",(0,i.jsx)("span",{class:"type",children:"tcp_port"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"6600"})]}),"\n",(0,i.jsxs)(n.p,{children:["Set the collection server's port. Because only one port can be specified, the collection servers specified in ",(0,i.jsx)(n.code,{children:"whatap_server_host"})," must use the same port."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"tcp_so_timeout"})," ",(0,i.jsx)("span",{class:"type",children:"Millisecond"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"60000"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the socket timeout of the TCP session that communicates with the collection server."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"tcp_connection_timeout"})," ",(0,i.jsx)("span",{class:"type",children:"Millisecond"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"5000"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the connection time out of the TCP session that communicates with the collection server."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"net_send_max_bytes"})," ",(0,i.jsx)("span",{class:"type",children:"Byte"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"5242880"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the maximum size of the data to send to the collection server at one time."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"net_send_buffer_size"})," ",(0,i.jsx)("span",{class:"type",children:"Byte"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"1024"})]}),"\n",(0,i.jsx)(n.p,{children:"Maximum data in bytes to transfer data."}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"telegraf",children:"Telegraf"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"telegraf_tcp_port"})," ",(0,i.jsx)("span",{class:"type",children:"tcp_port"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"6600"})]}),"\n",(0,i.jsx)(n.p,{children:"TCP port to connect with Telegraf socker_writer output plugin."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["It is applied after restarting the ",(0,i.jsx)(n.code,{children:"whatap-telegraf"})," service."]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"telegraf_delta_fields"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"1024"})]}),"\n",(0,i.jsx)(n.p,{children:"Add an extra field after calculating the increment value of the field with cumulative values. Set the value as the name.fields format. Multiple items can be separated with comma (,)."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"e.g. The increment values for accepts and requests in nginx.accepts, nginx.requests nginx are delivered with the names of acceptsDelta and requestsDelta fields."}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"log",children:"Log"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"log_keep_days"})," ",(0,i.jsx)("span",{class:"type",children:"Day"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"7"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the retention period of log files."}),"\n"]}),"\n"]})]})]})}function p(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},84429:function(e,n,t){t.d(n,{R:()=>c,x:()=>l});var s=t(96540);let i={},r=s.createContext(i);function c(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);