"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["21527"],{57422:function(e,n,s){s.r(n),s.d(n,{metadata:()=>a,default:()=>h,frontMatter:()=>r,contentTitle:()=>l,toc:()=>o,assets:()=>c});var a=JSON.parse('{"id":"kubernetes/install-auto-application-agent","title":"APM Auto-Installation Configuration","description":"Guide for configuring APM auto-installation.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/kubernetes/install-auto-application-agent.mdx","sourceDirName":"kubernetes","slug":"/kubernetes/install-auto-application-agent","permalink":"/whatap-docs/en/kubernetes/install-auto-application-agent","draft":false,"unlisted":false,"editUrl":"undefined/docs/kubernetes/install-auto-application-agent.mdx","tags":[],"version":"current","frontMatter":{"id":"install-auto-application-agent","title":"APM Auto-Installation Configuration","description":"Guide for configuring APM auto-installation.","keywords":["Kubernetes","Kubernetes Monitoring","WhaTap Operator","Auto Application Installation"],"toc_max_heading_level":3,"isTranslationMissing":false},"sidebar":"kubeSidebar","previous":{"title":"Install WhaTap Operator","permalink":"/whatap-docs/en/kubernetes/install-whatap-operator"},"next":{"title":"OpenAgent Configuration","permalink":"/whatap-docs/en/kubernetes/openagent"}}'),t=s(74848),i=s(84429);let r={id:"install-auto-application-agent",title:"APM Auto-Installation Configuration",description:"Guide for configuring APM auto-installation.",keywords:["Kubernetes","Kubernetes Monitoring","WhaTap Operator","Auto Application Installation"],toc_max_heading_level:3,isTranslationMissing:!1},l,c={},o=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Basic CR Configuration",id:"basic-cr-configuration",level:2},{value:"Example: APM Configuration",id:"example_set_up_apm",level:3},{value:"Example 1: Auto-inject APM into Pods in a Specific Namespace",id:"example-1-auto-inject-apm-into-pods-in-a-specific-namespace",level:4},{value:"Example 2: Monitor Different Workloads Using Separate ConfigMaps",id:"example-2-monitor-different-workloads-using-separate-configmaps",level:4},{value:"Fields",id:"fields",level:3},{value:"Selectors",id:"selectors",level:3},{value:"namespaceSelector",id:"namespaceselector",level:4},{value:"podSelector",id:"podselector",level:4},{value:"matchExpressions Operators",id:"matchexpressions-operators",level:4},{value:"K8sAgent Configuration",id:"k8sagent-configuration",level:4},{value:"Test",id:"test",level:3}];function d(e){let n={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["After installing the WhatapOperator, you can define the ",(0,t.jsx)(n.code,{children:"WhatapAgent"})," CR (Custom Resource) to automatically inject the APM agent into specific Kubernetes Pods or Namespaces."]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A running Kubernetes environment"}),"\n",(0,t.jsx)(n.li,{children:"Helm version 3.2 or higher"}),"\n",(0,t.jsx)(n.li,{children:"WhaTap license key (required)"}),"\n",(0,t.jsx)(n.li,{children:"WhaTap collector information (IP address and port)"}),"\n",(0,t.jsxs)(n.li,{children:["whatap-operator (see the ",(0,t.jsx)(n.a,{href:"install-whatap-operator",children:"Operator Installation"})," guide)"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"basic-cr-configuration",children:"Basic CR Configuration"}),(0,t.jsxs)(n.p,{children:["Below is a basic sample configuration for the CR.",(0,t.jsx)(n.br,{}),"\n","For more advanced settings, refer to ",(0,t.jsx)(n.a,{href:"install-auto-application-agent#example_set_up_apm",children:"Example: APM Configuration"}),"."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: monitoring.whatap.com/v2alpha1\nkind: WhatapAgent\nmetadata:\n  name: default                                # Resource name\n  namespace: whatap-monitoring                 # Target namespace for installation\nspec:\n  features:\n    apm:\n      instrumentation:\n        targets:\n          - name: "java-sample"                # APM target name (for identification)\n            enabled: "true"                    # Whether auto-injection is enabled\n            language: "java"                   # Language: java, python, nodejs, etc.\n            whatapApmVersions:\n              java: "2.2.58"                   # APM agent version for the specified language\n            namespaceSelector:\n              matchNames:\n                - default                      # Target namespace for APM injection\n            podSelector:\n              matchLabels:\n                app: hello-world               # Pod label to match for injection\n            config:\n              mode: default                    # Use \'default\' config or reference a configMap\n            envs:\n              WHATAP_JAVA_AGENT_PATH: /whatap-agent/whatap.agent.java.jar\n              OKIND: hello\n'})})]}),"\n",(0,t.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,t.jsx)(n.h3,{id:"example_set_up_apm",children:"Example: APM Configuration"})}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"example-1-auto-inject-apm-into-pods-in-a-specific-namespace",children:"Example 1: Auto-inject APM into Pods in a Specific Namespace"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Automatically inject the Java APM agent into Pods that exist in the ",(0,t.jsx)(n.code,{children:"backend"})," namespace and have the label ",(0,t.jsx)(n.code,{children:"app=shop"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Currently, WhaTap APM supports only the ",(0,t.jsx)(n.code,{children:"latest"})," version of the Java agent. (Support for other languages will be added in the future.)"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Configuration values are provided via a ",(0,t.jsx)(n.code,{children:"ConfigMapRef"}),". (The configMap must exist in the same namespace as the application.)"]}),"\n"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: monitoring.whatap.com/v2alpha1\nkind: WhatapAgent\nmetadata:\n  name: whatap\n  namespace: whatap-monitoring\nspec:\n  features:\n    apm:\n      instrumentation:\n        targets:\n          - name: shop-api\n            enabled: "true"\n            language: "java"\n            whatapApmVersions:\n              java: "latest"\n            namespaceSelector:\n              matchNames:\n                - backend\n            podSelector:\n              matchLabels:\n                app: shop\n            config:\n              mode: configMapRef\n              configMapRef:\n                name: shop-api-config\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"title='shop-api-config.yaml'",children:"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: shop-api-config\n  namespace: backend\ndata:\n  whatap.conf: |\n    mtrace_enabled=true\n    mtrace_basetime=0\n    trace_normalize_enabled=true\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"example-2-monitor-different-workloads-using-separate-configmaps",children:"Example 2: Monitor Different Workloads Using Separate ConfigMaps"}),(0,t.jsxs)(n.p,{children:["Inject different ",(0,t.jsx)(n.code,{children:"ConfigMapRef"})," settings (",(0,t.jsx)(n.code,{children:"request-router-config"}),", ",(0,t.jsx)(n.code,{children:"shop-api-config"}),") into the ",(0,t.jsx)(n.code,{children:"app=router"})," Pod in the ",(0,t.jsx)(n.code,{children:"system"})," namespace and the ",(0,t.jsx)(n.code,{children:"app=shop"})," Pod in the ",(0,t.jsx)(n.code,{children:"backend"})," namespace, respectively."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'apiVersion: monitoring.whatap.com/v2alpha1\nkind: WhatapAgent\nmetadata:\n  name: whatap\n  namespace: whatap-monitoring\nspec:\n  features:\n    apm:\n      instrumentation:\n        targets:\n          - name: request-router\n            enabled: "true"\n            language: "java"\n            whatapApmVersions:\n              java: "latest"\n            namespaceSelector:\n              matchNames:\n                - system\n            podSelector:\n              matchLabels:\n                app: router\n            config:\n              mode: configMap\n              configMapRef:\n                name: request-router-config\n          - name: shop-api\n            enabled: "true"\n            language: "java"\n            whatapApmVersions:\n              java: "latest"\n            namespaceSelector:\n              matchNames:\n                - backend\n            podSelector:\n              matchLabels:\n                app: shop\n            config:\n              mode: configMapRef\n              configMapRef:\n                name: shop-api-config\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"title='shop-api-config.yaml'",children:"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: shop-api-config\n  namespace: backend\ndata:\n  whatap.conf: |\n    mtrace_enabled=true\n    mtrace_basetime=0\n    trace_normalize_enabled=true\n"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"title='request-router-config.yaml'",children:"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: request-router-config\n  namespace: backend\ndata:\n  whatap.conf: |\n    mtrace_enabled=false\n    mtrace_basetime=100\n    trace_normalize_enabled=true\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"fields",children:"Fields"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"apiVersion: monitoring.whatap.com/v2alpha1\nkind: WhatapAgent\nmetadata:\n  name: whatap\nspec:\n  features:\n    apm:\n      instrumentation:\n        targets:\n          - name: <name>\n            enabled: <true | false>\n            language: <java | python | nodejs>\n            whatapApmVersions:\n              <language> : <version>\n            namespaceSelector:\n              matchNames:\n                - <namespace>\n            podSelector:\n              matchLabels:\n                <key>: <values>\n            config:\n              mode: default\n"})}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"name"})}),(0,t.jsx)(n.td,{children:"Target name. Used only for identification; it does not affect monitoring."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"enabled"})}),(0,t.jsxs)(n.td,{children:["If set to ",(0,t.jsx)(n.code,{children:'"true"'}),", the APM agent will be automatically injected into the target."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"language"})}),(0,t.jsxs)(n.td,{children:["Programming language of the target application. Examples: ",(0,t.jsx)(n.code,{children:"java"}),", ",(0,t.jsx)(n.code,{children:"python"}),", ",(0,t.jsx)(n.code,{children:"nodejs"}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"whatapApmVersions"})}),(0,t.jsx)(n.td,{children:"Specify the WhaTap APM agent version for each language."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"namespaceSelector"})}),(0,t.jsx)(n.td,{children:"List of namespaces to target for APM injection."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"podSelector"})}),(0,t.jsx)(n.td,{children:"Select Pods to inject APM using label-based matching."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"config.mode"})}),(0,t.jsxs)(n.td,{children:["Can be ",(0,t.jsx)(n.code,{children:'"default"'})," or ",(0,t.jsx)(n.code,{children:'"configMapRef"'})," to reference a custom ConfigMap."]})]})]})]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"selectors",children:"Selectors"}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"WhatapAgent"})," supports Kubernetes standard label selectors."]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"namespaceselector",children:"namespaceSelector"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"matchNames"})}),(0,t.jsx)(n.td,{children:"List of namespace names to target."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"matchLabels"})}),(0,t.jsx)(n.td,{children:"Select namespaces using key-value label pairs (AND condition)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"matchExpressions"})}),(0,t.jsx)(n.td,{children:"Advanced label selector expressions (AND condition)."})]})]})]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"podselector",children:"podSelector"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"matchLabels"})}),(0,t.jsx)(n.td,{children:"Select Pods using key-value label pairs (AND condition)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"matchExpressions"})}),(0,t.jsx)(n.td,{children:"Advanced label selector expressions (AND condition)."})]})]})]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"matchexpressions-operators",children:"matchExpressions Operators"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Operator"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"In"})}),(0,t.jsx)(n.td,{children:"The label value must be in the specified list."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"NotIn"})}),(0,t.jsx)(n.td,{children:"The label value must not be in the specified list."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"Exists"})}),(0,t.jsxs)(n.td,{children:["The specified label key must exist (leave ",(0,t.jsx)(n.code,{children:"values"})," field empty)."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"DoesNotExist"})}),(0,t.jsxs)(n.td,{children:["The specified label key must not exist (leave ",(0,t.jsx)(n.code,{children:"values"})," field empty)."]})]})]})]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"k8sagent-configuration",children:"K8sAgent Configuration"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Field"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"agentImageVersion"})}),(0,t.jsxs)(n.td,{children:["Agent image version (default: ",(0,t.jsx)(n.code,{children:'"latest"'}),")."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"masterAgent.enabled"})}),(0,t.jsx)(n.td,{children:"Whether to enable the master agent."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"masterAgent.resources"})}),(0,t.jsx)(n.td,{children:"Resource requests and limits for the master agent."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"masterAgent.envs"})}),(0,t.jsx)(n.td,{children:"List of environment variables to add to the master agent."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"nodeAgent.enabled"})}),(0,t.jsx)(n.td,{children:"Whether to enable the node agent."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"nodeAgent.resources"})}),(0,t.jsx)(n.td,{children:"Resource requests and limits for the node agent."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"nodeAgent.envs"})}),(0,t.jsx)(n.td,{children:"List of environment variables to add to the node agent."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"gpuMonitoring.enabled"})}),(0,t.jsx)(n.td,{children:"Whether to enable GPU monitoring."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"apiserverMonitoring.enabled"})}),(0,t.jsx)(n.td,{children:"Whether to enable API server monitoring."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"etcdMonitoring.enabled"})}),(0,t.jsx)(n.td,{children:"Whether to enable etcd monitoring."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"schedulerMonitoring.enabled"})}),(0,t.jsx)(n.td,{children:"Whether to enable scheduler monitoring."})]})]})]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"# Example of a selector combining multiple conditions\nnamespaceSelector:\n  matchNames:\n    - production\n    - staging\n  matchLabels:\n    environment: production\n  matchExpressions:\n    - {key: tier, operator: In, values: [frontend, backend]}\n    - {key: restricted, operator: DoesNotExist}\n\npodSelector:\n  matchLabels:\n    app: web-service\n    version: v2\n  matchExpressions:\n    - {key: tier, operator: In, values: [backend, backend2, backend3]}\n    - {key: environment, operator: NotIn, values: [dev, test]}\n    - {key: ready, operator: Exists}\n"})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Detailed Explanation: namespaceSelector"})}),"\n",(0,t.jsx)(n.p,{children:"The namespace selector filters target namespaces using three methods:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"matchNames"}),": Select namespaces by name directly"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Only selects namespaces named ",(0,t.jsx)(n.code,{children:"production"})," or ",(0,t.jsx)(n.code,{children:"staging"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"This is the most basic form of filtering."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"matchLabels"}),": Match labels using key-value pairs (AND condition)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Only selects namespaces that have the label ",(0,t.jsx)(n.code,{children:"environment=production"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"All key-value pairs must match (i.e., multiple labels must all be satisfied)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"matchExpressions"}),": Define complex conditions using advanced expressions (AND condition)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"tier"})," label must have a value of either ",(0,t.jsx)(n.code,{children:"frontend"})," or ",(0,t.jsx)(n.code,{children:"backend"})," (",(0,t.jsx)(n.code,{children:"In"})," operator)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"restricted"})," label must not exist (",(0,t.jsx)(n.code,{children:"DoesNotExist"})," operator)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"All expressions must evaluate to true (AND condition)."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Detailed Explanation: podSelector"})}),"\n",(0,t.jsx)(n.p,{children:"The pod selector filters target Pods using two methods:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"matchLabels"}),": Match labels using key-value pairs (AND condition)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Only selects Pods that have both ",(0,t.jsx)(n.code,{children:"app=web-service"})," and ",(0,t.jsx)(n.code,{children:"version=v2"})," labels."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"All specified labels must match exactly."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"matchExpressions"}),": Define complex conditions using advanced expressions (AND condition)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"tier"})," label must be one of ",(0,t.jsx)(n.code,{children:"backend"}),", ",(0,t.jsx)(n.code,{children:"backend2"}),", or ",(0,t.jsx)(n.code,{children:"backend3"})," (",(0,t.jsx)(n.code,{children:"In"})," operator)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"environment"})," label must not be ",(0,t.jsx)(n.code,{children:"dev"})," or ",(0,t.jsx)(n.code,{children:"test"})," (",(0,t.jsx)(n.code,{children:"NotIn"})," operator)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"ready"})," label must exist (",(0,t.jsx)(n.code,{children:"Exists"})," operator)."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"All expressions must evaluate to true (AND condition)."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"test",children:"Test"}),(0,t.jsx)(n.p,{children:"If you want to test APM auto-injection, apply the following yaml:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"title='test-values.yaml'",children:'apiVersion: monitoring.whatap.com/v2alpha1\nkind: WhatapAgent\nmetadata:\n  name: default                                # Resource name\n  namespace: whatap-monitoring                 # Target namespace for installation\nspec:\n  features:\n    apm:\n      instrumentation:\n        targets:\n          - name: "java-sample"                # APM target name (for identification)\n            enabled: "true"                    # Whether auto-injection is enabled\n            language: "java"                   # Language: java, python, nodejs, etc.\n            whatapApmVersions:\n              java: "latest"                   # APM agent version for the specified language\n            namespaceSelector:\n              matchNames:\n                - default                      # Target namespace for APM injection\n            podSelector:\n              matchLabels:\n                app: hello-world               # Label of Pod to inject APM\n            config:\n              mode: default                    # Can be \'default\' or reference a ConfigMap\n'})})]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},84429:function(e,n,s){s.d(n,{R:()=>r,x:()=>l});var a=s(96540);let t={},i=a.createContext(t);function r(e){let n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);