"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["34651"],{67837:function(e,n,s){s.d(n,{Ay:()=>c,RM:()=>r});var t=s(74848),i=s(84429);let r=[];function a(e){let n={admonition:"admonition",p:"p",...(0,i.R)(),...e.components};return(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"The setting is applied after Apache and PHP-FPM have been restarted."})})}function c(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},91002:function(e,n,s){s.r(n),s.d(n,{metadata:()=>t,default:()=>T,frontMatter:()=>f,contentTitle:()=>g,toc:()=>y,assets:()=>_});var t=JSON.parse('{"id":"php/agent-transaction","title":"Transactions","description":"The following explains how to set an agent to trace and analyze performance data for each transaction within PHP applications. It evaluates the application performance by tracing transaction requests, response time, and resource usage.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/php/agent-transaction.mdx","sourceDirName":"php","slug":"/php/agent-transaction","permalink":"/whatap-docs/en/php/agent-transaction","draft":false,"unlisted":false,"editUrl":"undefined/docs/php/agent-transaction.mdx","tags":[],"version":"current","frontMatter":{"id":"agent-transaction","title":"Transactions","description":"The following explains how to set an agent to trace and analyze performance data for each transaction within PHP applications. It evaluates the application performance by tracing transaction requests, response time, and resource usage.","keywords":["PHP","Transactions","Configuration","Application"],"isTranslationMissing":false},"sidebar":"phpSidebar","previous":{"title":"Agent log configuration","permalink":"/whatap-docs/en/php/agent-log"},"next":{"title":"DB, SQL","permalink":"/whatap-docs/en/php/agent-dbsql"}}'),i=s(74848),r=s(84429),a=s(67837);let c=[...a.RM,...a.RM,...a.RM,...a.RM,...a.RM,...a.RM,...a.RM,...a.RM];function l(e){let n={admonition:"admonition",code:"code",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_step_normal_count"})," ",(0,i.jsx)("span",{class:"type",children:"Int"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"1000"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the maximum step count for tracing transactions."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_step_max_count"})," ",(0,i.jsx)("span",{class:"type",children:"Int"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"1024"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the maximum number of trace steps. If the number of collected trace steps exceeds this value, all steps collected later are ignored."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_step_heavy_count"})," ",(0,i.jsx)("span",{class:"type",children:"Int"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"1000"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the collection number of basic steps is exceeded, only the steps whose execution time exceeds profile_step_heavy_time are collected. Set the count of the step that can be collected. In case of default settings, if ",(0,i.jsx)(n.code,{children:"profile_step_normal_count"})," is 800, up to 200 steps are collected."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_step_heavy_time"})," ",(0,i.jsx)("span",{class:"type",children:"Millisecond"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"100"})]}),"\n",(0,i.jsxs)(n.p,{children:["Set the criterion of heavy steps. If the execution time is greater than the set value and ",(0,i.jsx)(n.code,{children:"profile_step_normal_count"})," is exceeded, recording is made within ",(0,i.jsx)(n.code,{children:"profile_step_heavy_count"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_basetime"})," ",(0,i.jsx)("span",{class:"type",children:"Millisecond"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"500"})]}),"\n",(0,i.jsx)(n.p,{children:"Transaction trace data is not collected if a transaction is terminated within the set value. The first URL called in every 5 minutes and the erroneous profile data are collected."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.query_string_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.p,{children:["It enables the function to collect query strings of the transaction URL together. It is applied to only the URLs registered in ",(0,i.jsx)(n.code,{children:"whatap.query_string_urls"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.query_string_urls"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsx)(n.p,{children:"Register URLs to collect query strings from every transaction."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.whatap.profile_compile_file_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.p,{children:["It sets whether or not to trace the ",(0,i.jsx)(n.code,{children:"compile_file"})," and ",(0,i.jsx)(n.code,{children:"compile_string"})," functions. The ",(0,i.jsx)(n.code,{children:"compile_file"})," and ",(0,i.jsx)(n.code,{children:"compile_string"})," functions (PHP internal functions) are compiled before executing the scripts. You can check the compile times for main, include, require, and autoload scripts, the script file paths, and the execution times."]}),"\n",(0,i.jsx)(a.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_compile_file_basetime"})," ",(0,i.jsx)("span",{class:"type",children:"Millisecond"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"200"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the criterion of the execution time. Data is collected only when execution has been made while the set time was exceeded."}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.code,{children:"whatap.profile_compile_file_basetime"})," is set too small, excessive collection may overload the server."]})}),"\n",(0,i.jsx)(a.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_method_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"true"})]}),"\n",(0,i.jsxs)(n.p,{children:["The user functions whose execution time exceeds the set value (default is ",(0,i.jsx)(n.code,{children:"1 second"}),") of the ",(0,i.jsx)(n.code,{children:"profile_method_time"})," can be found in the transaction details."]}),"\n",(0,i.jsx)(a.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_method_time"})," ",(0,i.jsx)("span",{class:"type",children:"Milliseconds"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"1000"})]}),"\n",(0,i.jsxs)(n.p,{children:["Set the execution time for collected functions with the ",(0,i.jsx)(n.code,{children:"whatap.profile_method_enabled"})," setting."]}),"\n",(0,i.jsx)(a.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_method_stack_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsx)(n.p,{children:"You can check the stack information of the user functions in transaction details."}),"\n",(0,i.jsx)(a.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_internal_method_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.p,{children:["Set whether or not to trace the PHP internal function. Tracing is performed only when the function takes more than the ",(0,i.jsx)(n.code,{children:"whatap.profile_internal_method_time"})," setting (Default: ",(0,i.jsx)(n.code,{children:"1 second"}),")."]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsx)(n.p,{children:"This option allows to check all of PHP's built-in functions rather than custom functions, which may affect the performance."})}),"\n",(0,i.jsx)(a.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_internal_method_time"})," ",(0,i.jsx)("span",{class:"type",children:"Milliseconds"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"1000"})]}),"\n",(0,i.jsxs)(n.p,{children:["Set the execution time of the function when tracing PHP internal functions (",(0,i.jsx)(n.code,{children:"whatap.profile_internal_method_enabled"}),")."]}),"\n",(0,i.jsx)(a.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_internal_method_param_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Milliseconds"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"1000"})]}),"\n",(0,i.jsxs)(n.p,{children:["Functional parameters are additionally collected when tracing PHP internal functions (",(0,i.jsx)(n.code,{children:"whatap.profile_internal_method_enabled"}),")."]}),"\n",(0,i.jsx)(a.Ay,{}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.net_udp_flush_start"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"true"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the value is ",(0,i.jsx)(n.code,{children:"false"}),", the transaction start time is not collected."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Because the start point is not collected, it can be reflected a little later in the active transaction data that counts the number of active transactions. Active status is recorded normally."})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.net_udp_profile_basetime_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the value is ",(0,i.jsx)(n.code,{children:"true"}),", the trace data for transactions faster than the set response time is not collected."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.net_udp_profile_basetime"})," ",(0,i.jsx)("span",{class:"type",children:"Miliseconds"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the response time for transactions excluding the trace data collection."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Because the trace data is not collected, it is not applied to the statistics such as SQL and HTTPC."})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.net_udp_trace_ignoretime_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the value is ",(0,i.jsx)(n.code,{children:"true"}),", the transactions and trace data that take the set response time are not collected."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.net_udp_trace_ignoretime"})," ",(0,i.jsx)("span",{class:"type",children:"Miliseconds"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"30"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the response time for transactions excluding the transaction and trace data collection."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.shm_tx_counter_enable"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the value is ",(0,i.jsx)(n.code,{children:"true"}),", when transaction data collection is excluded by setting ",(0,i.jsx)(n.code,{children:"whatap.net_udp_trace_ignoretime_enabled"}),", the data for excluded transactions is reflected in the statistics when the TPS, average response time, and Apdex metrics are collected from the shared memory."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"Transactions that have not been collected are normally reflected in TPS, average response time, and Apdex metrics, but they are not reflected in other statistical data."})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.split_profile_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsx)(n.p,{children:"More profiles are collected by separating a certain amount of profiles into virtual transactions. They are divided into multiple transaction lists."}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:"If set at the same time, the priorities are as follows:"}),(0,i.jsx)(n.p,{children:"1. split"}),(0,i.jsx)(n.p,{children:"2. large"}),(0,i.jsx)(n.p,{children:"3. circular"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.large_profile_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsx)(n.p,{children:"By sending split and compressed profiles, you can collect more profiles without increasing memory usage."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["We can collect up to 10,000 profiles (steps). For more data, it is recommended to use the ",(0,i.jsx)(n.code,{children:"whatap.split_profile_enabled"})," option."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If set at the same time, the priorities are as follows:"}),"\n",(0,i.jsx)(n.p,{children:"1. split"}),"\n",(0,i.jsx)(n.p,{children:"2. large"}),"\n",(0,i.jsx)(n.p,{children:"3. circular"}),"\n"]}),"\n"]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.circular_profile_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsx)(n.p,{children:"The last 1024 profiling data is collected."}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:"If set at the same time, the priorities are as follows:"}),(0,i.jsx)(n.p,{children:"1. split"}),(0,i.jsx)(n.p,{children:"2. large"}),(0,i.jsx)(n.p,{children:"3. circular"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_zip_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"true"})]}),"\n",(0,i.jsxs)(n.p,{children:["Compressed profiles are transmitted. The default value is ",(0,i.jsx)(n.code,{children:"true"}),"."]}),"\n"]}),"\n"]})}function o(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}function d(e){let n={code:"code",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.trace_active_transaction_slow_time"})," ",(0,i.jsx)("span",{class:"type",children:"Millisecond"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"3000"})]}),"\n",(0,i.jsx)(n.p,{children:"In the active transaction arc equalizer graph on the dashboard that checks collected data, specify the criteria for the transaction response time that can be recorded as a slow section. If the transaction response time exceeds the set time, the number of slow active transactions is included."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.trace_active_transaction_very_slow_time"})," ",(0,i.jsx)("span",{class:"type",children:"Millisecond"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"8000"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.trace_active_transaction_lost_time"})," ",(0,i.jsx)("span",{class:"type",children:"Millisecond"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"300000"})]}),"\n",(0,i.jsxs)(n.p,{children:["If a transaction does not end within the timeout period (5 minutes), no further transaction data is collected. You can see ",(0,i.jsx)(n.code,{children:"Lost Connection"})," in the transaction trace information."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.trace_useragent_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the value is ",(0,i.jsx)(n.code,{children:"true"}),", the user agent data for transactions is collected."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.trace_referer_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.p,{children:["If the value is ",(0,i.jsx)(n.code,{children:"true"}),", the referer data for transactions is collected."]}),"\n"]}),"\n"]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}function p(e){let n={admonition:"admonition",code:"code",em:"em",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Cmdname:s,ScrollToLink:t}=n;return s||j("Cmdname",!0),t||j("ScrollToLink",!0),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.trace_normalize_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"true"})]}),"\n",(0,i.jsx)(n.p,{children:"It enables the function to convert and normalize transaction URLs."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.trace_normalize_urls"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the target URL to transform and normalize. It deletes the path parameter by transforming the call URL patterns."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["For example, if it is set as ",(0,i.jsx)(n.code,{children:"/a/{v}/b"}),", the called transaction URLs are transformed to the ",(0,i.jsx)(n.code,{children:"/a/{v}/b"})," format. To register multiple items, comma (,) is used as the delimiter."]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.trace_ignore_url_set"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsx)(n.p,{children:"If a specific URL is set, the corresponding transactions are excluded from tracing. The set URLs are not displayed in the transaction list because they do not collect transaction data. Set URLs to exclude from transaction tracing. To set multiple items, use comma (,) as the delimiter."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["The URLs registered through this option are excluded from the ",(0,i.jsx)(s,{sid:"side_hitmap",className:"uitext"}),", ",(0,i.jsx)(s,{sid:"TTL06209",className:"uitext"}),", or ",(0,i.jsx)(s,{sid:"TTL06527",className:"uitext"})," window for collection."]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.trace_ignore_url_prefix"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsx)(n.p,{children:"It sets URL prefixes to exclude from the transaction tracing."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["The URLs registered through this option are excluded from the ",(0,i.jsx)(s,{sid:"side_hitmap",className:"uitext"}),", ",(0,i.jsx)(s,{sid:"TTL06209",className:"uitext"}),", or ",(0,i.jsx)(s,{sid:"TTL06527",className:"uitext"})," window for collection."]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_http_header_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsx)(n.p,{children:"It is used to record the HTTP headers in the trace history."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_http_header_ignore_keys"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"host,accept,user-agent,referer, accept-language, connection"})]}),"\n",(0,i.jsx)(n.p,{children:'It is used to record HTTP headers in the profile details. The set HTTP header names are excluded from collection, and they are marked with "#."'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_http_parameter_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"}),(0,i.jsx)(t,{anchor:"profile_http_parameter"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsx)(n.p,{children:"It is used to record HTTP parameters in the trace history. The parameters can be viewed by entering a separate security key."}),"\n",(0,i.jsx)(n.p,{children:"The name and value of the text type are collected among Get and Post parameters. Up to 40 items (20 Gets, 20 Posts) are collected, and parameter names and values are collected up to 256 bytes."}),"\n",(0,i.jsxs)(n.p,{children:["Parameter data is transferred after being encrypted separately, and can be viewed by decrypting with the key(",(0,i.jsx)(n.code,{children:"paramkey"}),") in ",(0,i.jsx)(n.em,{children:"/usr/whatap/php/security.conf"})," of the application server."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)("code",{class:"my",children:"PHP agent v2.8.0 or later"}),": The security key is set to 6 characters (",(0,i.jsx)(n.code,{children:"paramkey"}),") in the ",(0,i.jsx)(n.code,{children:"WHATAP_HOME"}),(0,i.jsx)(n.em,{children:"/security.conf"})," file where the ",(0,i.jsx)(n.em,{children:"whatap.ini"})," file is located."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)("code",{class:"my",children:"Below PHP agent v2.8.0"}),": The security key is set to 6 characters within the ",(0,i.jsx)(n.code,{children:"WHATAP_HOME"}),(0,i.jsx)(n.em,{children:"/paramkey.txt"})," file where the ",(0,i.jsx)(n.em,{children:"whatap.ini"})," file is located. If the ",(0,i.jsx)(n.em,{children:"paramkey.txt"})," file does not exist, it is automatically created with a random value."]}),"\n"]}),"\n"]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_http_parameter_url_prefix"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"/"})]}),"\n",(0,i.jsx)(n.p,{children:"It is used to define the prefix of URL to record HTTP parameters in the trace details."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.profile_http_host_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsxs)(n.p,{children:["The transation host is output. If the value is ",(0,i.jsx)(n.code,{children:"false"}),", only the URI is recorded in the URL of a transaction. If the value is ",(0,i.jsx)(n.code,{children:"true"}),", the output has the format of ",(0,i.jsx)(n.code,{children:"/xxx.aaa.com/URL"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.ignore_http_method"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsx)(n.p,{children:"Transactions requested by the specified HTTP method are not collected. To set multiple items, use comma (,) as the delimiter."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",metastring:'title="whatap.ini"',children:"# e.g. tracing the transactions whose http_method is OPTIONS or HEAD\nignore_http_method=PATCH,TRACE\n\n# e.g. ignoring the transactions whose http_method is OPTIONS or HEAD\nignore_http_method=OPTIONS,HEAD\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["The HTTP methods registered through this option are excluded from the ",(0,i.jsx)(s,{sid:"side_hitmap",className:"uitext"}),", ",(0,i.jsx)(s,{sid:"TTL06209",className:"uitext"}),", or ",(0,i.jsx)(s,{sid:"TTL06527",className:"uitext"})," window for collection."]})}),"\n"]}),"\n"]})}function x(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}function j(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}function u(e){let n={code:"code",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.mtrace_enabled"})," ",(0,i.jsx)("span",{class:"type",children:"Boolean"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"false"})]}),"\n",(0,i.jsx)(n.p,{children:"It sets whether or not to use the multi-transaction tracing (MTID). By tracing the MTID, you can check the calls between all the registered applications."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.mtrace_rate"})," ",(0,i.jsx)("span",{class:"type",children:"Percentage"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"10"})]}),"\n",(0,i.jsx)(n.p,{children:"This option sets the issuance rate of the MTID (Multi Transaction ID) issued when the first transaction occurs."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.mtrace_poid_key"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"x-wtap-po"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the key name to deliver the caller project information to for MTID tracing."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.mtrace_caller_key"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"x-wtap-mst"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the caller key name to be used for MTID tracing."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.mtrace_callee_key"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"x-wtap-tx"})]}),"\n",(0,i.jsx)(n.p,{children:"Set the callee key name to be used for MTID tracing."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.mtrace_send_url_length"})," ",(0,i.jsx)("span",{class:"type",children:"Int"})]}),"\n",(0,i.jsxs)(n.p,{children:["Default ",(0,i.jsx)(n.code,{children:"80"})]}),"\n",(0,i.jsx)(n.p,{children:"The HTTP caller passes its URL to callees. At this time, the URL length is restricted. This sets the length value."}),"\n"]}),"\n"]})}function m(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}let f={id:"agent-transaction",title:"Transactions",description:"The following explains how to set an agent to trace and analyze performance data for each transaction within PHP applications. It evaluates the application performance by tracing transaction requests, response time, and resource usage.",keywords:["PHP","Transactions","Configuration","Application"],isTranslationMissing:!1},g,_={},y=[{value:"Transaction tracing",id:"php-trs-trc",level:2},...c,{value:"Exceptional handling",id:"exception",level:2},{value:"HTTP transaction tracing",id:"php-track-http-trs",level:2},{value:"Multiple transaction trace",id:"multiple-transaction-trace",level:2}];function w(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Cmdname:s}=n;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Cmdname",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["For more information about transaction, see ",(0,i.jsx)(n.a,{href:"track-transactions-intro",children:"the following"}),". For example, see ",(0,i.jsx)(n.a,{href:"trs-view",children:"the following"})," on the transaction analysis guide in case of using the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"hitmap"})}),"."]})}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"php-trs-trc",children:"Transaction tracing"}),(0,i.jsx)(n.p,{children:"The following agent options allow you to trace the execution paths of each transaction within applications in detail. You can adjust various aspects, from the minimum response time to the number of execution steps for transactions."}),(0,i.jsx)(o,{}),(0,i.jsx)(h,{})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"exception",children:"Exceptional handling"}),(0,i.jsxs)(n.p,{children:["The following options are used to manage and monitor exceptions that occur in applications. You can check the stability of applications by registering business exceptions and collecting related statistics. You can also set whether to ignore specific exceptions or treat them as errors if the HTTP status code is an error. Exception-handled items appear as normal transactions in the ",(0,i.jsx)(s,{sid:"side_hitmap",className:"uitext"})," or ",(0,i.jsx)(s,{sid:"TTL06209",className:"uitext"})," window."]}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.biz_exceptions"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsx)(n.p,{children:"Set a specific error or exception as business exception. It is not recorded as an error in the hitmap but collected in the statistics. It is applied the same as the error class name that is collected. Multiple items can be registered using comma (,) as the delimiter."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",metastring:'title="whatap.conf"',children:"whatap.biz_exceptions=HttpConnectionServerError(400), GuzzleHttp\\Exception\\ServerException, CustomException\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["Error class collection/Hitmap display level: Includes the ",(0,i.jsx)("span",{class:"normal",children:"INFO"})," (blue)/error statistics."]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"whatap.ignore_exceptions"})," ",(0,i.jsx)("span",{class:"type",children:"String"})]}),"\n",(0,i.jsx)(n.p,{children:"The errors of the registered exceptions are ignored."}),"\n",(0,i.jsx)(n.p,{children:"In case of exception, if the custom exception class is not defined, data is collected as exception by default. To exclude specific exceptions, define the custom exception class and then set the name of exception."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",metastring:'title="whatap.conf"',children:"whatap.ignore_exceptions=HttpConnectionServerError(400), GuzzleHttp\\Exception\\ServerException, CustomException\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["Ignore error class/Hitmap display level: Excludes the ",(0,i.jsx)("span",{class:"normal",children:"INFO"})," (blue)/error statistics."]})}),"\n"]}),"\n"]})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"php-track-http-trs",children:"HTTP transaction tracing"}),(0,i.jsx)(n.p,{children:"The following agent options trace and record various data related to HTTP requests and responses. This allows you to closely monitor and analyze the HTTP transactions for applications. You can add parameter values \u200B\u200Bto the transaction names or exclude specific URLs or HTTP methods. You can also record transactions in detail, including HTTP headers and parameters."}),(0,i.jsx)(x,{})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"multiple-transaction-trace",children:"Multiple transaction trace"}),(0,i.jsx)(n.p,{children:"The following options are used to trace and monitor cross-application calls. The options can help you understand the interactions between multiple applications. Various options provided allow you to fine-tune the behaviors for tracing multiple transactions."}),(0,i.jsx)(m,{})]})]})}function T(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(w,{...e})}):w(e)}},84429:function(e,n,s){s.d(n,{R:()=>a,x:()=>c});var t=s(96540);let i={},r=t.createContext(i);function a(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);