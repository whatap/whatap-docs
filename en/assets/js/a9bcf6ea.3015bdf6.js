"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["24827"],{68302:function(e,n,s){s.r(n),s.d(n,{metadata:()=>t,default:()=>h,frontMatter:()=>o,contentTitle:()=>l,toc:()=>c,assets:()=>a});var t=JSON.parse('{"id":"aws-log/install-aws-log-vpc","title":"Configuring VPC in WhaTap Forwarder","description":"It guides you to additional settings for WhaTap Forwarder to be available in the VPC environment.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/aws-log/install-aws-log-vpc.mdx","sourceDirName":"aws-log","slug":"/aws-log/install-aws-log-vpc","permalink":"/whatap-docs/en/aws-log/install-aws-log-vpc","draft":false,"unlisted":false,"editUrl":"undefined/docs/aws-log/install-aws-log-vpc.mdx","tags":[],"version":"current","frontMatter":{"id":"install-aws-log-vpc","title":"Configuring VPC in WhaTap Forwarder","description":"It guides you to additional settings for WhaTap Forwarder to be available in the VPC environment.","toc_max_heading_level":2,"keywords":["AWS Log","Installation"],"isTranslationMissing":false},"sidebar":"awslogSidebar","previous":{"title":"Installation","permalink":"/whatap-docs/en/aws-log/install-aws-log"},"next":{"title":"\uC790\uC6D0 \uC0AD\uC81C\uD558\uAE30","permalink":"/whatap-docs/en/aws-log/delete-aws-resource"}}'),i=s(74848),r=s(84429);let o={id:"install-aws-log-vpc",title:"Configuring VPC in WhaTap Forwarder",description:"It guides you to additional settings for WhaTap Forwarder to be available in the VPC environment.",toc_max_heading_level:2,keywords:["AWS Log","Installation"],isTranslationMissing:!1},l,a={},c=[{value:"Modifying the Lambda execution role",id:"modifying-the-lambda-execution-role",level:2},{value:"VPC configuration",id:"vpc-configuration",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["This document guides you to additional settings required in the ",(0,i.jsx)("span",{class:"vpcbold",children:"VPC"})," environment to use ",(0,i.jsx)(n.strong,{children:"WhaTap Forwarder"}),". First install ",(0,i.jsx)(n.strong,{children:"WhaTap Forwarder"}),". For more information, see ",(0,i.jsx)(n.a,{href:"../aws-log/install-aws-log#install-whatap-forwarder",children:"the following"}),"."]})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"WhaTap Forwarder"})," collects the AWS logs for AWS Cloudwatch LogGroup and S3. Use the AWS Lambda function for installation. AWS Lambda does not start from ",(0,i.jsx)("span",{class:"vpcbold",children:"VPC"})," (Virtual Private Cloud) by default. However, with the following additional settings, ",(0,i.jsx)(n.strong,{children:"WhaTap Forwarder"})," can be started in the ",(0,i.jsx)("span",{class:"vpcbold",children:"VPC"})," environment."]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"modifying-the-lambda-execution-role",children:"Modifying the Lambda execution role"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["On the AWS Lambda Function console, select ",(0,i.jsx)(n.strong,{children:"WhaTap Forwarder"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["On the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Configuration"})})," tab, select ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Execution role"})})," in ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Permissions"})})," to go to the AWS IAM console."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Lambda Execution Role",src:s(83812).A+"",width:"1200",height:"665"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Go to ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Permissions policies"})})," under the IAM console's ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Permissions"})})," tab."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Select ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"forwarderpolicy"})})," in the policy list to go to the policy editing screen."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"IAM Console",src:s(19898).A+"",width:"1184",height:"970"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Select ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"JSON"})})," tab and then copy and paste the following policy. The policy creates, defines, and deletes ",(0,i.jsx)(n.em,{children:"ENI"}),"."]}),"\n"]}),"\n"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",metastring:"title='IAM Policy'",children:'\n{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Action": [\n                "logs:CreateLogGroup",\n                "logs:CreateLogStream",\n                "logs:PutLogEvents"\n            ],\n            "Resource": "arn:aws:logs:{AWS REGION}:{AWS ACCOUNT ID}:log-group:/aws/lambda/*",\n            "Effect": "Allow"\n        },\n        \n            "Action": [\n                "s3:Get*",\n                "s3:List*",\n                "s3-object-lambda:Get*",\n                "s3-object-lambda:List*"\n            ],\n            "Resource": "*",\n            "Effect": "Allow"\n        },\n        {\n            "Action": [\n                "ec2:CreateNetworkInterface",\n                "ec2:DescribeNetworkInterfaces",\n                "ec2:DeleteNetworkInterface"\n            ],\n            "Resource": "*",\n            "Effect": "Allow"\n        }\n    ]\n}\n\n'})})]}),"\n",(0,i.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,i.jsx)(n.h2,{id:"vpc-configuration",children:"VPC configuration"}),(0,i.jsx)("div",{class:"vpcb",children:(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["On the AWS Lambda Function console, select ",(0,i.jsx)(n.strong,{children:"WhaTap Forwarder"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"VPC"})})," under the ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Configuration"})})," tab, select ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Edit"})})," to go to the VPC editing screen."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"VPC Editing",src:s(58069).A+"",width:"1200",height:"788"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Seeing the following, set ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"VPC"})}),", ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Subnets"})}),", and ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Security groups"})}),", and then select ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.em,{children:"Save"})})," to save the results."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Subnet and Security Group",src:s(75544).A+"",width:"1200",height:"1634"})}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Subnets"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Access the Internet through ",(0,i.jsx)(n.strong,{children:"IGW"})," with ",(0,i.jsx)(n.strong,{children:"Public IP"})," of the ",(0,i.jsx)(n.strong,{children:"NAT Gateway"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To connect the Internet via ",(0,i.jsx)(n.strong,{children:"IGW"}),", ",(0,i.jsx)(n.strong,{children:"Public IP"})," is required. ",(0,i.jsx)(n.em,{children:"ENI"})," of Lambda cannot allocate ",(0,i.jsx)(n.strong,{children:"Public IP"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The request is not sent to ",(0,i.jsx)(n.strong,{children:"Private Subnet"}),", the Internet gateway. Accordingly, select a subnet on which outbound traffic is routed to ",(0,i.jsx)(n.strong,{children:"NAT Gateway"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"WhatTap Forwarder"})," in ",(0,i.jsx)(n.strong,{children:"Private Subnet"})," and ",(0,i.jsx)(n.strong,{children:"Public Subnet"})]}),"\n"]}),"\n"]}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Subnet sc",src:s(97516).A+"",width:"1966",height:"1598"})})]}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Security groups"})}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A security group with the ",(0,i.jsx)(n.strong,{children:"outbound"})," open is required."]}),"\n"]})]}),"\n"]}),"\n"]})})]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},97516:function(e,n,s){s.d(n,{A:()=>t});let t=s.p+"assets/images/whatap-forwarder-subnet-819daf45d92178f9b4f78e4f7e564274.png"},19898:function(e,n,s){s.d(n,{A:()=>t});let t=s.p+"assets/images/whatap-forwarder-vpc-aws-iam-9571fc082f4ccc3d33a4aaf6a5a2b661.png"},58069:function(e,n,s){s.d(n,{A:()=>t});let t=s.p+"assets/images/whatap-forwarder-vpc-edit-a23f3f0901f183706bdabf3525bae2af.png"},83812:function(e,n,s){s.d(n,{A:()=>t});let t=s.p+"assets/images/whatap-forwarder-vpc-lambda-b775b4eba6d4079e51782ad4f18f269f.png"},75544:function(e,n,s){s.d(n,{A:()=>t});let t=s.p+"assets/images/whatap-forwarder-vpc-sg-607b7df3b79ad74b450215bd39edb8ad.png"},84429:function(e,n,s){s.d(n,{R:()=>o,x:()=>l});var t=s(96540);let i={},r=t.createContext(i);function o(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);