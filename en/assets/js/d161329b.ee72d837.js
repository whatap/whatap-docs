"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["70636"],{54608:function(e,n,s){s.r(n),s.d(n,{metadata:()=>a,default:()=>h,frontMatter:()=>o,contentTitle:()=>r,toc:()=>l,assets:()=>c});var a=JSON.parse('{"id":"faq/db-faq","title":"Database FAQs","description":"This document has FAQs of the WhaTap database monitoring service.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/faq/db-faq.mdx","sourceDirName":"faq","slug":"/faq/db-faq","permalink":"/whatap-docs/en/faq/db-faq","draft":false,"unlisted":false,"editUrl":"undefined/docs/faq/db-faq.mdx","tags":[],"version":"current","frontMatter":{"id":"db-faq","title":"Database FAQs","description":"This document has FAQs of the WhaTap database monitoring service.","keywords":["Database Monitoring","FAQ"],"isTranslationMissing":false},"sidebar":"faqSidebar","previous":{"title":"Application FAQs","permalink":"/whatap-docs/en/faq/apm-faq"},"next":{"title":"Log FAQs","permalink":"/whatap-docs/en/faq/log-faq"}}'),t=s(74848),i=s(84429);let o={id:"db-faq",title:"Database FAQs",description:"This document has FAQs of the WhaTap database monitoring service.",keywords:["Database Monitoring","FAQ"],isTranslationMissing:!1},r,c={},l=[{value:"Authentication plugin &#39;caching_sha2_password&#39; cannot be loaded error",id:"authentication-plugin-caching_sha2_password-cannot-be-loaded-error",level:3},{value:"JAVA command not found error",id:"java-command-not-found-error",level:3},{value:"Collecting resource data for DB monitoring",id:"collecting-resource-data-for-db-monitoring",level:3},{value:"In case monitoring is not possible after creating an additional database in the DB instance",id:"in-case-monitoring-is-not-possible-after-creating-an-additional-database-in-the-db-instance",level:3},{value:"Based on the instance list of M, S, and C",id:"based-on-the-instance-list-of-m-s-and-c",level:3},{value:"Instance list, M is not displayed",id:"instance-list-m-is-not-displayed",level:3},{value:"Metalock Monitoring",id:"metalock-monitoring",level:3},{value:"Accessing the Log menu",id:"accessing-the-log-menu",level:3}];function d(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h3:"h3",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Cmdname:s}=n;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Cmdname",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Check out frequently asked questions from users about the WhaTap database monitoring service."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)("div",{className:"faqs",children:[(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"authentication-plugin-caching_sha2_password-cannot-be-loaded-error",children:"Authentication plugin 'caching_sha2_password' cannot be loaded error"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["When I checked the ",(0,t.jsx)(n.em,{children:"dbx.log"})," while connecting to the DB after installing the agent, the error, ",(0,t.jsx)(n.code,{children:"Authentication plugin 'caching_sha2_password' cannot be loaded"})," occurred. What should I do?"]}),"\n"]}),(0,t.jsxs)(n.p,{children:["This can happen when you use MySQL 8.0. The default authentication plugin for MySql 8.0 is ",(0,t.jsx)(n.code,{children:"caching_sha2_password"}),". To use ",(0,t.jsx)(n.code,{children:"caching_sha2_password"}),", use the SSL-secured connection or unencrypted connection with the RSA security applied. The easiest way to solve this problem is to use the previous ",(0,t.jsx)(n.code,{children:"mysql_native_password"})," method when generating the password, as follows:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"ALTER USER 'yourusername' IDENTIFIED WITH mysql_native_password BY 'youpassword';\n"})}),(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.p,{children:"See the following."}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["2.11.4 Changes in MySQL 8.0 - ",(0,t.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html",children:"https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html"})]}),"\n",(0,t.jsxs)(n.li,{children:["6.4.1.2 Caching SHA-2 Pluggable Authentication - ",(0,t.jsx)(n.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html",children:"https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html"})]}),"\n"]})]})]}),(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"java-command-not-found-error",children:"JAVA command not found error"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["If you run ",(0,t.jsx)(n.code,{children:"startd.sh"})," when starting the agent, the ",(0,t.jsx)(n.code,{children:"Java command not found"})," error occurs. How can this error be fixed?"]}),"\n"]}),(0,t.jsx)(n.p,{children:"This error occurs only when Java 1.8 or later has been installed to run the DB agent. In order to run the agent, Java 1.8 or later must have been installed. Under Java installation after checking the environment, the agent can be run normally."}),(0,t.jsx)(n.p,{children:"Through the following command, check the current Java version."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"java -version\n"})}),(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{}),(0,t.jsx)(n.p,{children:"See the following."}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Java installation and configuration - ",(0,t.jsx)(n.a,{href:"https://www.oracle.com/java/technologies/javase-jdk8-downloads.html",children:"https://www.oracle.com/java/technologies/javase-jdk8-downloads.html"})]}),"\n"]})]})]}),(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"collecting-resource-data-for-db-monitoring",children:"Collecting resource data for DB monitoring"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Resource metrics such as CPU and memory are not visible in the DB monitoring."}),"\n"]}),(0,t.jsx)(n.p,{children:"There are different methods for collecting resource data from the DB server depending on the environment."}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DB Agent Environment"}),": Installing the XOS modules on the DB local server is required to collect resource data."]}),"\n"]}),(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{}),(0,t.jsxs)(n.p,{children:["For detailed configuration instructions, see the ",(0,t.jsx)(n.a,{href:"https://docs.whatap.io/search?whatap%5Bquery%5D=XOS%20%EC%97%90%EC%9D%B4%EC%A0%84%ED%8A%B8%20%EC%84%A4%EC%A0%95",children:"document"})," for the platform that matches your DB agent environment."]})]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RDS Environment"}),": Because RDS cannot be installed on a local server, you can collect related metrics by linking with the AWS CloudWatch."]}),"\n"]}),(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{}),(0,t.jsxs)(n.p,{children:["For detailed configuration instructions, see the ",(0,t.jsx)(n.a,{href:"https://docs.whatap.io/search?whatap%5Bquery%5D=RDS%20CloudWatch",children:"document"})," for the platform that matches your RDS environment."]})]})]}),(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"in-case-monitoring-is-not-possible-after-creating-an-additional-database-in-the-db-instance",children:"In case monitoring is not possible after creating an additional database in the DB instance"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"I created an additional database in the DB instance, but it was not monitored by WhaTap. What should I do?"}),"\n"]}),(0,t.jsx)(n.p,{children:"The agent collects DB data upon startup and once a day after startup. If a DB has been additionally created while the agent is running, it may not be reflected. In this case, restart the agent. If that does not work, you may not have proper permissions. Grant permission as follows:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"grant select on 'added DB' to whatap;\n"})})]}),(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"based-on-the-instance-list-of-m-s-and-c",children:"Based on the instance list of M, S, and C"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["What is the criteria for ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"M"})}),", ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"S"})}),", ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"C"})})," in the instance list?"]}),"\n"]}),(0,t.jsxs)(n.p,{children:["They mean ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"M"})}),"aster, ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"S"})}),"lave, and ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"C"})}),"luster respectively. They appear in case of a DB built by replication. Cluster appears when MariaDB has been configured as a galera solution."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"-- In case of Cluster: WSREP_ON is not ON and WSREP_CLUSTER_NAME is galera\nselect variable_name,variable_value \nfrom information_schema.global_variables \nwhere variable_name in ('wsrep_on','wsrep_cluster_name');\n\n-- In case of Master: The data for show slave hosts exists\nshow slave hosts ;\n\n-- In case of Slave: The data for show slave status exists\nshow slave status ;\n"})})]}),(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"instance-list-m-is-not-displayed",children:"Instance list, M is not displayed"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["I can't see ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"M"})})," in the instance list even though it is Master. What's the reason?"]}),"\n"]}),(0,t.jsx)(n.p,{children:"If you have no permission for replication, it may not appear. Please check your monitoring account privileges."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"--Permission checking\nshow grants for whatap;\n\n--Granting permissions\ngrant REPLICATION SLAVE, REPLICATION CLIENT on *.* to whatap;\n"})})]}),(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"metalock-monitoring",children:"Metalock Monitoring"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Metalocks (locks obtained when changing the names or structures of database objects) cannot be viewed in the lock tree of MySQL. How can I monitor metalocks as well?"}),"\n"]}),(0,t.jsx)(n.p,{children:"DB and WhaTap agent configurations are required."}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"DB Configuration"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"# 1. Enable the Performance_schema\nperformance_schema = on\n# 2. Enabling setup_consumers: As a result of the query below, ENABLED must be `YES` (default value is `YES` from 8.0)\nSELECT *\nFROM performance_schema.setup_instruments\nWHERE NAME = 'wait/lock/metadata/sql/mdl'; \n\n-- If ENABLED is `NO`, update is required.\nUPDATE setup_instruments \nSET ENABLED = 'YES',TIMED='YES' \nWHERE NAME = 'wait/lock/metadata/sql/mdl';\n"})}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"WhaTap DB Agent Configuration"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"# Add the following setting in whatap.conf\nmetalock=1\n"})})]}),(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"accessing-the-log-menu",children:"Accessing the Log menu"}),(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(s,{sid:"side_log",className:"uitext"})," menu is invisible in the project."]}),"\n"]}),(0,t.jsxs)(n.p,{children:["Check the specified member roles. ",(0,t.jsx)(s,{sid:"side_log",className:"uitext"})," and submenus are exposed only to the members with the ",(0,t.jsx)(s,{sid:"log_read",className:"b600"})," role. The members with this role can enter the menu and view the logs."]}),(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["For more information about the member role scheme, see ",(0,t.jsx)(n.a,{href:"../project/project-structure#project-auth",children:"the following"}),"."]})})]})]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},84429:function(e,n,s){s.d(n,{R:()=>o,x:()=>r});var a=s(96540);let t={},i=a.createContext(t);function o(e){let n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);