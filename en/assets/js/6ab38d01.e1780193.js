"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["48601"],{86566:function(e,n,s){s.d(n,{Ay:()=>c,RM:()=>l});var t=s(74848),i=s(84429);let l=[{value:"Configuration File Structure",id:"configuration-file-structure",level:2},{value:"Supported Formats",id:"supported-formats",level:3},{value:"Automatic Search Order for Configuration Files",id:"automatic-search-order-for-configuration-files",level:3},{value:"Example Configuration Files",id:"example-configuration-files",level:3},{value:"Agent Execution and Control Commands",id:"agent-execution-and-control-commands",level:2},{value:"Start/Stop",id:"startstop",level:3},{value:"Check Status",id:"check-status",level:3},{value:"View Logs",id:"view-logs",level:3},{value:"If Agent Startup Fails",id:"if-agent-startup-fails",level:3},{value:"Check Agent Status",id:"check-agent-status",level:3},{value:"Technical Details",id:"technical-details",level:2},{value:"Command Structure",id:"command-structure",level:3},{value:"HTTP API Endpoints",id:"http-api-endpoints",level:3},{value:"Logging System",id:"logging-system",level:3}];function r(e){let n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"DBX for Cloud, DBXC consists of two main components."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"dbxc-agent"}),": A background service (agent) that monitors cloud metrics"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"dbxc-ctl"}),": A CLI tool to control the agent (start, stop, check status, view logs)"]}),"\n"]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"configuration-file-structure",children:"Configuration File Structure"}),(0,t.jsx)(n.p,{children:"DBXC defines runtime configurations through a YAML configuration file."})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"supported-formats",children:"Supported Formats"}),(0,t.jsx)(n.p,{children:"DBXC supports both single-project and multi-project agents."}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"YAML format (.yaml, .yml)"}),"\n",(0,t.jsx)(n.li,{children:"Single file: Run a single agent"}),"\n",(0,t.jsx)(n.li,{children:"Directory: Run multiple agents"}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"automatic-search-order-for-configuration-files",children:"Automatic Search Order for Configuration Files"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["File or directory specified with the ",(0,t.jsx)(n.code,{children:"c"})," option"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"config.yaml"}),", ",(0,t.jsx)(n.code,{children:"config.yml"})," (default files)"]}),"\n",(0,t.jsxs)(n.li,{children:["All ",(0,t.jsx)(n.code,{children:".yaml"}),", ",(0,t.jsx)(n.code,{children:".yml"})," files in the current directory"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"example-configuration-files",children:"Example Configuration Files"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Directory tree example"',children:"\u276F tree\n.\n\u251C\u2500\u2500 configs\n\u2502\xa0\xa0 \u251C\u2500\u2500 project-1.yml\n\u2502\xa0\xa0 \u2514\u2500\u2500 project-2.yml\n\u251C\u2500\u2500 dbxc-agent\n\u251C\u2500\u2500 dbxc-ctl\n\u251C\u2500\u2500 dbxc.log\n\u251C\u2500\u2500 dbxc.pid\n\n\u276F ls -al\ntotal 68456\ndrwxr-xr-x  8 kyw  staff       256  7 18 20:23 .\ndrwxr-xr-x  9 kyw  staff       288  7 18 20:10 ..\ndrwxr-xr-x  4 kyw  staff       128  7 18 20:23 configs\n-rwxr-xr-x  1 kyw  staff  20174450  7 18 20:09 dbxc-agent\n-rwxr-xr-x  1 kyw  staff   8565570  7 18 20:09 dbxc-ctl\n-rw-------  1 kyw  staff   5574908  7 18 20:30 dbxc.log\n-rw-r--r--  1 kyw  staff         5  7 18 20:23 dbxc.pid\n"})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="yml example"',children:'input:\n  csp: "aws" # Enter the cloud service provider.\n  namespace: "rds"\n  region: "us-east-1"\n  instances: # Always collect the specified instances. If you specify an instance inside a cluster here, it will always be collected regardless of autoscale.\n    - name: "mysql-rds"\n      slow_query: true # Set this to true if you want to use the slow query page.\n  clusters:\n    autoscale:\n      enabled: false # When autoscale is enabled, scaled instances are added to or removed from the collection targets.\n      interval: 60 # Autoscale check interval for the specified clusters (unit: seconds).\n    names:\n      - "database-cluster-name"\n  metrics: # Enter the metrics to collect.\n    - "CPUUtilization"\n    - "FreeStorageSpace"\n    - "FreeableMemory"\n    - "ReadLatency"\n    - "WriteLatency"\n    - "ReadIOPS"\n    - "WriteIOPS"\n    - "NetworkReceiveThroughput"\n    - "NetworkTransmitThroughput"\n    - "FreeLocalStorage"\n  logs:\n    enabled: false # Can be enabled/disabled. Select true/false.\n    groups: # Add the desired AWS log groups.\n      - "/aws/rds/cluster/database-cluster-name/error"\n      - "/aws/lambda/MyLambda"\n\noutput: # Enter the WhaTap information to receive the collected metric data.\n  license: "abcdefg-higjgkgjk-zxcvnbnbmc"\n  host: "127.0.0.1"\n'})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"agent-execution-and-control-commands",children:"Agent Execution and Control Commands"}),(0,t.jsx)(n.p,{children:"The CLI provides various commands for starting the agent, checking its status, and viewing logs."})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"startstop",children:"Start/Stop"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Start agent\ndbxc-ctl start -c project.yaml \xa0 \xa0 \xa0 \xa0# Specific config file\ndbxc-ctl start --config configs    \xa0 # Multiple projects (directory)\ndbxc-ctl start \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 # Automatically search for default config file\n\n# Stop agent\ndbxc-ctl stop\n\n# Restart agent\ndbxc-ctl restart -c project.yaml\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"check-status",children:"Check Status"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Quick status check\ndbxc-ctl status\ndbxc-ctl describe\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"view-logs",children:"View Logs"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# View logs in real time\ndbxc-ctl logs -f\n\n# View logs for a specific project only\ndbxc-ctl logs -c project.yaml\n\n# Filter logs by level\ndbxc-ctl logs --level error\n\n# View the last 100 logs\ndbxc-ctl logs --tail 100\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"if-agent-startup-fails",children:"If Agent Startup Fails"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Check logs\ndbxc-ctl logs --level error\n"})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"check-agent-status",children:"Check Agent Status"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Check all statuses\ndbxc-ctl describe\n\n# Check logs for a specific agent\ndbxc-ctl logs -c specific-config.yaml -f\n"})}),(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Common Troubleshooting"})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Port conflict"}),": Check if the default port 53200 is in use"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Configuration file errors"}),": Verify YAML syntax"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Permission issues"}),": Check file read permissions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"PID file lock"}),": Force stop and delete the PID file"]}),"\n"]})]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"technical-details",children:"Technical Details"}),(0,t.jsx)(n.p,{children:"Detailed command structure and internal system behavior of DBXC."})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"command-structure",children:"Command Structure"}),(0,t.jsx)(n.p,{children:"dbxc-ctl supports the following commands:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"start"}),": Start DBXC agent"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"stop"}),": Stop DBXC agent"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"restart"}),": Restart DBXC agent"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"logs"}),": View logs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"status or describe"}),": Check agent status"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"version"}),": Check version information"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"help"}),": Display help"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"http-api-endpoints",children:"HTTP API Endpoints"}),(0,t.jsx)(n.p,{children:"The agent provides HTTP endpoints:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"http://localhost:53200/health"}),": Health check"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"http://localhost:53200/status"}),": Status information"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"http://localhost:53200/logs"}),": Log viewing"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"logging-system",children:"Logging System"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"File name: dbxc.log"}),"\n",(0,t.jsx)(n.li,{children:"Maximum size: 10MB per file"}),"\n",(0,t.jsx)(n.li,{children:"Maximum number of backup files: 7 (dbxc.log.1, dbxc.log.2, ... dbxc.log.7)"}),"\n",(0,t.jsx)(n.li,{children:"Retention period: 14 days"}),"\n",(0,t.jsx)(n.li,{children:"Compression: Automatic compression enabled (.gz for old logs)"}),"\n",(0,t.jsx)(n.li,{children:"Timezone: Local time"}),"\n"]}),(0,t.jsx)(n.p,{children:"When the log file reaches 10MB, it rotates automatically. Up to 7 backup files are retained, and logs older than 14 days are deleted. Old logs are compressed to save disk space."})]})]})}function c(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}},32459:function(e,n,s){s.r(n),s.d(n,{metadata:()=>t,default:()=>u,frontMatter:()=>c,contentTitle:()=>o,toc:()=>d,assets:()=>a});var t=JSON.parse('{"id":"postgresql/agent-cloud-settings-usage","title":"Installation and Usage","description":"You can collect and monitor the resource status of cloud database servers.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/postgresql/agent-cloud-settings-usage.mdx","sourceDirName":"postgresql","slug":"/postgresql/agent-cloud-settings-usage","permalink":"/whatap-docs/en/postgresql/agent-cloud-settings-usage","draft":false,"unlisted":false,"editUrl":"undefined/docs/postgresql/agent-cloud-settings-usage.mdx","tags":[],"version":"current","frontMatter":{"id":"agent-cloud-settings-usage","title":"Installation and Usage","description":"You can collect and monitor the resource status of cloud database servers.","keywords":["PostgreSQL","Database","Cloud","Cloud Agent Installation and Usage"],"isTranslationMissing":false},"sidebar":"postgreSidebar","previous":{"title":"Cloud Agent Configuration","permalink":"/whatap-docs/en/postgresql/agent-cloud-settings"},"next":{"title":"Log Collection Settings","permalink":"/whatap-docs/en/postgresql/agent-cloud-settings-logs"}}'),i=s(74848),l=s(84429),r=s(86566);let c={id:"agent-cloud-settings-usage",title:"Installation and Usage",description:"You can collect and monitor the resource status of cloud database servers.",keywords:["PostgreSQL","Database","Cloud","Cloud Agent Installation and Usage"],isTranslationMissing:!1},o,a={},d=[...r.RM];function h(e){return(0,i.jsx)(r.Ay,{})}function u(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},84429:function(e,n,s){s.d(n,{R:()=>r,x:()=>c});var t=s(96540);let i={},l=t.createContext(i);function r(e){let n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);