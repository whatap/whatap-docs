---
id: agent-weaving
title: Open source tracing
description: It provides the configuration method how to trace frameworks or open source libraries used in Java applications through the agent. It is configured by adding the weaving option in the Java agent configuration file (whatap.conf). The guide on how to respond to various framework and library versions is also provided.
keywords:
  - Java
  - Agent
  - Open source tracing
  - Weaving
---

It provides the configuration method how to trace frameworks or open source libraries used in Java applications through the agent. It is configured by adding the `weaving` option in the Java agent configuration file (*whatap.conf*). The guide on how to respond to various framework and library versions is also provided.

For example, when using spring-boot-3.x, feign-client-11, or okhttp3-4.4 with a framework or open source, set the options as follows:

```ini title='whatap.conf'
weaving=spring-boot-3.0,feign-11,okhttp3-4.4
```

## Supported open source list

For configuration of the framework or open source to trace through the Java agent, see the following:

### Apache Camel

#### CXF
| Agent Version | camel-cxf-3.15 or later |
| ------------- | :---------------------: |
| v2.2.27       |           ✅            |

#### Netty
| Agent Version | camel-netty4-2.25 or later |
| ------------- | :------------------------: |
| v2.2.42       |             ✅             |

#### SEDA
| Agent Version | camel-seda-2.22 or later | camel-seda-3.2 or later |
| ------------- | :----------------------: | :---------------------: |
| v2.2.20       |            ✅            |           ✅            |

### DB2
| Agent Version | db2-11.5 or later |
| ------------- | :---------------: |
| v2.2.18       |        ✅         |

### DynamoDB
| Agent Version | dynamodb-1.11 | dynamodb-2.25 |
| ------------- | :-----------: | :-----------: |
| v2.2.39       |      ✅       |      ✅       |

### Feign Client
| Agent Version | feign-11 or later |
| ------------- | :---------------: |
| v2.2.6        |        ✅         |

### Hystrix
| Agent Version | hystrix-1.5 or later |
| ------------- | :------------------: |
| v2.0_21       |          ✅          |

### Kafka
| Agent Version | kafka-clients-2.4.0 or later | reactor-kafka-1.3 or later |
| --- | :---: | :---: |
| v2.2.15 | ✅ | ❌ |
| v2.2.5 | ❌ | ✅ |

### Logging

#### Log4j2
| Agent Version | log4j-2.17 or later |
| --- | :---: |
| **Note** | [Agent option to exclude specific appender](agent-log#excludeappender) |
| v2.2.28 | ✅ |

#### Logback
| Agent Version | logback-1.2.8 or later |
| --- | :---: |
| **Note** | [Agent option to exclude specific appender](agent-log#excludeappender) |
| v2.2.28 | ✅ |

### MongoDB
| Agent Version | 3.8.2 or later | 4.0.3 or later | 4.4 or later | 4.8 or later | 4.11 or later | 5.0 or later |
| --- | :---: | :---: | :---: | :---: | :---: | :---: |
| v2.2.45 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| v2.2.11 | ✅ | ✅ | ✅ | ✅ | ❌ | ❌ |

### Mule Framework
| Agent Version | mule-3.9.5 or later | mule-4.5 or later |
| --- | :---: | :---: |
| v2.2.23 | ✅ | ✅ |

### OkHttp
| Agent Version | okhttp-2.7 or later | okhttp3 | okhttp3-4.4 |
| --- | :---: | :---: | :---: |
| v2.2.9 | ✅ | ✅ | ✅ |
| v2.0_15 | ✅ | ✅ | ❌ |

### Quarkus Reactive
| Agent Version | quarkus-reactive-1.13 or later | quarkus-reactive-2.10 or later |
| --- | :---: | :---: |
| v2.2.19 | ✅ | ✅ |

### RabbitMQ
| Agent Version | reactor-rabbitmq-1.2 or later |
| --- | :---: |
| v2.0_06 | ✅ |

### Redis

#### Jedis
| Agent Version | jedis-2.9.0 or later | jedis-2.9.3 or later | jedis-3.2 or later |
| --- | :---: | :---: | :---: |
| v2.2.43 | ✅ | ✅ | ✅ |
| v2.0_33 | ❌ | ✅ | ✅ |
| v2.0_09 | ❌ | ❌ | ✅ |

#### Lettuce
| Agent Version | lettuce-5.1 or later | lettuce-6.2 or later |
| --- | :---: | :---: |
| v2.2.16 | ✅ | ✅ |
| v2.2.7 | ✅ | ❌ |

### Retrofit
| Agent Version | retrofit-2.5 or later |
| --- | :---: |
| **Note** | Cannot be used simultaneously with okhttp settings |
| v2.2.39 | ✅ |

### Ribbon
| Agent Version | ribbon |
| --- | :---: |
| v2.2.10 | ✅ |

### Spring Boot
| Agent Version | 2.1 or later | 2.5 or later | 2.7 or later | 3.0 or later | 3.2 or later |
| --- | :---: | :---: | :---: | :---: | :---: |
| v2.2.38 | ✅ | ✅ | ✅ | ✅ | ✅ |
| v2.2.23 | ✅ | ❌ | ❌ | ❌ | ❌ |
| v2.2.9 | ❌ | ✅ | ✅ | ✅ | ❌ |

<details>
<summary>View included technology stack</summary>

- **spring-boot-2.1**: r2dbc-mysql-0.8.2, spring-cloud-gateway-2.1, spring-kafka-2.7, spring-webflux-5.1, tomcat9
- **spring-boot-2.5**: r2dbc-mysql-0.8.2, spring-cloud-gateway-3.0, spring-kafka-2.7, spring-webflux-5.3, mongodb-4.0.3, reactor-kafka-1.3, rxjava2, tomcat9
- **spring-boot-2.7**: jasync-r2dbc-mysql-2.1.23, r2dbc-mysql-0.9.3, spring-cloud-gateway-3.1, spring-kafka-3.0, spring-webflux-5.3, mongodb-4.4, reactor-kafka-1.3, rxjava2, tomcat9
- **spring-boot-3.0**: jasync-r2dbc-mysql-2.1.23, r2dbc-mysql-1.0.2, spring-cloud-gateway-4.0, spring-kafka-3.0, spring-webflux-6.0, mongodb-4.8, redis(lettuce-6.2), reactor-kafka-1.3, rxjava3, tomcat10
- **spring-boot-3.2**: jasync-r2dbc-mysql-2.1.23, r2dbc-mysql-1.1.3, spring-cloud-gateway-4.1, spring-kafka-3.1, spring-webflux-6.1, redis(lettuce-6.2), reactor-kafka-1.3, rxjava3, tomcat10

</details>

### Tomcat
| Agent Version | tomcat9 | tomcat10 |
| --- | :---: | :---: |
| v2.2.5 | ✅ | ✅ |

### Undertow
| Agent Version | undertow-2.2 or later | undertow-2.3 or later |
| --- | :---: | :---: |
| v2.2.39 | ✅ | ✅ |
| v2.2.14 | ❌ | ✅ |

### Vert.x
| Agent Version | vertx-3.5.3 | vertx-3.9 | vertx-4.5 |
| --- | :---: | :---: | :---: |
| v2.2.44 | ✅ | ✅ | ✅ |
| v2.2.42 | ✅ | ❌ | ❌ |
| v2.2.39 | ❌ | ❌ | ✅ |


## Preventing Java Agent CVE False Positives

Library classes included in the Java agent are loaded only when actually used by the application. Even if libraries are detected during CVE vulnerability scans, there is no actual vulnerability if they are not being used.

To remove unnecessary tracking classes, run the following command:

```bash
java -cp whatap.agent-X.Y.Z.jar whatap.agent.setup.RemoveWeaving -remove [weaving jar filename]
```

:::caution
The removal operation must be performed again after each Java agent update.
:::

:::note

The command to remove a specific library class is supported in **Java Agent 2.2.37** or later.

**Usage**: `java -cp whatap.agent-X.Y.Z.jar whatap.agent.setup.RemoveWeaving [arguments] [weaving jar filename]`

```bash title="Example"
java -cp whatap.agent-2.2.37.jar whatap.agent.setup.RemoveWeaving -remove spring-boot-2.5.jar spring-boot-2.7.jar
```

Arguments:

- `-r` or `-remove`: It removes the weaving jar file from the Java agent and creates a new Java agent.

- `-l` or `-list`: It outputs a list of weaving jar files.

- `-d` or `-debug`: It enables the debug logging.

- `-e` or `-error`: It displays the full stack trace information for errors.

- `-h` or `-help`: It displays the help and exits.

:::
