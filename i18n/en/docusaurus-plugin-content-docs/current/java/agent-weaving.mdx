---
id: agent-weaving
title: Open source tracing
description: It provides the configuration method how to trace frameworks or open source libraries used in Java applications through the agent. It is configured by adding the weaving option in the Java agent configuration file (whatap.conf). The guide on how to respond to various framework and library versions is also provided.
keywords:
  - Java
  - Agent
  - Open source tracing
  - Weaving
---

It provides the configuration method how to trace frameworks or open source libraries used in Java applications through the agent. It is configured by adding the `weaving` option in the Java agent configuration file (_whatap.conf_). The guide on how to respond to various framework and library versions is also provided.

For example, when using spring-boot-3.x, feign-client-11, or okhttp3-4.4 with a framework or open source, set the options as follows:

```ini title='whatap.conf'
weaving=spring-boot-3.0,feign-11,okhttp3-4.4
```

## Supported open source list

For configuration of the framework or open source to trace through the Java agent, see the following:

<div class='weaving-table'>

| Framework/open source     | Versions                       | Configuration                   |                              Minimum agent version                              | Remarks                                                                                                                                                                             |
| ------------------------- | ------------------------------ | ------------------------------- | :-----------------------------------------------------------------------------: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| apache-camel-cxf          | camel-cxf-3.15 or later        | `weaving=camel-cxf-3.15`        |   <Link to="../release-notes/java/java-2_2_27" target="_blank">v2.2.27</Link>   | -                                                                                                                                                                                   |
| apache-camel-netty        | camel-netty4 2.25 or later     | `weaving=camel-netty4-2.25`     |   <Link to="../release-notes/java/java-2_2_42" target="_blank">v2.2.42</Link>   | -                                                                                                                                                                                   |
| apache-camel-seda         | camel-seda-2.22 or later       | `weaving=camel-seda-2.22`       |   <Link to="../release-notes/java/java-2_2_20" target="_blank">v2.2.20</Link>   | -                                                                                                                                                                                   |
| ^                         | camel-seda-3.2 or later        | `weaving=camel-seda-3.2`        |   <Link to="../release-notes/java/java-2_2_20" target="_blank">v2.2.20</Link>   | -                                                                                                                                                                                   |
| db2                       | db2-11.5 or later              | `weaving=db2-11.5`              |   <Link to="../release-notes/java/java-2_2_18" target="_blank">v2.2.18</Link>   | -                                                                                                                                                                                   |
| dynamodb                  | dynamodb-1.11                  | `weaving=dynamodb-1.11`         |   <Link to="../release-notes/java/java-2_2_39" target="_blank">v2.2.39</Link>   | -                                                                                                                                                                                   |
| ^                         | dynamodb-2.25                  | `weaving=dynamodb-2.25`         |   <Link to="../release-notes/java/java-2_2_39" target="_blank">v2.2.39</Link>   | -                                                                                                                                                                                   |
| feign-client              | feign-11 or later              | `weaving=feign-11`              |    <Link to="../release-notes/java/java-2_2_6" target="_blank">v2.2.6</Link>    | -                                                                                                                                                                                   |
| hystrix                   | hystrix-1.5 or later           | `weaving=hystrix-1.5`           | <Link to="../release-notes/java/java-2_0#v20_21" target="_blank">v2.0_21</Link> | -                                                                                                                                                                                   |
| kafka                     | kafka-clients-2.4.0 or later   | `weaving=kafka-clients-2.4.0`   |   <Link to="../release-notes/java/java-2_2_15" target="_blank">v2.2.15</Link>   | -                                                                                                                                                                                   |
| ^                         | reactor-kafka-1.3 or later     | `weaving=reactor-kafka-1.3`     |    <Link to="../release-notes/java/java-2_2_5" target="_blank">v2.2.5</Link>    | -                                                                                                                                                                                   |
| logback                   | logback-1.2.8 or later         | `weaving=logback-1.2.8`         |   <Link to="../release-notes/java/java-2_2_28" target="_blank">v2.2.28</Link>   | [Provision of the agent option to exclude a specific appender](agent-log#excludeappender)                                                                                           |
| log4j2                    | log4j-2.17 or later            | `weaving=log4j-2.17`            |   <Link to="../release-notes/java/java-2_2_28" target="_blank">v2.2.28</Link>   | [Provision of the agent option to exclude a specific appender](agent-log#excludeappender)                                                                                           |
| mongodb, mongodb-reactive | mongodb-3.8.2 or later         | `weaving=mongodb-3.8.2`         |   <Link to="../release-notes/java/java-2_2_11" target="_blank">v2.2.11</Link>   | -                                                                                                                                                                                   |
| ^                         | mongodb-4.0.3 or later         | `weaving=mongodb-4.0.3`         |   <Link to="../release-notes/java/java-2_2_11" target="_blank">v2.2.11</Link>   | -                                                                                                                                                                                   |
| ^                         | mongodb-4.4 or later           | `weaving=mongodb-4.4`           |   <Link to="../release-notes/java/java-2_2_11" target="_blank">v2.2.11</Link>   | -                                                                                                                                                                                   |
| ^                         | mongodb-4.8 or later           | `weaving=mongodb-4.8`           |   <Link to="../release-notes/java/java-2_2_11" target="_blank">v2.2.11</Link>   | -                                                                                                                                                                                   |
| ^                         | mongodb-4.11 or later          | `weaving=mongodb-4.11`          |   <Link to="../release-notes/java/java-2_2_45" target="_blank">v2.2.45</Link>   | -                                                                                                                                                                                   |
| ^                         | mongodb-5.0 or later           | `weaving=mongodb-5.0`           |   <Link to="../release-notes/java/java-2_2_45" target="_blank">v2.2.45</Link>   | -                                                                                                                                                                                   |
| mule framework            | mule-3.9.5 or later            | `weaving=mule-3.9.5`            |   <Link to="../release-notes/java/java-2_2_23" target="_blank">v2.2.23</Link>   | -                                                                                                                                                                                   |
| ^                         | mule-4.5 or later              | `weaving=mule-4.5`              |   <Link to="../release-notes/java/java-2_2_23" target="_blank">v2.2.23</Link>   | -                                                                                                                                                                                   |
| okhttp                    | okhttp-2.7 or later            | `weaving=okhttp-2.7`            | <Link to="../release-notes/java/java-2_0#v20_15" target="_blank">v2.0_15</Link> | -                                                                                                                                                                                   |
| quarkus, quarkus-reactive | quarkus-reactive-1.13 or later | `weaving=quarkus-reactive-1.13` |   <Link to="../release-notes/java/java-2_2_19" target="_blank">v2.2.19</Link>   | -                                                                                                                                                                                   |
| ^                         | quarkus-reactive-2.10 or later | `weaving=quarkus-reactive-2.10` |   <Link to="../release-notes/java/java-2_2_19" target="_blank">v2.2.19</Link>   | -                                                                                                                                                                                   |
| redis (jedis)             | jedis-2.9.0 or later           | `weaving=jedis-2.9.0`           |   <Link to="../release-notes/java/java-2_2_43" target="_blank">v2.2.43</Link>   | -                                                                                                                                                                                   |
| ^                         | jedis-2.9.3 or later           | `weaving=jedis-2.9.3`           | <Link to="../release-notes/java/java-2_0#v20_33" target="_blank">v2.0_33</Link> | -                                                                                                                                                                                   |
| ^                         | jedis-3.2 or later             | `weaving=jedis-3.2`             | <Link to="../release-notes/java/java-2_0#v20_09" target="_blank">v2.0_09</Link> | -                                                                                                                                                                                   |
| redis (lettuce)           | lettuce-5.1 or later           | `weaving=lettuce-5.1`           |    <Link to="../release-notes/java/java-2_2_7" target="_blank">v2.2.7</Link>    | -                                                                                                                                                                                   |
| ^                         | lettuce-6.2 or later           | `weaving=lettuce-6.2`           |   <Link to="../release-notes/java/java-2_2_16" target="_blank">v2.2.16</Link>   | -                                                                                                                                                                                   |
| ^                         | okhttp3 or later               | `weaving=okhttp3`               | <Link to="../release-notes/java/java-2_0#v20_15" target="_blank">v2.0_15</Link> | -                                                                                                                                                                                   |
| ^                         | okhttp3-4.4                    | `weaving=okhttp3-4.4`           |    <Link to="../release-notes/java/java-2_2_9" target="_blank">v2.2.9</Link>    | -                                                                                                                                                                                   |
| rabbitmq                  | reactor-rabbitmq-1.2 or later  | `weaving=reactor-rabbitmq-1.2`  | <Link to="../release-notes/java/java-2_0#v20_06" target="_blank">v2.0_06</Link> | -                                                                                                                                                                                   |
| retrofit                  | retrofit-2.5 or later          | `weaving=retrofit-2.5`          |   <Link to="../release-notes/java/java-2_2_39" target="_blank">v2.2.39</Link>   | It cannot be used together with the okhttp setting.                                                                                                                                 |
| ribbon                    | ribbon                         | `weaving=ribbon`                |   <Link to="../release-notes/java/java-2_2_10" target="_blank">v2.2.10</Link>   | -                                                                                                                                                                                   |
| spring-boot               | spring-boot-2.1 or later       | `weaving=spring-boot-2.1`       |   <Link to="../release-notes/java/java-2_2_23" target="_blank">v2.2.23</Link>   | r2dbc-mysql-0.8.2, spring-cloud-gateway-2.1, spring-kafka-2.7, spring-webflux-5.1, tomcat9                                                                                          |
| ^                         | spring-boot-2.5 or later       | `weaving=spring-boot-2.5`       |    <Link to="../release-notes/java/java-2_2_9" target="_blank">v2.2.9</Link>    | r2dbc-mysql-0.8.2, spring-cloud-gateway-3.0, spring-kafka-2.7, spring-webflux-5.3, mongodb-4.0.3, reactor-kafka-1.3, rxjava2, tomcat9                                               |
| ^                         | spring-boot-2.7 or later       | `weaving=spring-boot-2.7`       |    <Link to="../release-notes/java/java-2_2_9" target="_blank">v2.2.9</Link>    | jasync-r2dbc-mysql-2.1.23, r2dbc-mysql-0.9.3, spring-cloud-gateway-3.1, spring-kafka-3.0, spring-webflux-5.3, mongodb-4.4, reactor-kafka-1.3, rxjava2, tomcat9                      |
| ^                         | spring-boot-3.0 or later       | `weaving=spring-boot-3.0`       |    <Link to="../release-notes/java/java-2_2_9" target="_blank">v2.2.9</Link>    | jasync-r2dbc-mysql-2.1.23, r2dbc-mysql-1.0.2, spring-cloud-gateway-4.0, spring-kafka-3.0, spring-webflux-6.0, mongodb-4.8, redis(lettuce-6.2), reactor-kafka-1.3, rxjava3, tomcat10 |
| ^                         | spring-boot-3.2 or later       | `weaving=spring-boot-3.2`       |   <Link to="../release-notes/java/java-2_2_38" target="_blank">v2.2.38</Link>   | jasync-r2dbc-mysql-2.1.23, r2dbc-mysql-1.1.3,  spring-cloud-gateway-4.1, spring-kafka-3.1, spring-webflux-6.1, redis(lettuce-6.2), reactor-kafka-1.3, rxjava3, tomcat10             |
| tomcat                    | tomcat9                        | `weaving=tomcat9`               |    <Link to="../release-notes/java/java-2_2_5" target="_blank">v2.2.5</Link>    | -                                                                                                                                                                                   |
| ^                         | tomcat10                       | `weaving=tomcat10`              |    <Link to="../release-notes/java/java-2_2_5" target="_blank">v2.2.5</Link>    | -                                                                                                                                                                                   |
| undertow                  | undertow-2.2 or later          | `weaving=undertow-2.2`          |   <Link to="../release-notes/java/java-2_2_39" target="_blank">v2.2.39</Link>   | -                                                                                                                                                                                   |
| ^                         | undertow-2.3 or later          | `weaving=undertow-2.3.0`        |   <Link to="../release-notes/java/java-2_2_14" target="_blank">v2.2.14</Link>   | -                                                                                                                                                                                   |
| vertx                     | vertx-3.5.3                    | `weaving=vertx-3.5.3`           |   <Link to="../release-notes/java/java-2_2_42" target="_blank">v2.2.42</Link>   | -                                                                                                                                                                                   |
| ^                         | vertx-3.9                      | `weaving=vertx-3.9`             |   <Link to="../release-notes/java/java-2_2_44" target="_blank">v2.2.44</Link>   | -                                                                                                                                                                                   |
| ^                         | vertx-4.5                      | `weaving=vertx-4.5`             |   <Link to="../release-notes/java/java-2_2_39" target="_blank">v2.2.39</Link>   | -                                                                                                                                                                                   |

</div>

## Preventing CVE false positive of the Java agent

The following explains how to prevent false positives of CVE vulnerabilities in Java agents and remove unnecessary library classes.

Even if a CVE vulnerability is detected, the Java agent may not be vulnerable. The agent includes various library classes to monitor libraries used by Java applications, but they are not loaded unless they are actually used. This is because monitoring is performed only when a specific class is loaded in the Java application, at which point the tracing class and methods are combined.

Therefore, during CVE vulnerability scanning, warnings may be triggered based solely on the software name and version. Even if multiple libraries are detected, it does not always mean that the application is vulnerable, because the vulnerability is not exposed unless the application uses those libraries.

If you do not want to use the version in the Java application and want to remove the tracing class, execute the following command. However, you need to perform deletion again each time the Java agent is updated.

```bash
java -cp whatap.agent-X.Y.Z.jar whatap.agent.setup.RemoveWeaving -remove [weaving jar filename]
```

:::note

The command to remove a specific library class is supported in **Java Agent 2.2.37** or later.

**Usage**: `java -cp whatap.agent-X.Y.Z.jar whatap.agent.setup.RemoveWeaving [arguments] [weaving jar filename]`

```bash title="Example"
java -cp whatap.agent-2.2.37.jar whatap.agent.setup.RemoveWeaving -remove spring-boot-2.5.jar spring-boot-2.7.jar
```

Arguments:

- `-r` or `-remove`: It removes the weaving jar file from the Java agent and creates a new Java agent.

- `-l` or `-list`: It outputs a list of weaving jar files.

- `-d` or `-debug`: It enables the debug logging.

- `-e` or `-error`: It displays the full stack trace information for errors.

- `-h` or `-help`: It displays the help and exits.

:::
