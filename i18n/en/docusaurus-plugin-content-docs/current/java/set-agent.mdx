---
id: set-agent
title: Agent CONFIG.
description: The following explains how to configure the Java agent. The whatap.conf file includes the agent's default settings, server connection and data transfer settings, and how to manage the configuration files for multiple application servers. It also provides the way to manage the agent options directly on the WhaTap monitoring service screen.
keywords:
  - Java
  - Agent
  - Agent CONFIG.
  - whatap.conf
---

The Whatap agent writes the necessary settings for each agent in _whatap.conf_. The agent locates and loads the configuration file through the environment variables.

If any separate setting, the agent is set to find _whatap.conf_ under the (_whatap.agent-X.Y.Z.jar_) directory. It checks whether _whatap.conf_ has been changed every 5 seconds and then reloads the file.

For user convenience, [Whatap Monitoring Service](https://service.whatap.io) also provides the agent configuration function.

## Default settings

```ini title='whatap.conf'
whatap.home=.
whatap.config=whatap.conf
```

- `whatap.home`: Enter the path of _whatap.agent.jar_ as the default.

- `whatap.config`: It is recommended to enter only the file name. You can also specify the relative path.

In order for the agent to collect and transfer data to the server, the access key and server address must have been set.

```ini title='whatap.conf'
license=x220g160hgd29-x3qpff0garcus7-z4p0kao58un11a
whatap.server.host=10.10.0.1
```

When the WhaTap agent is run for the first time, you can check which jar file has been used as the agent and from which path _whatap.conf_ has been loaded, as the following.

![Java start screen](/img/set-java-agent-start.png)

## Server connection and data transmission

The WhaTap agent is connected to the server address that has been set in _whatap.conf_.

```ini title='whatap.conf'
whatap.server.host=10.10.1.1
whatap.server.port=6600 # default value
```

- When the TCP session is connected, it receives the communication key by using the `license`. When a wrong `license` is set, the server terminates the session.
- If the TCP connection is terminated repeatedly, check for any firewall problem or check whether the `license` value is correct.
- When a TCP session is connected, data is transferred through the secure communication channel based on the private key received from the server.

## Management of the configuration file for multiple applications

When running multiple applications on one server, to separately control the configuration files for each application, change the name of _whatap.conf_ and then add the JVM options to your startup script.

```bash title='Service A'
-Dwhatap.config=whatap_Aservice.conf
```

```bash title='Service B'
-Dwhatap.config=whatap_Bservice.conf
```

:::caution

The _whatap.conf_ configuration file must be located in the `${WHATAP_HOME}` path.

:::

import ProdImg from '@site/src/components/ChangeImgName.js';

## Configuring the agent on the service screen{#set-agent-service}

Home &gt; Select Project &gt; <Cmdname sid="side_management" className="uitext" /> &gt; <Cmdname sid="side_agentSetting" className="uitext" />

import Desc from '../common-items/_import_set-agent-desc-okind.mdx';

<Desc name='whatap.conf'/>

import Setagentinservicedescnotes from "../common-items/_set-agent-in-service-desc-notes.mdx";

<Setagentinservicedescnotes />

import Setagentinserviceaddoptions from "../common-items/_set-agent-in-service-add-options.mdx";

<Setagentinserviceaddoptions />

import Setagentinservicemodifyoptions from "../common-items/_set-agent-in-service-modify-options.mdx";

<Setagentinservicemodifyoptions />

import Setagentinservicemuliagent from "../common-items/_set-agent-in-service-muli-agent.mdx";

<Setagentinservicemuliagent />

import Setagentinserviceapplydafaultdesc from "../common-items/_set-agent-in-service-apply-dafault-desc.mdx";

<Setagentinserviceapplydafaultdesc />

import DefaultItems from '../common-items/_import_set-agent-in-service-default-item.mdx';

<DefaultItems name='whatap.conf'/>

import Setagentinservicedefaultnotes from "../common-items/_set-agent-in-service-default-notes.mdx";

<Setagentinservicedefaultnotes />

import Setagentsharing from "../common-items/_set-agent-sharing.mdx";

<Setagentsharing />

## Guide to the agent configuration options

The following links provide descriptions of the options that can be set.

import DocCardList from '@theme/DocCardList';

<DocCardList/>
