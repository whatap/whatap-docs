---
id: websphere
title: WebSphere
description: The following provides the detailed guide on how to add Java Virtual Machine (JVM) options to integrate the WhaTap monitoring solution into WebSphere applications. Through this document, users can learn step by step how to apply the required JVM settings to monitor the performance and availability of WebSphere applications after installing the Java agent. It includes the configuration of essential JVM options during agent installation, optimal configuration for smooth integration with WebSphere, and histogram query.
keywords:
  - Java
  - WebSphere
  - Application
  - Agent
---

## Adding JVM options

This guide explains how to add required JVM options to effectively use the Java monitoring agent in the WebSphere application server environment. To add JVM options, access the Admin console.

1. Log in the Admin Console in your web browser.

2. Select **Environment** > **Virtual Hosts** > **default host** > **Host Aliases** and then check the port number of the server to install the agent to.

   ![WebSphere port](https://img.whatap.io/media/agent_java/install/330.png)

3. Go to **Servers** > **Server Types** > **Websphere application servers** and then select a server to install the agent to.

   ![WebSpherer application servers](https://img.whatap.io/media/agent_java/install/300.png)

4. Select the **Configuration** tab on the selected server screen and then select **Java and Process Management** > **Process definition** in the **Server Infrastructure** section.

   ![WebSphere Configuration](https://img.whatap.io/media/agent_java/install/310.png)

5. Among the menus on the right, select **Additional Properties** > **Java Virtual Machine**.

6. In the **Configuration** tab, add `-javaagent` and `-Dwhatap.port` to the **Generic JVM arguments** field.

   ```bash
   -javaagent:/whatap/whatap.agent-X.Y.Z.jar 
   -Dwhatap.port={port number} ## Port number of the item 2 ##
   ```

   ![Add JVM arguments](https://img.whatap.io/media/agent_java/install/340.png)

:::note

import Java17 from "./_java-17.mdx";

<Java17 />

:::

import Setheapmemory from "./_set-heap-memory.mdx";

<Setheapmemory />

## In case the client IP address is not collected

If the client IP addresses are not collected from the dashboard or other menus, see the following. 

To collect valid client IP addresses from the Java agent, it is required to pass the original client IP address from the IBM HTTP server to the backend WebSphere application server. To pass the original client IP address, add `X-Forwarded-For` to the HTTP header on the IBM HTTP server. 

This is handled in more detail in the IBM Support document: [Passing the real client IP from IBM HTTP Server 9.0 to WebSphere Application Server](https://www.ibm.com/support/pages/passing-real-client-ip-ibm-http-server-90-websphere-application-server).

:::note

You may need an IBM account to view the IBM support documentation.

:::

import Nextstep from "../../common-items/_apm-next-step.mdx";

<Nextstep />
