---
id: install-agent
title: Agent Installation
description: The following explains how to install an agent on the application server in the Golang environment.
tags:
  - Golang
  - Agent Installation
---

import TR from '@site/src/components/TR';

An agent must be installed on the same server to forward data from the monitored application server through UDP communication and to transfer the data to the WhaTap collection server. The agent can be installed using the package.

1.  Install the WhaTap repository.

2.  Install the whatap-agent Linux package (yum, apt-get).

3.  Run the whatap-agent service.

![Golang Monitoring](https://img.whatap.io/media/images/golang_system.png)

To use the WhaTap monitoring service, after [Sign up](https://www.whatap.io/ko/signup/), create a project and then install the agent to the target server.

{@include: ../getting-started/_create-project-v2.mdx} 

{@include: ../getting-started/_accesskey-v2.mdx}

## Downloading the agent

**액세스 키**를 발급 받으면 다음 명령어를 이용해 에이전트를 다운로드하세요.

<Tabs groupId="golang">
<TabItem value="redhat-centos" label="Red Hat/CentOS">

```bash title='SH'
## Register the package repository
$ sudo rpm -Uvh https://repo.whatap.io/centos/5/noarch/whatap-repo-1.0-1.noarch.rpm

## Install the package
$ sudo yum install whatap-agent
```

</TabItem>
<TabItem value="debian-ubuntu" label="Debian/Ubuntu">

```bash title='SH'
## Register the package repository
$ wget https://repo.whatap.io/debian/release.gpg -O -|sudo apt-key add -
$ wget https://repo.whatap.io/debian/whatap-repo_1.0_all.deb
$ sudo dpkg -i whatap-repo_1.0_all.deb
$ sudo apt-get update

## Install the package
$ sudo apt-get install whatap-agent
```

</TabItem>
<TabItem value="amazonlinux" label="Amazon Linux">

```bash title='SH'
## Register the package repository
$ sudo rpm --import https://repo.whatap.io/centos/release.gpg
$ echo "[whatap]" | sudo tee /etc/yum.repos.d/whatap.repo > /dev/null
$ echo "name=whatap packages for enterprise linux" | sudo tee -a /etc/yum.repos.d/whatap.repo > /dev/null
$ echo "baseurl=https://repo.whatap.io/centos/latest/\$basearch" | sudo tee -a /etc/yum.repos.d/whatap.repo > /dev/null
$ echo "enabled=1" | sudo tee -a /etc/yum.repos.d/whatap.repo > /dev/null
$ echo "gpgcheck=0" | sudo tee -a /etc/yum.repos.d/whatap.repo > /dev/null

## Install the package
$ sudo yum install whatap-agent
```

</TabItem>
<TabItem value="alpinelinux" label="Alpine Linux">

[whatap-agent.tar.gz]After downloading the file (https://s3.ap-northeast-2.amazonaws.com/repo.whatap.io/alpine/x86_64/whatap-agent.tar.gz), unzip the file based on the "/" directory. Create the monitoring file in the _/usr/whatap/agent_ path.

```bash title='SH'
$ wget https://s3.ap-northeast-2.amazonaws.com/repo.whatap.io/alpine/x86_64/whatap-agent.tar.gz
$ tar -xvzf whatap-agent.tar.gz -C /
```

</TabItem>
<TabItem value="al-docker" label="Alpine Linux Docker">

[whatap-agent.tar.gz]After downloading the file (https://s3.ap-northeast-2.amazonaws.com/repo.whatap.io/alpine/x86_64/whatap-agent.tar.gz), unzip the file in the _/usr/whatap/agent_ path.

```bash title='SH'
FROM alpine

RUN apk update && apk upgrade

# Install WhaTap Golang monitoring agent
RUN wget https://s3.ap-northeast-2.amazonaws.com/repo.whatap.io/alpine/x86_64/whatap-agent.tar.gz
RUN tar -xvzf whatap-agent.tar.gz -C /
```

</TabItem>
</Tabs>

<details>
<summary>Agent configuration file</summary>

It consists of a tracer to collect the monitoring data, an agent to transmit the collected data to the server, and an installation script file to dynamically apply the tracer and agent to the server.

-   _whatap-agent_: This program transmits the data passed from the agent and tracer to UDP, to the collection server.

-   _/etc/init.d/whatap-agent_: Service script file.

-   _whatap_agent_: Service execution file.

-   _whatap.conf_: 설정 정보 및 수집 서버 IP, 액세스 키를 입력하는 파일입니다.

-   _whatap-boot-`yyyymmdd`.log_: Agent log file. (path: _/usr/whata/agent/log_)

</details>

## Agent CONFIG.

다음 명령어를 차례로 실행해 _whatap.conf_ 파일에 **액세스 키**와 **수집 서버 IP** 등을 설정하세요.

```bash title='SH'
$ echo "license={액세스 키}" >> /usr/whatap/agent/whatap.conf
$ echo "whatap.server.host={수집 서버 IP}" >> /usr/whatap/agent/whatap.conf
$ echo "app_name={애플리케이션 이름}" >> /usr/whatap/agent/whatap.conf
$ echo "app_process_name={애플리케이션 프로세스 이름}" >> /usr/whatap/agent/whatap.conf
```

-   **license**: **액세스 키**를 입력하세요.
-   **whatap.server.host**: **수집 서버 IP**를 입력하세요.
-   **app_name**: Enter the application name. Set the user as a string.
-   **app_process_name**: Enter the name of the application to be monitored. Measure the memory usage with the specified process name.

---

Alpine Linux의 경우 다음과 같이 스크립트를 실행해 안내에 따라 **액세스 키**와 **수집 서버 IP**를 입력하세요.

```bash title='SH'
$ sudo /usr/whatap/php/install.sh

Input project access key
xxxxxxxxxxxxxxxx   # 발급한 액세스 키 입력

Input whatap.server.host
192.x.x.x          # 와탭 수집 서버 IP 입력
```

## Using the Golang library

Add whatap/go-api to the Golang application source code and release it.

<Tabs groupId="golang">
<TabItem value="redhat-centos" label="Red Hat/CentOS">

```bash title='SH'
$ go get -u github.com/whatap/go-api
```

</TabItem>
<TabItem value="debian-ubuntu" label="Debian/Ubuntu">

```bash title='SH'
$ go get github.com/whatap/go-api/trace
$ go get github.com/whatap/go-api/sql
$ go get github.com/whatap/go-api/httpc
$ go get github.com/whatap/go-api/method
```

</TabItem>
<TabItem value="amazonlinux" label="Amazon Linux">

```bash title='SH'
$ go get github.com/whatap/go-api/trace
$ go get github.com/whatap/go-api/sql
$ go get github.com/whatap/go-api/httpc
$ go get github.com/whatap/go-api/method
```

</TabItem>
</Tabs>

```go title='GO'
import "github.com/whatap/go-api/trace"

func main(){
    trace.Init(nil)
    //It must be executed before closing the app.
    defer trace.Shutdown()
    ...
}
```

## Starting the monitoring

애플리케이션 서버를 다시 시작하면 에이전트가 정보 수집을 시작합니다.
