## Agent structure

The following displays the WhaTap agent's structure map. 

<Xclude product='cubrid,oracle-pro,mssql'><ImgLang img='agent-xos-architecture.png' desc='Agent structure map' /></Xclude>

<InDoc product='cubrid'><ImgLang img='dbx-install-agent-on-agent-server-cubrid.png' desc='Agent structure map' /></InDoc>

<InDoc product="oracle-pro"><ImgLang img='dbx-install-agent-on-db-server-dma.png' desc='Agent structure map' /></InDoc>

<InDoc product="mssql,mssql-v1"><ImgLang img="agent-architecture.png" desc="Agent" /></InDoc>

<Xclude product="oracle-pro">

- **Collection server**

  It collects and stores the database performance data collected by agents, extracts statistical data, and efficiently provides them to users. The collection server can be set by region. Different collection server addresses are allocated to each region. The collection server address may differ depending on the selected region. When creating a project, the region is also set.

- **DBX agent** (**default agent**)

  Query-based performance data is collected and transmitted to the server. Monitoring is possible through a separate agent server without installing agents directly on the database server to be monitored.

</Xclude>

<Xclude product='cubrid,oracle-pro,mssql-v1'>

- **XOS Agent** (**additional agent**)

  The additional agent is an optional add-on agent that can monitor the process usage of the database server. To monitor the process usage of the database server, run a separate agent on the database server to collect data.

  :::note

  The XOS agent can be applied to only the OS environment running on the x86 architecture.

  :::

</Xclude>

<InDoc product='cubrid'>

- **XOS agent/XCUB agent** (**additional agent**)

  The additional agent is an optional add-on agent that can monitor the process usage of the database server. To monitor the process usage of the database server, run a separate agent on the database server to collect data.

  :::note

  The XOS agent can be applied to only the OS environment running on the x86 architecture.

  :::

</InDoc>

<InDoc product="oracle-pro">

- **Collection server**

  It collects and stores the database performance data collected by agents, extracts statistical data, and efficiently provides them to users. The collection server can be set by region. Different collection server addresses are allocated to each region. The collection server address may differ depending on the selected region. When creating a project, the region is also set.

- **DMX agent**

  Collects performance data using the DMA (Direct Memory Access) method and sends it to the collection server. The agent is installed directly on the target database server.

- **Network**: The WhaTap monitoring agent uses the external communication (TCP) port 6600 to transfer the collected monitoring data to the WhaTap collection server.

</InDoc>

<Xclude product="oracle-pro">

- **Network**

  - Default agent: The WhaTap monitoring agent uses the external communication (TCP) port 6600 to transfer the collected monitoring data to the WhaTap collection server.

  - Additional agent: The external communication (UDP) port 3002 is used between the server where the agent has been installed and the database server. If the internal port conflicts, the port can be changed using the `dbx_port` option.

</Xclude>
