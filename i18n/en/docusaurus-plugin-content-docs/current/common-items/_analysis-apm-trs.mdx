Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" />

Select a project in the initial screen of the WhaTap monitoring service, and then select a sub menu under <Cmdname sid="side_statistics" className="uitext" />. The WhaTap agent collects statistical data for the key traces such as transaction information and SQL. A list is created every 5 minutes and it is sent to the server.

## Basic screen guide

Set the <Cmdname sid="time_selector" className="uitext" />, <Cmdname sid="filter" className="uitext" />, <Cmdname sid="order_by" className="uitext" />, and <Cmdname sid="applications" className="uitext" /> and then select ![Search icon](/img/ico-btn-search.png).

<ImgLang img="apm-statistic-basic-operator.png" desc="Statistics" />

- Each **Statistics** tab provides sorting options by **Sum**, **Max**, **Time avg**, and **Count** for viewing the list from your desired perspective. 

- You can add or exclude columns to view from the list as well as the default values by using the <Cmdname sid="BTN06441" className="uitext" /> button.

- When you select ![Search icon](/img/ico-btn-search.png), the ![CSV icon](/img/ic-csv-download-ms.svg) button appears above the search list along with the search results. If you select the button, you can download the searched list as a CSV file.

  :::tip

  If you click ![CSV icon](/img/ic-csv-download-ms.svg) without selecting ![Search icon](/img/ico-btn-search.png) after a statistics list appears, you can download the CSV file with the changed conditions.

  :::

- If you select the ![Detail view icon](/img/ico-detail-view.svg) <Cmdname sid="display_detail" className="uitext" /> icon in the statistics list, you can check the number of cases and average time chart, and additional charts are provided to compare the case count, error count, and response time. If you select the time to search in the chart, the <Cmdname sid="side_txSearch" className="uitext" /> menu appears.

- If you select <code class="btn">T</code> in the statistics list, the <Cmdname sid="top_stack_of_url" className="uitext" /> menu appears.

- If you select <code class="btn">U</code> in the statistics list, the <Cmdname sid="unique_stack_url" className="uitext" /> menu appears.

:::note

- You can view the data for up to 31 days. However, you can view the data for up to 7 days in <Cmdname sid="side_statRemote" className="uitext" />.

:::

## Transaction statistics

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_tx" className="uitext" />

It collects statistics for transactions. Every 5 minutes, up to 5,000 URL-specific performance statistics are collected and sent to the server. If the number of URLs for 5 minutes exceeds 5,000, this is ignored.

| Columns                            | Description                                                                  |
| ---------------------------------- | ---------------------------------------------------------------------------- |
| <Cmdname sid="TTL06918" />         | Transaction address                                                          |
| <Cmdname sid="count" />            | Number of execution cases                                                    |
| <Cmdname sid="error" />            | Error occurrence count for the executed transactions                         |
| <Cmdname sid="TTL06960" /> (ms)    | Average of the total response time                                           |
| <Cmdname sid="TTL06963" /> (ms)    | Sum of response times                                                        |
| <Cmdname sid="TTL06961" /> (ms)    | Maximum response time                                                        |
| <Cmdname sid="TTL06965" />         | Average of the CPU usage time                                                |
| <Cmdname sid="httpc_count" />      | HTTP Call Count                                                              |
| <Cmdname sid="TTL06959" /> (ms)    | Total HTTP call time / Number of transactions                                |
| <Cmdname sid="TTL08965" /> (ms)    | Total HTTP call time / Total number of HTTP calls in transactions            |
| <Cmdname sid="TTL06097" />         | SQL execution count                                                          |
| <Cmdname sid="TTL06956" /> (ms)    | Total SQL time / Number of transactions                                      |
| <Cmdname sid="TTL08964" /> (ms)    | Total SQL time / Total number of SQL patches in transactions                 |
| <Cmdname sid="sqlFetch" />         | SQL Fetch Count                                                              |
| <Cmdname sid="TTL06953" /> (ms)    | Total SQL patch time / Number of transactions                                |
| <Cmdname sid="TTL08966" /> (ms)    | Total SQL patch time / Total number of SQL patches in transactions           |

:::note

<Xclude product="php">

<Cmdname sid="TTL06975" className="uitext" /> requires to set the <code>trace_malloc_enabled=true</code> option in the agent configuration (*whatap.conf*) for collection. The default value is <code>false</code>.

</Xclude>

<InDoc product="php">

<Cmdname sid="TTL06975" className="uitext" /> requires to set the <code>trace_malloc_enabled=true</code> option in the agent configuration (*whatap.ini*) for collection. The default value is <code>false</code>.

</InDoc>

:::

### Using the trend comparison feature {#comparetrend}

You can use the <Cmdname sid="TTL08868" className="uitext" /> feature to compare multiple transaction trends at a glance. This feature is useful for quickly identifying key issues and resolving traffic issues when there are a large number of transactions to check.

<ImgLang img="apm-statistic-tx-compare-trend.png" desc="Compare trends" />

1. Select the time and monitoring target for a query, and then select the ![Search icon](/img/ico-btn-search.png).

2. Select one or more transactions to compare from the transaction list.

3. Select <Cmdname sid="TTL08868" className="uitext" />.

4. The <Cmdname sid="TTL08868" className="uitext" /> window appears listing the trend graphs for the selected transactions.

Check the trend graph in the <Cmdname sid="TTL08868" className="uitext" /> window to compare traffic patterns between transactions. You can compare traffic distributions for specific time periods and service paths.

:::note

- You can select and view up to 100 transactions.

- If there are a lot of transactions selected, the loading time may increase.

- For accurate analysis, use the <Cmdname sid="filter" className="uitext" /> option appropriately.

:::

## Transaction domain statistics

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statDomain" className="uitext" />

The WhaTap agent can collect transaction statistics for each domain. In the systems where multiple domains are separated and serviced on a server, domain-specific analysis may be required. Set the following option:

<Xclude product="php">

```ini title='whatap.conf'
stat_domain_enabled=true
```

</Xclude>

<InDoc product="php">

```ini title='whatap.ini'
whatap.stat_domain_enabled=true
```

</InDoc>

Through the collected data, you can identify the processing status of URLs for each domain.

| Columns                         | Description                                          |
| ------------------------------- | ---------------------------------------------------- |
| <Cmdname sid="TTL06101" />      | Service domain                                       |
| <Cmdname sid="TTL06918" />      | Transaction address                                  |
| <Cmdname sid="count" />         | Number of execution cases                            |
| <Cmdname sid="error" />         | Error occurrence count for the executed transactions |
| <Cmdname sid="timeAvg_ms" />    | Average of the total response time                   |
| <Cmdname sid="timeSum_ms" />    | Sum of response times                                |

## Transaction caller statistics

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statCaller" className="uitext" />

If the multi server is connected by a rest call, the relationship statistics between **callers** and **callees** can be collected. To collect this data, set the following options:

<Xclude product="php">

```ini title='whatap.conf'
mtrace_rate=100
mtrace_spec=v1
stat_mtrace_enabled=true
```

</Xclude>

<InDoc product="php">

```ini title='whatap.ini'
whatap.mtrace_enabled=true 
whatap.mtrace_rate=100
whatap.mtrace_spec=v1
whatap.stat_mtrace_enabled=true
```

</InDoc>

![msa-system](https://img.whatap.io/media/agent_java/data/msa.png)

In the above architecture, the **Caller & Callee** statistics can be viewed only in api1 and api2. The system called by the user browser cannot see the **Caller** statistics.

However, because the server on the **caller** side must transfer data, the relevant settings must be entered for all servers.

<Xclude product="php">

```ini title='whatap.conf of [front]'
mtrace_rate=100
mtrace_spec=v1
stat_mtrace_enabled=true
```

```ini title='whatap.conf of [api1] & [api2]'
mtrace_spec=v1
stat_mtrace_enabled=true
```

</Xclude>

<InDoc product="php">

```ini title='whatap.ini of [front]'
whatap.mtrace_rate=100
whatap.mtrace_spec=v1
whatap.stat_mtrace_enabled=true
```

```ini title='whatap.ini of [api1] & [api2]'
whatap.mtrace_spec=v1
whatap.stat_mtrace_enabled=true
```

</InDoc>

The statistical data collected is as follows. The data must be viewed from the **callee** side.

| Columns                          | Description                                                       |
| -------------------------------- | ----------------------------------------------------------------- |
| <Cmdname sid="callerPcode" />    | Project code corresponding to the caller                          |
| <Cmdname sid="callerOkind" />    | Group unit to which the agent corresponding to the caller belongs |
| <Cmdname sid="callerUrl" />      | Address of the caller transaction                                 |
| <Cmdname sid="transaction" />    | Callee transaction address                                        |
| <Cmdname sid="count" />          | Number of execution cases                                         |
| <Cmdname sid="error" />          | Error occurrence count for the executed transactions              |
| <Cmdname sid="timeAvg_ms" />     | Average of the total response time                                |

:::note

The maximum number of CSV lines that can be downloaded at one time from the <Cmdname sid="side_statCaller" className="uitext" /> menu is 10,000.

:::

## IP transaction statistics {#statiptx}

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statIp" className="uitext" />

It provides the feature to view the URLs and number of calls from applications for each specific IP address. This feature is useful for identifying potential security threats or performance issues by checking IP addresses with unusually high request volumes and analyzing the URLs called from those IP addresses. You can block unnecessary or malicious requests based on this information.

You can filter IP addresses or transaction addresses through the <Cmdname sid="filter" className="uitext" /> option to quickly retrieve data that meets your criteria. This is useful when analyzing specific IPs or transaction address patterns.

<InDoc product="php">

The following option needs to be set to collect IP transaction statistics. The default value is `false`.

```ini title='whatap.ini'
whatap.stat_ipurl_enabled=true
```

</InDoc>

<InDoc product="java">

The following option needs to be set to collect IP transaction statistics. The default value is `false`.

```ini title='whatap.conf'
stat_ipurl_enabled=true
```

</InDoc>

| Columns                          | Description                                                                            |
| -------------------------------- | -------------------------------------------------------------------------------------- |
| <Cmdname sid="ip" />             | IP address of the client that made the request.                                        |
| <Cmdname sid="TTL06918" />       | Addresses of the transactions called and specific path variables are marked with `{}`. |
| <Cmdname sid="count" />          | Total number of requests made from the IP address.                                     |
| <Cmdname sid="error" />          | Number of errors occurred for requests.                                                |
| <Cmdname sid="timeAvg_ms" />     | Average response time for the request (milliseconds, ms).                              |

:::tip

- **Abnormal traffic detection**: It can detect IPs with an abnormally high number of calls, analyze transaction address patterns from those IPs, and block potential attacks. For example, if there are excessive requests to the `/account/{aa}/{bb}/{cc}` URL from a specific IP, you can block the IP or take action to limit requests.

- **Response time analysis**: It can detect IPs with abnormally high average response times to identify and improve performance issues on the network or server side.

- **Error occurrence analysis**: When multiple errors occur from a specific IP, you can diagnose whether there is a problem with the requests from the IP or a problem with the system.

:::

## Transaction referer statistics{#stat-referer}

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statReferer" className="uitext" />

The WhaTap agent can collect transaction statistics for each referer. Set the following option: The default value is `false`. 

<Xclude product="php">

```ini title='whatap.conf'
stat_referer_enabled=true
```

</Xclude>

<InDoc product="php">

```ini title='whatap.ini'
whatap.stat_referer_enabled=true
```

</InDoc>

Through the collected data, you can see the referer data on the statistics.

| Columns                         | Description                                          |
| ------------------------------- | ---------------------------------------------------- |
| <Cmdname sid="TTL06108" />      | Referer address                                      |
| <Cmdname sid="TTL06918" />      | Transaction address                                  |
| <Cmdname sid="count" />         | Number of execution cases                            |
| <Cmdname sid="error" />         | Error occurrence count for the executed transactions |
| <Cmdname sid="timeAvg_ms" />    | Average of the total response time                   |
| <Cmdname sid="timeSum_ms" />    | Sum of response times                                |

## Error Statistics

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statError" className="uitext" />

They are statistics on the service errors that occurred for 5 minutes. They collect different errors and transaction names with the keys. They provide the stacks upon error occurrence. The statistics appear for up to 1,000 errors every 5 minutes.

| Columns                       | Description                                                                                                   |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------- |
| <Cmdname sid="class" />       | Error Class                                                                                                   |
| <Cmdname sid="TTL06918" />    | Transaction address                                                                                           |
| <Cmdname sid="msg" />         | Error Message                                                                                                 |
| <Cmdname sid="count" />       | Error Count                                                                                                   |
| <Cmdname sid="type_oid" />    | Agent name                                                                                                    |
| <Cmdname sid="type_onode" />  | Group unit categorized as `whatap.onode`                                                                      |
| <Cmdname sid="type_okind" />  | Group unit categorized as `whatap.okind`                                                                      |
| <Cmdname sid="TTL09049" />    | Statistical time (5 minutes or 1 hour) when the transaction error was first generated during the query period |

## SQL execution statistics

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statSql" className="uitext" />

The SQL execution statistics for 5 minutes are collected. A maximum of 5,000 SQL statements are allowed in 5 minutes. If a single Java process generates SQL statements that exceed the limit, they are discarded from statistical data.

| Columns                            | Description                                                        |
| ---------------------------------- | ------------------------------------------------------------------ |
| <Cmdname sid="db" />               | Database Type                                                      |
| <Cmdname sid="sql" />              | SQL query statement                                                |
| <Cmdname sid="TTL06918" />         | Data randomly collected from one of the URLs that called the SQL   |
| CRUD                               | Create, Read, Update, Delete                                       |
| <Cmdname sid="countTotal" />       | Query execution count                                              |
| <Cmdname sid="countError" />       | Number of errors among executed queries                            |
| <Cmdname sid="TTL06960" /> (ms)    | Average of the total query execution time                          |
| <Cmdname sid="TTL06963" /> (ms)    | Sum of query execution times                                       |
| <Cmdname sid="TTL06964" />         | Standard deviation for the query execution time                    |

:::info

<Cmdname sid="TTL06918" /> collects one of the URLs (last call URL) that called the SQL for 5 minutes for analysis.

:::

## HTTP call execution statistics

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statHttpc" className="uitext" />

They collect the statistics of calls outside the applications for 5 minutes via the HTTP and HTTPS protocols. A maximum of 5,000 HTTP call statements are allowed in 5 minutes. If a single application process generates external HTTP call statements that exceed the limit, they are discarded from statistical data.

| Columns                         | Description                                                              |
| ------------------------------- | ------------------------------------------------------------------------ |
| <Cmdname sid="ITM07683" />      | HTTP call URL hash                                                       |
| <Cmdname sid="TTL06918" />      | Data randomly collected from one of the URLs that requested the HTTP API |
| <Cmdname sid="host" />          | Host or IP address                                                       |
| <Cmdname sid="port" />          | TCP port                                                                 |
| <Cmdname sid="total" />         | Total execution count                                                    |
| <Cmdname sid="error" />         | Error Count                                                              |
| <Cmdname sid="timeAvg_ms" />    | Average of the total response time                                       |
| <Cmdname sid="timeSum_ms" />    | Sum of response times                                                    |
| <Cmdname sid="timeMin_ms" />    | Minimum response time                                                    |
| <Cmdname sid="timeMax_ms" />    | Maximum response time                                                    |
| <Cmdname sid="TTL06915" />      | Standard deviation for the HTTP call time                                |

## Number of calls for each client IP region {#client_tx_stat}

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statRemote" className="uitext" />

The physical distance between the server and the client is proportional to the data transfer time. It statistically collects call counts for each region of the client IP. The number of different IPs that can be collected per 5 minutes is up to 70,000 per instance.

| Columns                       | Description                 |
| ----------------------------- | --------------------------- |
| <Cmdname sid="TTL06081" />    | Client IP address           |
| <Cmdname sid="country" />     | User access country         |
| <Cmdname sid="city" />        | User access city            |
| <Cmdname sid="count" />       | Total call count            |

:::note

- The data about the client IP can be viewed for up to 7 days.

- WhaTap basically stores the client-related information. For more information about the agent settings for user data collection, see [the following](agent-number-of-user).

:::

### Share chart by region

The share chart collects user access locations and presents them for each country and city. 

- If a country is selected, the detailed chart appears to display each country's cities and connected user IPs.
- If you select the center circle, it goes to the country selection chart.

## Call counts for each user agent

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statUseragentDetail" className="uitext" />

The numbers of calls for each hash of the user agent string are collected. There is a maximum of 500 different user agent hashes for each instance that can be collected every 5 minutes.

| Columns                        | Description                               |
| ------------------------------ | ----------------------------------------- |
| <Cmdname sid="useragent" />    | User agent of the browser                 |
| <Cmdname sid="os" />           | OS environment in which the browser runs  |
| <Cmdname sid="browser" />      | Browser type                              |
| <Cmdname sid="count" />        | Total collection count                    |

## Client Browser Statistics

Home &gt; Select Project &gt; <Cmdname sid="side_statistics" className="uitext" /> &gt; <Cmdname sid="side_statUseragent" className="uitext" />

By analyzing the user agent strings, it provides the statistical information based on the browser type and OS used by the end users. You can check the market share through a pie chart created based on the collected statistical information.

| Columns                        | Description                               |
| ------------------------------ | ----------------------------------------- |
| <Cmdname sid="useragent" />    | User agent of the browser                 |
| <Cmdname sid="os" />           | OS environment in which the browser runs  |
| <Cmdname sid="browser" />      | Browser type                              |
| <Cmdname sid="count" />        | Total collection count                    |
