---
id: metric-warning-notice
title: Metrics alert
description: Use the metrics event settings to set specific and complex events.
tags:
  - PostgreSQL
  - Alert
  - Metrics Event
  - Database Monitoring
---

import Note from '../common-items/_import_v2-note.mdx';

<Note product='PostgreSQL' link='../postgresql-v1/metric-warning-notice' />

{@include: ../common-items/_metrics-warning-notice.mdx}

## Template{#template}

We provide templates for metrics and composite metrics events so that users can easily set alert notifications.

### Metrics event templates{#template-metrics}

In the <Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="event_setting" className="uitext" /> &gt; <Cmdname sid="metrics" className="uitext" /> tab, select <span class="uitext">+</span> <Cmdname sid="add_notification" className="uitext" />
in the <Cmdname sid="metrics" className="uitext" /> section. From the <Cmdname sid="template" className="uitext" /> option, select desired items. The following are the templates that can be selected.

:::note

<Cmdname sid="metrics_event_rules" className="uitext" /> of the selected template can be directly changed by users.

:::

-   <p><Cmdname sid="cpu_usage" className="uitext" /><span class="uitext">_Warning</span></p>

    Condition: `cpu(xos2)` > 70

    If the CPU utilization exceeds 70% in an individual instance, a <span class='slow'>Warning</span> level notification is sent.

-   <p><Cmdname sid="memory_usage" className="uitext" /><span class="uitext">_Warning</span></p>

    Condition: `mem(xos)` > 70

    If the memory usage exceeds 70% in an individual instance, a <span class='slow'>Warning</span> level notification is sent.

-   **_Active Session_Warning_**

    Condition: `active_sessions` > 30

    If the number of active sessions in an individual instance exceeds 30, a <span class='slow'>Warning</span> level notification is sent.

-   **_Lock Wait_Warning_**

    Condition: `lock_wait_sessions` > 3

    If the number of waiting sessions in an individual instance exceeds 3, a <span class='slow'>Warning</span> level notification is sent.

-   **_Long Query_Warning_**

    Condition: `long_running_sessions` > 3

    If the number of long-running sessions in an individual instance exceeds 30, a <span class='slow'>Warning</span> level notification is sent.

-   <p><Cmdname sid="TTL07136" className="uitext" /><span class="uitext">_Warning</span></p>

    Condition: (`total_sessions` / `max_connections` \* 100) > 90

    If the number of long-running sessions in an individual instance exceeds 80%, a <span class='slow'>Warning</span> level notification is sent.

-   <p><Cmdname sid="TTL07137" className="uitext" /><span class="uitext">_Warning</span></p>

    Condition: `blks_hit_ratio` \<= 80

    If the memory block hit ratio in an individual instance is 80% or less, a <span class='slow'>Warning</span> level notification is sent.

-   <p><Cmdname sid="TTL07138" className="uitext" /><span class="uitext">_Warning</span></p>

    Condition: `replication_delay` >= 10

    If the delay in an individual instance being reflected to the replication database is greater than 10 seconds, a <span class='slow'>Warning</span> level notification is sent.

### Composite metrics event templates{#composite-metrics-template}

In the <Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="event_setting" className="uitext" /> &gt; <Cmdname sid="metrics" className="uitext" /> tab, select <span class="uitext">+</span> <Cmdname sid="add_notification" className="uitext" />
in the <Cmdname sid="composite_metrics" className="uitext" /> section. From the <Cmdname sid="template" className="uitext" /> option, select desired items. The following are the templates that can be selected.

-   **_Replication Broken_**

    If the replication status in an individual instance is Broken or Fallover, a <span class='vslow'>Critical</span> level notification is sent.

-   <p><Cmdname sid="TTL07141" className="uitext" /></p>

    If there are more than 2 sessions that have not committed for 60 seconds or more, a <span class='slow'>Warning</span> level notification is sent.
