---
id: agent-faq
title: エージェントFAQs
description: WhaTapのエージェントに関するFAQ文書です。
keywords:
  - エージェント
  - FAQ
---

WhaTapモニタリングサービスのユーザーからよくあるエージェントに関する質問を確認してみてください。

---

<div className='faqs'>

### モニタリングエージェント名の重複問題

> Scale In/Out環境でエージェント名が重複されるのはなぜですか？

Scale In/Out環境では、リソースの需要に応じてインスタンスやコンテナが自動的に追加または削除されます。 この過程で、各インスタンスにインストールされたモニタリングエージェントが固定された名前を使用すると、新しく生成されたインスタンスが既存のインスタンスと同じ名前を使用するようになり、重複問題が発生する可能性があります。 これは、特にインスタンスが自動的に復旧されたり、DevOps環境で継続的な配布が行われる時によく現れます。

> エージェント名の重複問題を解決するための方法は何ですか？

WhaTapエージェントは、各インスタンスやコンテナが再起動するたびに変数を設定して固有の識別子を生成できるエージェント設定を提供しています。 エージェント設定のための*whatap.conf*ファイルに`whatap.name`オプションを適用できます。 次の例を参考にしてください。

```ini title="whatap.conf"
whatap.name={業務名}-{ip2}-{ip3}-{port}
```

例えば、`{業務名}`が'service'、IPアドレスが**10.11.12.13**、ポート番号が`8000`であれば、エージェント名は`service-12-13-8000`で付与されます。

- `{ipN}`: IPv4アドレスのうち、各N番目の単位を使用して名前を付けます。 `N`は0から始まります。 

  :::tip

  IPアドレスが10.11.12.13の場合、指定した変数によって次のように適用されます。

  `{ip0}`: 10、`{ip1}`: 11、`{ip2}`: 12、`{ip3}`: 13

  :::

- `{port}`: アプリケーションがListenするポート番号を使用して名前を付与します。

:::note

エージェント名識別のためのエージェント設定の詳細については、[次の文書](../java/agent-name)を参照してください。

:::

</div>
