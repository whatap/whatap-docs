---
id: log-php
title: PHP
description: PHPアプリケーションからログを収集する方法について説明します。
tags:
  - ログモニタリング
  - PHP
---

PHPアプリケーションでログを収集するには、次のことを確認してください。

## エージェントのアップデート

PHPエージェント2.3.2バージョンから可能です。アップデート方法は[次の文書](../php/agent-update)を参照してください。

## エージェント設定の確認

ホーム画面 > プロジェクト選択 > **_ログ_** > **_ログ設定_**

WhaTapモニタリングサービスの初期画面でプロジェクトを選択し、プロジェクトメニューの**_ログ_** > **_ログ設定_**メニューを選択してください。**_ログモニタリングの開始_**セクションの**_エージェント設定の確認_**タブの手順を参照してください。

### 設定ファイルパスの確認

ログモニタリングするファイルの**設定ファイルパス**を確認してください。CLI環境または、ウェブで確認することができます。

#### CLI環境で確認する

```shell
$ php -i | grep 'Scan'
Scan this dir for additional .ini files => /etc/php8.0.d
```

:::note

パスが"(None)"の場合、設定ファイルのパスは_/usr/whatap/php_です。

:::

#### ウェブで確認する

CLI環境とApache環境のPHP設定が異なる場合は、ウェブ上の`phpinfo()`関数の結果を確認してください。![](https://img.whatap.io/media/images/check_phpinfo.png)

### コマンド入力

設定ファイルパスを含むコマンドを入力すると、ログモニタリングが開始されます。

```shell
export LOGFILES=/some/path/file1,/some/other/file2
echo "whatap.logsink_enabled=true" | sudo tee -a [設定ファイルパス]/whatap.ini
echo "whatap.logsink.files=$LOGFILES" | sudo tee -a [設定ファイルパス]/whatap.ini
```

## ログモニタリングの活性化

ホーム画面 > プロジェクト選択 > **_ログ_** > **_ログ設定_**

**_ログモニタリングを開始する_**セクションの**_ログモニタリングを有効にする_**タブのトグルボタンで、WhaTapログモニタリングの有効または無効にできます。 

{@include: ../common-items/_log-java-start.mdx}

{@include: ../common-items/_log-active-note.mdx} 
