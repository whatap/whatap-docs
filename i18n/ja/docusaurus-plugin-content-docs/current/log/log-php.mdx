---
id: log-php
title: PHP
description: PHPアプリケーションからログを収集する方法について説明します。
keywords:
  - ログモニタリング
  - PHP
---

PHPアプリケーションでログを収集するための設定方法を案内します。

## エージェントのアップデート

PHPエージェント2.3.2バージョンから可能です。アップデート方法は[次の文書](../php/agent-update)を参照してください。

## エージェント設定の確認

ホーム画面 > プロジェクト選択 > **ログ** > **ログ設定**

1. WhaTapモニタリングサービスの初期画面でプロジェクトを選択した後、**ログ** > **ログ設定** メニューに移動してください。

2. **ログモニタリングを開始する** タブの **1. エージェント設定の確認** の案内に従って、エージェント設定を確認してください。

### 設定ファイルパスの確認

ログモニタリングするファイルの**設定ファイルパス**を確認してください。CLI環境または、ウェブで確認することができます。

#### CLI環境で確認する

```shell
$ php -i | grep 'Scan'
Scan this dir for additional .ini files => /etc/php8.0.d
```

:::note

パスが"(None)"の場合、設定ファイルのパスは*/usr/whatap/php*です。

:::

#### ウェブで確認する

CLI環境とApache環境でPHPの設定が異なる場合は、Web上で `phpinfo()` 関数の結果を確認してください。

![](https://img.whatap.io/media/images/check_phpinfo.png)

### コマンド入力

設定ファイルパスを含むコマンドを入力すると、ログモニタリングが開始されます。

```shell
export LOGFILES=/some/path/file1,/some/other/file2
echo "whatap.logsink_enabled=true" | sudo tee -a [設定ファイルパス]/whatap.ini
echo "whatap.logsink.files=$LOGFILES" | sudo tee -a [設定ファイルパス]/whatap.ini
```

## ログモニタリングの活性化

ホーム画面 > プロジェクト選択 > **ログ** > **ログ設定**

**ログモニタリングを開始する** タブの **2. ログモニタリングの有効化** で、WhaTapのログモニタリングを有効または無効に設定できます。

import Logjavastart from "../common-items/_log-java-start.mdx";

<Logjavastart />

import Logactivenote from "../common-items/_log-active-note.mdx";

<Logactivenote />
