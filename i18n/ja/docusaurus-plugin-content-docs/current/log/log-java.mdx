---
id: log-java
title: Java
description: Javaアプリケーションでログを収集する方法について案内します。
keywords:
  - ログモニタリング
  - Java
---

Javaアプリケーションでログを収集するには、次の３つのステップをすべて完了する必要があります。

## エージェントのアップデート

Javaエージェント2.1.1バージョン以降で可能です。アップデート方法は[次の文書](../java/update-agent)を参照して下さい。

## エージェント設定の確認

import Logagentcheck from "../common-items/_import_log-agent-setting-check.mdx";

<Logagentcheck />

### 主なオプション

- **hooklog_enabled** <span class='type'>Boolean</span>

  既定値`false`

  Logライブラリをhookingしてログモニタリングを有効にします。  

  :::caution

  アプリケーションを実行する前に、_whatap.conf_オプションを有効にして、その後にログモニタリングのOn/Offを`logsink_enabled`設定で動的に制御できます。アプリケーションを起動する前に`logsink_enabled`オプションを`true`に設定する場合、このオプションを個別に設定しなくてもログモニタリングが可能です。

  :::

  :::note

  今後ログモニタリングを活用する可能性がある場合は、事前にこのオプションを設定することをお勧めします。

  :::

- **hooklog_custom_methods**

  カスタムログを登録します。特定のログフレームワークの内容を収集します。サイトで個別に作成したログモジュールのログを追跡する際に利用してください。

  ```java title='Java'
  package io.home.test;

  public class MyLog {  
    public void customLog(String log) { ... }
  }
  ```

  ```ini title='whatap.conf'
  hooklog_custom_methods=io.home.test.MyLog.customLog
  ```

- **logsink_enabled** <span class='type'>Boolean</span>

  既定値`false`

  Logモニタリング機能をOn/Offします。

  :::caution

  アプリケーションが起動する前に_whatap.conf_に`hooklog_enabled`オプションが設定されている場合、このオプションを使用すると、ログモニタリングのOn/Offを動的に制御することができます。

  :::

- **logsink_trace_enabled** <span class='type'>Boolean</span>

  既定値`false`

  LogにトランザクションIDを挿入して、トランザクショントレースのログタブの表示有無を指定します。  

## ログモニタリングの活性化

ホーム画面 > プロジェクト選択 > ***ログ*** > ***ログ設定***

***ログモニタリングを開始する***セクションの***ログモニタリングを有効にする***タブのトグルボタンで、WhaTapログモニタリングの有効または無効にできます。

import Logjavastart from "../common-items/_log-java-start.mdx";

<Logjavastart />

import Logactivenote from "../common-items/_log-active-note.mdx";

<Logactivenote />
