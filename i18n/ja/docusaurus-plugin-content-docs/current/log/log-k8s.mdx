---
id: log-k8s
title: Kubernetes
description: Kubernetesコンテナとコンテナ内部のアプリケーションのログを収集する方法について説明します。
keywords:
  - ログモニタリング
  - Kubernetes
---

Kubernetesコンテナおよびコンテナ内のアプリケーションのログを収集するための設定方法を案内します。

## エージェントのアップデート

Kubernetesエージェント1.1.35バージョン以降で使用可能です。アップデート方法は[次の文書](../kubernetes/agent-update)を参照してください。

## エージェント設定の確認

ホーム画面 > プロジェクト選択 > **ログ** > **ログ設定**

1. WhaTapモニタリングサービスの初期画面でプロジェクトを選択した後、**ログ** > **ログ設定** メニューに移動してください。

2. **ログモニタリングを開始する** タブの **エージェント設定およびログモニタリングの有効化** にある **1. エージェント設定の確認** の案内を参考にして、エージェント設定を確認してください。

### コンテナログ収集の有効化{#k8s-log-node}

Kubernetesコンテナでログを収集するには、**1. エージェント設定の確認** で **ログ設定を適用** ボタンをクリックしてください。 

### コンテナの内部アプリケーションログ収集の有効化{#k8s-log-app}

Java 2.1.1、Python 1.2.2以降のバージョンで利用可能です。Kubernetesコンテナ上で実行されるアプリケーションのログを収集するには、以下を参考にしてください。

1. **ログ > ログ設定 > ログモニタリングを開始する** タブに移動してください。

2. **1. エージェント設定の確認** の下部にある ![エージェント設定メニューアイコン](/img/ic-agent.svg) **エージェント設定** ボタンをクリックしてください。 

3. <Cmdname sid="side_agentSetting" className="uitext" /> で、<Cmdname sid="write_options" className="uitext" /> のオプション選択ドロップダウンリストから <Cmdname sid="direct_input" className="uitext" /> をクリックしてください。

4. エージェント設定コマンドのキー `logsink_enabled` と値 `true` を入力欄に入力してください。

   ```bash
   logsink_enabled=true 
   ```

5. **適用**ボタンを選択します。Kubernetesコンテナ内のアプリケーションからログを収集できます。

:::note

- Javaアプリケーションのログ収集に関する詳細は、[次のドキュメント](log-java)を参考にしてください。

- Pythonアプリケーションのログ収集に関する詳細は、[次のドキュメント](log-python)を参考にしてください。

- Goアプリケーションのログ収集に関する詳細は、[次のドキュメント](log-go)を参考にしてください。

:::

## ログモニタリングの活性化

ホーム画面 > プロジェクト選択 > **ログ** > **ログ設定**

**ログモニタリングを開始する**セクションの**ログモニタリングを有効にする**タブのトグルボタンで、WhaTapログモニタリングの有効または無効にできます。 

import Logjavastart from "../common-items/_log-java-start.mdx";

<Logjavastart />

import Logactivenote from "../common-items/_log-active-note.mdx";

<Logactivenote />

## Kubernetesログモニタリングのカテゴリガイド

Kubernetesに関するさまざまなログを確認できます。WhaTap Kubernetesでは、モニタリングカテゴリを提供しています。

:::caution

設定によって重複したログ内容が保存される場合があるため、重複がないか必ず確認してください。

:::

| カテゴリ              | 説明                                                                                                       |
| ----------------- | -------------------------------------------------------------------------------------------------------- |
| `#K8sEvent`       | <ul><li>Kubernetesで発生したイベントがデフォルトで保存および作成されるログ</li><li>ユーザー設定に関係なく基本作成</li></ul>                         |
| `#WhatapEvent`    | <ul><li>WhaTapイベント設定によって発生したイベントが格納されるログ</li><li>ユーザー設定に関係なく、デフォルトで作成されます</li></ul>                      |
| `containerStdout` | <ul><li>コンテナ標準出力ログ</li><li>ユーザー設定時に作成</li><li>ノードエージェントに`logsink_enabled=true`設定を追加したした場合</li></ul>      |
| `AppLog`          | <ul><li>コンテナ内アプリケーションログ</li><li>ユーザー設定時に作成</li><li>アプリケーションエージェントに`logsink_enabled=true`設定の追加時</li></ul> |

import K8slogfilter from "../common-items/_import_k8s-log-filter.mdx";

<K8slogfilter />
