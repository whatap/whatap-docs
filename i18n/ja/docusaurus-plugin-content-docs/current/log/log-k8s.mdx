---
id: log-k8s
title: Kubernetes
description: Kubernetesコンテナとコンテナ内部のアプリケーションのログを収集する方法について説明します。
keywords:
  - ログモニタリング
  - Kubernetes
---

Kubernetesコンテナとコンテナ内部のアプリケーションのログを収集するには、以下を確認してください。 

## エージェントのアップデート

Kubernetesエージェント1.1.35バージョン以降で使用可能です。アップデート方法は[次の文書](../kubernetes/agent-update)を参照してください。

## エージェント設定の確認

ホーム画面 > プロジェクト選択 > ***ログ*** > ***ログ設定***

WhaTapモニタリングサービスの初期画面でプロジェクトを選択し、プロジェクトメニューの***ログ*** > ***ログ設定***メニューを選択します。***エージェントの設定とログモニタリング活性化***セクションの***エージェント設定の確認***タブの手順を参照してください。

### コンテナログ収集の有効化{#k8s-log-node}

クバネティスコンテナからログを収集するには**_エージェント設定確認_**タブで**_ログ設定を適用する_**ボタンをクリックしてください。 

### コンテナの内部アプリケーションログ収集の有効化{#k8s-log-app}

Java 2.1.1、Python 1.2.2バージョン以降から可能です。Kubernetesコンテナ上で実行されているアプリケーションのログを収集するには、次を参照してください。 

1. **_エージェント設定の確認_**タブの下の![number 1](/img/number-01.png) ![エージェント設定メニューアイコン](/img/ic-agent.svg) **_エージェント設定_**ボタンを選択してください。 

2. ***アプリケーションエージェント設定***メニューに移動し、![number 2](/img/number-02.png) ***オプション作成***ウインドウで***手動入力***を選択します。

3. 次のエージェント設定コマンドで、***キー***`logsink_enabled`と***値***\`trueを![number 3](/img/number-03.png)入力ウィンドウに入力します。

   ```bash
   logsink_enabled=true 
   ```

4. ![number 4](/img/number-04.png) ***適用***ボタンを選択します。Kubernetesコンテナ内のアプリケーションからログを収集できます。

:::note

- Javaアプリケーションログ収集の詳細については、[次の文書](log-java)を参照してください。

- Pythonアプリケーションログ収集の詳細については[次の文書](log-python)を参照してください。

- Goアプリケーションログ収集の詳細については、[次の文書](log-go)を参照してください。

:::

## ログモニタリングの活性化

ホーム画面 > プロジェクト選択 > ***ログ*** > ***ログ設定***

***ログモニタリングを開始する***セクションの***ログモニタリングを有効にする***タブのトグルボタンで、WhaTapログモニタリングの有効または無効にできます。 

import Logjavastart from "../common-items/_log-java-start.mdx";

<Logjavastart />

import Logactivenote from "../common-items/_log-active-note.mdx";

<Logactivenote />

## Kubernetesログモニタリングのカテゴリガイド

Kubernetesに関する各種ログを確認できます。WhaTap Kubernetesが提供するモニタリングカテゴリは次のとおりです。設定によって重複したログ内容が保存される場合がありますので、必ず重複がないかを確認してください。

| カテゴリ              | 説明                                                                                                       |
| ----------------- | -------------------------------------------------------------------------------------------------------- |
| `#K8sEvent`       | <ul><li>Kubernetesで発生したイベントがデフォルトで保存および作成されるログ</li><li>ユーザー設定に関係なく基本作成</li></ul>                         |
| `#WhatapEvent`    | <ul><li>WhaTapイベント設定によって発生したイベントが格納されるログ</li><li>ユーザー設定に関係なく、デフォルトで作成されます</li></ul>                      |
| `containerStdout` | <ul><li>コンテナ標準出力ログ</li><li>ユーザー設定時に作成</li><li>ノードエージェントに`logsink_enabled=true`設定を追加したした場合</li></ul>      |
| `AppLog`          | <ul><li>コンテナ内アプリケーションログ</li><li>ユーザー設定時に作成</li><li>アプリケーションエージェントに`logsink_enabled=true`設定の追加時</li></ul> |

import K8slogfilter from "../common-items/_import_k8s-log-filter.mdx";

<K8slogfilter />
