---
id: log-filter-settings
title: ログフィルター設定
description: ログフィルターの設定方法について説明します。 
toc_max_heading_level: 3
keywords: [ ログ, ログモニタリング, 設定, ログ設定, ログフィルター設定 ]
---

**ログフィルター設定**は、ユーザーが指定したフィルター条件に一致するログのみを保存する機能です。必要なログだけを保存することでコストを削減できます。  

:::note

**権限**

ログ編集権限を持つユーザーのみ設定できます。

:::

## ログフィルター設定の追加

新しいフィルター設定を追加する方法です。ログフィルターを設定する際は、**フィルター名、ライブテール表示有無、カテゴリ、フィルター条件**が必須入力項目です。

保存しないログであっても、**ライブテール表示有無**トグルを有効にすると**ライブテール**で確認できます。  

:::caution

カテゴリごとに設定できるフィルターは1つのみです。

:::

1. **ログ > ログ設定 > ログフィルター設定** タブに移動します。

1. **+ 追加** ボタンをクリックして新しいフィルター設定を作成します。

1. **ログフィルター設定追加**で **フィルター名、ライブテール表示有無、カテゴリ、フィルター条件** を入力します。

    - **フィルター名**: フィルターを識別する名前

    - **ライブテール表示有無**: 保存の有無に関係なくライブテールに表示するかを選択

    - **カテゴリ**: フィルターを適用するログカテゴリ **(複数選択可能)**

    - **フィルター条件**: フィルターに保存するログの条件
    
    :::note
    
    フィルター条件の詳細については [WhaTap log search query 構文](https://docs.whatap.io/log/log-search-query) を参照してください。
    
    :::
    
1. **追加** ボタンをクリックすると、**登録結果プレビュー**で各フィルター設定を確認・修正できます。

1. 確認が完了したら、**適用** ボタンをクリックしてログフィルター設定を保存します。

### シミュレーション

入力したカテゴリとフィルター条件でログを事前に検索し、ログフィルターを適用する前に結果を確認できます。

**シミュレーション** ボタンをクリックすると、フィルターが適用された **ログ検索** 画面が表示されます。 

## ログフィルター設定の修正

登録済みのログフィルターは編集アイコンをクリックして修正できます。  
**ログフィルター設定修正** 画面では既存の値が表示され、必要な項目を変更して適用できます。

:::caution

ログフィルターを修正する際、選択できるカテゴリは1つのみです。

:::

## ログフィルター設定の削除

登録したフィルターは削除アイコンをクリックして削除できます。削除後は必ず **保存** ボタンをクリックしてください。

:::caution

変更を保存しないとフィルターは削除されません。 

:::

## ログフィルター設定のJSONインポート/エクスポート

ログフィルター設定はJSON形式でインポート/エクスポートできます。  
他のプロジェクトに同じログフィルターを適用したい場合に便利です。

### JSONエクスポート

1. 画面右上の ![エクスポートアイコン](/img/ic-json-export.svg) をクリックします。

1. **JSONエクスポート** ウィンドウが開いたら、**エクスポート** ボタンをクリックします。 

1. ログフィルター設定がJSONファイルとしてダウンロードされます。

### JSONインポート

1. 画面右上の ![インポートアイコン](/img/ic-json-import.svg) をクリックします。

1. インポートするJSONファイルを選択します。 

1. **JSONインポート** ウィンドウで **リストに追加** または **上書き** を選択してログフィルター設定をインポートします。

1. **保存** ボタンをクリックして変更を反映します。

#### バリデーション条件

設定を保存する際のバリデーションは次の通りです。 

- **type**: `GENERAL` のみサポート

- **category**: 必須、`string` タイプのみサポート

- **condition**
    - **language**: `jsonDsl`, `lucene` のみサポート
    - **description**: 無効なフィルター条件は保存できません

- **showLiveTail**: `boolean` タイプのみサポート

- **name**: 必須、`string` タイプのみサポート