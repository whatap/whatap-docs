---
id: script-manager
title: スクリプトマネージャー
description: エージェントのインストールパスにSQLスクリプトを保存すると、WhaTapモニタリングサービス画面でそのスクリプトを読んで、リアルタイムで実行結果を照会できます。
keywords:
  - データベース
  - スクリプトマネージャー
displayed_sidebar: dbSidebar
---

ホーム画面 &gt; プロジェクト選択 &gt; <Cmdname sid="side_analysis" className="uitext" /> &gt; <Cmdname sid="side_dbScriptManager" className="uitext" />

エージェントのインストールパスにSQLスクリプトを保存すると、WhaTapモニタリングサービス画面でそのスクリプトを読んで、単一またはマルチスクリプトの実行結果をリアルタイムで照会できます。

- SQLスクリプトをモニタリングツールからすぐに読み込んで実行できます。 これにより、追加設定や外部ツールがなくても、迅速かつ効率的にデータを照会できます。

- 特定のSQLスクリプトを事前に保存して繰り返し使用することができ、一貫したデータを継続的にモニタリングまたは分析する時に必要です。 これは手動作業を削減し、自動化されたプロセスの構築に役立ちます。

## 始める前に

<Cmdname sid="side_dbScriptManager" className="uitext" />メニューでSQLスクリプトを実行するには、次の手順に従ってエージェントのインストールパスにSQLスクリプトを保存します。

1. エージェントのインストールパスの下にある*scripts*フォルダに移動します。

   ![](/img/script-manager-starting-step01.png)

2. データベースのタイプフォルダに入ります。 該当するフォルダがない場合は、作成します。

   ![](/img/script-manager-starting-step02.png)

   :::note 

   WhaTapスクリプトマネージャーが対応するデータベースタイプは次のとおりです。 

   > `oracle`, `mysql`, `tibero`, `cubrid`, `mssql`, `postgresql`, `altibase`, `db2`, `sap_ase`

   :::

3. SQLスクリプトを作成します。 この際、SQLスクリプトを実行するアカウントは、エージェントが使用するアカウントです。

   ![](/img/script-manager-starting-step03.png)

:::note

SQLスクリプトを実行するアカウントは*whatap.conf*ファイルに明示したり、*uid.sh*ファイルで使用したアカウントです。

:::

## SQLスクリプトを実行する

1. WhaTapモニタリングサービスのホーム画面で、データベースモニタリングサービスのプロジェクトに移動します。 

2. <Cmdname sid="side_analysis" className="uitext" /> &gt; <Cmdname sid="side_dbScriptManager" className="uitext" />の<Cmdname sid="TTL08478" className="uitext" />セクションでSQLスクリプトを実行するエージェントを選択します。

3. 画面の左側にある<Cmdname sid="TTL08480" className="uitext" />で、実行するスクリプトを選択します。

4. <Cmdname sid="TTL08478" className="uitext" />セクションで選択したスクリプトのSQL文を確認し、<Cmdname sid="run" className="uitext" />ボタンをクリックします。

5. <Cmdname sid="TTL08479" className="uitext" />セクションで照会結果を確認します。

:::note

エージェントのインストールパスごとにSQLスクリプトを読み込むため、各エージェントから他のスクリプトファイルをインポートできます。

:::

## マルチスクリプトを作成する

:::note

DMXエージェント1.0.4sバージョン以降で、**Oracle Pro**製品のみ対応しています。

:::

`scripts/oracle`経路に`.sql`文を追加するとき、クエリはセミコロン(`;`)で終わる必要があり、クエリ間で改行で区切ります。

<ImgLang img='multi-script-oracle-pro.png' desc='multi-script-oracle-pro' />

## SQLマルチスクリプトを実行する

1. **クエリ実行インスタンス**でスクリプトを実行する複数のインスタンスを選択し**実行**ボタンをクリックします。 

2. 画面左の**スクリプトリスト**領域に、選択したインスタンスのスクリプトリストがすべて表示されます。

3. **スクリプトSQL**領域にSQLクエリ文が表示されます。 

   - マルチスクリプトはQuery 1、Query 2 …、Query nと表記され、値はスクリプト結果に表示される名前と同じです。

   - 画面右上の**Formatting**ボタンを活性化すると、一度にフォーマッティングできます。

4. **スクリプト結果**でマルチスクリプトの場合、インスタンス個数 * クエリ個数だけテーブルが表示されます。
