データベース指標は、データベースの作業量とリソース使用量を包括的に収集します。 WhaTapモニタリングサービスは、継続的にメトリクスを収集してデータベースのボトルネックを特定し、性能問題の根本原因を特定するのに役立つデータを提供します。

メトリクス情報に関する詳しい内容は、[次のリンク](https://docs.oracle.com/)を参照してください。

import AgentStatus from "../common-items/_agent-status-summary-metrics.mdx";

<AgentStatus />

<InDoc product="oracle,oracle-v1">

## db_oracle_counter {#db_oracle_counter}

Oracleデータベースの全般的な性能メトリクスを収集し、システムの状態と性能をモニタリングするのに重要なカテゴリです。

### Tags {#db_oracle_counter-tags}

次は`db_oracle_counter`カテゴリに収集されるタグに関する案内です。

| タグ名         | 説明                  | 備考    |
| ----------- | ------------------- | ----- |
| `agentIp`   | エージェントごとのIPアドレスです。  | -     |
| `dbIsMulti` | Multitenant対応可否です。  | -     |
| `dbName`    | データベース名です。          | -     |
| `dbType`    | データベースの種類です。        | -     |
| `dbVersion` | 利用中のデータベースのバージョンです。 | -     |
| `oname`     | エージェント名です。          | ユニーク値 |

### Field {#db_oracle_counter-filed}

次は`db_oracle_counter`カテゴリに収集されるフィールドの案内です。

</InDoc>

<InDoc product="oracle-pro">

## db_oracle_dma_counter {#db_oracle_dma_counter}

Oracleデータベースの全般的な性能メトリクスを収集し、システムの状態と性能をモニタリングするのに重要なカテゴリです。

### Tags {#db_oracle_dma_counter-tags}

次は、`db_oracle_dma_counter`カテゴリに収集されるタグに関する案内です。

| タグ名      | 説明         | 備考    |
| -------- | ---------- | ----- |
| `dbName` | データベース名です。 | -     |
| `oname`  | エージェント名です。 | ユニーク値 |

### Field {#db_oracle_dma_counter-filed}

次は、`db_oracle_dma_counter`カテゴリに収集されるフィールドの案内です。

</InDoc>

<div class='db-metric-3'>

| Metrics                                                      | Description                                                                          | Category       |
| ------------------------------------------------------------ | ------------------------------------------------------------------------------------ | -------------- |
| `cpu_used_by_this_session`                                   | ユーザー呼び出しが開始された時点から終了するまでのセッションで使用したCPU時間(10ミリ秒単位)となります。                              | Performance    |
| `db_time`                                                    | データベース内のユーザーレベルの呼び出しを実行するために必要な経過時間(microseconds)となります。                              | Performance    |
| `active_sessions`                                            | 現在、活性化されたセッションの数です。                                                                  | Connection     |
| `connect_error`                                              | 接続エラーの数です。                                                                           | Connection     |
| `consistent_gets`                                            | 一貫したデータブロックの読み取り作業の回数です。                                                             | I/O            |
| `cpu`                                                        | データベースで使用されたCPUの使用率です。                                                               | Performance    |
| `cpu_cores`                                                  | 使用可能なCPUコアの数です。                                                                      | Performance    |
| `data_blocks_consistent_reads_-_undo_records_applied`        | 一貫したデータブロックの読み取りに適用されたUndoレコードの数です。                                                  | I/O            |
| `db_block_changes`                                           | SGAのブロックで変更されたブロックの数です。                                                              | I/O            |
| `db_block_gets`                                              | SGAのブロックでの直接読み取り作業の回数です。                                                             | I/O            |
| `db_file_scattered_read_time_waited`                         | スキャッタード読み取りイベントを待機した時間です。                                                            | I/O            |
| `db_file_scattered_read_total_timeouts`                      | スキャッタード読み取りイベントで発生したタイムアウト回数です。                                                      | I/O            |
| `db_file_scattered_read_total_waits`                         | スキャッタード読み込みイベントで発生した待機回数の合計です。                                                       | I/O            |
| `db_file_sequential_read_time_waited`                        | シーケンシャル読み取りイベントで待機した時間です。                                                            | I/O            |
| `db_file_sequential_read_total_timeouts`                     | シーケンシャル読み取りイベントで発生したタイムアウト回数です。                                                      | I/O            |
| `db_file_sequential_read_total_waits`                        | シーケンシャルの読み取りイベントで発生した待機回数の合計です。                                                      | I/O            |
| `direct path read time waited`                               | ダイレクトパスの読み取りで待機した時間です。                                                               | I/O            |
| `direct path read total timeouts`                            | ダイレクトパスの読み取りで発生したタイムアウト回数です。                                                         | I/O            |
| `direct path read total waits`                               | ダイレクトパスの読み取りで発生した待機回数の合計です。                                                          | I/O            |
| `direct path write time waited`                              | ダイレクトパスの書き込みで待機した時間です。                                                               | I/O            |
| `direct path write total timeouts`                           | ダイレクトパスの書き込みで発生したタイムアウトの回数です。                                                        | I/O            |
| `direct path write total waits`                              | ダイレクトパスの書き込みで発生した待機回数の合計です。                                                          | I/O            |
| `enq:_TX_-_row_lock_contention_time_waited`                  | 行ロック(row lock) 競争で待機した時間です。                                                          | I/O            |
| `enq:_TX_-_row_lock_contention_total_timeouts`               | 行ロック(row lock) 競争で発生したタイムアウトの回数です。                                                   | I/O            |
| `enq:_TX_-_row_lock_contention_total_waits`                  | 行ロック(row lock) 競争で発生した、合計の待機回数です。                                                    | I/O            |
| `enqueue_waits`                                              | キューの読み込みが遅れてキューの変換または読み込み中に発生した合計のキュー数です。                                            | I/O            |
| `execute_count`                                              | SQL文(statement)を実行した合計のコマンド数です。                                                      | Performance    |
| `fatal_count`                                                | クリティカルなエラーが発生した回数です。                                                                 | Info           |
| `iowait_cpu`                                                 | I/O待機状態で使用されたCPU時間の比率です。                                                             | Performance    |
| `latch free time waited`                                     | ラッチフリー状態で待機した時間です。                                                                   | I/O            |
| `latch free total timeouts`                                  | ラッチフリー状態で発生したタイムアウトの回数です。                                                            | I/O            |
| `latch free total waits`                                     | ラッチフリー状態で発生した待機回数の合計です。                                                              | I/O            |
| `library cache lock time waited`                             | ライブラリキャッシュロックで待機した時間です。                                                              | I/O            |
| `library cache lock total timeouts`                          | ライブラリキャッシュロックで発生したタイムアウトの回数です。                                                       | I/O            |
| `library cache lock total waits`                             | ライブラリキャッシュロックで発生した待機回数の合計です。                                                         | I/O            |
| `library cache pin time waited`                              | ライブラリキャッシュピンで待機した時間です。                                                               | I/O            |
| `library cache pin total timeouts`                           | ライブラリキャッシュピンで発生したタイムアウトの回数です。                                                        | I/O            |
| `library cache pin total waits`                              | ライブラリキャッシュピンで発生した合計待機回数です。                                                           | I/O            |
| `lock_wait_sessions`                                         | 現在の行ロック(row lock)を取得するために待機している数です。                                                  | Connection     |
| `logons_current`                                             | 現在有効になっているログインの数です。                                                                  | Connection     |
| `long_running_sessions`                                      | 長時間実行中のセッションの数です。                                                                    | Connection     |
| `memory`                                                     | 現在使用中のメモリ比率です。                                                                       | MySQL Resource |
| `opened_cursors_current`                                     | 現在、開いているカーソル(cursor) の数です。                                                           | Connection     |
| `parse_count_(hard)`                                         | パーシング呼び出しの合計数(実際のパーシング)です。                                                           | Performance    |
| `parse_count_(total)`                                        | パーシング呼び出しの合計数(hard, soft, describe)です。                                               | Performance    |
| `physical_reads`                                             | ディスクで読み込んだデータブロックの数です。                                                               | I/O            |
| `physical_writes`                                            | データをディスクに記録したブロックの数です。 `physical writes direct`および`physical writes from cache`の合計です。 | I/O            |
| `pq_sessions`                                                | 並列クエリセッションの数です。                                                                      | Connection     |
| `redo_entries`                                               | 生成されたRedoエントリの数です。                                                                   | I/O            |
| `rollback_changes_-_undo_records_applied`                    | ロールバック変更により適用されたUndoレコードの数です。                                                        | I/O            |
| `session_logical_reads`                                      | メモリで読み込んだデータブロックの数です。 `db block gets`および`consistent gets`の合計です。                      | I/O            |
| `sorts_(disk)`                                               | ディスクで発生したソート作業の数です。                                                                  | I/O            |
| `sorts_(memory)`                                             | メモリで発生したソート作業の数です。                                                                   | I/O            |
| `sys_cpu`                                                    | セッションによって使用されたcpu timeの合計です。                                                         | Performance    |
| `total_elapse_time`                                          | データベースインスタンスが最後に再起動されてから、すべてのリクエストの累積合計経過時間です。                                       | Performance    |
| `total_sessions`                                             | 合計のセッション数です。                                                                         | Connection     |
| `transaction_tables_consistent_reads_-_undo_records_applied` | トランザクションテーブルで一貫した読み取り作業に適用されたUndoレコードの数です。                                           | I/O            |
| `txn_sessions`                                               | トランザクションセッションの数です。                                                                   | Connection     |
| `user_commits`                                               | トランザクション当たりに実行されたユーザーコミットの作業数です。                                                     | I/O            |
| `user_cpu`                                                   | ユーザー作業で使用されたCPUの比率(%)です。                                                             | Performance    |
| `user_rollbacks`                                             | ユーザーのロールバック作業の数です。                                                                   | I/O            |
| `wait_sessions`                                              | イベント待機中のセッション数です。                                                                    | Connection     |
| `warning_count`                                              | すべてのアラート数です。                                                                         | Info           |

以下はエージェント設定で`ora_ratio`オプションを介して収集する指標の説明です。 エージェントオプション設定の詳細については、[次の文書](agent-dbx-settings#collect-data)を参照してください。

| Metrics                       | Description                                                                                                                      |
| ----------------------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| `buffer cache hit ratio`      | ディスクからデータを読み込まずにメモリから直接データを探せる回数。<br/>この数値が高ければデータベースの性能が良いことを意味し、数値が低ければディスクI/Oが増加して性能低下を招くことがあります。                             |
| `soft parse ratio`            | SQL文が再利用される頻度。<br/> Soft Parseは、すでにキャッシュにあるSQL文を再利用する場合です。 この数値が高ければ、SQL文の再利用がうまくいっていることを意味します。                                  |
| `hard parse ratio`            | SQL文が最初から新しくパーシングされる頻度、<br/>ハードパスは、SQL文を初めて実行するか、キャッシュに存在しない場合に発生します。 この数値が高ければ、データベースのCPU使用率が増加し、性能が低下する可能性があります。               |
| `library cache hit ratio`     | Library CacheからSQL及びPL/SQL文を正常に検索する割合。<br/>この数値が高ければ、SQL文とPL/SQLコードがキャッシュで効果的に再利用されていることを意味します。                                  |
| `library cache pin hit ratio` | Library Cache Pinリクエストが成功した割合。<br/> Library Cache Pinは、実行中のSQL文が他のセッションで変更されないように保護する役割をします。 この数値が高ければ、これらの保護が効果的に行われていることを示します。 |
| `library cache get hit ratio` | Library Cacheの個体を正常に取得する割合。<br/>この数値が高ければ、SQL文とPL/SQLコードがライブラリキャッシュで効果的に再利用されていることを意味します。                                        |
| `latch hit ratio`             | Latchリクエストが成功した割合。<br/> Latchは、データベースの共有メモリアクセスを制御するためのロックメカニズムです。 この数値が高ければ、Latchの待ち時間が少なく、システムの同時性と性能が優れていることを意味します。           |
| `shared pool free mem ratio`  | 共有プールの空きメモリ比率<br/>共有プールはSQL文、PL/SQLコード、及びデータディクショナリーキャッシュを保存するメモリ領域です。 適切な空きメモリ比率を維持することで、共有プールの効率的な運用と性能最適化を保証できます。             |

</div>

<InDoc product="oracle,oracle-v1">

## db_oracle_tablespace {#db_oracle_tablespace}

Oracleデータベースのテーブルスペース使用状況を1時間おきに収集したカテゴリです。 このカテゴリのメトリクスは、テーブルスペースの状態と容量をモニタリングし、ストレージリソースを効率的に管理し、データベースの性能の問題を事前に予防するのに役立ちます。

### Tags {#db_oracle_tablespace-tags}

次は、`db_oracle_tablespace`カテゴリに収集されるタグに関する案内です。

| タグ名          | 説明                                                                    | 備考    |
| ------------ | --------------------------------------------------------------------- | ----- |
| `con_name`   | 接続されたコンテナのデータベース名です。 マルチテナント環境で、各Pluggable Database(PDB)を区分するのに役立ちます。 | -     |
| `datfile`    | 各テーブルスペースに割り当てられたデータファイルのパスとファイル名です。                                  | -     |
| `oname`      | エージェント名です。                                                            | ユニーク値 |
| `tablespace` | テーブルスペースの名前です。                                                        | -     |

### Field {#db_oracle_tablespace-filed}

次は、`db_oracle_tablespace`カテゴリに収集されるフィールドの案内です。

</InDoc>

<InDoc product="oracle-pro">

## db_oracle_dma_tablespace {#db_oracle_dma_tablespace}

Oracleデータベースのテーブルスペース使用状況を1時間おきに収集したカテゴリです。 このカテゴリのメトリクスは、テーブルスペースの状態と容量をモニタリングし、ストレージリソースを効率的に管理し、データベースの性能の問題を事前に予防するのに役立ちます。

### Tags {#db_oracle_dma_tablespace-tags}

次は、`db_oracle_dma_tablespace`カテゴリに収集されるタグに関する案内です。

| タグ名          | 説明                                                                    | 備考    |
| ------------ | --------------------------------------------------------------------- | ----- |
| `con_name`   | 接続されたコンテナのデータベース名です。 マルチテナント環境で、各Pluggable Database(PDB)を区分するのに役立ちます。 | -     |
| `datfile`    | 各テーブルスペースに割り当てられたデータファイルのパスとファイル名です。                                  | -     |
| `oname`      | エージェント名です。                                                            | ユニーク値 |
| `tablespace` | テーブルスペースの名前です。                                                        | -     |

### Field {#db_oracle_dma_tablespace-filed}

次は、`db_oracle_dma_tablespace`カテゴリに収集されるフィールドの案内です。

</InDoc>

| Metrics          | Description                           |
| ---------------- | ------------------------------------- |
| `autoextensible` | `YES`または`NO`で、データファイルが自動拡張の可能有無を示します。 |
| `increment_by`   | データファイルが自動拡張された時に一度に拡張されるブロックの数です。    |
| `maxsize`        | データファイルが自動的に拡張される時に設定された最大サイズです。      |
| `size`           | テーブルスペースの現在割り当てられている容量の合計です。          |
| `used`           | 現在使用中のテーブルスペースのサイズです。                 |
