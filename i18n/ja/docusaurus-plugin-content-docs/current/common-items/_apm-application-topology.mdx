<Cmdname sid="application_topology" className="uitext" /> は、トランザクションのフローに関連するデータベースおよび外部サービス呼び出しを視覚的に表示します。  
ユーザーリクエストからデータベース呼び出し、外部サービス連携までの全経路を一目で把握でき、性能ボトルネックを簡単に発見できます。

- ユーザーリクエスト → DB/外部サービスまでの経路を可視化
- URL パターンによるフィルタリング検索
- トランザクション性能状態（遅延/エラーなど）の確認
- ボトルネック特定および詳細情報の確認

## トポロジー表示

時間範囲とアプリケーションを選択した後、以下のオプションで検索範囲を設定します。  
検索するたびに新しいタブで表示され、タブにマウスを乗せると検索条件のツールチップが表示されます。  
ツールチップ内のポップアウトボタンをクリックすると、該当条件のトポロジーが別ウィンドウで開きます。

### トランザクション URL 検索

特定の URL パターンに一致するトランザクションを呼び出したドメインのみを表示します。  
ワイルドカード（`*`）が使用できます。

**使用例**

- `/api/*`: `/api/` で始まるすべての URL  
- `*/users/*`: `users` を含むすべての URL  
- `/api/v1/users`: 完全一致

:::warning
**スラッシュ(`/`) とワイルドカード(`*`) の組み合わせに注意してください。**

- `/api/*`: `/api` は一致しない（例: 🔵 `/api/users`, ❌ `/api`）  
- `/api*`: `/api` 自体も一致（例: 🔵 `/api`, `/api/users`, `/apitest`）
:::

#### パターン制限

- **必ずワイルドカード以外の文字が 1 文字以上必要**
    - ❌ 不可: `***`, `**`
    - 🔵 可: `a*`, `*a`, `*a*`, `/api*`
- 空文字列や null は一致しない
- `**` は `*` と同じ扱い
- `*` を 3 個以上含む複雑なパターンは完全にはサポートされない
- 正規表現は非対応
- 大文字・小文字は区別される
- `*` 文字そのものをエスケープしてマッチさせることはできない

### トレース件数制限

取得する最大トランザクショントレース件数です。

- デフォルト: 10,000 件
- 最大: 1,000,000 件

:::caution
Limit を上げても、フィルタ条件に一致するすべてのトランザクションが取得されるとは限りません。  
上限に到達すると警告が表示されます。
:::

### 時間制限

時間制限に達すると、その時点までのデータのみ表示されます。

- 範囲: 30 秒 ～ 5 分
- デフォルト: 1 分

## 画面構成と可視化

画面には円形の **ノード** と、それらを結ぶ **接続線** によってトランザクションフローが表示されます。

<ImgLang img='app-topology.png' desc='アプリケーショントポロジー new' />

### ノード構造

ノードはトランザクションの実行フローに基づき、上から下へ配置されます。

#### ノードタイプ

User → TX → DB/HTTPC の順に配置。

| ノードタイプ | 説明 |
| --- | --- |
| **User** | トランザクションを呼び出したユーザー数 |
| **TX (Transaction)** | アプリケーションの HTTP トランザクション |
| **DB (Da**
