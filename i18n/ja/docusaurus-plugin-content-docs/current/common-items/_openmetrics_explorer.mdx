**オープンメトリクスエクスプローラー**は、Prometheus ベースのカスタムメトリクスを PromQL で直接探索し、さまざまな形式で可視化して、メトリクスの状態を確認したりインサイトを得たりできる機能です。  

この機能を利用することで、必要なメトリクスを自由に照会し、有意義なデータを抽出したり、ダッシュボードに連携して継続的にモニタリングできます。  

:::note

オープンメトリクスエクスプローラーを利用するには、Open Agent のインストールが必要です。  

* [WhaTap Operator のインストール](../kubernetes/install-whatap-operator) ドキュメントを参照してください。  

:::

## PromQL で探索する

**オープンメトリクスエクスプローラー**では、PromQL を実行し、さまざまな可視化オプションで結果を確認できます。  

<ImgLang img='openmetrics-explorer.png' desc='openmetrics-explorer' />

#### グラフ

* **Line**: デフォルトの時系列折れ線グラフ  
* **Bar**: 棒グラフ形式で可視化  
* **StackBar**: 積み上げ値を表示するスタック型棒グラフ  

#### テーブル / Raw

* **Table**: 各時系列の値を時間順に並べて表形式で表示  
* **Raw**: Prometheus API の応答 (JSON 形式) をそのまま確認可能  

### PromQL 文法サポートとオートコンプリート

`node_cpu_seconds_total` や `container_memory_usage_bytes` などを入力すると、オートコンプリート機能でメトリクスや演算子の候補が提示されます。  

`{pod="example"}` 形式のラベルフィルタリングにも対応しています。  

## ダッシュボードに追加する

照会した PromQL クエリをダッシュボードウィジェットとして保存し、対象メトリクスを継続的にモニタリングできます。  

### 追加方法

1. **オープンメトリクスエクスプローラー** 画面右上の **+ ダッシュボードに追加** ボタンをクリックします。  
2. **ダッシュボードに追加** ウィンドウで既存のダッシュボードを選択するか、新しいダッシュボードを作成します。  
3. **適用** ボタンをクリックすると、指定したダッシュボードにウィジェットが追加されます。  

    * 追加されたダッシュボードでウィジェット名と説明を入力できます。  
    * ウィジェットは Flex ボードのグリッドレイアウトで自由に配置でき、PromQL を修正できます。  
