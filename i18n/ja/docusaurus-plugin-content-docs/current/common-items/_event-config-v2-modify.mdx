## イベントの修正{#modify-event}

基本的にイベントテンプレートに適用される指標値を修正することで、警告通知の発生基準を変更できます。 その他にも、様々なオプション設定により通知の発生基準を変更できます。 修正したいイベント項目で![修正アイコン](/img/ico-edit.svg)ボタンを選択すると、イベント修正画面に移動します。 次の項目を順番に修正した上で<Cmdname sid="save" className="uitext" />ボタンを選択します。

### <Cmdname sid="TTL07362" /> {#TTL07362}

イベント発生の条件基準を設定できます。

<ImgLang img='event-config-v2-condition-common.png' desc='イベント条件の定義' />

- <Cmdname sid="simulation" className="uitext" />: イベント条件を設定した後、<Cmdname sid="simulation" className="uitext" />ボタンをクリックすると、設定したイベントの結果を予測できます。

  <ImgLang img='event-config-v2-simulation-common.png' desc='イベントシミュレーション' />

  :::note

  タイムセレクターの利用方法の詳細については、[次の文書](usage-ui#timeselector)を参照してください。

  :::

- <Cmdname sid="TTL07365" className="uitext" replace="</br>" />: <span class="slow">Warning</span>または<span class="vslow">Critical</span>通知に対するしきい値を設定できます。 演算子を設定し、しきい値を入力します。

  - 演算子の種類：`>`(より大きい)、`>=`(より大きいか等しい)、`<`(より小さい)、`<=`(より小さいか等しい)、`==`(等しい)

  - しきい値として正の数、負の数、0を入力できますが、選択したイベントテンプレートによって、負の数の入力可能有無は異なる場合があります。

  :::note

  - 提供されるイベントテンプレートによって、設定できる通知レベル(Level)は異なる場合があります。

  - <span class="slow">Warning</span>または<span class="vslow">Critical</span>レベルの1つだけを選択できますが、両方の項目を非活性化することはできません。

  :::

- <Cmdname sid="TTL07366" className="uitext" />：設定したイベント条件を満たす回数に応じて通知を送信できます。

  - <Cmdname sid="ITM07369" className="uitext" />：イベントが発生するたびに通知を送信します。

  - <Cmdname sid="TTL07366" className="uitext" />：入力した回数だけイベントが発生すると、通知を送信します。

- <Cmdname sid="TTL07367" className="uitext" />: 通知を受信した後、選択した時間の間には通知を送信しません。

  :::note

  <Cmdname sid="CNT08326" className="uitext" />機能を有効にした状態であれば<b>RECOVERED</b>状態の通知を送信した後、設定した時間の間には通知を送信しません。

  :::

- <Cmdname sid="CNT08326" className="uitext" />：オプションを有効にすると<Cmdname sid="side_eventHistory" className="uitext" />メニューで<Cmdname sid="in_progress" className="uitext" />のイベントで表示されます。 <span className="vslow">Critical</span>または<span className="slow">Warning</span>レベルのイベントが解消されると、正常(**RECOVERED**) ステータスの通知を受信します。 トグルボタンを選択し、機能をオンまたはオフできます。

  <ImgLang img="metric-warning-notice-new-recovered.png" desc="Resolved notification" />

  :::note

  <Cmdname sid="side_eventHistory" className="uitext" />メニューの詳細は[次の文書](set-event-history)を参照してください。

  :::

- ***イベント動作時間***: イベント動作時間タグを設定すると、そのタグを持つ通知は、その時間帯にのみイベントが動作します。\
  ***+ 追加***をクリックすると、***イベント動作時間***でタグリストを確認し、新しいタグを作成できます。 

  - タグ作成は***イベント動作時間***の***+ 新しいタグ作成***をクリックしてタグ名、曜日、時間、色を選択し、適用ボタンをクリックします。

  - タグの修正と削除はタグリストで![編集アイコン](/img/ico-edit.svg)をクリックします。

  <ImgLang img="event-operation-time.png" desc="Resolved notification" />

    :::warning

    イベント設定で使用中のタグは削除できません。

    :::

:::tip

通知を送信する基準は、次の条件によって異なります。

| <Cmdname sid="TTL07366" className="uitext" />                                                 | <Cmdname sid="CNT08326" className="uitext" /> | 動作                                                       |
| --------------------------------------------------------------------------------------------- | :-------------------------------------------: | -------------------------------------------------------- |
| <Cmdname sid="ITM07369" className="uitext" />                                                 |                     **On**                    | 設定したイベント条件を満たすか、解消したら通知を送信します。                           |
| ^                                                                                             |                    **Off**                    | 設定した条件を満たすたびに通知を送信します。                                   |
| <Cmdname sid="TTL07366" className="uitext" /> N <Cmdname sid="ITM07370" className="uitext" /> |                     **On**                    | N回以上の条件を満たしたり、N回以上イベントが解消されると通知を送信します。                   |
| ^                                                                                             |                    **Off**                    | N回以上設定したイベント条件を満たすと通知を送信します。 通知を送信した後、回数を初期化して回数を再集計します。 |

:::

### <Cmdname sid="TTL07363" /> {#TTL07363}

<InDoc product="java,php,python,nodejs,dotnet,golang,kubernetes">

特定のエージェントでのみ発生するイベントを通知で送信するように設定できます。 <Cmdname sid="TLT07556" className="uitext" />アイテムをクリックして、目的のエージェントを選択します。

<ImgLang img='event-config-v2-target-apm.png' desc='イベント対象の選択' />

</InDoc>

<InDoc product="mysql,postgresql,oracle,mssql,mssql-v1,cubrid,tibero,altibase,redis,oracle-v1,oracle-pro">

特定のエージェントでのみ発生するイベントを通知で送信するように設定できます。 <Cmdname sid="TLT07556" className="uitext" />アイテムをクリックして、目的のエージェントを選択します。 エージェントを選択し、接続されたDBサーバーのデータベース名(***DbName***)を追加で選択することもできます。

<ImgLang img='event-config-v2-target-db.png' desc='イベント対象の選択' />

</InDoc>

<InDoc product="db2,sapase">

特定のエージェントでのみ発生するイベントを通知で送信するように設定できます。 <Cmdname sid="TLT07556" className="uitext" />アイテムをクリックして、目的のエージェントを選択します。

<ImgLang img='event-config-v2-target-db2.png' desc='イベント対象選択' />

</InDoc>

<InDoc product="server">

特定のエージェントでのみ発生するイベントを通知で送信するように設定できます。 <Cmdname sid="TLT07557" className="uitext" />アイテムをクリックして、目的のエージェントを選択します。

<ImgLang img='event-config-v2-target-server.png' desc='イベント対象の選択' />

</InDoc>

<InDoc product="browser">

特定のページグループでのみ発生するイベントを通知で送信するように設定できます。 <span class="uitext">Page_group</span>項目をクリックし、目的のページグループを選択します。

<ImgLang img='event-config-v2-target-browser.png' desc='イベント対象の選択' />

</InDoc>

<InDoc product="npm">

特定のターゲットでのみ発生するイベントを通知で送信するように設定できます。 <Cmdname sid="ITM07588" className="uitext" />の各アイテムをクリックして、目的のターゲットを選択します。

<ImgLang img='event-config-v2-target-npm.png' desc='イベント対象の選択' />

:::tip

選択できるターゲットは、**tagRule**オプションで適用したグループ化されたモニタリング単位です。 **tagRule**オプションの詳細については、[次の文書](set-tagrule)を参考にしてください。

:::

</InDoc>

:::note

- 提供されるテンプレートによって、選択できるターゲットは異なる場合があります。

- 選択したターゲットに対するイベント発生状況を確認するには、<Cmdname sid="TTL07362" className="uitext" />で<Cmdname sid="run" className="uitext" />ボタンを選択します。

<Xclude product="browser,npm">

- ターゲットを選択しない場合は、プロジェクトに含まれるすべてのエージェントに通知を送信します。 すべてのエージェントに対してイベントが実行されると、多くの通知が発生する可能性があります。

</Xclude>

<InDoc product="browser">

- ターゲットを選択しない場合は、ページグループ全体に通知を送信します。 すべてのページグループに対してイベントが実行されると、多くの通知が発生する可能性があります。

</InDoc>

<InDoc product="npm">

- ターゲットを選択しない場合は、ネットワークグループ全体に通知を送信します。 ネットワークグループ全体に対してイベントが実行されると、多くの通知が発生する可能性があります。

</InDoc>

:::

### <Cmdname sid="TTL07364" /> {#TTL07364}

通知で受信されるイベントのタイトルとメッセージを作成し、受信対象を選択できます。

<ImgLang img='event-config-v2-info-receive-common.png' desc='基本情報と通知設定' />

- <Cmdname sid="enable_events" className="uitext" />：現在のイベントを活性化することができます。

- <Cmdname sid="event_title" className="uitext" />：基本的に提供されたテンプレートのイベント名が入力されています。 ユーザーが希望するイベント名で編集できます。

- <Cmdname sid="TTL06883" className="uitext" />：基本的に提供されたテンプレートのメッセージが入力されています。 ユーザーが希望するメッセージに編集できます。 <LinkImage img="ico-timing.svg" className="ico" desc="時間アイコン" />ボタンをクリックすると、以前に入力したメッセージの履歴を確認できます。

  :::tip

  メッセージ入力ウィンドウに<code>&#36;&#123;Tag&#125;</code>または<code>&#36;&#123;Field&#125;</code>変数を入力してメッセージを作成できます。

  <Cmdname sid="analysis" className="uitext" /> &gt; <Cmdname sid="tag_count" className="uitext" />メニューで<Cmdname sid="category" className="uitext" />を選択した上で入力できる<code>&amp;#36;&amp;#123;Tag&amp;#125;</code>または<code>&amp;#36;&amp;#123;Field&amp;#125;</code>変数を確認してください。 現在のイベントテンプレートの<Cmdname sid="category" className="uitext" />名前は、<Link to="#basic-template">次の文書</Link>の<b>カテゴリ</b>項目を参考にしてください。

  :::

- <Cmdname sid="alert_test" className="uitext" />：現在のイベントで発生する通知受信時に入力したイベント名とメッセージを事前にチェックすることができます。 必須項目(<Cmdname sid="TTL07365" className="uitext" replace="</br>" />、<Cmdname sid="event_title" className="uitext" />、<Cmdname sid="TTL06883" className="uitext" />)をすべて入力しないとテストできません。

  :::note

  - テスト中は、実際のメトリクス値や変数への置換機能が機能しません。 

  - <Cmdname sid="TTL07415" className="uitext" />オプションで、受信者タグが設定されているユーザーに限ってテスト通知を送信します。 <Cmdname sid="ITM07419" className="uitext" />を選択すると、すべてのユーザーにテスト通知を送信します。

  :::

- <Cmdname sid="TTL07415" className="uitext" />：現在イベントで発生している通知を受信するメンバーを選択できます。

  - <Cmdname sid="ITM07419" className="uitext" />：プロジェクトに所属するメンバー全員に通知を送信します。

  - <Cmdname sid="ITM07420" className="uitext" />：選択したタグを持つプロジェクトメンバーと3rd-partyプラグインに通知を送信します。 <Cmdname sid="add_tag" className="uitext" />または<LinkImage img="ico-add.svg" className="ico" />ボタンをクリックして、タグ一覧で目的のタグを選択します。

  :::note

  <Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="eventNoti" className="uitext" />メニューでプロジェクトメンバーと3rd-partyプラグインにタグを設定できます。 詳細については、<Link to="set-receive-event#set-notice-by-team-or-users">次の文書</Link>を参照してください。

  :::
