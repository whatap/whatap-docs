import ProcessColumns from "../common-items/_db-process-column.mdx";

<Title hashid='column-info' level={props.level}>カラム情報ガイド</Title>

<Tabs groupId="db-columns">

<TabItem value="activesession" label="Active session">

| 項目                | 説明                                                                                                  |
| ----------------- | --------------------------------------------------------------------------------------------------- |
| `db`              | データベース名                                                                                             |
| `user`            | SQL実行アカウント                                                                                          |
| `application`     | クライアントアプリケーション名                                                                                     |
| `client_host`     | 接続されたクライアントのホスト名(`client_addr`の逆引きDNS参照で報告されます)                                                     |
| `client_addr`     | クライアントのIPアドレス                                                                                       |
| `client_port`     | クライアントのポート番号(Unixソケットを使用する場合は-1)                                                                    |
| `query_hash`      | クエリのハッシュ値(WhaTap内部管理値)                                                                              |
| `query_start`     | 現在アクティブ状態のクエリが開始された時間(アクティブ状態でない場合、最後にクエリが開始された時間)                                                  |
| `state`           | バックエンドプロセスの現在の状態(active/idleなど)                                                                     |
| `state_change`    | stateが変更された最近の時間                                                                                    |
| `xact_start`      | そのプロセスの現在のトランザクションが開始された時間(アクティブトランザクションがない場合は`null`)                                               |
| `backend_start`   | そのバックエンドプロセスが開始された時間                                                                                |
| `backend_xmin`    | バックエンドプロセスが処理中の`xid`の最小値                                                                            |
| `backend_type`    | バックエンドプロセスのタイプ、`autovacuum worker`、`logical replication launcher`、`client backend`、`checkpointer`など |
| `backend_xid`     | バックエンドが使用中の`xid`                                                                                    |
| `wait_event_type` | バックエンドプロセスが待機中のイベント`type`                                                                           |
| `wait_event`      | バックエンドプロセスが現在待機中の場合は、待機イベント名                                                                        |

:::note

WhaTapは、クライアントに関する情報をデフォルトで保存します。

:::

</TabItem>

<TabItem value="locktree" label="Lock tree">

| 項目                | 説明                                                                                                                                                                                                                           |
| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Instance          | インスタンス（エージェント）名                                                                                                                                                                                                              |
| pid               | セッションID                                                                                                                                                                                                                      |
| lock_mode         | ホルダーセッションのロックモード<br />- RowExclusiveLock：INSERT、UPDATE、DELETE<br />- AccessExclusiveLock：DDL（ALTER、DROP、TRUNCATE など）によるロック<br />- AccessShareLock：SELECT 時に使用 ほとんどすべてのロックと共存可能<br />- ShareLock：LOCK TABLE ... IN SHARE MODE |
| holder_relation   | ロックを保有しているセッションがアクセス中のテーブル名またはオブジェクト識別子                                                                                                                                                                                      |
| waiter_type       | ロックがどの対象に対してかかっているかを示します<br />- relation：テーブルにかかっているロック<br /> tuple：特定の行（row）にかかっているロック<br /    >- transactionid：トランザクションにかかっているロック                                                                                          |
| waiter_relation   | ロックを待機しているセッションがアクセス中のテーブル名またはオブジェクト識別子                                                                                                                                                                                      |
| lock_request      | ロックを待機しているセッションのロックモード<br />lock_mode を参照                                                                                                                                                                                    |

</TabItem>

<TabItem value="process-info" label="Process information">

<ProcessColumns />

</TabItem>
</Tabs>
