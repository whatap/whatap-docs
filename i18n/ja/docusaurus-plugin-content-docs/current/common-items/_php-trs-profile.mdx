import Phprestartapply from "./_php-restart-apply.mdx";

- **whatap.profile_step_normal_count** <span class='type'>Int</span>

  既定値 `1000`

  トランザクショントレースの最大ステップ数を指定します。

- **whatap.profile_step_max_count** <span class='type'>Int</span>

  既定値 `1024`

  収集可能なトレースステップの最大数を設定します。収集されたトレースステップの数がこの値を超えると、その後収集されるステップはすべて捨てられます。

- **whatap.profile_step_heavy_count** <span class='type'>Int</span>

  既定値 `1000`

  基本ステップの収集数を超えるた場合は、実行時間が`profile_step_heavy_time`を超えるステップのみを収集します。そのステップの収集可能な数を設定します。Default設定の`profile_step_normal_count`が800の場合、最大200個のステップが収集されます。

- **whatap.profile_step_heavy_time** <span class='type'>Millisecond</span>

  既定値`100`

  Heavyなステップの基準を指定します。指定された値より実行時間が長い場合は、`profile_step_normal_count`を超える場合でも`profile_step_heavy_count`以内で記録されます。

- **whatap.profile_basetime** <span class='type'>Millisecond</span>

  既定値`500`

  トランザクションが設定値以下の時間内に終了した場合、トレース情報を収集しません。ただし、5分単位で最初に呼び出されたURL、エラーが発生したトランザクションに関するトレース情報は収集されます。

- **whatap.query_string_enabled** <span class='type'>Boolean</span>

  既定値`false`

  トランザクションURLのクエリストリングをまとめて収集する機能を有効にします。`whatap.query_string_urls`に登録されたURLのみ適用されます。

- **whatap.query_string_urls** <span class='type'>String</span>

  トランザクションからクエリストリングを収集するURLを登録します。

- **whatap.whatap.profile_compile_file_enabled** <span class='type'>Boolean</span>

  既定値`false`

  `compile_file`、`compile_string` 関数が追跡されるかどうかを設定します。PHPの内部関数である`compile_file`、`compile_string` 関数はスクリプトを実行する前にコンパイルする関数で、Main、include、requireおよびautoloadスクリプトのコンパイル時間およびスクリプトファイルのパスと実行時間を確認できます。

  <Phprestartapply />

- **whatap.profile_compile_file_basetime** <span class='type'>Millisecond</span>

  既定値`200`

  実行時間の基準を設定します。設定した時間を超えて発生した場合のみ、情報を収集します。

  :::caution

  `whatap.profile_compile_file_basetime`を小さく設定しすぎると、過剰な収集でサーバーに負荷をかける可能性があります。

  :::

  <Phprestartapply />

- **whatap.profile_method_enabled** <span class='type'>Boolean</span>

  既定値 `true`

  実行時間が`whatap.profile_method_time`の設定値(既定値`1秒`)を超えるユーザ関数の情報をトランザクション詳細情報を確認できます。

  <Phprestartapply />

- **whatap.profile_method_time** <span class='type'>Milliseconds</span>

  既定値 `1000`

  `whatap.profile_method_enabled`設定で収集される関数の実行時間を設定します。 

  <Phprestartapply />

- **whatap.profile_method_stack_enabled** <span class='type'>Boolean</span>

  既定値`false`

  ユーザー関数のスタック情報をトランザクションの詳細から確認できます。

  <Phprestartapply />

- **whatap.profile_internal_method_enabled** <span class='type'>Boolean</span>

  既定値`false`

  PHP内部関数を追跡するかどうかを設定します。`whatap.profile_internal_method_time`の設定値(既定値`1秒`)より長くかかる場合のみ追跡します。

  :::caution

  このオプションは、ユーザ定義関数ではなく、PHPの内蔵関数をすべて確認するため、性能に負荷が発生する可能性があります。

  :::

  <Phprestartapply />

- **whatap.profile_internal_method_time** <span class='type'>Milliseconds</span> 

  既定値 `1000`

  PHP内部関数を追跡する場合、(`whatap.profile_internal_method_enabled`)関数の実行時間を設定します。 

  <Phprestartapply />

- **whatap.profile_internal_method_param_enabled** <span class='type'>Milliseconds</span>

  既定値 `1000`

  PHPの内部関数を追跡する場合、(`whatap.profile_internal_method_enabled`)追加で関数のパラメータ情報を収集します。

  <Phprestartapply />

- **whatap.net_udp_flush_start** <span class='type'>Boolean</span>

  既定値 `true`

  値が`false`の場合、トランザクションの開始ポイントは収集しません。

  :::note

  開始時点で収集されていないため、進行中のトランザクション数を計算するアクティブトランザクション情報が少し遅れて反映される可能性があります。アクティブステータスは通常通り表示されます。

  :::

- **whatap.net_udp_profile_basetime_enabled** <span class='type'>Boolean</span>

  既定値`false`

  値が`true`の場合、設定された応答時間より速いトランザクションのトレース情報は収集しません。

- **whatap.net_udp_profile_basetime** <span class='type'>Miliseconds</span>

  既定値`false`

  トレース情報の収集を除外するトランザクションの応答時間を設定します。

  :::note

  トレース情報を収集しないため、SQL、HTTPCなどの統計には反映されません。

  :::

- **whatap.net_udp_trace_ignoretime_enabled** <span class='type'>Boolean</span>

  既定値`false`

  値が`true`の場合、設定された応答時間を要するトランザクションおよびトレース情報を収集しません。

- **whatap.net_udp_trace_ignoretime** <span class='type'>Miliseconds</span>

  既定値`30`

  トランザクションおよびトレース情報の収集を除くトランザクションの応答時間を設定します。

- **whatap.shm_tx_counter_enable** <span class='type'>Boolean</span>

  既定値`false`

  値が`true`であれば、`whatap.net_udp_trace_ignoretime_enabled`設定でトランザクションの情報収集が除外される場合、TPS、平均応答時間、Apdex指標を共有メモリから収集すると、除外されたトランザクションの情報が統計に反映されます。

  :::note

  収集されていないトランザクションの場合、TPS、平均応答時間、Apdex指標に反映されますが、その他の統計データには反映されません。

  :::

- **whatap.split_profile_enabled** <span class='type'>Boolean</span>

  既定値`false`

  一定量のプロファイルを仮想トランザクションに分割して、より多くのプロファイル情報を収集します。複数のトランザクション一覧に分割されます。

  :::note

  同時に設定された場合、優先順位は次の通りです。 

  1\. split

  2\. large

  3\. circular

  :::

- **whatap.large_profile_enabled** <span class='type'>Boolean</span>

  既定値`false`

  一定量のプロファイルを圧縮および分割して、メモリを増やことなく多くのプロファイル情報を収集できます。

  :::note

  - 約1万件のプロファイル(ステップ) 情報を収集できます。大量の場合は、`whatap.split_profile_enabled`オプションの使用をお勧めします。

  - 同時に設定された場合、優先順位は次の通りです。 

    1\. split

    2\. large

    3\. circular

  :::

- **whatap.circular_profile_enabled** <span class='type'>Boolean</span>

  既定値`false`

  最新の1024個のプロファイリング情報を収集します。 

  :::note

  同時に設定された場合、優先順位は次の通りです。 

  1\. split

  2\. large

  3\. circular

  :::

- **whatap.profile_zip_enabled** <span class='type'>Boolean</span>

  既定値 `true`

  プロファイル情報を圧縮して送信します。既定値は、`true`に設定されています。 
