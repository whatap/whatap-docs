DBXエージェントの構成ファイルで*setup.sh*ファイルを実行すると、エージェントの設定が簡単に行われます。

## ファイルの圧縮を解凍する

ダウンロードしたDBXエージェントファイルの解凍します。

```bash title="BASH"
tar -zxvf whatap.agent.database.tar.gz
```

## setup.shを実行する

*setup.sh*ファイルを実行し、画面の案内に従ってエージェントの設定及びDBサーバーの情報入力、JDBCダウンロード、モニタリング用のアカウント作成及び権限設定を行います。 必要な情報を入力すると、すべての設定を自動的に完了できます。

```bash title="BASH"
./setup.sh
```

![setup.sh](/img/db-install-agent-run-setup.png)

:::note

エージェントの設定を中止する場合は、「q」または 「quit」を入力し、Enterキーを入力します。

:::

### STEP1 Register WhaTap server information

```text title="BASH"
WhaTap Server Ip?
WhaTap Server Port (default 6600)?
```

WhaTapのサーバー情報を入力します。 <Cmdname sid="side_management" className="uitext" /> &gt; <Cmdname sid="side_agentInstall" className="uitext" />メニューの<Cmdname sid="dbx_agent_setting" className="uitext" />セクションからWhaTapのサーバーIPアドレスとポート番号が確認できます。

WhaTapサーバーポートの既定値は6600です。 何も入力せずにEnterキーを入力すると、既定値に設定されます。

### STEP2 Register WhaTap server access key

```text title="BASH"
WhaTap Project Access Key?
```

プロジェクトアクセスキーを入力します。  <Cmdname sid="side_management" className="uitext" /> &gt; <Cmdname sid="side_agentInstall" className="uitext" />メニューの<Cmdname sid="TTL07850" className="uitext" />セクションで<Cmdname sid="copy" className="uitext" />ボタンを選択して貼り付けします。

正確なアクセスキーを入力すると、そのプロジェクトのコードが出力されます。

### STEP3 Register DB server information (ip/port check)

```text title="BASH"
Monitoring DBMS type?
Monitoring DBMS Server Ip?
Monitoring DBMS Server Port?
```

モニタリングするDBサーバーの情報を入力します。

- **Monitoring DBMS type**：画面に表示されているデータベースの種類を選択します。

- **Monitoring DBMS Server IP**：データベースサーバーのIPアドレスを入力します。

- **Monitoring DBMS Server Port**：データベースサーバーのポート番号を入力します。

:::note

データベースサーバーのIPアドレスとポート番号を入力してから、接続状態を検証します。 間違った情報を入力した場合は、IPアドレスとポート番号を再度入力します。

:::

### STEP4 Download jdbc driver

DBXエージェントのパスにDBサーバーのOSとバージョンに合わせてJDBCドライバーを自動的にダウンロードします。

### STEP5 Register a monitoring account

```text title="BASH"
Monitoring Database Name?
Monitoring User ID?
Monitoring User {user_id}'s Password?
Connecting DBMS Server with SSL (default false)?
```

DB接続のために暗号化されたUIDを生成する手順です。 [アカウント作成](install-agent#uid) セクションで作成したアカウント情報を入力します。

- **Monitoring Database Name**：モニタリングするデータベースの名前を入力します。

- **Monitoring User ID** / **Monitoring User \{user_id\}'s Password**：アカウントIDとパスワードを入力します。 パスワードは暗号化し、保存されます。

- **Connecting DBMS Server with SSL**：SSLプロトコルを利用してデータベースサーバーに接続する場合、`true`を入力します。 既定値は`false`です。

## エージェントを実行する

*setup.sh*ファイルを利用してエージェントのインストールプロセスを完了したら、データベース情報と*whatap.conf*ファイルに設定した内容が出力されます。

![setup.sh](/img/db-install-agent-run-setup-complete.png)

エージェントをデーモンのように使用する場合は、最後の項目で「y」を入力します。

## 次の段階

- エージェント設定が完了したら、[次の文書](after-install-agent)を参照の上、インストール後のチェックリストを確認します。

- 追加のエージェント(XOS)をインストールし、DBサーバーのリソースをモニタリングするには、[次の文書](install-agent#apply-xos-agent)を参照します。
