## テンプレート {#template}

ユーザーが簡単にアラート通知を設定できるように、メトリクスイベントのテンプレートを提供します。

### メトリクスイベントテンプレート {#template-metrics}

<Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="event_setting" className="uitext" /> &gt; <Cmdname sid="metrics" className="uitext" />タブで<Cmdname sid="metrics" className="uitext" />セクションの<span class="uitext">+</span> <Cmdname sid="add_notification" className="uitext" />ボタンを選択します。 <Cmdname sid="template" className="uitext" />オプションでご希望の項目を選択します。 以下は、選択できるテンプレートの一覧です。

:::note

選択したテンプレートの<Cmdname sid="metrics_event_rules" className="uitext" />はユーザーが修正できます。

:::

<Xclude product="redis">

- <Cmdname sid="cpu_usage" className="uitext" /><span class="uitext">_Warning</span>

  条件：`cpu(xos)` \> 70

  個々のインスタンスでCPU使用率が70%を超えると、<span class='slow'>Warning</span>(アラート) レベルの通知が送信されます。

- <Cmdname sid="memory_usage" className="uitext" /><span class="uitext">_Warning</span>

  条件: `mem(xos)` \> 70

  個々のインスタンスでメモリ使用量が70%を超えると、<span class='slow'>Warning</span>(アラート) レベルの通知が送信されます。

</Xclude>

<Xclude product="redis,mongodb">

- **Active Session_Warning**

  条件: `active_sessions` \> 30

  個々のインスタンスでアクティブなセッション数が 30 を超えると、<span class='slow'>Warning</span>(アラート) レベルの通知が送信されます。

- **Lock Wait_Warning**

  条件: `lock_wait_sessions` \> 3

  個々のインスタンスで待機中のセッション数が 3 つ以上を超えると、<span class='slow'>Warning</span>(アラート) レベルの通知が送信されます。

- **Long Query_Warning**

  条件: `long_running_sessions` \> 3

  個々のインスタンスで実行時間の長いセッション数が 3 つ以上を超えると、<span class='slow'>Warning</span>(アラート) レベルの通知が送信されます。

</Xclude>

<InDoc product="postgresql">

- <Cmdname sid="TTL07136" className="uitext" /><span class="uitext">_Warning</span>

  条件: (`total_sessions` / `max_connections` \* 100) \> 90

  個々のインスタンスで実行時間の長いクエリ数が80%を超えると、<span class='slow'>Warning</span>(アラート) レベルの通知が送信されます。

- <Cmdname sid="TTL07137" className="uitext" /><span class="uitext">_Warning</span>

  条件：`blks_hit_ratio` \<\= 80

  個々のインスタンスでMemory Block Hit率が80%以下の場合、<span class='slow'>Warning</span>(アラート) レベルの通知が送信されます。

- <Cmdname sid="TTL07138" className="uitext" /><span class="uitext">_Warning</span>

  条件：`replication_delay` \>\= 10

  個々のインスタンスでreplicationデータベースに反映される遅延時間が10秒以上ある場合、<span class='slow'>Warning</span>(アラート) レベルの通知が送信されます。

</InDoc>

<InDoc product="oracle,oracle-v1,oracle-pro">

- <Cmdname sid="TTL08553" className="uitext" /><span class="uitext">_Warning</span>

  条件: `(used / size * 100 >= 90) && (datfile == 'ALL')`

  テーブルスペースの使用率が90%以上であれば、<span class='slow'>Warning</span>(警告) レベルの通知を送信します。

</InDoc>

<InDoc product="redis">

- <span className="uitext">Redis</span> <Cmdname sid="memory_usage" className="uitext" /><span class="uitext">_Warning</span>

  条件: (`used_memory` \/ `maxmemory` \* 100) \> 80

  個々のインスタンスでメモリ使用率が 80% を超えると、<span class='slow'>Warning</span>(警告) レベルの通知を送信します。

- **evicted key_Warning**

  条件: `evicted_keys` \> 10

  個別のインスタンスで削除されたキーが10を超えて発生した場合は、<span class='slow'>Warning</span>(警告) レベルの通知を送信します。

</InDoc>

<InDoc product="mongodb">

- **Active Connection_Warning**

  条件: `active$connections` \> 30

  個々のインスタンスで、現在作業中のクライアントの接続数が30を超えると、<span class='slow'>Warning</span>(警告) レベルの通知を送信します。

</InDoc>

<InDoc product="postgresql">

### 複合メトリクスのイベントテンプレート{#composite-metrics-template}

<Cmdname sid="event_statistic" className="uitext" /> &gt; <Cmdname sid="event_setting" className="uitext" /> &gt; <Cmdname sid="metrics" className="uitext" />タブで<Cmdname sid="composite_metrics" className="uitext" />セクションの<span class="uitext">+</span> <Cmdname sid="add_notification" className="uitext" />ボタンを選択します。 <Cmdname sid="template" className="uitext" />オプションでご希望の項目を選択します。 以下は、選択できるテンプレートの一覧です。

- **Replication Broken**

  個々のエージェントのReplcation状態がBrokenまたはFalloverの場合、<span class='vslow'>Critical</span>(危険) レベルの通知が送信されます。

- <Cmdname sid="TTL07141" className="uitext" />

  60秒以上コミットされていないセッションが 2 つ以上を超えると、<span class='slow'>Warning</span>(アラート) レベルの通知が送信されます。

</InDoc>
