## whatap.confファイルを設定する

### 基本情報を入力する

圧縮を解いた`$WHATAP_HOME`パスに移動してください。_$WHATAP_HOME/whatap.conf_ファイルにアクセスキーとデータ収集サーバーのIPアドレスを入力します。[WhaTapモニタリングサービス](https://service.whatap.io)画面に移動し<Cmdname sid="agent-setup-guide" className="uitext" />セクションの<Cmdname sid="JAVA-agent-setup-1-subject" className="uitext" />項目から**アクセスキー**、**収集サーバIPアドレス**値をコピーして貼り付けてください。

```ini title=$WHATAP_HOME/whatap.conf
license={アクセスキー}
whatap.server.host={収集サーバーIP}
```

:::note

*whantap.conf*ファイルの詳細については、[次の文書](set-agent)を参照してください。

:::

### セキュリティキーの設定{#security}

SQL変数、HTTPクエリを検索、Thread停止機能を使用する場合は、セキュリティキーを設定してください。

- Javaエージェント2.2.2バージョン以降

  `$WHATAP_HOME`パスに*security.conf*ファイルを作成した後、次のように 6桁の英数字のパスワードを入力します。

  ```ini title='security.conf'
  paramkey=ABCDEF # SQL変数およびHTTPクエリの検索
  threadkill=ABCDEF # Thread停止機能
  ```

- Javaエージェント2.2.2バージョン未満

  `$WHATAP_HOME`パスに*paramkey.txt*ファイルを作成した後、次のように 6桁の英数字のパスワードを入力します。

  ```ini title='paramkey.txt'
  ABCDEF # SQL変数およびHTTPクエリの検索、スレッド停止機能
  ```

:::tip

Javaエージェント 2.2.2 のバージョン未満から2.2.2バージョンにアップデートする場合、既存の*paramkey.txt*ファイルの設定値は、*security.conf*ファイルに自動的に適用されます。例えば、*paramkey.txt*の設定値が`FEDCBA`で、バージョン2.2.2にアップデートすると、*security.conf*ファイルが次のように適用されます。

```ini
paramkey=FEDCBA
threadkill=FEDCBA
```

*paramkey.txt*ファイルが存在しない場合、*security.conf*ファイルのキー値は、**WHATAP**というキー値で自動的に生成されます。

:::

:::note

- SQLパラメータ情報の記録に関するエージェント設定は、[次の文書](agent-dbsql#profile-sql-param)を参照にしてください。

- HTTPパラメータ情報の記録に関するエージェント設定は、[次の文書](agent-transaction#profile_http_parameter)を参照にしてください。

:::
