ホーム画面 &gt; プロジェクト選択 &gt; <Cmdname sid="side_analysis" className="uitext" /> &gt; <Cmdname sid="side_dbSqlAnalysis" className="uitext" />

データベースで実行される SQL 文を分析し、パフォーマンス問題を診断するための有用な情報を提供します。  
<Cmdname sid="side_dbSqlPlanAnalysis" className="uitext" /> は [Access Statistics](#access_statistics) タブと [Plan Change History](#plan_change_history) タブで構成されています。

## Access Statistics {#access_statistics}

**Access Statistics** タブでは、SQL ごとの Full Scan の発生時点、種類、回数を確認できます。  
頻繁に Full Scan が発生するクエリは、インデックスを使用するように修正することで、パフォーマンスを改善し、リソース使用量を削減できます。

1. <Cmdname sid="side_analysis" className="uitext" /> > <Cmdname sid="side_dbSqlPlanAnalysis" className="uitext" /> の **Access Statistics** タブに移動します。

1. 照会時間とインスタンスを選択します。

1. <Cmdname sid="time" className="uitext" /> および <Cmdname sid="instance" className="uitext" /> オプションを設定し、![検索アイコン](/img/ico-btn-search.png) ボタンをクリックします。  
   必要に応じて、<Cmdname sid="filter" className="uitext" /> オプションを設定して結果をフィルタリングできます。

1. **Access Count** と **Operation Count** セクションで検索結果を確認します。

    * **Access Count**: 時間帯ごとの Full Scan 発生回数を表示する棒グラフです。  
      特定の時間帯を選択すると、その時間に実行された SQL の一覧が画面下部に表示され、右側の **Operation Count** チャートも更新されます。

    * **Operation Count**: Full Scan が発生した種類とその回数を確認できます。  
      各バーにマウスを重ねるとオブジェクト名が表示されます。

        ![Operation Count](/img/db-analysis-sql-access-statistics-op-count.png)

import QueryDetails from "../common-items/_db-query-details.mdx";

<InDoc product="oracle">

<QueryDetails level={3} />

</InDoc>

<InDoc product="oracle-pro">

:::note

- テーブル一覧で**query_text**項目を選択すると<Cmdname sid="TTL06224" className="uitext" />画面が表示されます。

:::

</InDoc>

### 参照結果フィルタリング

取得結果は次の基準でフィルタリングできます。

* **Access Type**: **Full Scan** または **Index Scan** を基準に結果をフィルタリング 

* **Object Name**: オブジェクト名を基準にフィルタリング

#### Access Typeフィルター条件を追加する

1. 画面上部の <Cmdname sid="filter" className="uitext" /> オプションで、<LinkImage img="ico-add.svg" className="ico" /> ボタンをクリックします。

1. <Cmdname sid="TTL06737" className="uitext" /> で **Access Type** 項目と <Cmdname sid="equal" className="uitext" /> 条件を選択し、**FULL** または **INDEX** を選びます。

1. <Cmdname sid="apply" className="uitext" /> ボタンをクリックします。

1. 選択した条件を SQL 一覧に反映するには、![検索アイコン](/img/ico-btn-search.png) ボタンをクリックします。

:::note

Full Scan、Index Scanをすべて検索するには、<Cmdname sid="TTL06737" className="uitext" />で**FULL**、**INDEX**オプションをすべて選択します。 または![プラスアイコン](/img/ic-s-plus.svg)ボタンを選択してフィルターオプションを追加できます。

:::

#### Object Nameフィルター条件を追加する

1. 画面上部の <Cmdname sid="filter" className="uitext" /> オプションで、<LinkImage img="ico-add.svg" className="ico" /> ボタンをクリックします。

1. <Cmdname sid="TTL06617" className="uitext" /> で **Object Name** 項目と <Cmdname sid="equal" className="uitext" /> 条件を選択します。

1. 空の入力欄をクリックし、表示されたオブジェクトリストから目的のオブジェクト名を選択します。

1. <Cmdname sid="apply" className="uitext" /> ボタンをクリックします。

1. 選択した条件を SQL 一覧に反映するには、![検索アイコン](/img/ico-btn-search.png) ボタンをクリックします。

:::note

**フィルター条件の追加と削除**

* フィルタリング条件を追加するには、<Cmdname sid="bsm_button_add" className="uitext" /> ボタンをクリックし、手順 1～5 を繰り返します。追加された条件は AND（`&&`）条件として適用されます。

* 条件追加中に一部の項目を削除する場合は、フィルター条件の右側にある ![削除アイコン](/img/ico-trash.svg) ボタンをクリックします。すべての条件を削除するには、![削除アイコン](/img/ico-trash.svg) <Cmdname sid="BTN06616" className="uitext" /> ボタンをクリックします。

* <Cmdname sid="filter" className="uitext" /> オプションに適用された条件をすばやく削除するには、<LinkImage img="ico-close.svg" className="ico" /> ボタンをクリックします。

:::

#### フィルター条件を修正する

1. 画面上部の <Cmdname sid="filter" className="uitext" /> オプションで、適用されている項目をクリックします。

1. <Cmdname sid="TTL06737" className="uitext" /> ウィンドウで目的の項目を修正し、<Cmdname sid="apply" className="uitext" /> ボタンをクリックします。

## Plan Change History {#plan_change_history}

**Plan Change History** タブでは、同じ SQL ID でも実行計画が変更されるとパフォーマンスに影響を与える可能性があります。  
オプティマイザーによるプラン変更を検知・監視することで、不要な変更を防ぎ、SQL パフォーマンスの一貫性を維持できます。

1. <Cmdname sid="side_analysis" className="uitext" /> > <Cmdname sid="side_dbSqlPlanAnalysis" className="uitext" /> の **Plan Change Historys** タブに移動します。

1. 照会時間とインスタンスを選択します。

1. <Cmdname sid="time" className="uitext" /> および <Cmdname sid="instance" className="uitext" /> オプションを設定し、![検索アイコン](/img/ico-btn-search.png) ボタンをクリックします。

1. **Plan Change Count** セクションで特定の時間帯を選択すると、その時間に発生したプラン変更の一覧が表示されます。

   - **Plan Change Count** セクション: 時間帯ごとに発生したプラン変更の回数を確認できる棒グラフチャートです。

### Plan変更事項を確認する

1. <Cmdname sid="side_dbSqlPlanAnalysis" className="uitext" /> の **Plan Change Historys** タブの一覧から特定の変更項目をクリックします。

1. **Query** セクションに、プラン変更前後の詳細が表示されます。  
   プランの差分を比較して、パフォーマンス変化の原因を特定できます。

    * **Query** セクションの右上にある ![新しいウィンドウアイコン](/img/ic-popup.svg) ボタンをクリックすると、そのセクションを新しいウィンドウで確認できます。

1. **Query** セクションを閉じるには、右上の ![閉じるアイコン](/img/ico-close.svg) ボタンをクリックします。