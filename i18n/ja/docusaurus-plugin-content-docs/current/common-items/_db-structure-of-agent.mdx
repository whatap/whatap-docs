## エージェント構成

以下は、WhaTapエージェントの構成図です。 

<Xclude product='cubrid,oracle-pro,mssql'><ImgLang img='agent-xos-architecture.png' desc='エージェント構成図' /></Xclude>

<InDoc product='cubrid'><ImgLang img='dbx-install-agent-on-agent-server-cubrid.png' desc='エージェント構成図' /></InDoc>

<InDoc product="oracle-pro"><ImgLang img='dbx-install-agent-on-db-server-dma.png' desc='エージェント構成図' /></InDoc>

<InDoc product="mssql,mssql-v1"><ImgLang img="agent-architecture.png" desc="Agent" /></InDoc>

<Xclude product="oracle-pro">

- **収集サーバ**

  エージェントが収集したデータベースのパフォーマンスデータを収集および保存、統計情報を抽出し、これをユーザーに効率的な方法で提供します。収集サーバーはリージョン（Region）別に設定できます。リージョンごとに収集サーバーのアドレスが異なるように割り当てます。ユーザーが選択したリージョンによって収集サーバーのアドレスは異なる場合があります。プロジェクトを作成する際、リージョンも設定します。

- **DBX エージェント**(**デフォルトエージェント**)

  Queryベースで性能データを収集し、サーバーに送信します。モニタリング対象データベースサーバーにエージェントを直接インストールしなくても、別のエージェントサーバーを使用してモニタリングすることができます。

</Xclude>

<Xclude product='cubrid,oracle-pro,mssql-v1'>

- **XOSエージェント**(**追加エージェント**)

  XOSエージェントは、データベースサーバーのプロセス使用量をモニタリングできる追加のオプションエージェントです。データベースサーバーのプロセス使用量をモニタリングしたい場合は、データベースサーバーにXOSエージェントを実行してデータを収集できます。

  :::note

  XOSエージェントは、x86アーキテクチャベースで動作するOS環境のみ適用できます。

  :::

</Xclude>

<InDoc product='cubrid'>

- **XOSエージェント・XCUBエージェント** (**追加エージェント**)

  XOSエージェントは、データベースサーバーのプロセス使用量をモニタリングできる追加のオプションエージェントです。データベースサーバーのプロセス使用量をモニタリングしたい場合は、データベースサーバーにXOSエージェントを実行してデータを収集できます。

  :::note

  XOSエージェントは、x86アーキテクチャベースで動作するOS環境のみ適用できます。

  :::

</InDoc>

<InDoc product="oracle-pro">

- **収集サーバ**

  エージェントが収集したデータベースのパフォーマンスデータを収集および保存、統計情報を抽出し、これをユーザーに効率的な方法で提供します。収集サーバーはリージョン（Region）別に設定できます。リージョンごとに収集サーバーのアドレスが異なるように割り当てます。ユーザーが選択したリージョンによって収集サーバーのアドレスは異なる場合があります。プロジェクトを作成する際、リージョンも設定します。

- **DMXエージェント**

  DMA（ダイレクトメモリアクセス）方式で性能データを収集し、収集サーバーに送信します。モニタリング対象のデータベースサーバーに直接インストールします。

- **ネットワーク**：WhaTapモニタリングエージェントは、収集したモニタリング情報をWhaTap収集サーバーに転送するために外部通信(TCP)6600番ポートを使用します。

</InDoc>

<Xclude product="oracle-pro">

- **ネットワーク**

  - 基本エージェント：WhaTapのモニタリングエージェントは、収集したモニタリング情報をWhaTap収集サーバーに転送するために外部通信（TCP）6600番ポートを使用します。

  - XOSエージェント：エージェントをインストールしたサーバーとデータベースサーバーの間に外部通信(UDP)3002番ポートを使用します。内部ポートが衝突する場合は、`dbx_port`オプションを使用してポートを変更します。

</Xclude>
