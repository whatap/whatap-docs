## エージェントのアップデート

### 最新バージョンにアップデートする

ホーム画面 &gt; プロジェクト選択 &gt; <Cmdname sid="side_management" className="uitext" /> &gt; <Cmdname sid="side_dbAgentUpdate" className="uitext" />

<ImgLang img='db-update-agent.png' desc='' />

エージェントをアップデートすると、最新バージョンのエージェントファイルをエージェントインストール パス(**_agent path_**)に自動的にダウンロードして再起動します。エージェントのアップデートには約1分かかり、アップデート過程でダウンロードとアップデートの成功メッセージが画面上に順番に表示されます。アップデートを完了すると、そのエージェントのバージョンが自動的に最新バージョンに変更されます。

- アップデートできるエージェントは、<Cmdname sid="TTL06230" className="uitext" />ボタンが活性化されます。

- エージェントを個別にアップデートするには、各エージェント項目の右側にある<Cmdname sid="TTL06230" className="uitext" />ボタンを選択します。

- すべてのエージェントを一度に更新するには、<Cmdname sid="DSC07289" className="uitext" />ボタンを選択します。

:::tip

エージェントのアップデート中に別のメニューに移動する場合は、進行状況を確認することはできず、1つのエージェントをアップデートしながら別のエージェントを同時にアップデートすることはできません。

:::

:::note

Windows環境にインストールされたエージェントは、自動更新機能をサポートしません。手動で最新のエージェントに再インストールするか、最新の_whatap.agent.dbx-\*.jar_ファイルを既存のエージェントフォルダーに入れて、サービスを再登録してください。

```bash
# 1. Delete Windows service
install_WindowsService.bat delete WhatapDBXAgent # existing service name

# 2. Create Windows service
install_WindowsService.bat create WhatapDBXAgent # existing service name
```

:::

### アップデートに失敗した場合

#### エージェントが再起動しない場合

アップデート中にダウンロード成功メッセージが表示されても、エージェントのバージョンが最新に自動的にアップデートされない場合は、手動でエージェントを再起動する必要があります。エージェントのインストールパス(**_agent path_**)で*stop.sh*、*startd.sh*バッチファイルを順番に実行してください。

#### エージェント手動ダウンロード

ダウンロードができない環境の場合は、次の手順でエージェントのインストールを進めてください。

1. <Cmdname sid="management" className="uitext" /> &gt; <Cmdname sid="agentInstall" className="uitext" />メニューに移動します。

2. <Cmdname sid="agent-setup-guide" className="uitext" />セクションの2番項目で<span class="uitext">Download</span>ボタンを選択し、最新バージョンのエージェントをダウンロードしてください。

3. ダウンロードしたファイルの解凍をしてください。

4. *whatap.agent.dbx-`X.Y.Z`.jar*ファイルだけをエージェントインストールパス(**_agent path_**)にアップロードしてください。

5. *stop.sh*、*startd.sh*バッチファイルを順番に実行して、エージェントを再起動してください。

### 前のバージョンに戻す

1. 画面右上の<Cmdname sid="goto_previous_version" className="uitext" />ボタンを選択します。

2. ダウンロード可能なエージェントの一覧が表示されます。

3. 希望するバージョンを選択します。

4. 選択したバージョンに戻すエージェント項目で <Cmdname sid="download" className="uitext" />ボタンを選択します。

5. 選択したエージェントのインストールパスでエージェントファイルをダウンロードします。

6. エージェントのインストールパスで上位バージョンの*whatap.agent.dbx-`X.Y.Z`.jar*ファイルを削除してください。

7. *stop.sh*、*startd.sh*バッチファイルを順番に実行して、エージェントを再起動してください。

:::note

バッチファイルがエージェントのインストールパスで最も高いバージョンのエージェントファイルを実行するように設定されているため、上位バージョンのJARファイルを削除しないと、以前のバージョンのエージェントを実行できません。

:::
