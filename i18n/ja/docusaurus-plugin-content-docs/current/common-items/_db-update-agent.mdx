## エージェントのアップデート

### 最新バージョンにアップデートする

ホーム画面 > プロジェクト選択 > **_管理_** > **_エージェントアップデート_**

<ImgLang img='db-update-agent.png' desc='' />

エージェントをアップデートすると、最新バージョンのエージェントファイルをエージェントインストール パス(**_agent path_**)に自動的にダウンロードして再起動します。エージェントのアップデートには約1分かかり、アップデート過程でダウンロードとアップデートの成功メッセージが画面上に順番に表示されます。アップデートを完了すると、そのエージェントのバージョンが自動的に最新バージョンに変更されます。

- アップデートできるエージェントは、<Cmdname sid="TTL06230" className="uitext" />ボタンが活性化されます。

- エージェントを個別にするには、各エージェント項目の右側にある<Cmdname sid="TTL06230" className="uitext" />ボタンを選択してください。

- すべてのエージェントを一度に更新するには、<Cmdname sid="DSC07289" className="uitext" />ボタンを選択してください。

:::tip

エージェントのアップデート中に別のメニューに移動する場合は、進行状況を確認することはできず、1つのエージェントをアップデートしながら別のエージェントを同時にアップデートすることはできません。

:::

<InDoc product='postgresql'>

:::note

PostgreSQLモニタリングV2を利用するには、DBXエージェントの最小バージョンは1.6.7です。

:::

</InDoc>

<InDoc product='mysql'>

:::note

MySQLモニタリングV2を使用するための DBXエージェントの最小バージョンは1.6.8です。

:::

</InDoc>

### アップデートに失敗した場合

#### エージェントが再起動しない場合

アップデート中にダウンロード成功メッセージが表示されて以来、エージェントのバージョンが最新に自動的にアップデートされない場合は、手動でエージェントを再起動する必要があります。エージェントのインストールパス(**_agent path_**)で_stop.sh_、_startd.sh_バッチファイルを順番に実行してください。

#### エージェント手動ダウンロード

ダウンロードができない環境の場合は、次の手順でエージェントのインストールを進めてください。

1. <Cmdname sid="management" className="uitext" /> &gt; <Cmdname sid="agentInstall" className="uitext" />メニューに移動します。

2. <Cmdname sid="agent-setup-guide" className="uitext" />セクションの2番項目で<span class="uitext">Download</span>ボタンを選択し、最新バージョンのエージェントをダウンロードしてください。

3. ダウンロードしたファイルの解凍をしてください。

4. _whatap.agent.dbx-`X.Y.Z`.jar_ファイルだけをエージェントインストールパス(**_agent path_**)にアップロードしてください。

5. _stop.sh_、_startd.sh_バッチファイルを順番に実行して、エージェントを再起動してください。

### 前のバージョンに戻す

1. 画面右上の<Cmdname sid="goto_previous_version" className="uitext" />ボタンを選択してください。

2. ダウンロード可能なエージェントの一覧が表示されます。

3. 希望するバージョンを選択してください。

4. 選択したバージョンに戻すエージェント項目で <Cmdname sid="download" className="uitext" />ボタンを選択してください。

5. 選択したエージェントのインストールパスでエージェントファイルをダウンロードします。

6. エージェントのインストールパスで上位バージョンの_whatap.agent.dbx-`X.Y.Z`.jar_ファイルを削除してください。

7. _stop.sh_、_startd.sh_バッチファイルを順番に実行して、エージェントを再起動してください。

:::note

バッチファイルがエージェントのインストールパスで最も高いバージョンのエージェントファイルを実行するように設定されているため、上位バージョンのJARファイルを削除しないと、以前のバージョンのエージェントを実行できません。

:::
