---
id: user-session-log-search
title: ユーザーセッションログの検索
description: エンドユーザーがウェブページと相互作用する時に発生する性能とエラーデータ、クリックデータを収集して様々な条件で検索し、ユーザーセッションログを特定できます。
keywords:
  - Browser Monitoring
  - 分析
  - ユーザーセッションログの検索
---

ホーム画面 &gt; プロジェクト選択 &gt; <Cmdname sid="side_analysis" className="uitext" /> &gt; <Cmdname sid="side_userSessionEventSearch" className="uitext" />

エンドユーザーがウェブページと相互作用する時に発生する性能とエラーデータ、クリックデータを収集して様々な条件で検索し、ユーザーセッションログを特定できます。 ユーザーセッションログ情報により、エンドユーザーの経路分析、離脱の原因の把握、性能とユーザー体験などを分析するのに役立ちます。

<ImgLang img='browser-search-user-session-log.png' desc='ユーザーセッションログ検索' />

検索する照会時間を<Cmdname sid="time" className="uitext" />オプションで設定した後、![検索アイコン](/img/ico-btn-search.png)ボタンを選択します。 <Cmdname sid="filter" className="uitext" />項目にキー(key)と値(value)で構成した複数の検索条件を設定し、条件と一致するログデータを抽出できます。 ログデータを所定のライン単位で読み込んで一覧に表示し、一覧の下段に移動すると、次のデータを自動的に読み込んで表示します。

:::tip

<Cmdname sid="side_userSessionEventSearch" className="uitext" />メニューの基本動作方式は、<Cmdname sid="side_logSearch" className="uitext" />メニューと同じです。 フィルター設定による検索方法とその他のオプションの詳細については、次の文書を参照にしてください。

- フィルター設定によるログ検索方法の詳細は、<Link to="../log/log-search#log-search-filter" target="_blank">次の文書</Link>を参照にしてください。

- タグオプションの詳細については、<Link to="../log/log-search#log-tag-options" target="_blank">次の文書</Link>を参照にしてください。

- コンテンツハイライト機能の詳細については、<Link to="../log/log-search#content-highlight" target="_blank">次の文書</Link>を参照にしてください。

- <Cmdname sid="table_settings" className="uitext" />機能の詳細については、<Link to="../log/log-search#set-table" target="_blank">次の文書</Link>を参照にしてください。

:::

:::note

- この機能は、**ログ照会**権限を持つメンバーが利用できます。 メンバーのアクセス権限については、[次の文書](../project/project-structure#project-auth)を参照してください。

:::

## 主な検索タグの案内{#guide-search-tag}

### \#Category {#category}

Browser Monitoringで収集するユーザーセッションログは、次のように分類できます。 各**#Category**には、フィルター検索のためのタグの一覧を確認できます。

![Category](/img/browser-search-user-session-category.png)

- **_#BrowserError_**：ウェブページで発生するソースエラー、ネットワークエラーなどを収集して提供します。

- **_#PerformanceEvent_**：ページロード、AJAX、ルータ変更に関するイベントを収集して提供します。

- **_#UserEvent_**：ユーザーのクリックイベントとユーザー定義イベントを収集して提供します。

### ユーザーセッションログ{#usersessionlog}

ユーザーセッションログは、エンドユーザーの環境情報と**#Category**ごとの収集データが含まれています。 一番左の![詳細を見るアイコン](/img/ic-caret-right.svg)ボタンを選択すると、そのログを構成しているすべての内容が確認できます。

![ログメッセージ](/img/browser-search-user-session-log-content.png)

1行目の内容は、エンドユーザーの環境情報と**#Category**ごとの収集データがキー(key)と値(value)で構成されています。 キーと値は<Cmdname sid="filter" className="uitext" />項目で検索のために使用されます。 2行目は、そのユーザーセッションログのメッセージです。

![Key](/img/browser-search-user-session-tag.png)

以下は、ユーザーセッションログの主なキー(Key)についての説明です。

- `PageUrl`：イベントが発生したページのURLです。

- `userID`：イベントを発生させたユーザーIDです。 ユーザーがウェブサイトに初めてアクセスする時、ブラウザーエージェントが発行する固有IDで、有効期間がありません。 ブラウザークッキーに保存します。

- `sessionID`：イベントを発生させたセッションIDです。 ウェブサイトでユーザーがウェブアクセスを開始する際に発行する固有IDです。 セッションの継続時間は最大4時間で、15分間操作がないと、IDが無効になります。 ブラウザークッキーに保存します。

- `type`：発生したイベントの種類です。

  - **pageLoad**：ウェブページロード時に発生するイベント

  - **routeChange**：SPAウェブページのルート変更時に発生するイベント

  - **ajax**：AJAX要求関連イベント

  - **click**：実際のユーザーがウェブページでクリックした時に発生するイベント

  - **rapid_click**：実際のユーザーが同じ座標で素早く複数回クリックした時に発生するイベント

  - **custom**：ユーザー定義イベント

  - **browser_error**：ウェブページで発生するソースエラー、ネットワークエラーなど

:::note

- ユーザーのクリックイベント収集のためのエージェント設定オプション(`collectUserClick: true`)は、[次の文書](apply-agent#setting-agent)を参照にしてください。

- ユーザー定義イベントの収集の詳細については、[次の文書](collect-custom-events)を参照にしてください。

:::

## ユーザーセッションの分析{#analysisusersession}

実際のユーザーがウェブサイト上でどのように行動したかを確認できます。 ページロードヒートマップ、AJAXヒートマップ、ユーザーセッションログ検索機能を使用して、分析対象となるユーザーセッションを選定・分析できます。

- **ページ内の行動分析**：ユーザーがページ上でどのように動いているか、どのページに滞在しているか、画面のどの要素をクリックしているかなどのアクションを分析できます。 ユーザーがどのコンテンツに関心を持ち、どの機能を利用しているかを把握するのに役立ちます。

- **エラートラッキング**：JavaScriptエラーやネットワークエラーなど、ユーザーセッション中に発生するあらゆる技術的な問題を追跡します。 ユーザーのクリック、ページ移動などの行動をモニタリングし、これを分析して障害が発生した原因を特定できます。

:::note

ユーザーセッションを分析するには、ログ閲覧権限が必要です。

:::

### <Cmdname sid="TTL07736" className="uitext" /> {#analysisusersession-user}

分析対象のユーザーセッションの情報を確認できます。 エンドユーザーのブラウザーやOS、ユーザーエージェント、ユーザーID、セッションID、クライアントIPなどの情報を照会できます。

1. **分析** の **ユーザーセッションログ検索** に移動します。

2. 照会されたリストから、<Cmdname sid="TTL07736" className="uitext" /> カラムの <Cmdname sid="analysis" className="uitext" /> ボタンをクリックしてください。

3. 選択した項目のユーザーセッションログの詳細情報が確認できる<Cmdname sid="TTL07736" className="uitext" />画面が表示されます。

### ユーザーセッションフロー

ユーザーセッションに基づいて、実際のユーザーがウェブサイトと相互作用する際に発生させた性能情報やイベント、エラーを確認できます。

- 基本的に、イベントまたはエラーが発生したページとその開始時刻、およびパフォーマンス情報の場合は経過時間が表示されます。
- ユーザーセッションイベントをクリックすると、そのイベントの詳細情報を確認できます。
- イベントの種類ごとにフィルタリング機能を提供します。

  | フィルターの種類     | 説明                                                |
  | ------------ | ------------------------------------------------- |
  | ブラウザーエラー     | ウェブページで発生するソースエラーおよびネットワークエラー                     |
  | AJAXロード      | AJAXリクエストに関連するイベント                                |
  | ページロード       | ウェブページの読み込み時に発生するイベント                             |
  | ルーター変更       | SPAウェブページでルートが変更される際に発生するイベント                     |
  | カスタム         | ユーザー定義イベント                                        |
  | クリック         | 実際のユーザーがウェブページでクリックした時に発生するイベント                   |
  | 連続クリック       | 実際のユーザーが同じ座標上を短時間に複数回クリックした際に発生するイベントです。          |

1. <Cmdname sid="TTL07736" className="uitext" /> 画面で、<Cmdname sid="TTL07746" className="uitext" /> リストの右上にある ![フィルターアイコン](/img/ico-filter.svg) アイコンをクリックしてください。

2. <Cmdname sid="filter" className="uitext" />リストでイベントの種類を選択します。

3. <Cmdname sid="apply" className="uitext" />ボタンを選択します。 選択した種類のイベントのみを確認できます。

### カラム設定

ユーザーセッションフローのテーブルに表示するカラムは、ユーザーが自由に選択できます。

```
<details>
<summary><b>設定可能なカラム一覧</b></summary>

* **開始時間**：イベントの発生時刻  
* **デバイス**：ユーザーのデバイス情報  
* **ログ時間**：ログが記録された時刻  
* **リソースURLグループ**：リソースURLのグループ情報  
* **リソースURLパス**：リソースURLのパス  
* **ブラウザ**：使用しているブラウザの種類  
* **ブラウザバージョン**：ブラウザのバージョン情報  
* **ユーザーID**：ユーザーの固有識別子  
* **セッションID**：セッションの固有識別子  
* **収集時間**：データが収集された時刻  
* **エラーメッセージ**：エラー発生時のメッセージ  
* **エラーメッセージ要約**：エラーメッセージの要約情報  
* **エラータイプ**：エラーの種類  
* **オペレーティングシステム**：ユーザーのOS情報  
* **OSバージョン**：オペレーティングシステムのバージョン  
* **ユーザーエージェント**：User Agent情報  
* **名前**：イベント名  
* **タイトル**：イベントのタイトル  
* **カテゴリ**：#PerformanceEvent、#BrowserError、#UserEvent  
* **コンテンツ**：イベントのコンテンツ情報  
* **クライアントIP**：クライアントのIPアドレス  
* **タイプ**：イベントタイプ（pageLoad、ajax、clickなど）  
* **ページグループ**：ページグループ情報  
* **ページURL**：イベントが発生したページのURL  
* **ページURLパス**：ページURLのパス  
* **ホスト**：ホスト情報  
* **customDuration.n**：カスタム定義の期間  
* **duration.n**：イベント処理時間  
* **ENV**：環境変数  
* **HASH KEY**：ハッシュキー  
* **pageloadID**：ページロードID  
* **SCREEN HEIGHT**：画面の高さ  
* **SCREEN WIDTH**：画面の幅  
* **URL**：URL情報  
* **VERSION**：バージョン情報  

</details>
```

1. ユーザーセッションフロー一覧の右上にある ![カラムアイコン](/img/ico-column.svg) **カラム設定** ボタンをクリックしてください。

2. 表示または非表示にしたいカラムの ![チェックアイコン](/img/ico-check_square-filled.svg) チェックボックスを選択してください。

3. **確認** ボタンをクリックすると、選択したカラムのみがテーブルに表示されます。

### イベントの詳細情報を確認

<Cmdname sid="TTL07746" className="uitext" /> 一覧の <Cmdname sid="title" className="uitext" /> カラムに表示されたイベントの詳細情報を確認できます。

#### <Cmdname sid="page_load" />(pageLoad)

ページロードイベントに関するイベント区間ごとの詳細な時間情報およびロードされたリソースの詳細情報を確認できます。 

<ImgLang img='browser-analysis-user-session-log-details-pageload.png' desc='페이지 로드' />

:::note

詳しくは、[ユーザーアクションヒートマップ](analyze-pageload)のドキュメントをご参照ください。

:::

#### <Cmdname sid="TTL07755" />(ajax)

AJAX要求関連のイベントです。 AJAXイベント区間別の詳細時間情報やAJAX要求URL、呼び出しページ情報、エラーメッセージなどが確認できます。 <Cmdname sid="TTL07736" className="uitext" />タブを選択すると、関連情報を連続して把握できます。

<ImgLang img='browser-analysis-user-session-log-details-ajax.png' desc='ajax' />

:::note

AJAXイベントの分析に関する詳しい内容は、[AJAXヒートマップ](analyze-ajax-hitmap)のドキュメントをご参照ください。

:::

#### <Cmdname sid="TTL07751" />(browser_error)

ブラウザーエラーに関するメッセージとスタックトレース情報を確認できます。

<ImgLang img='browser-analysis-user-session-log-details-error.png' desc='browser_error' />

:::note

詳しくは、[エラー追跡](tracking-error)のドキュメントをご参照ください。

:::

#### <Cmdname sid="TTL07753" />(click) / <Cmdname sid="TTL07754" />(rapid_click)

クリックした要素のIDであるセレクターと、その要素のテキスト情報を表示します。 これにより、ユーザーがどのページでどの要素をクリックしたかを確認できます。 

<ImgLang img='browser-analysis-user-session-log-details-click.png' desc='click, rapid_click' />

- **クリックイベント収集オプション** 

  クリックイベントを収集するには、オプション設定が必要です。  

  ```typescript title='클릭 이벤트 수집 옵션'
    <script>
      (function (w, h, _a, t, a, b) {
        w = w[a] = w[a] || {
          config: {
            projectAccessKey: "xxxxxxxxxxxxx-xxxxxxxxxxxxx-xxxxxxxxxxxxx",
            pcode: 1,
            sampleRate: 100,
            proxyBaseUrl: "https://rumote.whatap-browser-agent.io/",
            collectUserClick: true,
          },
        };
        a = h.createElement(_a);
        a.async = 1;
        a.src = t;
        t = h.getElementsByTagName(_a)[0];
        t.parentNode.insertBefore(a, t);
      })(window, document, 'script', 'https://repo.whatap-browser-agent.io/rum/dev/v1/whatap-browser-agent.js', 'WhatapBrowserAgent', '');
    </script>
  ```

:::note

クリックイベントを収集するには、ブラウザーエージェントのオプション(`collectUserClick: true`) 設定が必要です。 詳しい内容は、[次の文書](apply-agent#setting-agent)を参考にしてください。

:::

#### ユーザー定義（custom）

ユーザー定義イベントで収集された情報を確認することができます。 ユーザー定義イベントの代表値であるタイトル(`name`)とContentsに含まれる情報を表示します。

<ImgLang img='browser-analysis-user-session-log-details-custom.png' desc='custom' />

:::note

詳細については、[ユーザー定義イベントの収集](collect-custom-events) ドキュメントを参照してください。

:::

{/* 세션 리플레이 */}
import Sessionreplay from "../common-items/_browser-analysis-session-replay.mdx";

<Sessionreplay />
