---
id: container-map-event
title: Event
description: WhaTap Kubernetesモニタリングでは、KubernetesイベントとWhaTapイベントを提供します。
tags:
  - Kubernetes
  - Kubernetesモニタリング
  - Event
---

ホーム画面>プロジェクト選択>**_ダッシュボード_**>**_コンテナマップ_**>対象選択後**詳細を見る**画面に進入>**_イベント_**タブの選択

リソース寿命周期が発生するすべてのイベントに対する履歴を提供します。WhaTapクバネティスモニタリングで提供するイベント情報は以下の通りです。

-   Kubernetesイベント(**_Kubernetes_**)
-   WhaTapイベント(**_WhaTap_**)

## 基本画面ガイド

![クバネティス詳細を見るイベントタブ](/img/k8s-event-default3.png)

-   ![number 1](/img/number-01.png)クバネティスイベント(**_Kubernetes_**)または、WhaTapイベント(**_WhaTap_**)を選択して、照会することができます。 

    -   全体または多重ブロック選択

        **_コンテナマップ_**および左のカードから全体または多重ブロック選択すると、**_Kubernetes全体イベント_**または**_WhaTap全体イベント_**を照会することができます。

    -   クラスタリングまたは個別ブロック選択

        **_コンテナマップ_**上段の**_２段階_**グループ化選択または個別ブロックを選択すると、該当イベントを照会できます。**グループ化**(クラスタリング)に関する詳細は[次の文書](container-group)を参照してください。

        :::note

        **詳細**画面に進入する前**_コンテナマップ_**上段で選択したビューおよび対象グループ化によって照会できるイベントが異なります。

        :::

-   ![number 2](/img/number-02.png)時間選択者を通じて、イベント履歴を照会したい時間帯を指定できます。基本設定は**_1日_**です。

-   ![number 3](/img/number-03.png)選択した時間帯の**_イベント数推移_**を棒チャートを通じて確認できます。 

-   ![number 4](/img/number-04.png)一覧形式でイベント履歴情報を確認できます。 

    -   イベント履歴一覧の右の上段で**_タグ隠す_**を選択するとイベント履歴でタグ情報以外の**_タイムスタンプ_**と**_メッセージ_**を確認できます。

    -   **_Kubernetes_**イベント

        -   <span class='k8s-normal'>Normal</span>または<span class='slow'>Warning</span>の中で、照会をしたいイベントタイプを選択して確認できます。このイベントタイプはクバネティスが提供するイベントタイプと同一です。

        -   各イベントの左帯もまた、イベントタイプを示してます。グレー色は<span class='k8s-normal'>Normal</span>、オレンジ色は<span class='slow'>Warning</span>状態を意味します。

    -   **_WhaTap_**イベント

        -   <span class='vslow'>Critical</span>,<span class='k8s-normal'>Info</span>,<span class='slow'>Warning</span>の中で、照会をしたいイベントレベルを選択して確認できます。

        -   各イベントの左帯もまた、イベントレベルを表します。グレー色は<span class='k8s-normal'>Normal</span>、オレンジ色は<span class='slow'>Warning</span>、赤色は<span class='vslow'>Critical</span>の状態を意味します。

## クバネティスイベント

**_Kubernetes_**イベントは、Kubernetesが自主的に提供するイベント情報です。ユーザーKubernetes環境で`kubectl get events`コマンドを使用すると、ユーザーKubernetesクラスターのイベント情報が確認できます。

```bash

$ kubectl get events -A
 NAMESPACE   LAST SEEN   TYPE      REASON                   OBJECT                            MESSAGE
 community   15m         Normal    ScalingReplicaSet        deployment/baekdusan              Scaled up replica set baekdusan-59554d4859 to 5`
 community   12m         Normal    ScalingReplicaSet        deployment/suraksan               Scaled down replica set suraksan-66fc4bf889 to 3
 community   5m18s       Normal    ScalingReplicaSet        deployment/baekdusan              Scaled down replica set baekdusan-59554d4859 to 3
 community   7m10s       Normal    Created                  pod/suraksan-66fc4bf889-h2cw8     Created container suraksan
 community   6m56s       Normal    Pulled                   pod/suraksan-66fc4bf889-h2cw8     Container image "123456789123.dkr.ecr.ap-northeast-2.amazonaws.com/suraksan:0.48" already present on machine
 community   7m9s        Normal    Started                  pod/suraksan-66fc4bf889-h2cw8     Started container suraksan
 community   2m7s        Warning   BackOff                  pod/suraksan-66fc4bf889-h2cw8     Back-off restarting failed container
 community   7m12s       Normal    Started                  pod/suraksan-66fc4bf889-t27rp     Started container suraksan
 community   6m54s       Normal    Pulled                   pod/suraksan-66fc4bf889-t27rp     Container image "123456789123.dkr.ecr.ap-northeast-2.amazonaws.com/suraksan:0.48" already present on machine
 community   7m12s       Normal    Created                  pod/suraksan-66fc4bf889-t27rp     Created container suraksan
 community   2m46s       Warning   BackOff                  pod/suraksan-66fc4bf889-t27rp     Back-off restarting failed container
 community   7m19s       Normal    ScalingReplicaSet        deployment/mountain               Scaled up replica set mountain-6795bfbc54 to 5
 community   27m         Normal    ScalingReplicaSet        deployment/mountain               Scaled down replica set mountain-6795bfbc54 to 4
 community   6m53s       Normal    Pulled                   pod/suraksan-66fc4bf889-mjbsj     Container image "123456789123.dkr.ecr.ap-northeast-2.amazonaws.com/suraksan:0.48" already present on machine
 community   7m10s       Normal    Created                  pod/suraksan-66fc4bf889-mjbsj     Created container suraksan
 community   7m10s       Normal    Started                  pod/suraksan-66fc4bf889-mjbsj     Started container suraksan
 community   2m10s       Warning   BackOff                  pod/suraksan-66fc4bf889-mjbsj     Back-off restarting failed container
 community   5m18s       Warning   FailedToUpdateEndpoint   endpoints/baekdusan-svc           Failed to update endpoint community/baekdusan-svc: Operation cannot be fulfilled on endpoints "baekdusan-svc": the object has been modified; please apply your changes to the latest version and try again

```

ただ、これらのイベント情報は継続的に保存されません。したがって、一定時間が経過したイベントは、もう情報を確認できません。 

WhaTap Kubernetesは、ユーザークラスター環境で発生したKubernetesイベント情報をすべて収集して保存します。そして、ユーザーが確認したい対象によってPod、ReplicaSet、Deployment、Namespaceなどのイベント情報を提供します。

![Kubernetesイベント](/img/k8s-container-event-k8s-all.png)

各イベントの左帯はイベントタイプを示します。グレー色は<span class='k8s-normal'>Normal</span>、オレンジ色は<span class='slow'>Warning</span>状態を意味します。ユーザーの選択対象による提供、クバネティスイベントは以下の通りです。

| 選択対象           | 提供イベント                                                        | 提供関連イベント                                                         |
| -------------- | ------------------------------------------------------------- | ---------------------------------------------------------------- |
| 全体（All）        | >                                                             | プロジェクト全体イベント                                                     |
| Namespace      | >                                                             | Namespace下位の全体イベント                                               |
| Node           | >                                                             | 当該Nodeイベントまたはノード内のPod （コンテナ） 全体イベント                              |
| Deployment     | ① `kind`がDeployment<br/>② `name`がユーザーのDeployment名と一致          | `name`がユーザーDeployment名でスタート                                      |
| ReplicaSet     | ① `kind`がReplicaSet<br/>② `name`がユーザーのReplicaSet名と一致          | `name`がユーザーReplicaSet名でスタート                                      |
| Pod（コンテナ）      | ① `kind`がPod<br/>② `name`がユーザーのPod名と一致                        | 当該Podが所属するDeployment名でスタートまたはReplicaSet名でスタート                    |

WhaTapに保存されているKubernetesイベントは、`message`、`namespace`、`kind`、`name`、`reason`, `type`などの項目で構成されています。

## WhaTapイベント

**_WhaTap_**イベントはWhaTapイベント設定を通じて、登録したイベント条件によって発生するすべてのイベントです。**_コンテナマップ_**詳細画面の**_イベント_**タブでユーザーのWhaTapアラート設定によるイベント一覧を確認できます。

![WhaTapイベント](/img/k8s-container-event-wt-all.png)

各イベントの左帯はイベントレベルを示します。グレー色は<span class='k8s-normal'>Info</span>、オレンジ色は<span class='slow'>Warning</span>、赤色は<span class='vslow'>Critical</span>状態を意味します。ユーザーの選択対象によって提供、WhaTapイベントは以下の通りです。

| 選択対象       | 提供イベント                              |
| ---------- | ----------------------------------- |
| 全体（All）    | プロジェクト全体イベント                        |
| Namespace  | Namespace下位の全体イベント                  |
| Node       | `onodeName`がユーザーNode名と一致            |
| Deployment | `deployment`가 Deployment名と一致        |
| ReplicaSet | `replicaSetName`がユーザーReplicaSet名と一致 |
| Pod        | `podName`がユーザーPod名と一致               |
| Container  | `containerId`がユーザーContainer IDと一致   |

WhaTapイベントは`message`、`status`、`title`、`level`などの項目で構成されています。次の例の画面は**_WhaTap Containterイベント_**記録を照会しています。

![クバネティスWhaTapイベントsc](/img/k8s-container-event-wt.png)

-   ![number 1](/img/number-01.png)**詳細**左の要約情報カードから照会する対象を選択してください。

-   ![number 2](/img/number-02.png)要約情報一覧から選択対象の情報を確認してください。

-   ![number 3](/img/number-03.png)**_イベント_**タブから**_WhaTap_**イベントを選択してください。 

    > **詳細**画面に進入する前**_コンテナマップ_**上段のビューオプションをコンテナビューと指定して**_Containerイベント_**を照会できます。

-   ![number 4](/img/number-04.png)時間選択者を通じて、照会する時間を選択してください。基本設定は**_1日_**です。

-   ![number 5](/img/number-05.png)棒チャートを通じて指定した時間帯の**_イベント数推移_**を確認してください。

    > ７月10日８時57分から７月월11日８時 57分まで１日基準でイベント数推移をみると、11日８時48分にイベント二つがカウントされたことを確認できます。 

-   ![number 6](/img/number-06.png)イベント記録一覧でイベント記録情報を確認してください。リストの左帯からイベント別レベルを確認できます。イベントメッセージおよびタグ全体を確認するには ![下向き矢印アイコン](/img/ic-caret-down.svg)アイコンを選択してください。

    > イベント履歴一覧で`コンテナLimit基準CPU使用量が85%以上`, `GC回数以上`<span class='slow'>Warning</span>レベルイベント二つを照会できます。 

<!-- 

1 그룹 선택 시 각 전체 이벤트

2 블록/마이크로 블록 선택 시
  k8s 이벤트: 파드 이벤트/연관 이벤트
  와탭 이벤트: 컨테이너 이벤트

3 k9s 이벤트/와탭 이벤트 비교 안내 필요
  e.g. 파드 이벤트/연관 이벤트(k8s 이벤트) 및 컨테이너 이벤트(와탭 이벤트) 요소 기술 필요

4 로그와 마찬가지로 로그 검색 이동 기능 추후 제거 예정

5 디폴트 조회 기준 1일?

6 이벤트 수 추이 차트(로그 트렌드 바 차트랑 다르게 바 선택 시 구간 확인 안됨?)

-->
