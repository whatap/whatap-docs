---
id: tx-profile
title: トランザクション検索
description: 個々のトランザクションの性能属性に基づいて、目的のトランザクションを検索できます。
keywords:
  - Kubernetes
  - Kubernetesモニタリング
  - アプリケーション
  - トランザクション
---

ホーム画面 > プロジェクト選択 > **_アプリケーション_** > **_分析_** > **_TX検索_**

**_トランザクション検索_**メニューを使用して、特定の期間の各トランザクションの性能属性に関する統計と実行状態を検索できます。すべてのトランザクションを確認し、正常およびエラー状態をすばやく確認できます。提供される情報から、どのようなトランザクションの使用量が多く、リソースを多く消費しているかがわかります。トランザクションの属性に応じて様々なフィルタリングができ、特定の条件のトランザクションを見つけるのに役立ちます。

<ImgLang img='k8s-analysis-tx-profile.png' desc='Transaction Search' />

![指示線1](/img/number-01.png)領域で照会時間を設定した後、**_コンテナ_**オプションで照会対象を選択します。![検索アイコン](/img/ico-btn-search.png)ボタンを選択すると、検索結果がテーブルに表示されます。![指示線2](/img/number-02.png)領域の結果リストから希望する項目を選択すると**_トランザクション情報_**画面が表示されます。**_トランザクション情報_**画面を活用したトランザクショントレースの詳細分析に関する詳細は、[次の文書](../java/trs-profile#transaction-info)を参考にしてください。

:::note

- エラー状態のトランザクションのみを検索するには、<Cmdname sid="show_only_error" className="uitext" />をクリックし![検索アイコン](/img/ico-btn-search.png)ボタンを選択します。

- 検索条件によってレスポンス遅延が発生する可能性があるため、検索時間をできるだけ短く設定することをお勧めします。

:::

## カラム選択

![指示線2](/img/number-02.png)領域の![カラム選択アイコン](/img/ico-column-set.svg) **_カラム選択_**ボタンをクリックすると、次のようにカラム選択画面が表示されます。希望するカラムを適切に選択します。

<ImgLang img='k8s-tx-profile-clm.png' desc='カラム選択' />

## フィルター適用

![指示線1](/img/number-01.png)領域でフィルターを活用すると詳細検索が可能です。様々な検索条件によるデータの検索方法に対応します。フィルター項目も複数適用できます。希望するフィルターを指定し![検索アイコン](/img/ico-btn-search.png)ボタンを選択します。

:::note

- 一部のフィルター項目は、製品によっては対応できない場合があります。

- 複数条件のフィルターを適用する際に、<Cmdname sid="TTL06107" className="uitext" />フィルターを適用して検索する場合<Cmdname sid="TTL06111" className="uitext" />フィルターのみ追加適用できます。

:::

### 経過時間

<ImgLang img='k8s-analysis-tx-profile-el.png' desc='経過時間' />

トランザクションのレスポンス時間を基準に検索します。基準以上と未満の2つの値を入力して検索します。

### エラーメッセージ

<ImgLang img='k8s-analysis-tx-profile-err.png' desc='エラーメッセージ' />

トランザクションのエラーメッセージに基づいて検索します。デフォルト状態ではエラー関連のカラムが表示されない場合があります。カラムを選択して確認してください。 

:::note 

エラー状態のトランザクションは赤で表示されます。

:::

### HTTPコール件数

<ImgLang img='k8s-analysis-tx-profile-httpc.png' desc='HTTPコール件数' />

トランザクション中に外部HTTPサービスを呼び出した件数が入力値以上に該当するトランザクションを検索します。例示画像の場合**_5_**件以上を照会します。

### SQL件数

<ImgLang img='k8s-analysis-tx-profile-sqlcount.png' desc='SQL件数' />

トランザクション別のSQL実行件数が設定した入力値以上に該当するトランザクションを検索します。例外的に過度な数のSQLを呼び出すトランザクションを検索するときに利用します。

### SQLフェッチ件数

<ImgLang img='k8s-analysis-tx-profile-sqlfetchcount.png' desc='SQLフェッチ数' />

SQLを実行した後、DBフェッチ件数に基づいて入力値以上に該当するトランザクションを検索します。過度なデータフェッチを実行するトランザクションを検索するときに利用します。

### トランザクション

<ImgLang img='k8s-analysis-tx-profile-tx.png' desc='URL' />

トランザクションベースで検索します。入力した検索文字列は、含めるかどうか(部分一致)で比較検索します。

### クライアントIP

<ImgLang img='k8s-analysis-tx-profile-cl-ip.png' desc='IP' />

クライアントIPベースでトランザクションを検索します。ただ、IP文字列は、PREFIX比較(前方一致)で検索します。

### ドメイン

<ImgLang img='k8s-analysis-tx-profile-dm.png' desc='ドメイン' />

HTTPサービスドメイン(host:port)ベースでトランザクションを検索します。検索条件は、ドメインが完全に一致(完全一致)する必要があります。

### ユーザーエージェント

<ImgLang img='k8s-analysis-tx-profile-user-agent.png' desc='ユーザーエージェント' />

ユーザーエージェントベースでトランザクションを検索(部分一致)します。 

### リファラー

Referer文字列ベースでトランザクションを検索します。

:::note

デフォルト設定状態のエージェントは、Refer情報を収集しません。Referer設定が必要な場合は、次の文書を参照して関連する設定を追加します。

- [Java](../java/analysis-apm-trs#stat-referer)

- [Node.js](../nodejs/analysis-apm-trs#stat-referer)

- [Python](../python/analysis-apm-trs#stat-referer)

:::

### TXID

<ImgLang img='k8s-analysis-tx-profile-tx-id.png' desc='TXID' />

トランザクションIDベースでトランザクションを検索(完全一致)します。トランザクションIDの場合、検索インデックスが作成されているため、高速で検索できます。

:::note

- トランザクションIDは、<Cmdname sid="TTL06527" className="uitext" />画面の<Cmdname sid="TTL06125" className="uitext" />タブから確認できます。詳しい内容は、[次の文書](../java/trs-profile#anlaysis-trace-record-summary)を参考にしてください。

- 最新バージョンのエージェントを使用していない場合、インデックスを使用しないフルスキャンが発生する可能性があります。

:::

### マルチTXID

<ImgLang img='k8s-analysis-tx-profile-mtxid.png' desc='マルチTX ID' />

マルチTXIDベースでトランザクションを検索(完全一致)します。

:::note

- マルチトランザクションIDは、<Cmdname sid="TTL06527" className="uitext" />画面の<Cmdname sid="TTL06125" className="uitext" />タブで確認できます。詳しい内容は、[次の文書](../java/trs-multi-trace#trace-multi-tx)を参考にしてください。

- 最新バージョンのエージェントを使用していない場合、インデックスを使用しないフルスキャンが発生する可能性があります。

- <Cmdname sid="TTL06107" className="uitext" />フィルターを適用して検索する場合、<Cmdname sid="TTL06111" className="uitext" />フィルターのみ追加できます。

:::

### WClientID

<ImgLang img='k8s-analysis-tx-profile-wcl.png' desc='クライアントID' />

クライアントID(`wClientId`)は、WhaTapエージェントがユーザーを区分するために付与するIDです。このID値に基づいてトランザクションを検索(完全一致)します。検索のための個別のインデックスはありません。

:::note

WhaTapは、クライアントに関する情報をデフォルトで保存します。

:::

### ログインID

ログインIDに基づいてトランザクションを検索します。

:::note

基本設定状態のエージェントでは、ログインID情報を収集しません。ログインIDの設定が必要な場合は、[次の文書](../java/script-plugin#common-plugin)を参照して設定を追加します。

:::

## 検索結果のダウンロード

ユーザーが設定したフィルター条件に従って検索された結果をCSVファイルにダウンロードできます。 

1. ![検索アイコン](/img/ico-btn-search.png)ボタンをクリックして検索結果を照会します。

2. ![ダウンロードアイコン](/img/ic-csv-download-ms.svg)ボタンをクリックします。

3. 最大CSV行数を入力します。入力した行数だけ、照会された結果を保存できます。

4. <Cmdname sid="download" className="uitext" />ボタンを選択するとCSVファイルでダウンロードします。

:::note

CSVファイル名は、*profile\_`{pcode}`\_`YYMMDD`.csv*形式です。

:::
