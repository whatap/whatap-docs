---
id: container-map-call-information
title: Call Information
description: コンテナ化して実行中のアプリケーションの、呼び出しフローと外部呼び出し対象の状態を確認できます。
tags:
  - Kubernetes
  - Kubernetesモニタリング
  - 呼び出し情報
---

:::note 

**_外部呼び出し状態_**照会機能は、アプリケーションがJavaの場合のみ対応します。

:::

ホーム画面 > プロジェクト選択 >**_ダッシュボード_**>**_コンテナマップ_**> 対象選択後**詳細を見る**画面へアクセス >**_呼び出し情報_**タブの選択

Kubernetesコンテナ上で実行中のアプリケーションの、呼び出しフローと外部呼び出し対象の状態を確認できます。 WhaTap Kubernetesモニタリングで提供する呼び出し情報は以下の通りです。 

- **_App呼び出しフロー図_**

- **_外部呼び出し状態_**

## App呼び出しフロー図{#app-call-flow}

<ImgLang img='k8s-container-map-call-info-app.png' desc='App呼び出しフロー図' />

Pod内部で実行中の、コンテナ化したアプリケーションの呼び出しフローを表したチャートを提供します。 ユーザー指定グループ(Okind)、Pod、DB接続(DBC)および外部呼び出し(HTTPC)の3つのノード間の接続関係を確認することができます。 各ノードは、以下の情報を提供します。 

#### ![指示線1](/img/number-01.png)ユーザー指定グループ(okind)

ユーザーが指定したグループ名を意味します。 グループ(okind)を指定していない場合、該当のノードは表示されません。

#### ![指示線2](/img/number-02.png)Pod

コンテナ化したアプリケーションが属しているPod名を意味します。 コンテナ化したアプリケーション内の、アクティブトランザクションの総数と処理速度が確認できます。 選択時、**_アクティブトランザクション_**メニューへ移動します。

- **_Active Tx_**: コンテナ化したアプリケーション内のアクティブトランザクションを意味します。 

  - **_Total_**: コンテナ化したアプリケーション内のアクティブトランザクションの総数を意味します。

  - <span class='normal'>Normal</span>: 0~3秒内に処理されるトランザクションの数を意味します。

  - <span class='slow'>Slow</span>: 3~8秒内に処理されるトランザクションの数を意味します。

  - <span class='vslow'>Very Slow</span>: 処理に8秒以上かかるトランザクションの数を意味します。

- **_Application_**: Pod内部のApplication名を意味します。 

- **_Node_**: Podが属するノード名を意味します。 

- **_Namespace_**: Podが属するNamespaceの名を意味します。 

- **_ReplicaSet_**: Podが属するReplicaSetの名を意味します。 

- **_Deployment_**: Podが属するDeploymentの名を意味します。  

#### ![指示線3](/img/number-03.png)DB接続と外部呼び出し

- **_DB接続(dbc)_**: Pod内部の、コンテナ化したアプリケーションが呼び出したDB Connectionを意味します。 選択時、**_外部呼び出しの状態_**照会タブへ移動します。

  - **_Active Tx_**: DB Connection中の、コンテナ化したアプリケーション内のアクティブトランザクションを意味します。 

  - **_Total_**: コンテナ化したアプリケーション内のアクティブトランザクションの総数を意味します。

  - <span class='normal'>Normal</span>: 0~3秒内に処理されるトランザクションの数を意味します。

  - <span class='slow'>Slow</span>: 3~8秒内に処理されるトランザクションの数を意味します。

  - <span class='vslow'>Very Slow</span>: 処理に8秒以上かかるトランザクションの数を意味します。

- **_外部呼び出し(httpc)_**: Pod内部の、コンテナ化したアプリケーションが呼び出した外部APIを意味します。 選択時、**_外部呼び出しの状態_**照会タブへ移動します。 

  - **_Active Tx_**: 外部API呼び出し中の、コンテナ化したアプリケーション内のアクティブトランザクションを意味します。 

  - **_Total_**: コンテナ化したアプリケーション内のアクティブトランザクションの総数を意味します。

  - <span class='normal'>Normal</span>: 0~3秒内に処理されるトランザクションの数を意味します。

  - <span class='slow'>Slow</span>: 3~8秒内に処理されるトランザクションの数を意味します。

  - <span class='vslow'>Very Slow</span>: 処理に8秒以上かかるトランザクションの数を意味します。

## 外部呼び出し状態{#remote-access-status}

外部呼び出しログを利用して、モニタリング対象が呼び出す目的地の接続状態情報に基づいて、外部呼び出し対象が正常かどうかの情報を提供します。 **_外部呼び出し状態_**照会機能を通じて、接続不可対象向けの可視性を提供します。 これにより、障害発生時の問題個所が容易に把握できます。 また、持続的な接続失敗によるスレッドやコネクションの増加などの、リソース不足現象を事前に感知し、対応することができます。

:::note

**外部呼び出しログ**

アプリケーションエージェント設定により、各モニタリング対象別の外部呼び出しの成功と失敗を記録したログです。 

- 外部呼び出しタイプは次のとおりです。

  `httpcall`、`db`、`socket` 

- 外部呼び出しログを収集するには、**_エージェント設定_**に次のオプションを追加する必要があります。

  ```ini
  logsink_rt_enabled=true
  logsink_enabled=true
  ```

::: 

<ImgLang img='k8s-container-map-call-info-remote.png' desc='外部コールログ' />

**_外部呼び出し状態_**タブから、外部呼び出しログを一覧形式で照会することができます。 最近24時間範囲のログを最大500件読み込んで表示します。 リアルタイムで照会すると、データは3秒間隔で更新されます。 

#### ![指示線1](/img/number-01.png)上段バーオプション

- **_エージェント_**または**_業務_**カラムの表示有無を選択できます。

- 検索語入力画面を通じて、該当の検索語が属するエージェント、業務、ログを含む列がフィルタリングできます。

- ![再生アイコン](/img/ic-caret-right.svg)**_再生_**: ログがアップデートされた時に最下段へ移動し、最近のログを確認できます。

- ![一時停止アイコン](/img/ico-pause.svg)**_一時停止_**: 自動スクロール移動を一時的に停止します。

- ![上段アイコン](/img/ic-caret-up.svg)![下段アイコン](/img/ic-caret-down.svg): 最上段または最下段へ移動します。

#### ![指示線2](/img/number-02.png)外部呼び出しログ一覧

アイコンとタグを通じて、外部呼び出しログの主な内容を簡単に確認できます。 エラーログの場合<span class='vslow'>赤色</span>として表示されます。

- 外部呼び出しタイプはアイコン![dbcアイコン](/img/ic-db.svg)(**_db_**)、![httpcアイコン](/img/ic-network-filled.svg)(**_httpcall_**)、![socketアイコン](/img/ic-branches.svg)(**_socket_**)で表示します。

- `target`: 外部呼び出しと接続対象を意味します。 

- `content`: ログの内容を意味します。 

- `exception`: エラー発生時に記録されたログの内容を意味します。

#### ![指示線3](/img/number-03.png)最後の呼び出し状態

照会されたすべてのログの外部呼び出し対象一覧を確認します。 直近の接続状態によって<span class='vslow'>成功</span>または<span class='mstop'>失敗</span>として表示されます。 

- 照会モード

  - **_List_**: 基本の一覧ビューです。 一覧全体の長さが画面の高さを超えたらスクロールが生成されます。

  - **_Map_**: 一覧が画面を超えたら一覧の長さを短くして、横方向に外部呼び出し対象を並べます。

- フィルター

  外部呼び出し対象を選択すると、該当の外部呼び出し対象のログのみをフィルタリングし、外部呼び出しログ一覧を照会することができます。 再選択すると解除されます。

:::note

**データがない場合**

リアルタイム照会時に、最近24時間の間に外部呼び出しログが収集されたかを確認します。 24時間の間、外部呼び出しログが収集されなかったら、次のような案内メッセージを表示します。

<ImgLang img='k8s-container-map-call-info-remote-none.png' desc='데이터 미수집' />

:::

<!-- 

* ![일시 정지 아이콘](/img/ic-s-pause.svg) 일시 정지

-->
