---
id: container-map
title: コンテナマップ
description: WhaTap Kubernetesのコンテナマップは、Kubernetesモニタリングの開始点です。
tags:
  - Kubernetes
  - Kubernetesモニタリング
  - コンテナマップ
---

ホーム画面 > プロジェクト選択 > **_ダッシュボード_** > **_コンテナマップ_**

WhaTap Kubernetesの**_コンテナマップ_**は、Kubernetesモニタリングの開始点です。ユーザー設定の表示によって、各オブジェクトは1つのコンテナ、または1つのPodを表示します。 

-   コンテナマップは、分析対象を選択し、グループを構成できます。 

-   ステータス指標としきい値を設定して、個々のコンテナまたはPodの状態を一覧で見ることができます。

-   個々のコンテナまたはPodを選択して、詳細情報を確認できます。**_トレース_**、**_メトリクス_**、**_ログ_**、**_イベント_**などの主要なモニタリングデータを提供します。

次の動画は、**_コンテナマップ_**メニューに関する基本ガイドです。

{@youtube: GHOJW3Rk3jc}

## 基本画面ガイド

<ImgLang img='k8s-container-map.png' desc='コンテナマップ' />

### ![](/img/number-01.png)クラスタープロジェクト - ネームスペースプロジェクトの移動

<ImgLang img='k8s-namespace-project-list.png' desc='コンテナマップのプロジェクトリスト' />

クラスタープロジェクト![クラスタープロジェクトアイコン](/img/ic-cluster-project.svg)下部にネームスペースプロジェクトを作成した場合、コンテナマップ画面の上の![下矢印アイコン](/img/ico-more-down.svg) **_もっと見る_**アイコンを選択すると、プロジェクトリストボックスが表示されます。プロジェクトリストボックスでは、クラスタープロジェクトを含むプロジェクトリストを確認でき、プロジェクト間の移動が可能です。 

:::note

ネームスペースプロジェクトの作成および管理に関する詳細は、[次の文書](namespace)を参照してください。

:::

### ![](/img/number-02.png)ユーザー設定

<ImgLang img='container-map-custom-view.png' desc='ユーザー設定' />

コンテナマップには、複数のユーザー設定が用意されており、目的の画面表示を作成する機能が画面順に用意されています。

-   カテゴリ：分析対象を選択できます。**_Container_**または**_Pod_**を指定できます。

-   **_グループ化_**：**_グループ化_**(クラスタリング) オプションを使用すると、クラスターコンポーネント間の階層関係を合計2段階まで表現できます。詳しい内容は、[次の文書](container-group)を参照してください。

-   **_ConState(state)_**：チャート指標を選択できます。

-   ![設定アイコン](/img/ico-setting.svg)ボタンをクリックすると、各オブジェクトにコンテナまたはPodの情報を表示できるオプションを選択できます。

    <ImgLang img='k8s-container-map-setting.png' desc='オプション' />

    -   **_WhaTapエージェントの表示_**：コンテナまたはPodの情報を表示できます。必要な**_ラベル_**オプションを選択します。ラベルオプションの詳細については、[次の文書](#label)を参照してください。

    -   **_カードの下部にメトリクスを表示する_**：画面の下部にメトリクス情報を表示の有無を選択できます。

    -   **_1分以内に作成されたコンテナを表示する_**：作成してから1分以内のコンテナの場合、明るい色で表示するオプションです。

-   ![フィルターアイコン](/img/ico-filter.svg) **_フィルター_**：ユーザーが選択した項目に基づいてフィルタリングし、コンテナまたはPodの状態を確認できます。

-   ![リセットアイコン](/img/ico-reset.svg) **_リセット_**：ユーザーが設定した画面表示を初期化します。

#### 指標選択としきい値設定

![コンテナマップチャート指標としきい値設定](/img/k8s-container-map-thresholds.png)

チャート指標の選択としきい値の設定は、コンテナマップのステータス表現を決定します。選択した指標の単位が数字の場合、しきい値を設定できます。設定したしきい値は、次のカテゴリに従って色で表現されます。 

-   0以上<span class='slow'>Warning</span>以下: <span class='normal'>青色</span>

-   <span class='slow'>Warning</span>以上<span class='vslow'>Critical</span>以下: <span class='slow'>オレンジ色</span>

-   <span class='vslow'>Critical</span>以上: <span class='vslow'>赤色</span>

:::note

-   数値型の指標単位では**_pct_**(percentage)、**_bps_**、**_millicore_**などが含まれます。**_pct#_**は100% 以上の値である指標単位です。 

-   チャート指標の選択としきい値設定の詳細については、[次の文書](container-status)を参照してください。

:::

#### ラベルオプション{#label}

-   **_なし_**：ブロックにラベルを表示しません。

-   **_名前_**：コンテナ/PODの名前を表示します。

-   **_アプリケーション_**：コンテナ/POD内のアプリケーションを表示します。

-   **_選択された指標_**：**_ConState(state)_**項目で選択されたチャート指標を表示します。

#### リアルタイム及び履歴参照{#time-seletor}

コンテナマップは基本的にリアルタイムの検索ベースですが、複数の視点に対応した検索機能を提供します。リアルタイムビューを変更するには、画面の左上の時間選択を使用します。

<ImgLang img='kubernetes-time-seletor.png' desc='時間セレクター' />

| 参照ステータス             | 説明                                                                 |
| ------------------- | ------------------------------------------------------------------ |
| リアルタイム参照 (LIVE)     | 基本モード<br/>10秒間隔でリアルタイムステータス変更                                      |
| 一時停止の参照 (PAUSE)     | リアルタイムステータス変更OFF<br/>現在のステータスを詳しく確認するために使用                         |
| 過去の参照               | ユーザーは、過去の特定の時点を指定し、確認<br/>年/月/日/時/分を指定できます                         |

### ![](/img/number-03.png)コンテナマップチャート{#container-map-chart}

<ImgLang img='k8s-container-map-chart.png' desc='コンテナマップチャート' />

-   ![number 1](/img/char-a.svg)は、グループ化された対象の総数と主要なリソース数を意味します。

-   ![number 2](/img/char-b.svg)各オブジェクトの形状と色は、コンテナまたはPodの特性と状態を意味します。

    -   色：コンテナーまたはPodの状態を意味します。<span class='normal'>Normal</span>, <span class='slow'>Warning</span>、<span class='vslow'>Critical</span>以外の状態の詳細については、[次の文書](container-status)を参照してください。

    -   枠線

        -   オブジェクトの中には境界線が表示されます。これは、コンテナに、Java、Node.js、Pythonなどのマイクロエージェントをインストールする場所です。 

        -   1つのPod内に2つのコンテナがあり、2つのコンテナのうち１つだけにマイクロエージェントをインストールした場合、境界線が表示されます。つまり、Pod内のコンテナのいずれかにマイクロエージェントがインストールされている場合は、境界線が表示されます。

    :::note 

    **ブロックとマイクロブロック**

    ![ブロックとマイクロブロックsc](/img/k8s-block-container.png)

    **_コンテナマップ_**では、1つのポリゴンを**ブロック**(Block)と言います。このとき、エージェントを含むブロック(ブロック内のブロック)を**マイクロブロック**(Micro Block)と呼びます。

    :::

    :::note 

    **グループ**

    ![コンテナブロックグループsc](/img/k8s-container-map-group.png)

    **_コンテナマップ_**画面ですべてのブロックを選択した場合、その複数のブロックをグループと呼びます。 

    :::

-   ![number 3](/img/char-c.svg)は、グループ化された対象のCPUおよびメモリ関連の指標を意味します。

-   ![number 4](/img/char-d.svg)は、グループ化された対象の内部アプリケーションのトランザクション情報を意味します。

## 概要ビューと詳細ビュー

ユーザーは、関心のあるコンテナまたはPodを選択して、概要と詳細情報を確認できます。この情報には、次の主要なモニタリングデータが含まれます。

-   **トレース** (Trace)

    コンテナ上のアプリケーション追跡するためのAPMツールを意味します。 

-   **メトリクス** (Metrics)

    ノードは、Kubernetesの様々な指標データを意味します。 

-   **ログ** (Log)

    コンテナとアプリケーションの各種ログを意味します。

-   **イベント** (Event)

    コンテナとアプリケーションの実行中に発生するイベントを記録することを意味します。 

これらのデータに基づいて、ユーザーはKubernetes環境のObservabilityを得ることができます。以下の**概要ビュー**、**詳細ビュー**画面は、いずれも上記の4つの項目を中心とした情報を提供します。

### 概要を表示

特定のオブジェクトまたはオブジェクトのセットをクリックします。右側に表示される**概要ビュー**画面から特定のオブジェクトの概要を確認することができます。

<ImgLang img='k8s-container-map-sum-all.png' desc='概要ビュー' />

-   **_トレース_**

    コンテナマップの**_トレース_**タブを使用して、コンテナ上で実行されるアプリケーションの個々のトランザクションを追跡できます。

-   **_メトリクス_**

    コンテナマップの**_メトリクス_**タブを使用して、各コンテナのリソース割当量、使用量などの各種指標データをリアルタイムで確認できます。

-   **_ログ_** 

    コンテナマップの**_ログ_**タブを使用すると、各コンテナの標準出力ログとコンテナ上のアプリケーションが生成するログを管理および表示できます。

-   **_イベント_** 

    コンテナマップの**_イベント_**タブを使用して、Kubernetesクラスターで発生したイベントとWhaTapのアラート機能を使用して、ユーザーのしきい値のイベントを表示できます。 

### 詳細を確認

**概要ビュー**画面の右上の![詳細を見るアイコン](/img/ico-detail-mode.svg)ボタンをクリックしてください。**詳細ビュー**画面に切り替えます。**詳細ビュー**画面設定に関する詳細な説明は、[次の文書](container-map-detail-mode)を参照してください。

<ImgLang img='container-map-detail-mode.png' desc='詳細を確認' />

:::note 

**統合コンテナマップ**

ホーム画面>プロジェクト選択>**_リソース_**>**_統合コンテナマップ_**

クラスタープロジェクトとネームスペースプロジェクトを含むコンテナマップを表示するには、リソースメニューの下の統合コンテナマップを確認してください。

:::

<!-- 

그룹화 옵션
그룹화할 수 있는 조건을 선택할 수 있습니다. 컨테이너 또는 Pod를 선택한 조건에 따라 카드로 구분해 표시합니다.

-->
