---
id: agent-resource
title: エージェントの過負荷防止
description: 過負荷が発生した場合、ユーザーサーバーのリソース使用量への影響を最小限に抑えるために関連エージェントの設定方法を提供します。
keywords:
  - Server
  - エージェント
  - リソースの保護
toc_max_heading_level: 3
---

{/* Linux 및 Windows 서버에서 사용하는 와탭 서버 모니터링 에이전트는 서버의 안정성을 유지하고, 과부하 상황에서도 사용자 서버의 자원 사용량에 미치는 영향을 최소화하기 위해 다음과 같은 방식으로 동작합니다. */}

Linux及びWindowsサーバーで使用するWhatapのサーバーモニタリングエージェントは、過負荷発生時にサーバーの安定性を維持し、資源使用量の影響を最小限にするため、次のようなエージェント設定を提供します。

## Linux / Windows

### メモリ使用量の保護

Whatapエージェントは、メモリの使用量が臨界点(100MB)を超える場合、自動的にプロセスを再起動し、ユーザーサーバーの利用可能なメモリを保護します。

```bash
memory.usage.limit=104857600  #メモリ使用量の臨界値(100MB、バイト単位)
```

### 自動的再起動

Whatapエージェントは1日1回、自動的に再起動されます。 該当サイクルはユーザー設定を通じて調整可能です。 この機能は、データ収集の障害と一時的なプロセスの誤動作を解消するために提供されます。

```bash
housekeeping.enabled=true             #自動的な再起動機能の活性化(デフォルト：true)
housekeeping.hour=2                   #再起動時間(サーバー時間基準、デフォルト：2時)
housekeeping.exitoncheckfail=true     #収集障害の発生時、自動的に再起動(デフォルト：true)
```

### CPU使用量の保護

CPUの使用量が臨界値を超える場合、Whatapエージェントは実行速度を自動的に調整してサーバーのCPU可用性を保護します。 デフォルトでは非アクティブになっており、必要に応じてアクティブにできます。

```bash
cpu.limit.enabled=false           # CPU使用量の保護機能を非アクティブにする(デフォルト：false)
cpu.usage.limit=50                # CPU使用量の臨界値(単一コア基準 50%)
```

## Windows

### Handle使用量の保護

Windows環境では、Whatapエージェントが使用するHandleの数が臨界点(1000個)を超える場合、自動的に再起動してユーザサーバーの利用可能なHandleを保護します。

```bash
windows.handle.threshold=1000    # Handle使用量の臨界値(既定値：1000個)
```
