---
id: analysis-deadlock
title: デッドロック
description: SQL Serverで発生したデッドロック情報を5秒間隔で収集したデータに基づいて詳細情報を提供します。
keywords:
  - SQL Server
  - データベース
  - デッドロック
  - Deadlock
---

ホーム画面 &gt; プロジェクト選択 &gt; <Cmdname sid="side_analysis" className="uitext" /> &gt; <Cmdname sid="side_deadLock" className="uitext" />

SQL Serverで発生したデッドロック情報を5秒間隔で収集したデータに基づいて詳細情報を提供します。

:::note

- **デッドロック**(**Deadlock**)は、2つ以上のセッションが互いに所有しているリソースを待機しながら永遠に終了しない膠着状態を指します。 SQL Serverではこのようなデッドロック状態を感知し、特定のトランザクションを強制終了して膠着状態を解消します。 しかし、頻繁なデッドロックはシステム性能の低下とユーザーエクスペリエンスの悪化を誘発するため、適切なモニタリングとチューニングが必要です。

- この機能は、[DBX 에이전트 2.2.2バージョン](../release-notes/db/dbx-2_2_2) 以降でサポートします。

:::

## 基本的な使い方

ユーザーは、特定の時間、インスタンス、データベースを選択して、デッドロックイベントを照会できます。

<ImgLang img="db-deadlock-basic-mssql-v2.png" desc="Deadlock" />

1. 画面上段の <Cmdname sid="time" className="uitext" />で照会する日付を選択して時間を設定します。

2. <Cmdname sid="instance" className="uitext" />でモニタリングするエージェント(インスタンス) およびデータベースを選択します。

3. ![検索アイコン](/img/ico-btn-search.png)ボタンを選択します。

選択したインスタンスで設定した時間の間に発生したデッドロックの状況を確認できます。 ***query***カラム項目にマウスをオーバーすると、SQL文をプレビューできます。

:::note

- 照会時間は最大3週間まで選択できます。

:::

:::tip

デッドロックの発生原因を分析し、頻繁なデッドロックパターンを確認します。

- 同一リソースへの重複アクセスを最小限に抑えるようにクエリを再設計します。

- 適切なインデックスを使用して、データアクセスパスを効率化します。

- トランザクションを短く保持し、トランザクション内での不要なタスクを回避します。

- 必要に応じて、ロックの優先順位を調整するか、クエリの再構成によって衝突の可能性を減らします。

:::

## カラムガイド

| 項目                 | 説明                                                              |
| ------------------ | --------------------------------------------------------------- |
| **Dead Lock Time** | デッドロックが発生した時間です。 これにより、特定の時間帯のトランザクションを分析できます。                  |
| **Dead Count**     | 同じ時間に発生したデッドロックの回数です。 デッドロックの頻度を把握し、問題の深刻度を評価できます。              |
| **State**          | デッドロックイベントのステータスです。 検知されたデッドロックの処理可否を確認できます。                    |
| **Query**          | デッドロックを誘発したクエリの内容です。 クエリの最適化とデッドロックの解決に重要な情報を提供します。             |
| **DB Id**          | デッドロックが発生したデータベースのIDです。 データベースを識別して、問題の原因を絞り込むのに役立ちます。          |
| **HoBT Id**        | デッドロックが発生したリソース(Heap or B-Tree)のIDです。                           |
| **SPID**           | デッドロックに関与したプロセスID(Session Process ID)です。 問題を引き起こしたセッションを識別できます。 |
| **Mode**           | デッドロックが発生したロックモード(例、共有ロック、排他的ロック)を示します。                         |
