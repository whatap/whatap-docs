---
id: install-check
title: インストールチェックリスト
description: PHPエージェントのインストールチェックについての説明です。
keywords:
  - PHP
  - PHPモニタリング
  - アプリケーション
  - アプリケーションモニタリング
  - インストールチェックリスト
---

## サービスの再起動

インストール後、Apache または PHP-FPM サービスを再起動すると、設定された PHP 拡張モジュール *whatap.so* が読み込まれます。  
whatap-php サービスが実行されていない場合やエラーが発生した場合は、サービスを再起動してください。

### Red Hat/CentOS

```bash title=SH
$ service whatap-php restart
```

### Debian/Ubuntu

```bash title=SH
$ sudo service whatap-php restart
```

### FreeBSD

```bash title=SH
$ service whatap_php restart
```

### Windows

```bash title=SH
net restart "WhaTap PHP"
```

## PHP 拡張モジュールのインストール確認

インストール完了後、Apache または PHP-FPM を再起動すると *whatap.so* 拡張モジュールが読み込まれます。  
PHP モジュールが正常にインストールされているか、次の方法で確認できます。

1. PHP の追加 INI ディレクトリに *whatap.ini* が作成されているか確認します。

    * **Linux/FreeBSD**
    ```bash title=SH
    $ find / | grep whatap.ini
    ```

    * **Windows**
    ```cmd
    dir /s C:\ | findstr whatap.ini
    ```

2. PHP の拡張モジュールディレクトリに *whatap.so* が作成されているか確認します。

    * **Linux/FreeBSD**
    ```bash title=SH
    $ find / | grep whatap.so
    ```

    * **Windows**
    ```cmd
    dir /s C:\ | findstr php_whatap.dll
    ```

3. PHP 拡張モジュールが有効になっているか確認します。

    * **Linux/FreeBSD**
    ```bash title=SH
    $ sudo php -m

    [PHP Modules]
    bz2
    calendar
    Core
    ctype
    curl
    date
    …
    whatap   # whatap モジュール読み込み確認
    …
    [Zend Modules]
    ```

    * **Windows**
    ```cmd
    php -m | findstr whatap
    ```

    **正常出力**
    ```
    whatap
    ```

4. whatap-php サービスの状態を確認します。

    * **Linux/FreeBSD**
    ```bash title=SH
    $ service whatap-php status
    ```

    * **Windows**
    ```cmd
    sc query "WhaTap PHP"
    ```

    または `services.msc` を開き、WhaTap PHP サービス状態を確認できます。

    **正常出力**
    ```
    SERVICE_NAME: WhaTap PHP
    STATE : 4 RUNNING
    ```

5. ログを確認します。

    **ログファイルの場所**
    ```
    C:\Program Files\WhaTap\PHP\logs\
    ├── whatap-boot-YYYYMMDD.log    # 起動ログ（日付別）
    └── whatap-install.log          # インストールログ
    ```

    **ログ確認**
    ```cmd
    REM インストールログ確認
    type "C:\Program Files\WhaTap\PHP\logs\whatap-install.log"

    REM 最新ブートログ確認
    dir "C:\Program Files\WhaTap\PHP\logs\whatap-boot-*.log" /O-D
    type "C:\Program Files\WhaTap\PHP\logs\whatap-boot-20251117.log"
    ```

    **PowerShell リアルタイムログ**
    ```powershell
    # 最新ブートログのリアルタイム監視
    $latestLog = Get-ChildItem "C:\Program Files\WhaTap\PHP\logs\whatap-boot-*.log" | Sort-Object LastWriteTime -Descending | Select-Object -First 1
    Get-Content $latestLog.FullName -Wait
    ```

6. **管理 > エージェント設定** で設定されたサーバーが追加されているか確認します。

    <ImgLang img='php-agent-list.png' />