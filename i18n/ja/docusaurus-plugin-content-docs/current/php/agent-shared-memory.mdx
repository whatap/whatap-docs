---
id: agent-shared-memory
title: 共有メモリ
description: PHPエージェント共有メモリの説明です。
tags:
  - 共有メモリ
  - PHP
  - 設定
  - アプリケーション
---

- **whatap.shm_enabled** <span class='type'>String</span>

  共有メモリの使用有無を設定します。ApacheまたはPHP-FPMの再起動後に適用されます。

  - PHP extension（_whatap.so_）とwhatap-phpservice間で共有メモリを利用したIPC機能を追加しました。

  - `shm_key`の値として設定されたキーで生成します。すでにキーが使用されている場合は、別のキーを設定できます。

  - whatap-php serviceで共有メモリの生成・削除を管理します。PHP extensionでは、照会機能のみを実行します。

- **whatap.shm_key** <span class='type'>String</span>

  共有メモリを生成する際に必要なキー情報です。ApacheまたはPHP-FPM、そしてwhatap-phpサービスを再起動する必要があります。

- **whatap.active_stat_enabled** <span class='type'>Boolean</span>

  デフォルト値 `true`

  アクティブステータスの使用有無を設定します。  

  共有メモリを通じて進行中のリクエストのステータスを5秒間隔で収集します。ダッシュボード画面にアクティブステータスグラフが表示されます。ステータスは、一般関数、SQL、DB connection、外部HTTP接続、ソケット接続があり、各ステータスごとに進行中のリクエスト数を表示します。

  ApacheまたはPHP-FPMを再起動して進行中のプロセスが処理中に終了すると、正常にアクティブステータス完了処理ができず、エラーになる可能性があります。

  1. アクティブトランザクション数と大きな差が生じる場合は、設定で`whatap.active_stat_enabled`を`false`に設定します。 

  2. ダッシュボードが、`0`にリセットされた場合は、`true`に設定します。
