---
id: update-agent
title: エージェントのアップデート
description: Javaエージェントを最新バージョンにアップデートする手順を案内します。最新のエージェントをダウンロードし、アプリケーションサーバーを再起動してアップデートを適用する方法が含まれます。また、安定的なシステム終了のためのアプリ終了、エージェントのJARファイル変更、アプリ開始の順番に従ってアップデートする手順が確認できます。
keywords:
  - Java
  - エージェント
  - アップデート
---

import Downloadagent from "../common-items/_download-agent.mdx";

<Downloadagent />

## エージェントアップデートの自動設定

Javaエージェントをアップデートするには、サーバーを再起動する必要があります。再起動前に*whatap.agent.jar*ファイルが変更されると、アプリケーションサーバが再起動する過程で安全なシステム終了(shutdown)が失敗する可能性があります。

Javaエージェントを更新するには、次の手順で進める必要があります。

1. app shutdown
2. agent jar変更
3. app start

このプロセスを簡単に処理するために、WhaTapのエージェントjarファイル名にはバージョン番号が含まれています。アップデート中に最新バージョンを自動適用するように設定することが重要です。

```bash {3} showLineNumbers
########## WHATAP ############
WHATAP_HOME=/whatap
WHATAP_JAR=`ls ${WHATAP_HOME}/whatap.agent-*.jar | sort -V | tail -1`
JAVA_OPTS="${JAVA_OPTS} -javaagent:${WHATAP_JAR} "
########## WHATAP ############
```
