---
id: openapi-call-apm-spot
title: Spot情報照会
description: Spot情報照会（Application）のためのOpenAPIに関する説明を提供します。
tags:
  - Open API
  - API
  - Spot情報照会
  - アプリケーション
  - アプリケーションモニタリング
---

## すべての情報照会

<span class='apitype'>GET</span> https://api.whatap.io/open/api/json/spot

```bash title='command'
curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/json/spot"
```

```json title='response'
{
    "pcode": 8,
    "act_agent": "6",
    "inact_agent": "6",
    "host": "1",
    "cpucore": "2",
    "txcount": "459",
    "tps": "93.07",
    "user": "1007",
    "actx": "149",
    "rtime": "1873",
    "cpu": "29.35",
    "threadpool_active": "0",
    "threadpool_queue": "0",
    "dbconn_total": "600.0",
    "dbconn_act": "239.0",
    "dbconn_idle": "361.0",
    "act_method": "51",
    "act_sql": "24",
    "act_httpc": "64",
    "act_dbc": "10",
    "act_socket": "0"
}
```

| Response Field    |            Field Type           | 説明                                      |
| ----------------- | :-----------------------------: | --------------------------------------- |
| pcode             | <span class='api'>number</span> | 照会したプロジェクトコード                           |
| act_agent         | <span class='api'>string</span> | [アクティベーション状態のエージェント数](#active-agent)    |
| inact_agent       | <span class='api'>string</span> | [非アクティブ状態のエージェント数](#deactive-agent)     |
| host              | <span class='api'>string</span> | [ホスト（HOST）数](#host-count)               |
| cpucore           | <span class='api'>string</span> | [ホストCPUコアの合計数](#sum-cpu)                |
| txcount           | <span class='api'>string</span> | [トランザクション数](#count-transaction)         |
| tps               | <span class='api'>string</span> | [TPS](#tps)                             |
| ユーザー              | <span class='api'>string</span> | [アクティブユーザー（5分）](#active-user-5m)        |
| actx              | <span class='api'>string</span> | [アクティブトランザクション](#active-transaction)    |
| rtime             | <span class='api'>string</span> | [平均応答時間](#response-time)                |
| cpu               | <span class='api'>string</span> | [平均CPU使用率](#usage-cpu)                  |
| threadpool_active | <span class='api'>string</span> | [スレッドプールのアクティブスレッド数](#count-threadpool) |
| threadpool_queue  | <span class='api'>string</span> | スレッドプールのキューイングスレッド数                     |
| dbconn_total      | <span class='api'>string</span> | 全体DB Connection数                        |
| dbconn_act        | <span class='api'>string</span> | アクティブ(Active) DB 接続の数                   |
| dbconn_idle       | <span class='api'>string</span> | 非アクティブな (idle) DB 接続の数                  |
| act_method        | <span class='api'>string</span> | アクティブMethod数                            |
| act_sql           | <span class='api'>string</span> | アクティブSQL数                               |
| act_httpc         | <span class='api'>string</span> | アクティブHTTP Call数                         |
| act_dbc           | <span class='api'>string</span> | アクティブDB Connection数                     |
| act_socket        | <span class='api'>string</span> | アクティブSocket数                            |

## アクティブ状態のエージェント数{#active-agent}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/act_agent

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/act_agent"
```

```json title='response'
5//アクティブエージェント数
```

## 非アクティブ状態のエージェント数{#deactive-agent}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/inact_agent

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/inact_agent"
```

```json title='response'
1//非アクティブなエージェント数
```

## ホスト（HOST）数{#host-count}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/host

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/host"
```

```json title='response'
2//ホスト数
```

## ホストCPUコアの合計{#sum-cpu}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/cpucore

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/cpucore"
```

```json title='response'
16//CPUコア数
```

## トランザクション数{#count-transaction}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/txcount

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/txcount"
```

```json title='response'
469//トランザクション数
```

## TPS{#tps}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/tps

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/tps"
```

```json title='response'
92.03//毎秒処理されたトランザクション数（TPS）
```

## アクティブユーザ（5分）{#active-user-5m}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/user

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/user"
```

```json title='response'
1007//5分間のリアルタイムユーザー数
```

:::note 

WhaTapは最近5分以内にトランザクションを起こしたユーザをカウントし、**同時接続ユーザ**を測定します。

:::

## アクティブトランザクション{#active-transaction}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/actx

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/actx"
```

```json title='response'
171//アクティブトランザクション数
```

## 平均応答時間{#response-time}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/rtime

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/rtime"
```

```json title='response'
1644//平均応答時間
```

## CPUの平均使用率{#usage-cpu}

<span class='apitype'>GET</span> https://api.whatap.io/open/api/cpu

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/api/cpu"
```

```json title='response'
9.26//CPUの平均使用率
```

## アクティブ／非アクティブ状態のエージェント情報

<span class='apitype'>GET</span> https://api.whatap.io/open/json/agents

```bash title='command'
$ curl -L -w "\n" -H "x-whatap-token: {{PROJECT API TOKEN}}" -H "x-whatap-pcode: {{projectCode}}" "https://api.whatap.io/open/json/agents"
```

```json title='response'
{
  "data": [
    {
      "host_ip": "127.0.0.1",
      "oname": "TC-0-1-8087",
      "active": true
    },
    {
      "host_ip": "127.0.0.1",
      "oname": "TC-0-1-8086",
      "active": true
    }
  ]
}
```

| Response Field |       Field Type                 | 説明                                                       |
| -------------- | :------------------------------: | -------------------------------------------------------- |
| host_ip        |  <span class='api'>string</span> | エージェントが位置するホストのIPアドレス                                    |
| oname          |  <span class='api'>string</span> | エージェント名                                                  |
| active         | <span class='api'>boolean</span> | エージェントアクティブ化の有無（アクティブ：`true`、非アクティブ：`false`）             |
