---
id: agent-number-of-user
title: ユーザー数
description: WASに接続したリアルタイムユーザー数を集計します。
keywords:
  - .NET
hide_table_of_contents: false
---

### ユーザー数の集計

.NETウェブアプリケーションサーバーに接続したユーザーの数を集計します。

:::note

次のオプションで設定した値を有効にするには、IISを再起動します。

:::

- **trace_user_enabled** <span class='type'>Boolean</span>

  既定値 `true`

  リアルタイムのユーザー集計可否を設定します。ユーザー追跡オプションが重複設定されている場合は、クッキー値を優先します。

- **trace_user_cookie_keys** <span class='type'>String</span>

  設定したクッキーの値を固有のユーザー情報として選択します。複数を登録する場合は、コンマ(,)を区切り文字として使用してください。設定した順に検索します。

- **trace_user_using_ip** <span class='type'>Boolean</span>

  既定値 `true`

  リアルタイムユーザーをIPアドレスで集約します。IPアドレスでなく、クッキーでユーザーを区分したい場合は、値を`false`に変更してください。

- **trace_http_client_ip_header_key** <span class='type'>String</span> <code class="my">.NET Agent v2.2.2 or later</code> <ScrollToLink anchor='trace_http_client_ip_header_key' />

  既定値 `X-Forwarded-For`

  クライアントIP(Remote IP)情報を特定HTTPヘッダーの値に変更して設定する機能です。プロキシ(Proxy) 環境では、`X-Forwarded-For`ヘッダーの値をクライアントIPとして設定できます。

  WEB/WAS の前にL4 などのロードバランサーが設置されている場合、クライアントのIPアドレスではなく、L4 のIPアドレスがRemote Adressである場合があります。この状況でクライアントのIP情報がHTTPヘッダーに特定キーの値として記録される場合は、そのキー値に置き換えることができます。
