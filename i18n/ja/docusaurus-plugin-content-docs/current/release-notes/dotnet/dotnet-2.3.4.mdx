---
id: dotnet-2_3_4
title: .NET Agent v2.3.4
toc_max_heading_level: 2
pagination_next: release-notes/dotnet/dotnet-2_3_3
displayed_sidebar: releaseSidebar
---

2024年10月02日

- <Status priority='0'>Fixed</Status>最近追加されたモニタリング対象の中でCancellationToken関連メソッドを一時削除

- <Status priority='1'>New</Status> .NET Coreで`expand_transaction_level`設定サポートの追加

  - **expand_transaction_level** <span class='type'>Boolean</span>

    デフォルト値 `false`

    そのオプションを`true`に設定すると、トランザクションの外部から発生するSQLおよびHTTPの呼び出しをトランザクションと見なし、ヒットマップに表示します。

  - **expand_transaction_basetime** <span class='type'>Int</span>

    デフォルト値 `1000`ms (1秒)

    `expand_transaction_level` オプションが `true`に設定されている場合、指定した時間よりも応答時間のかかるリクエストのみがデータを収集します。 毎秒最大100件のデータを収集します。 最小値は `100` msで0.1秒です。

- <Status priority='1'>New</Status>Desktop applicationモニタリング対応を追加

  - `expand_transaction_level`オプションの値を`true`に設定します。

  - アプリケーションを実行する前に、次のコマンドをプロンプトに入力します。

    ```csharp
    SET COR_PROFILER=\{D76F1D76-A9E0-4C87-874F-C0AD93D4229B\}
    SET COR_ENABLE_PROFILING=1

    SET CORECLR_PROFILER={21CAE18A-4E44-4578-83FD-0576AAA47E68}
    SET CORECLR_ENABLE_PROFILING=1
    SET DOTNET_STARTUP_HOOKS=C:\Program Files\WhaTap .NET\core\Whatap.Startup.NetCore.dll

    SET WHATAP_TRACE_IIS_ONLY=0
    SET EXPAND_TRANSACTION_LEVEL=1
    SET EXPAND_TRANSACTION_BASETIME=100
    ```

  - コマンドの実行後、対象アプリケーションを実行します。 

  :::note 

  Desktop applicationモニタリング対応はベータ段階で、モニタリング範囲と使いやすさを漸進的にアップグレードする予定です。

  :::

import DownloadAgent from "./_download-dotnet-agent.mdx";

<DownloadAgent />
