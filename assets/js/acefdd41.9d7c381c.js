"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["71472"],{90598:function(e,n,r){r.d(n,{Ay:()=>i,RM:()=>a});var s=r(74848),t=r(84429);let a=[];function o(e){let n={admonition:"admonition",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Requirements"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"The WhaTap Kubernetes agent 1.5.6 or later is required."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["If it is a Kubernetes cluster project (",(0,s.jsx)("code",{class:"my",children:"CP"}),"), you can view the corresponding menu."]}),"\n"]}),"\n"]})]})}function i(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},70694:function(e,n,r){r.d(n,{Ay:()=>i,RM:()=>a});var s=r(74848),t=r(84429);let a=[];function o(e){let n={table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Classification"}),(0,s.jsx)(n.th,{children:"Metric"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{rowSpan:"3",children:"API GET request"}),(0,s.jsx)(n.td,{children:"GET requests per minute"}),(0,s.jsx)(n.td,{children:"Number of GET requests per minute of kube-apiserver"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Trend of GET request counts per second"}),(0,s.jsx)(n.td,{children:"Trend of GET request counts per second of kube-apiserver"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Trend of GET request counts per minute for each resource and subresource"}),(0,s.jsx)(n.td,{children:"Trend of the GET request counts per minute by resource and subresource incoming to kube-apiserver"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{rowSpan:"3",children:"API POST request"}),(0,s.jsx)(n.td,{children:"POST requests per minute"}),(0,s.jsx)(n.td,{children:"Number of POST requests per minute of kube-apiserver"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Trend of POST request counts per second"}),(0,s.jsx)(n.td,{children:"Trend of POST request counts per second of kube-apiserver"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Trend of POST request counts per minute for each resource and subresource"}),(0,s.jsx)(n.td,{children:"Trend of the POST request counts per minute by resource and subresource incoming to kube-apiserver"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{rowSpan:"9",children:"Requests by API response code"}),(0,s.jsx)(n.td,{children:"[ 2xx ] Request count per minute"}),(0,s.jsx)(n.td,{children:"The number of requests per minute with the response codes between 200 and 300 among kube-apiserver requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"[ 2xx ] Trend of request counts per minute for each response code"}),(0,s.jsx)(n.td,{children:"Response code-based request counts per minute with the response codes between 200 and 300 among kube-apiserver requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"[ 2xx ] Trend of request counts per minute for each resource and subresource"}),(0,s.jsx)(n.td,{children:"Trend of request counts per minute grouped by resource and subresource with the response codes between 200 and 300 among kube-apiserver requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"[ 3xx ] Request count per minute"}),(0,s.jsx)(n.td,{children:"The number of requests per minute with the response codes between 300 and 400 among kube-apiserver requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"[ 3xx ] Trend of request counts per minute for each response code"}),(0,s.jsx)(n.td,{children:"Response code-based request counts per minute with the response codes between 300 and 400 among kube-apiserver requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"[ 3xx ] Trend of request counts per minute for each resource and subresource"}),(0,s.jsx)(n.td,{children:"Trend of request counts per minute grouped by resource and subresource with the response codes between 300 and 400 among kube-apiserver requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"[ 400~ ] Request count per minute"}),(0,s.jsx)(n.td,{children:"The number of requests per minute with the response codes above 400 among kube-apiserver requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"[ 400~ ] Trend of request counts per minute for each response code"}),(0,s.jsx)(n.td,{children:"Response code-based request counts per minute with the response codes below 400 among kube-apiserver requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"[ 400~ ] Trend of request counts per minute for each resource and subresource"}),(0,s.jsx)(n.td,{children:"Trend of request counts per minute grouped by resource and subresource with the response codes above 400 among kube-apiserver requests."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{rowSpan:"2",children:"Go Metrics"}),(0,s.jsx)(n.td,{children:"Number of goroutines"}),(0,s.jsx)(n.td,{children:"Number of current goroutines"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Number of threads"}),(0,s.jsx)(n.td,{children:"Current OS thread count"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Number of active requests (1 second)"}),(0,s.jsx)(n.td,{children:"Number of requests run in the last 1 second"}),(0,s.jsx)(n.td,{children:"Number of requests run within 1 second in kube-apiserver during data collection"})]})]})]})}function i(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},60271:function(e,n,r){r.d(n,{Ay:()=>i,RM:()=>a});var s=r(74848),t=r(84429);let a=[];function o(e){let n={admonition:"admonition",code:"code",em:"em",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["When installing the WhaTap Kubernetes agent, modify the ",(0,s.jsx)(n.em,{children:"yaml"})," file downloaded according to the following instructions to enable the kube-apiserver monitoring."]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Add the agent container specifications for kube-apiserver monitoring under the spec of the ",(0,s.jsx)(n.code,{children:"whatap-master-agent"})," deployment."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'containers:\n  - name: whatap-control-plane-helper\n    image: whatap/kube_mon\n    imagePullPolicy: Always\n    ports:\n      - containerPort: 9496\n    command: ["/data/agent/master/whatap_control_plane_helper"]\n    args: ["-collect_control_plane_monitoring_enabled=true"]\n'})}),"\n",(0,s.jsx)(n.p,{children:"See the following example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:"{17-23}",children:'apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: whatap-master-agent\n  namespace: whatap-monitoring\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: whatap-master-agent\n  template:\n    metadata:\n      labels:\n        name: whatap-master-agent\n    spec:\n      containers:\n        - name: whatap-control-plane-helper\n          image: whatap/kube_mon\n          imagePullPolicy: Always\n          ports:\n            - containerPort: 9496\n          command: ["/data/agent/master/whatap_control_plane_helper"]\n          args: ["-collect_control_plane_monitoring_enabled=true"]\n        - name: whatap-master-agent\n          image: whatap/kube_mon\n          imagePullPolicy: Always\n          resources:\n            requests:\n              memory: 300Mi\n              cpu: 100m\n            limits:\n              memory: 350Mi\n              cpu: 200m\n          ports:\n            - containerPort: 6600\n          command: [\'/bin/entrypoint.sh\']\n          env:\n            - name: WHATAP_LICENSE\n              value: "xxxxxxxx-12345xxxxxx-x00e000000xxx8"\n            - name: WHATAP_HOST\n              value: "13.124.11.223/13.209.172.35"\n            - name: WHATAP_PORT\n              value: "6600"\n            - name: WHATP_MEM_LIMIT\n              valueFrom:\n                resourceFieldRef:\n                  containerName: whatap-master-agent\n                  resource: limits.memory\n          volumeMounts:\n            - name: start-script-volume\n              mountPath: /bin/entrypoint.sh\n              readOnly: true\n              subPath: entrypoint.sh\n            - mountPath: /whatap_conf\n              name: whatap-config-volume\n      volumes:\n        - name: start-script-volume\n          configMap:\n            defaultMode: 0700\n            name: master-start-script\n        - name: whatap-config-volume\n          emptyDir: {}\n      serviceAccount: whatap\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Add the following to the env settings in the ",(0,s.jsx)(n.code,{children:"whatap-master-agent"})," container specifications of the ",(0,s.jsx)(n.code,{children:"whatap-master-agent"})," deployment."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'env:\n  - name: collect_control_plane_monitoring_enabled\n    value: "true"\n'})}),"\n",(0,s.jsx)(n.p,{children:"See the following example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:"{38-39}",children:'apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: whatap-master-agent\n  namespace: whatap-monitoring\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: whatap-master-agent\n  template:\n    metadata:\n      labels:\n        name: whatap-master-agent\n    spec:\n      containers:\n        - name: whatap-control-plane-helper\n          image: whatap/kube_mon\n          imagePullPolicy: Always\n          ports:\n            - containerPort: 9496\n          command: ["/data/agent/master/whatap_control_plane_helper"]\n          args: ["-collect_control_plane_monitoring_enabled=true"]\n        - name: whatap-master-agent\n          image: whatap/kube_mon\n          imagePullPolicy: Always\n          resources:\n            requests:\n              memory: 300Mi\n              cpu: 100m\n            limits:\n              memory: 350Mi\n              cpu: 200m\n          ports:\n            - containerPort: 6600\n          command: [\'/bin/entrypoint.sh\']\n          env:\n            - name: collect_control_plane_monitoring_enabled\n              value: "true"\n            - name: WHATAP_LICENSE\n              value: "xxxxxxxx-12345xxxxxx-x00e000000xxx8"\n            - name: WHATAP_HOST\n              value: "13.124.11.223/13.209.172.35"\n            - name: WHATAP_PORT\n              value: "6600"\n            - name: WHATP_MEM_LIMIT\n              valueFrom:\n                resourceFieldRef:\n                  containerName: whatap-master-agent\n                  resource: limits.memory\n          volumeMounts:\n            - name: start-script-volume\n              mountPath: /bin/entrypoint.sh\n              readOnly: true\n              subPath: entrypoint.sh\n            - mountPath: /whatap_conf\n              name: whatap-config-volume\n      volumes:\n        - name: start-script-volume\n          configMap:\n            defaultMode: 0700\n            name: master-start-script\n        - name: whatap-config-volume\n          emptyDir: {}\n      serviceAccount: whatap\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Add the following roles to the ",(0,s.jsx)(n.code,{children:"whatap"})," ClusterRole to collect the control plane monitoring performance metrics."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'rules:\n  - nonResourceURLs: ["/metrics"]\n    verbs: ["*"]\n'})}),"\n",(0,s.jsx)(n.p,{children:"See the following example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:"{18-19}",children:'apiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  annotations:\n    rbac.authorization.kubernetes.io/autoupdate: "true"\n  name: whatap\n  namespace: whatap-monitoring\nrules:\n  - apiGroups: ["*"]\n    resources: ["namespaces", "pods", "pods/log", "configmaps","services", "endpoints","daemonsets","ingresses","deployments","nodes","persistentvolumes","persistentvolumeclaims", "events", "replicasets", "roles", "rolebindings", "clusterroles", "clusterrolebindings", "jobs", "cronjobs", "statefulsets", "serviceaccounts", "configmaps", "storageclasses", "horizontalpodautoscalers" ]\n    verbs: ["get","list","watch"]\n  - apiGroups: [""]\n    resources: ["pods/exec"]\n    verbs: ["create"]\n  - apiGroups: [""]\n    resources: ["configmaps"]\n    verbs: ["*"]\n  - nonResourceURLs: ["/metrics"]\n    verbs: ["*"]\n---\n'})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.mdxAdmonitionTitle,{}),(0,s.jsxs)(n.p,{children:["You can also enable the kube-apiserver monitoring via the ",(0,s.jsx)(n.code,{children:"kubectl apply"})," or ",(0,s.jsx)(n.code,{children:"kubectl edit"})," command."]})]})]})}function i(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},91078:function(e,n,r){r.r(n),r.d(n,{metadata:()=>s,default:()=>m,frontMatter:()=>d,contentTitle:()=>l,toc:()=>h,assets:()=>u});var s=JSON.parse('{"id":"kubernetes/kube-apiserver-dashboard","title":"kube-apiserver Dashboard","description":"It provides the guide to the kube-apiserver dashboard.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/kubernetes/kube-apiserver-dashboard.mdx","sourceDirName":"kubernetes","slug":"/kubernetes/kube-apiserver-dashboard","permalink":"/whatap-docs/kubernetes/kube-apiserver-dashboard","draft":false,"unlisted":false,"editUrl":"undefined/docs/kubernetes/kube-apiserver-dashboard.mdx","tags":[],"version":"current","frontMatter":{"id":"kube-apiserver-dashboard","title":"kube-apiserver Dashboard","description":"It provides the guide to the kube-apiserver dashboard.","keywords":["Kubernetes","Kubernetes Monitoring","kube-apiserver","Control Plane"],"toc_max_heading_level":2,"isTranslationMissing":false},"sidebar":"kubeSidebar","previous":{"title":"PV/PVC List","permalink":"/whatap-docs/kubernetes/pv-list"},"next":{"title":"kube-apiserver Metrics Search","permalink":"/whatap-docs/kubernetes/kube-apiserver-metrics-search"}}'),t=r(74848),a=r(84429),o=r(90598),i=r(60271),c=r(70694);let d={id:"kube-apiserver-dashboard",title:"kube-apiserver Dashboard",description:"It provides the guide to the kube-apiserver dashboard.",keywords:["Kubernetes","Kubernetes Monitoring","kube-apiserver","Control Plane"],toc_max_heading_level:2,isTranslationMissing:!1},l,u={},h=[...o.RM,{value:"Basic screen guide",id:"basic-screen-guide",level:2},{value:"Enabling the kube-apiserver monitoring",id:"enabling-the-kube-apiserver-monitoring",level:2},...i.RM,{value:"kube-apiserver metric",id:"kube-apiserever-metric",level:2},...c.RM];function p(e){let n={a:"a",h2:"h2",li:"li",p:"p",section:"section",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Cmdname:r,ImgLang:s}=n;return r||x("Cmdname",!0),s||x("ImgLang",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Select Home > cluster project (",(0,t.jsx)("code",{class:"my",children:"CP"}),") > ",(0,t.jsx)(r,{sid:"side_controlPlane",className:"uitext"})," > ",(0,t.jsx)(r,{sid:"side_kubeApiserverDashboard",className:"uitext"})]}),"\n","\n",(0,t.jsx)(o.Ay,{}),"\n",(0,t.jsxs)(n.p,{children:["The kube-apiserver is a component that handles the requests inside and outside the ",(0,t.jsx)(n.strong,{children:"Control Plane"}),". After collecting the status and performance metric of kube-apiserver through the ",(0,t.jsx)(r,{sid:"side_kubeApiserverDashboard",className:"uitext"})," menu, you can easily monitor the availability and performance of the cluster by tracing the kube-apiserver's response time, throughput, request failure, and such."]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"basic-screen-guide",children:"Basic screen guide"}),(0,t.jsx)(s,{img:"k8s-kube-apiserver.png",desc:"kube-apiserver dashboard"}),(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(r,{sid:"side_kubeApiserverDashboard",className:"uitext"})," menu reflects key metrics of kube-apiserver for the last hour at 1-minute intervals. You can see the following metrics. For more information about metrics, see the ",(0,t.jsx)(n.a,{href:"#kube-apiserever-metric",children:"Metric guide"})," below."]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To monitor the cluster's load and usage, the status and trends for request counts by method, resource, and response code."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"The number of API requests being processed is provided to help you understand the cluster load."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"It provides the number of created OS threads and current goroutines."}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"enabling-the-kube-apiserver-monitoring",children:"Enabling the kube-apiserver monitoring"}),(0,t.jsx)(i.Ay,{})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"kube-apiserever-metric",children:"kube-apiserver metric"}),(0,t.jsx)(c.Ay,{})]})]})}function m(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}function x(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},84429:function(e,n,r){r.d(n,{R:()=>o,x:()=>i});var s=r(96540);let t={},a=s.createContext(t);function o(e){let n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);