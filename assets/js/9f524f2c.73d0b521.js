"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["3201"],{7868:function(e,s,n){n.d(s,{Ay:()=>a,RM:()=>t});var r=n(74848),i=n(84429);let t=[{value:"GROK parser",id:"grok-parser-detail",level:2},{value:"Starting GROK",id:"grok-starting",level:3},{value:"<code>%{SYNTAX:SEMANTIC}</code> Usage example",id:"syntax-semantic-usage",level:4},{value:"<code>(?&lt;SEMANTIC&gt;REGX)</code> Usage example",id:"semantic-regx",level:4},{value:"Regular expressions that match for each sample log parsing keyword",id:"regular-expressions-that-match-for-each-sample-log-parsing-keyword",level:5},{value:"Applying GROK",id:"grok-applying",level:3},{value:"JSON parser",id:"json-parser-detail",level:2},{value:"Applying the JSON",id:"json-applying",level:3},{value:"Example of using JSON format",id:"example-of-using-json-format",level:3},{value:"Usage example when configuring part of the JSON format",id:"usage-example-when-configuring-part-of-the-json-format",level:3}];function l(e){let s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Cmdname:n,Details:t,ImgLang:l,Youtube:a}=s;return n||d("Cmdname",!0),t||d("Details",!0),l||d("ImgLang",!0),a||d("Youtube",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.p,{children:"The log parser helps you transform the irregular logs into a structured form. WhaTap Log Monitoring provides two types of parsers."}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"GROK parser"}),": The logs collected in arbitrary forms are parsed using regular expressions and GROK syntax."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"JSON parser"}),": The logs collected in the JSON form are parsed."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.admonition,{type:"note",children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Common precautions"})}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"If multiple parsers are registered in the same category, only the first matching parser is applied."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"WhaTap has the role to disable the parsers that may affect the stability of the WhaTap service."})}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h2",children:[(0,r.jsx)(s.h2,{id:"grok-parser-detail",children:"GROK parser"}),(0,r.jsx)(s.p,{children:"If the logs are collected in an irregular form, you can use the GROK parser to parse them. GROK syntax provides named regular expressions, allowing you to use regular expressions more easily."}),(0,r.jsx)(s.p,{children:"See the following video guide for more information about the GROK parser pattern registration."}),(0,r.jsx)(a,{ko:"skgg5KOFGpI",en:"skgg5KOFGpI",ja:"skgg5KOFGpI"})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(s.h3,{id:"grok-starting",children:"Starting GROK"}),(0,r.jsx)(s.p,{children:"GROK provides two types of syntaxes."}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"%{SYNTAX:SEMANTIC}"}),": Syntax provided in the GROK library. Using the ",(0,r.jsx)(s.strong,{children:"named regular expressions"}),", you can extract tags. For usage examples, see ",(0,r.jsx)(s.a,{href:"#syntax-semantic-usage",children:"the following"}),"."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"SYNTAX"}),": Specify the named regular expressions provided by GROK."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"SEMANTIC"}),":  Specify the name for the matched value."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.admonition,{type:"note",children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"named regular expressions"})}),(0,r.jsx)(s.p,{children:"The syntax is provided by GROK. This function provided by GROK allows you to assign names to complex regular expressions."}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"name"}),(0,r.jsx)(s.th,{children:"regular expression"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"WORD"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"\\b\\w+\\b"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"SPACE"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"\\s*"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"NOTSPACE"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"\\S+"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"UUID"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[A-Fa-f0-9]{8}-(?:[A-Fa-f0-9]{4}-){3}[A-Fa-f0-9]{12}"})})]})]})]}),(0,r.jsxs)(s.p,{children:["To see all named regular expressions provided by WhaTap, see the following ",(0,r.jsx)(s.a,{href:"https://github.com/whatap/java-grok/blob/master/src/main/resources/patterns/patterns",children:"link"}),"."]})]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"(?<SEMANTIC>REGX)"}),": The ",(0,r.jsx)(s.strong,{children:"named capturing group"})," syntax for regular expressions. You can use regular expressions to extract tags according to the user's intent. For usage examples, see ",(0,r.jsx)(s.a,{href:"#semantic-regx",children:"the following"}),"."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"SEMANTIC"}),": Specify the name for matched values."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"REGX"}),": Enter regular expressions for matching."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.admonition,{type:"note",children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"named capturing group"})}),(0,r.jsx)(s.p,{children:"It is the syntax provided by regular expressions."}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"capturing group: This indicates the function to bundle multiple tokens into one as a single matching unit."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"named capturing group: Name assigned to the capturing group."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Let's look at the string matching example. ",(0,r.jsx)(s.a,{href:"mailto:dev@whatap.io",children:"dev@whatap.io"})]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Example 1 ",(0,r.jsx)(s.code,{children:"(\\w+)@(\\w+\\.\\w+)"})]}),"\n",(0,r.jsxs)(s.li,{children:["Example 2: When the entire email is matched and the username and domain are matched additionally, ",(0,r.jsx)(s.code,{children:"(?<username>\\w+)@(?<domain>\\w+\\.\\w+)"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h4",children:[(0,r.jsxs)(s.h4,{id:"syntax-semantic-usage",children:[(0,r.jsx)(s.code,{children:"%{SYNTAX:SEMANTIC}"})," Usage example"]}),(0,r.jsxs)(s.p,{children:["The following is an example that uses the ",(0,r.jsx)(s.code,{children:"%{SYNTAX:SEMANTIC}"})," syntax."]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",metastring:"title='Sample log'",children:"[2023-08-08 02:02:30,101 GMT][INFO ][i.w.y.l.c.LogSinkDexScheduleThread.realProcess(159)] 8 VirtualLog 20230808 02:01:00.000 {area=4, city=5} 56ms\n"})}),(0,r.jsx)(s.p,{children:"You can look at the sample log to infer what each word means. When replacing each part with semantic words, it can be expressed as follows:"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",metastring:"title='semantic replace'",children:"[date][logLevel][caller] projectCode logCategiry dexBuildStartTime {area=areaEnum, city=cityEnum} dexBuildElapsed\n"})}),(0,r.jsxs)(s.p,{children:["Any semantic word can be replaced with a regular expression. The GROK parser allows you to use the predefined named regular expressions. ",(0,r.jsx)(s.code,{children:"TIMESTAMP_ISO8601"}),", ",(0,r.jsx)(s.code,{children:"LOGLEVEL"}),", and ",(0,r.jsx)(s.code,{children:"DATA"})," used here are named regular expressions provided by GROK. These values are matched after replacing each of them with the following regular expression."]}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["name: ",(0,r.jsx)(s.code,{children:"TIMESTAMP_ISO8601"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["regular expression: ",(0,r.jsx)(s.code,{children:"%{YEAR}-%{MONTHNUM}-%{MONTHDAY}[T ]%{HOUR}:?%{MINUTE}(?::?%{SECOND})?%{ISO8601_TIMEZONE}?"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["name: ",(0,r.jsx)(s.code,{children:"LOGLEVEL"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["regular expression: ",(0,r.jsx)(s.code,{children:"LOGLEVEL ([Aa]lert|ALERT|[Tt]race|TRACE|[Dd]ebug|DEBUG|[Nn]otice|NOTICE|[Ii]nfo|INFO|[Ww]arn?(?:ing)?|WARN?(?:ING)?|[Ee]rr?(?:or)?|ERR?(?:OR)?|[Cc]rit?(?:ical)?|CRIT?(?:ICAL)?|[Ff]atal|FATAL|[Ss]evere|SEVERE|EMERG(?:ENCY)?|[Ee]merg(?:ency)?)"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["name: ",(0,r.jsx)(s.code,{children:"DATA"})]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["regular expression: ",(0,r.jsx)(s.code,{children:".*?"})]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",metastring:"title='GROK parsing pattern'",children:"\\[%{TIMESTAMP_ISO8601:date}\\sGMT\\]\\[%{LOGLEVEL:level}\\s\\]\\[%{DATA:caller}\\] \n"})}),(0,r.jsxs)(s.p,{children:["If you parse with the above syntax, you can extract tags as follows. In this way, GROK's ",(0,r.jsx)(s.code,{children:"%{SYNTAX:SEMANTIC}"})," syntax helps you apply complex and long regular expressions easily and concisely."]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",metastring:"title='Tag extraction'",children:"- date : 2023-08-08 02:02:30,101\n- caller : i.w.y.l.c.LogSinkDexScheduleThread.realProcess(159)\n- level : LEVEL\n"})})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h4",children:[(0,r.jsxs)(s.h4,{id:"semantic-regx",children:[(0,r.jsx)(s.code,{children:"(?<SEMANTIC>REGX)"})," Usage example"]}),(0,r.jsxs)(s.p,{children:["The parts that do not match with the named regular expressions can be parsed using the ",(0,r.jsx)(s.code,{children:"(?<SEMANTIC>REGX)"})," pattern. In the ",(0,r.jsx)(s.a,{href:"#syntax-semantic-usage",children:"sample log"})," above, the parts that cannot be parsed with the ",(0,r.jsx)(s.code,{children:"%{SYNTAX:SEMANTIC}"})," syntax are as follows."]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",metastring:"title='Unparsed area'",children:"8 VirtualLog 20230808 02:01:00.000 {area=4, city=5} 56ms\n"})}),(0,r.jsx)(s.p,{children:"When replacing each part of the log with semantic words, it can be expressed as follows."}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",metastring:"title='semantic replace'",children:"projectCode logCategiry dexBuildStartTime {area=areaEnum, city=cityEnum} dexBuildElapsed\n"})}),(0,r.jsxs)(s.p,{children:["These irregularly strings can be parsed using the ",(0,r.jsx)(s.code,{children:"(?<SEMANTIC>REGX)"})," syntax."]})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h5",children:[(0,r.jsx)(s.h5,{id:"regular-expressions-that-match-for-each-sample-log-parsing-keyword",children:"Regular expressions that match for each sample log parsing keyword"}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Parsing keyword"}),(0,r.jsx)(s.th,{children:(0,r.jsx)(s.code,{children:"(?<SEMANTIC>REGX)"})})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"8"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(?<projectCode>\\d)"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"VirtualLog"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(?<logCategory>\\w*)"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"20230808 02:01:00.000"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(?<dexBuildStartTime>\\d{8}\\s\\d{2}:\\d{2}:\\d{2}\\.\\d{3})"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"area=4"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"area=(?<areaEnum>\\d)"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"city=5"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"city=(?<cityEnum>\\d)"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:"56ms"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(?<dexBuildElapsed>\\d{2})ms"})})]})]})]}),(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("b",{children:"Basic regular expression syntax"})}),(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Syntax rule"}),(0,r.jsx)(s.th,{children:"Meaning"}),(0,r.jsx)(s.th,{children:"Alias"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"?"})}),(0,r.jsx)(s.td,{children:"0 or 1"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"+"})}),(0,r.jsx)(s.td,{children:"1 or more"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"*"})}),(0,r.jsx)(s.td,{children:"0 or more"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"a{5}"})}),(0,r.jsx)(s.td,{children:"exactly 5"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"\\w"})}),(0,r.jsx)(s.td,{children:"word character"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[a-zA-Z_0-9]"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"\\s"})}),(0,r.jsx)(s.td,{children:"white space"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"."})}),(0,r.jsx)(s.td,{children:"any character except newline"}),(0,r.jsx)(s.td,{})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[abc]"})}),(0,r.jsx)(s.td,{children:"any of"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[^abc]"})}),(0,r.jsx)(s.td,{children:"not a,b, or c"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[a-z]"})}),(0,r.jsx)(s.td,{children:"character between a and z"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[1-3[7-9]]"})}),(0,r.jsx)(s.td,{children:"union (combining two or more character classes)"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[1-6&&[3-9]]"})}),(0,r.jsx)(s.td,{children:"intersection"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[0-9&&[^2468]]"})}),(0,r.jsx)(s.td,{children:"subtraction"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"a{2,}"})}),(0,r.jsx)(s.td,{children:"2 or more"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"a{1,3}"})}),(0,r.jsx)(s.td,{children:"between 1 and 3"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"a+?"})}),(0,r.jsx)(s.td,{children:"match as few as possible"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"{2,3}?"})}),(0,r.jsx)(s.td,{children:"match as few as possible"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"(abc)"})}),(0,r.jsx)(s.td,{children:"capturing group (processes multiple strings as a single unit)"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"\\d"})}),(0,r.jsx)(s.td,{children:"digit"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[0-9]"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"\\D"})}),(0,r.jsx)(s.td,{children:"non-digit"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"[^0-9]"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"\\W"})}),(0,r.jsx)(s.td,{children:"non-word character"}),(0,r.jsx)(s.td,{children:"-"})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"\\S"})}),(0,r.jsx)(s.td,{children:"non-white space"}),(0,r.jsx)(s.td,{children:"-"})]})]})]})]}),(0,r.jsxs)(s.p,{children:["By connecting the parsed keywords with space (",(0,r.jsx)(s.code,{children:"\\s"}),") and special character escapes (",(0,r.jsx)(s.code,{children:"\\{"}),", ",(0,r.jsx)(s.code,{children:"\\,"}),", ",(0,r.jsx)(s.code,{children:"\\}"}),"), you can apply the pattern as follows."]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",metastring:"title='GROK parsing pattern'",children:"(?<projectCode>\\d)\\s(?<logCategory>\\w*)\\s(?<dexBuildStartTime>\\d{8}\\s\\d{2}:\\d{2}:\\d{2}\\.\\d{3})\\s\\{area=(?<areaEnum>\\d),\\scity=(?<cityEnum>\\d)\\}\\s(?<dexBuildElapsed>\\d{2})ms\n"})}),(0,r.jsx)(s.p,{children:"If you parse with the above syntax, you can extract tags as follows."}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-text",metastring:"title='Tag extraction'",children:"- projectCode : 8\n- logCategory : VirtualLog\n- dexBuildStartTime : 20230808 02:01:00.000\n- areaEnum : 4\n- cityEnum : 5 \n- dexBuildElapsed : 56\n"})})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(s.h3,{id:"grok-applying",children:"Applying GROK"}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(n,{sid:"side_logSetting",className:"uitext"})," > ",(0,r.jsx)(n,{sid:"log_parser_setting_primary",className:"uitext"})]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["To apply the GROK pattern parser, go to the ",(0,r.jsx)(n,{sid:"log_parser_setting_primary",className:"uitext"})," tab in ",(0,r.jsx)(n,{sid:"side_logSetting",className:"uitext"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Select ",(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.em,{children:"+"})})," ",(0,r.jsx)(n,{sid:"adding",className:"uitext"})," and then select the ",(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.em,{children:"GROK"})})," parser in the ",(0,r.jsx)(n,{sid:"parser",className:"uitext"})," field."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When you select ",(0,r.jsx)(n,{sid:"BTN08593",className:"uitext"}),", the pattern registration and simulation window appears on the right."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Enter ",(0,r.jsx)(n,{sid:"pattern",className:"uitext"})," and ",(0,r.jsx)(n,{sid:"log",className:"uitext"}),", and then click ",(0,r.jsx)(n,{sid:"simulation",className:"uitext"})," to check whether parsing is successful with the pattern to apply."]}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(n,{sid:"pattern",className:"uitext"})," e.g. ",(0,r.jsx)(s.code,{children:"[%{TIMESTAMP_ISO8601:date}\\sGMT][%{LOGLEVEL:level}\\s][%{DATA:caller}]\\s(?<projectCode>\\d)\\s(?<logCategory>\\w*)\\s(?<dexBuildStartTime>\\d{8}\\s\\d{2}:\\d{2}:\\d{2}\\.\\d{3})\\s\\{area=(?<areaEnum>\\d),\\scity=(?<cityEnum>\\d)\\}\\s(?<dexBuildElapsed>\\d{2})ms"})]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(n,{sid:"log",className:"uitext"})," example: ",(0,r.jsx)(s.code,{children:"[2023-08-08 02:02:30,101 GMT][INFO ][i.w.y.l.c.LogSinkDexScheduleThread.realProcess(159)] 8 VirtualLog 20230808 02:01:00.000 {area=4, city=5} 56ms"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["If the simulation is successful, you can view ",(0,r.jsx)(n,{sid:"simulation_result",className:"uitext"})," and ",(0,r.jsx)(n,{sid:"TTL08604",className:"uitext"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When you click ",(0,r.jsx)(n,{sid:"apply_pattern",className:"uitext"})," after simulation, the pattern that has been entered for the selected parser is applied."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["After applying the pattern, enter values for ",(0,r.jsx)(n,{sid:"category",className:"uitext"}),", ",(0,r.jsx)(n,{sid:"ITM06439",className:"uitext"}),", and ",(0,r.jsx)(n,{sid:"pattern",className:"uitext"}),"."]}),"\n",(0,r.jsx)(l,{img:"log-grok-parser-input.png",desc:"GROK parser input"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(n,{sid:"category",className:"uitext"}),"\n",(0,r.jsxs)(s.p,{children:["Select a log category. ",(0,r.jsx)(n,{sid:"category",className:"uitext"})," is required."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(n,{sid:"ITM06439",className:"uitext"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Only the logs that meet the conditions are applied to the parser."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Select or enter values for ",(0,r.jsx)(n,{sid:"ITM06429",className:"uitext"})," and ",(0,r.jsx)(n,{sid:"ITM06430",className:"uitext"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(n,{sid:"ITM06439",className:"uitext"})," are applied before all parsers are run. Accordingly, you cannot use the ",(0,r.jsx)(n,{sid:"tag",className:"uitext"})," that have been added for the parser."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Select ",(0,r.jsx)(n,{sid:"add",className:"uitext"})," to register a parser."]}),"\n"]}),"\n"]}),(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["In the log parser list, you can change the ",(0,r.jsx)(n,{sid:"ITM06352",className:"uitext"})," or ",(0,r.jsx)(n,{sid:"enable",className:"uitext"}),", ",(0,r.jsx)(n,{sid:"edit",className:"uitext"}),", or ",(0,r.jsx)(n,{sid:"delete",className:"uitext"})," the parser."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["After ",(0,r.jsx)(s.strong,{children:"parser simulation"}),", you can register a pattern."]}),"\n"]}),"\n"]})}),(0,r.jsxs)(s.admonition,{type:"note",children:[(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"GROK parser precautions"})}),(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["GROK parser supports two patterns: ",(0,r.jsx)(s.code,{children:"%{SYNTAX:SEMANTIC}"})," and ",(0,r.jsx)(s.code,{children:"%{SYNTAX:SEMANTIC}"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When using the ",(0,r.jsx)(s.code,{children:"%{SYNTAX:SEMANTIC}"})," pattern, ",(0,r.jsx)(s.code,{children:"SEMANTIC"})," must be entered."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When using the ",(0,r.jsx)(s.code,{children:"%{SYNTAX:SEMANTIC}"})," pattern, ",(0,r.jsx)(s.code,{children:"SEMANTIC"})," must be unique in a parser."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When using the ",(0,r.jsx)(s.code,{children:"(?<SEMANTIC>REGX)"})," pattern, ",(0,r.jsx)(s.code,{children:"SEMANTIC"})," can only contain characters (a-z, A-Z), numbers (0-9), and specified special characters (",(0,r.jsx)(s.code,{children:"."}),", ",(0,r.jsx)(s.code,{children:"_"}),", ",(0,r.jsx)(s.code,{children:"-"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"SEMANTIC"})," must start with a character (a-z, A-Z)."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"SEMANTIC"})," must end with a character (a-z, A-Z) or number (0-9)."]}),"\n"]}),"\n"]})]})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h2",children:[(0,r.jsx)(s.h2,{id:"json-parser-detail",children:"JSON parser"}),(0,r.jsx)(s.p,{children:"If logs are collected in JSON format, they can be easily parsed using the JSON parser."})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(s.h3,{id:"json-applying",children:"Applying the JSON"}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(n,{sid:"side_logSetting",className:"uitext"})," > ",(0,r.jsx)(n,{sid:"log_parser_setting_primary",className:"uitext"})]}),(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["To apply the JSON pattern parser, go to the ",(0,r.jsx)(n,{sid:"log_parser_setting_primary",className:"uitext"})," tab in ",(0,r.jsx)(n,{sid:"side_logSetting",className:"uitext"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Select ",(0,r.jsx)(s.strong,{children:"+"})," ",(0,r.jsx)(n,{sid:"adding",className:"uitext"})," and then select the ",(0,r.jsx)(s.strong,{children:"JSON"})," parser in the ",(0,r.jsx)(n,{sid:"parser",className:"uitext"})," field."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When you select ",(0,r.jsx)(n,{sid:"BTN08593",className:"uitext"}),", the pattern registration and simulation window appears on the right."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Enter ",(0,r.jsx)(n,{sid:"pattern",className:"uitext"})," and ",(0,r.jsx)(n,{sid:"log",className:"uitext"}),", and then click ",(0,r.jsx)(n,{sid:"simulation",className:"uitext"})," to check whether parsing is successful with the pattern to apply."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",metastring:"title='Example'",children:'2023-08-08 02:43:28,615 -- {"host":"10.21.3.24","method":"POST","status":"200","url":"http://devote.whatap.io/yard/api/flush"} --\n'})}),"\n",(0,r.jsxs)(s.p,{children:["In the example log, if ",(0,r.jsx)(s.strong,{children:"Prefix"})," and ",(0,r.jsx)(s.strong,{children:"Postfix"})," are specified as ",(0,r.jsx)(s.code,{children:"--"})," and ",(0,r.jsx)(s.code,{children:"url"})," is specified in ",(0,r.jsx)(s.strong,{children:"Ignore"}),", only three ",(0,r.jsx)(n,{sid:"tag",className:"uitext"})," (",(0,r.jsx)(s.code,{children:"host"}),", ",(0,r.jsx)(s.code,{children:"method"}),", ",(0,r.jsx)(s.code,{children:"status"}),") are created."]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Prefix"}),"\nSpecify the position where the JSON format begins in the log. If the entire log is in JSON format, set an empty value."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Postfix"}),"\nSpecify the position where the JSON format ends in the log. If the entire log is in JSON format, set an empty value."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Ignore"}),"\nSpecify the key for which tags are not created during JSON formatting."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["If the simulation is successful, you can view ",(0,r.jsx)(n,{sid:"simulation_result",className:"uitext"})," and ",(0,r.jsx)(n,{sid:"TTL08604",className:"uitext"}),"."]}),"\n",(0,r.jsx)(l,{img:"log-jason-parser-simulation.png",desc:"Parser simulation and performance measurement"}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["When you click ",(0,r.jsx)(n,{sid:"apply_pattern",className:"uitext"})," after simulation, the pattern that has been entered for the selected parser is applied."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["After applying the pattern, enter values for ",(0,r.jsx)(n,{sid:"category",className:"uitext"}),", ",(0,r.jsx)(n,{sid:"ITM06439",className:"uitext"}),", and ",(0,r.jsx)(n,{sid:"pattern",className:"uitext"}),"."]}),"\n",(0,r.jsx)(l,{img:"log-jason-parser-input.png",desc:"Json parser input"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(n,{sid:"category",className:"uitext"}),"\n",(0,r.jsxs)(s.p,{children:["Select a log category. ",(0,r.jsx)(n,{sid:"category",className:"uitext"})," is required."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(n,{sid:"ITM06439",className:"uitext"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsx)(s.p,{children:"Only the logs that meet the conditions are applied to the parser."}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Select or enter values for ",(0,r.jsx)(n,{sid:"ITM06429",className:"uitext"})," and ",(0,r.jsx)(n,{sid:"ITM06430",className:"uitext"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(n,{sid:"ITM06439",className:"uitext"})," are applied before all parsers are run. Accordingly, you cannot use the ",(0,r.jsx)(n,{sid:"tag",className:"uitext"})," that have been added for the parser."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Select ",(0,r.jsx)(n,{sid:"add",className:"uitext"})," to register a parser."]}),"\n"]}),"\n"]}),(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["In the log parser list, you can change the ",(0,r.jsx)(n,{sid:"ITM06352",className:"uitext"})," or ",(0,r.jsx)(n,{sid:"enable",className:"uitext"}),", ",(0,r.jsx)(n,{sid:"edit",className:"uitext"}),", or ",(0,r.jsx)(n,{sid:"delete",className:"uitext"})," the parser."]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:["Before registering a parser, you can check whether the pattern to register is normal through ",(0,r.jsx)(n,{sid:"simulation",className:"uitext"}),". It is the same as the GROK parser registration simulation process. See ",(0,r.jsx)(s.a,{href:"#grok-simulation",children:"the following"}),"."]}),"\n"]}),"\n"]})})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(s.h3,{id:"example-of-using-json-format",children:"Example of using JSON format"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",metastring:"title='Sample log'",children:'{"host":"10.21.3.24","method":"POST","status":"200","url":"http://devote.whatap.io/yard/api/flush"}\n'})}),(0,r.jsxs)(s.p,{children:["If the above sample log has been collected, select the ",(0,r.jsx)(s.strong,{children:"JSON"})," parser in the ",(0,r.jsx)(n,{sid:"parser",className:"uitext"})," ",(0,r.jsx)(n,{sid:"add",className:"uitext"})," window. Without having to write a complex parsing logic, you can extract the ",(0,r.jsx)(n,{sid:"tag",className:"uitext"})," for log analysis as follows:"]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",metastring:"title='Tag extraction'",children:"- host : 10.21.3.24\n- method : POST\n- status : 200\n- url : http://dev.whatap.io/yard/api/flush\n"})})]}),"\n",(0,r.jsxs)(s.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(s.h3,{id:"usage-example-when-configuring-part-of-the-json-format",children:"Usage example when configuring part of the JSON format"}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",metastring:"title='Some JSON format sample log'",children:'2023-08-08 02:43:28,615 -- {"host":"10.21.3.24","method":"POST","status":"200","url":"http://devote.whatap.io/yard/api/flush"} --\n'})}),(0,r.jsxs)(s.p,{children:["If part of the log is in JSON format as in the example, specify ",(0,r.jsx)(s.strong,{children:"Prefix"})," and ",(0,r.jsx)(s.strong,{children:"Postfix"}),". WhaTap log monitoring recognizes and parses the area between ",(0,r.jsx)(s.strong,{children:"Prefix"})," and ",(0,r.jsx)(s.strong,{children:"Postfix"})," in JSON format."]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-javascript",metastring:"title='Tag extraction'",children:"- host : 10.21.3.24\n- method : POST\n- status : 200\n- url : http://dev.whatap.io/yard/api/flush\n"})})]})]})}function a(e={}){let{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}function d(e,s){throw Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},68009:function(e,s,n){n.r(s),n.d(s,{metadata:()=>r,default:()=>x,frontMatter:()=>a,contentTitle:()=>d,toc:()=>h,assets:()=>c});var r=JSON.parse('{"id":"redis/log-parser","title":"Parsing the logs","description":"The following guides you to the log parser provided by WhaTap.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/redis/log-parser.mdx","sourceDirName":"redis","slug":"/redis/log-parser","permalink":"/whatap-docs/redis/log-parser","draft":false,"unlisted":false,"editUrl":"undefined/docs/redis/log-parser.mdx","tags":[],"version":"current","frontMatter":{"id":"log-parser","title":"Parsing the logs","description":"The following guides you to the log parser provided by WhaTap.","toc_max_heading_level":3,"keywords":["Log","Log Monitoring","Configuration","Log parser","Log parsing","Redis"],"isTranslationMissing":false},"sidebar":"redisSidebar","previous":{"title":"Log setting","permalink":"/whatap-docs/redis/log-setting"},"next":{"title":"Alert Settings","permalink":"/whatap-docs/redis/set-notice"}}'),i=n(74848),t=n(84429),l=n(7868);let a={id:"log-parser",title:"Parsing the logs",description:"The following guides you to the log parser provided by WhaTap.",toc_max_heading_level:3,keywords:["Log","Log Monitoring","Configuration","Log parser","Log parsing","Redis"],isTranslationMissing:!1},d,c={},h=[...l.RM];function o(e){return(0,i.jsx)(l.Ay,{})}function x(e={}){let{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},84429:function(e,s,n){n.d(s,{R:()=>l,x:()=>a});var r=n(96540);let i={},t=r.createContext(i);function l(e){let s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);