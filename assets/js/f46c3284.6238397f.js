"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["49516"],{47586:function(e,n,s){s.r(n),s.d(n,{metadata:()=>r,default:()=>h,frontMatter:()=>d,contentTitle:()=>o,toc:()=>l,assets:()=>c});var r=JSON.parse('{"id":"kubernetes/kube-scheduler-dashboard","title":"kube-scheduler Dashboard","description":"It provides the guide to the kube-apiserver dashboard.","source":"@site/i18n/en/docusaurus-plugin-content-docs/current/kubernetes/kube-scheduler-dashboard.mdx","sourceDirName":"kubernetes","slug":"/kubernetes/kube-scheduler-dashboard","permalink":"/whatap-docs/kubernetes/kube-scheduler-dashboard","draft":false,"unlisted":false,"editUrl":"undefined/docs/kubernetes/kube-scheduler-dashboard.mdx","tags":[],"version":"current","frontMatter":{"id":"kube-scheduler-dashboard","title":"kube-scheduler Dashboard","description":"It provides the guide to the kube-apiserver dashboard.","keywords":["Kubernetes","Kubernetes Monitoring","kube-scheduler","Control Plane"],"toc_max_heading_level":2,"isTranslationMissing":false},"sidebar":"kubeSidebar","previous":{"title":"etcd Dashboard","permalink":"/whatap-docs/kubernetes/etcd-dashboard"},"next":{"title":"Object Manifest Information","permalink":"/whatap-docs/kubernetes/object-manifest"}}'),t=s(74848),i=s(84429);let d={id:"kube-scheduler-dashboard",title:"kube-scheduler Dashboard",description:"It provides the guide to the kube-apiserver dashboard.",keywords:["Kubernetes","Kubernetes Monitoring","kube-scheduler","Control Plane"],toc_max_heading_level:2,isTranslationMissing:!1},o,c={},l=[{value:"Basic screen guide",id:"basic-screen-guide",level:2},{value:"Enabling the kube-scheduler monitoring",id:"enabling-the-kube-scheduler-monitoring",level:2},{value:"Enabling requirements",id:"enabling-requirements",level:3},{value:"Enabling procedure",id:"enabling-procedure",level:3},{value:"kube-scheduler metrics",id:"kube-scheduler-metrics",level:2}];function a(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Cmdname:s,ImgLang:r}=n;return s||u("Cmdname",!0),r||u("ImgLang",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Select Home > cluster project (",(0,t.jsx)("code",{class:"my",children:"CP"}),") > ",(0,t.jsx)(s,{sid:"side_controlPlane",className:"uitext"})," > ",(0,t.jsx)(s,{sid:"side_kubeSchedulerDashboard",className:"uitext"})]}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Requirements"})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"The WhaTap Kubernetes agent 1.8.1 or later is required."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If it is a Kubernetes cluster project (",(0,t.jsx)("code",{class:"my",children:"CP"}),"), you can view the corresponding menu."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You can use this menu if the cluster can observe the vanilla Kubernetes or ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pods."]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"kube-scheduler"})," is a major component responsible for scheduling Pods in the Kubernetes environment. WhaTap provides the ",(0,t.jsx)(s,{sid:"side_kubeSchedulerDashboard",className:"uitext"})," to monitor the performance and scheduling status of ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," in real time. The ",(0,t.jsx)(s,{sid:"side_kubeSchedulerDashboard",className:"uitext"})," can help you proactively prevent the cluster from entering an unschedulable state or encountering issues due to scheduler overload in advance."]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"basic-screen-guide",children:"Basic screen guide"}),(0,t.jsx)(r,{img:"k8s-kube-scheduler-dashboard.png",desc:"kube-scheduler dashboard"}),(0,t.jsxs)(n.p,{children:[(0,t.jsx)(s,{sid:"side_kubeSchedulerDashboard",className:"uitext"})," provides visualizations of key metrics collected over the past hour, broken down at 1-minute intervals. The key metrics you can see on the dashboard are as follows. For the metrics details, see the ",(0,t.jsx)(n.a,{href:"#kube-scheduler-metrics",children:"metric guide"})," at the bottom."]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["It provides the resource usage trend, Pod restart count, and detailed logs for ",(0,t.jsx)(n.code,{children:"kube-scheduler"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["It provides the trend for the numbers of preemption attempts by ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," and the number of victims due to preemption."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["It provides the trends for each reason of pending Pods assigned to the pending queue inside the ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pod."]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsx)(n.section,{className:"remark-sectionize-h2",children:(0,t.jsx)(n.h2,{id:"enabling-the-kube-scheduler-monitoring",children:"Enabling the kube-scheduler monitoring"})}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"enabling-requirements",children:"Enabling requirements"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["You must be able to observe the ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pod via the command, ",(0,t.jsx)(n.code,{children:"kubectl get pods -n kube-system -l component=kube-scheduler"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["To enable secure communication with ",(0,t.jsx)(n.code,{children:"kube-scheduler"}),", change the ",(0,t.jsx)(n.code,{children:"--bind-address"})," setting to be accessible from outside. Typically ",(0,t.jsx)(n.code,{children:"0.0.0.0"})," is used."]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"enabling-procedure",children:"Enabling procedure"}),(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Enabling order"})}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Add the ",(0,t.jsx)(n.code,{children:"GET"})," role for ",(0,t.jsx)(n.code,{children:"secrets"})," to RBAC of the whatap service account."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Generate ",(0,t.jsx)(n.code,{children:"secrets"})," based on the whatap service account."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Apply the ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," monitoring activation option to the ",(0,t.jsx)(n.code,{children:"whatap-master-agent"})," deployment."]}),"\n"]}),"\n"]})]}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Role configuration"})}),"\n",(0,t.jsxs)(n.p,{children:["Add the ",(0,t.jsx)(n.code,{children:"secrets"})," resource to the resources accessible from ",(0,t.jsx)(n.code,{children:"rules"})," of whatap ClusterRole inside the ",(0,t.jsx)(n.code,{children:"whatap-monitoring"})," namespace. After creating the following content as a ",(0,t.jsx)(n.em,{children:"yaml"})," file, execute the ",(0,t.jsx)(n.code,{children:"kubectl apply -f <yaml file name>.yaml"})," command for application."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"title='ClusterRole.yaml' {25}",children:'apiVersion: "rbac.authorization.k8s.io/v1"\nkind: "ClusterRole"\nmetadata:\n  annotations:\n    rbac.authorization.kubernetes.io/autoupdate: "true"\n  name: "whatap"\n  namespace: "whatap-monitoring"\nrules:\n- apiGroups:\n  - "*"\n  resources:\n  - "namespaces"\n  - "pods"\n  - "pods/log"\n  - "configmaps"\n  - "services"\n  - "endpoints"\n  - "daemonsets"\n  - "ingresses"\n  - "deployments"\n  - "nodes"\n  - "persistentvolumes"\n  - "persistentvolumeclaims"\n  - "events"\n  - "secrets"\n  - "replicasets"\n  - "roles"\n  - "rolebindings"\n  - "clusterroles"\n  - "clusterrolebindings"\n  - "jobs"\n  - "cronjobs"\n  - "statefulsets"\n  - "serviceaccounts"\n  - "configmaps"\n  - "storageclasses"\n  - "horizontalpodautoscalers"\n  - "replicationcontrollers"\n  verbs:\n  - "get"\n  - "list"\n  - "watch"\n- apiGroups:\n  - ""\n  resources:\n  - "pods/exec"\n  verbs:\n  - "create"\n- apiGroups:\n  - ""\n  resources:\n  - "configmaps"\n  verbs:\n  - "*"\n- nonResourceURLs:\n  - "/metrics"\n  verbs:\n  - "*"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Creating the secret"})}),"\n",(0,t.jsxs)(n.p,{children:["After creating the following content as a ",(0,t.jsx)(n.em,{children:"yaml"})," file, execute the ",(0,t.jsx)(n.code,{children:"kubectl apply -f yamlfilename.yaml"})," command for application."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"title='secrets.yaml'",children:'apiVersion: v1\nkind: Secret\ntype: kubernetes.io/service-account-token\nmetadata:\n  name: whatap-scheduler-monitoring-token\n  namespace: whatap-monitoring\n  annotations:\n    kubernetes.io/service-account.name: "whatap"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Deployment modification"})}),"\n",(0,t.jsxs)(n.p,{children:["After modifying the ",(0,t.jsx)(n.code,{children:"whatap-master-agent"})," deployment content, execute the ",(0,t.jsx)(n.code,{children:"kubectl apply -f <yaml file name>.yaml"})," command for application."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Addition of environment variables"})}),"\n",(0,t.jsxs)(n.p,{children:["Add the following to the ",(0,t.jsx)(n.code,{children:"env"})," section of the ",(0,t.jsx)(n.code,{children:"whatap-master-agent"})," container under ",(0,t.jsx)(n.code,{children:"containers"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'env:\n- name: "collect_kube_scheduler_monitoring_enabled"\n  value: "true"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Adding command arguments"})}),"\n",(0,t.jsxs)(n.p,{children:["Add the following to the ",(0,t.jsx)(n.code,{children:"args"})," section of the ",(0,t.jsx)(n.code,{children:"whatap-control-plane-helper"})," container under ",(0,t.jsx)(n.code,{children:"containers"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'- args:\n  - "-collect_kube_scheduler_monitoring_enabled=true"\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"See the following example for adding environment variables and command arguments."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"{30-31,51}",children:'apiVersion: "apps/v1"\nkind: "Deployment"\nmetadata:\n  name: "whatap-master-agent"\n  namespace: "whatap-monitoring"\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: "whatap-master-agent"\n  template:\n    metadata:\n      labels:\n        name: "whatap-master-agent"\n    spec:\n      priorityClassName: high-priority\n      containers:\n      - command:\n        - "/bin/entrypoint.sh"\n        env:\n        - name: "WHATAP_LICENSE"\n          value: "c1024123i1kko-241245127abdbe-612632344235"\n        - name: "WHATAP_HOST"\n          value: "192.168.1.0"\n        - name: "WHATP_MEM_LIMIT"\n          valueFrom:\n            resourceFieldRef:\n              containerName: "whatap-master-agent"\n              resource: "limits.memory"\n        - name: "collect_kube_scheduler_monitoring_enabled"\n          value: "true"\n        image: "whatap/kube_mon"\n        name: "whatap-master-agent"\n        ports:\n        - containerPort: 6600\n        resources:\n          limits:\n            cpu: "200m"\n            memory: "350Mi"\n          requests:\n            cpu: "100m"\n            memory: "300Mi"\n        volumeMounts:\n        - mountPath: "/bin/entrypoint.sh"\n          name: "start-script-volume"\n          readOnly: true\n          subPath: "entrypoint.sh"\n        - mountPath: "/whatap_conf"\n          name: "whatap-config-volume"\n      - args:\n        - "-collect_kube_scheduler_monitoring_enabled=true"\n        command:\n        - "/data/agent/master/whatap_control_plane_helper"\n        image: "whatap/kube_mon"\n        imagePullPolicy: "Always"\n        name: "whatap-control-plane-helper"\n        ports:\n        - containerPort: 9496\n      serviceAccount: "whatap"\n      volumes:\n      - configMap:\n          defaultMode: 448\n          name: "master-start-script"\n        name: "start-script-volume"\n      - emptyDir: {}\n        name: "whatap-config-volume"\n'})}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"kube-scheduler-metrics",children:"kube-scheduler metrics"}),(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Number of Pods"})})}),(0,t.jsxs)(n.td,{children:["Number of ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pods running"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"kube-scheduler restart count trend"})})}),(0,t.jsxs)(n.td,{children:["Trend of sums of restarts of the ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pod"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"CPU usage sum"})})}),(0,t.jsxs)(n.td,{children:["Total CPU usage of the ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pod"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"CPU usage"})})}),(0,t.jsxs)(n.td,{children:["CPU usage trend of the ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pod"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Memory usage sum"})})}),(0,t.jsxs)(n.td,{children:["Total memory usage of the ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pod"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Memory usage"})})}),(0,t.jsxs)(n.td,{children:["Memory usage trend of the ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pod"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"kube-scheduler log"})})}),(0,t.jsxs)(n.td,{children:["Log generated from the ",(0,t.jsx)(n.code,{children:"kube-scheduler"})," Pod"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Trend of numbers of preemption attempts"})})}),(0,t.jsx)(n.td,{children:"Trend of numbers of preemption attempts for Pod scheduling"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Trend of numbers of preemption victims"})})}),(0,t.jsx)(n.td,{children:"Trend of numbers of Pods evicted due to preemption"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Trend by pending Pod reason"})})}),(0,t.jsx)(n.td,{children:"Trend by reason of waiting Pods in pending state without being scheduled"})]})]})]})]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}function u(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},84429:function(e,n,s){s.d(n,{R:()=>d,x:()=>o});var r=s(96540);let t={},i=r.createContext(t);function d(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);