"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["94722"],{78373:function(e,n,a){a.r(n),a.d(n,{metadata:()=>t,default:()=>d,frontMatter:()=>r,contentTitle:()=>l,toc:()=>m,assets:()=>i});var t=JSON.parse('{"id":"kubernetes/k8s-collection-server-ip","title":"\uCFE0\uBC84\uB124\uD2F0\uC2A4 \uC218\uC9D1 \uC11C\uBC84 IP \uBCC0\uACBD","description":"\uCFE0\uBC84\uB124\uD2F0\uC2A4 \uC81C\uD488 \uC218\uC9D1 \uC11C\uBC84 IP \uBCC0\uACBD \uBC29\uBC95\uC740 \uC548\uB0B4\uD569\uB2C8\uB2E4.","source":"@site/docs/kubernetes/k8s-collection-server-ip.mdx","sourceDirName":"kubernetes","slug":"/kubernetes/k8s-collection-server-ip","permalink":"/whatap-docs/kubernetes/k8s-collection-server-ip","draft":false,"unlisted":false,"editUrl":"undefined/docs/kubernetes/k8s-collection-server-ip.mdx","tags":[],"version":"current","frontMatter":{"id":"k8s-collection-server-ip","title":"\uCFE0\uBC84\uB124\uD2F0\uC2A4 \uC218\uC9D1 \uC11C\uBC84 IP \uBCC0\uACBD","description":"\uCFE0\uBC84\uB124\uD2F0\uC2A4 \uC81C\uD488 \uC218\uC9D1 \uC11C\uBC84 IP \uBCC0\uACBD \uBC29\uBC95\uC740 \uC548\uB0B4\uD569\uB2C8\uB2E4.","keywords":["\uC218\uC9D1 \uC11C\uBC84 IP"],"isTranslationMissing":false}}'),s=a(74848),o=a(84429);let r={id:"k8s-collection-server-ip",title:"\uCFE0\uBC84\uB124\uD2F0\uC2A4 \uC218\uC9D1 \uC11C\uBC84 IP \uBCC0\uACBD",description:"\uCFE0\uBC84\uB124\uD2F0\uC2A4 \uC81C\uD488 \uC218\uC9D1 \uC11C\uBC84 IP \uBCC0\uACBD \uBC29\uBC95\uC740 \uC548\uB0B4\uD569\uB2C8\uB2E4.",keywords:["\uC218\uC9D1 \uC11C\uBC84 IP"],isTranslationMissing:!1},l,i={},m=[{value:"Yaml \uD30C\uC77C \uAE30\uC900",id:"yaml-\uD30C\uC77C-\uAE30\uC900",level:2},{value:"\uC608\uC2DC",id:"\uC608\uC2DC",level:3},{value:"Helm \uCC28\uD2B8 \uAE30\uC900",id:"helm-\uCC28\uD2B8-\uAE30\uC900",level:2}];function c(e){let n={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",ul:"ul",...(0,o.R)(),...e.components},{TabItem:a,Tabs:t}=n;return a||h("TabItem",!0),t||h("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Kubernetes \uBAA8\uB2C8\uD130\uB9C1 \uC11C\uBE44\uC2A4\uB97C \uC774\uC6A9\uD558\uB294 \uACE0\uAC1D\uC744 \uB300\uC0C1\uC73C\uB85C \uC218\uC9D1 \uC11C\uBC84 IP \uC815\uBCF4 \uBCC0\uACBD \uBC29\uBC95\uC744 \uC548\uB0B4\uD569\uB2C8\uB2E4. Kubernetes \uBAA8\uB2C8\uD130\uB9C1\uC744 \uC124\uC815\uD55C \uD6C4 \uD2B9\uC815 \uD658\uACBD\uC5D0\uC11C \uC218\uC9D1 \uC11C\uBC84 IP \uBCC0\uACBD\uC774 \uD544\uC694\uD55C \uACBD\uC6B0 \uB2E4\uC74C \uACFC\uC815\uC744 \uCC38\uACE0\uD558\uC5EC \uBCC0\uACBD\uD558\uC138\uC694."}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsxs)(a,{value:"cs-yaml",label:"Yaml",default:!0,children:[(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"yaml-\uD30C\uC77C-\uAE30\uC900",children:"Yaml \uD30C\uC77C \uAE30\uC900"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\uB2E4\uC74C \uC704\uCE58\uC5D0\uC11C ",(0,s.jsx)(n.code,{children:"whatap_host"})," \uAC12\uC744 \uBCC0\uACBD\uD558\uC138\uC694."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"yaml"})," \uD30C\uC77C\uC5D0\uC11C ",(0,s.jsx)(n.code,{children:"whatap-master-agent"})," \uCEE8\uD14C\uC774\uB108 \uD558\uC704 ",(0,s.jsx)(n.code,{children:"env"})," \uD56D\uBAA9 \uC911 ",(0,s.jsx)(n.code,{children:"WHATAP_HOST"})," \uAC12\uC744 ",(0,s.jsx)(n.code,{children:"61.109.237.237/61.109.238.166   "}),"\uB85C \uBCC0\uACBD\uD558\uC138\uC694."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"yaml"})," \uD30C\uC77C\uC5D0\uC11C ",(0,s.jsx)(n.code,{children:"whatap-node-agent"})," \uCEE8\uD14C\uC774\uB108 \uD558\uC704 ",(0,s.jsx)(n.code,{children:"env"})," \uD56D\uBAA9 \uC911 ",(0,s.jsx)(n.code,{children:"WHATAP_HOST"})," \uAC12\uC744 ",(0,s.jsx)(n.code,{children:"61.109.237.237/61.109.238.166   "}),"\uB85C \uBCC0\uACBD\uD558\uC138\uC694."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\uBCC0\uACBD\uD55C ",(0,s.jsx)(n.em,{children:"yaml"})," \uD30C\uC77C\uC744 \uCFE0\uBC84\uB124\uD2F0\uC2A4 \uD074\uB7EC\uC2A4\uD130\uC5D0 \uC801\uC6A9\uD558\uC138\uC694."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f \uBCC0\uACBD\uD55C yaml \uD30C\uC77C\uBA85.yaml\n"})}),"\n"]}),"\n"]})]}),(0,s.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,s.jsx)(n.h3,{id:"\uC608\uC2DC",children:"\uC608\uC2DC"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:"title='Yaml' showLineNumbers{22-23,121-122}",children:'apiVersion: "apps/v1"\nkind: "Deployment"\nmetadata:\n  name: "whatap-master-agent"\n  namespace: "whatap-monitoring"\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: "whatap-master-agent"\n  template:\n    metadata:\n      labels:\n        name: "whatap-master-agent"\n    spec:\n      containers:\n      - command:\n        - "/bin/entrypoint.sh"\n        env:\n        - name: "WHATAP_LICENSE"\n          value: "x22gg93735j9v-z63jpk29lgtn68-x52sdl202an6h"\n        - name: "WHATAP_HOST"\n          value: "61.109.237.237/61.109.238.166"\n        - name: "WHATAP_PORT"\n          value: "6600"\n        - name: "WHATP_MEM_LIMIT"\n          valueFrom:\n            resourceFieldRef:\n              containerName: "whatap-master-agent"\n              resource: "limits.memory"\n        image: "whatap/kube_mon"\n        name: "whatap-master-agent"\n        ports:\n        - containerPort: 6600\n        resources:\n          limits:\n            cpu: "200m"\n            memory: "350Mi"\n          requests:\n            cpu: "100m"\n            memory: "300Mi"\n        volumeMounts:\n        - mountPath: "/bin/entrypoint.sh"\n          name: "start-script-volume"\n          readOnly: true\n          subPath: "entrypoint.sh"\n        - mountPath: "/whatap_conf"\n          name: "whatap-config-volume"\n      serviceAccount: "whatap"\n      volumes:\n      - configMap:\n          defaultMode: 448\n          name: "master-start-script"\n        name: "start-script-volume"\n      - emptyDir: {}\n        name: "whatap-config-volume"\n---\napiVersion: "apps/v1"\nkind: "DaemonSet"\nmetadata:\n  labels:\n    name: "whatap-node-agent"\n  name: "whatap-node-agent"\n  namespace: "whatap-monitoring"\nspec:\n  selector:\n    matchLabels:\n      name: "whatap-node-agent"\n  template:\n    metadata:\n      labels:\n        name: "whatap-node-agent"\n    spec:\n      containers:\n      - command:\n        - "/data/agent/node/cadvisor_helper"\n        - "-port"\n        - "6801"\n        env:\n        - name: "NODE_NAME"\n          valueFrom:\n            fieldRef:\n              fieldPath: "spec.nodeName"\n        image: "whatap/kube_mon"\n        name: "whatap-node-helper"\n        ports:\n        - containerPort: 6801\n          name: "helperport"\n        resources:\n          limits:\n            cpu: "200m"\n            memory: "350Mi"\n          requests:\n            cpu: "100m"\n            memory: "100Mi"\n        volumeMounts:\n        - mountPath: "/rootfs"\n          name: "rootfs"\n          readOnly: true\n        - mountPath: "/sys"\n          name: "hostsys"\n          readOnly: true\n        - mountPath: "/dev/disk"\n          name: "hostdiskdevice"\n          readOnly: true\n        - mountPath: "/var/run/docker.sock"\n          name: "dockerdomainsocket"\n      - command:\n        - "/bin/entrypoint.sh"\n        env:\n        - name: "NODE_IP"\n          valueFrom:\n            fieldRef:\n              fieldPath: "status.hostIP"\n        - name: "NODE_NAME"\n          valueFrom:\n            fieldRef:\n              fieldPath: "spec.nodeName"\n        - name: "WHATAP_LICENSE"\n          value: "x22gg93735j9v-z63jpk29lgtn68-x52sdl202an6h"\n        - name: "WHATAP_HOST"\n          value: "61.109.237.237/61.109.238.166"\n        - name: "WHATAP_PORT"\n          value: "6600"\n        - name: "HOST_PREFIX"\n          value: "/rootfs"\n        - name: "WHATP_MEM_LIMIT"\n          valueFrom:\n            resourceFieldRef:\n              containerName: "whatap-node-agent"\n              resource: "limits.memory"\n        image: "whatap/kube_mon"\n        name: "whatap-node-agent"\n        ports:\n        - containerPort: 6600\n          name: "nodeport"\n        resources:\n          limits:\n            cpu: "200m"\n            memory: "350Mi"\n          requests:\n            cpu: "100m"\n            memory: "300Mi"\n        volumeMounts:\n        - mountPath: "/rootfs"\n          name: "rootfs"\n          readOnly: true\n        - mountPath: "/bin/entrypoint.sh"\n          name: "start-script-volume"\n          readOnly: true\n          subPath: "entrypoint.sh"\n        - mountPath: "/whatap_conf"\n          name: "whatap-config-volume"\n      initContainers:\n      - command:\n        - "/data/agent/tools/whatap_debugger"\n        - "run"\n        image: "whatap/kube_mon"\n        name: "whatap-node-debug"\n        volumeMounts:\n        - mountPath: "/rootfs"\n          name: "rootfs"\n          readOnly: true\n      serviceAccount: "whatap"\n      tolerations:\n      - effect: "NoSchedule"\n        key: "node-role.kubernetes.io/master"\n      - effect: "NoSchedule"\n        key: "node-role.kubernetes.io/control-plane"\n      volumes:\n      - hostPath:\n          path: "/"\n        name: "rootfs"\n      - hostPath:\n          path: "/sys"\n        name: "hostsys"\n      - hostPath:\n          path: "/dev/disk"\n        name: "hostdiskdevice"\n      - configMap:\n          defaultMode: 448\n          name: "node-start-script"\n        name: "start-script-volume"\n      - emptyDir: {}\n        name: "whatap-config-volume"\n      - hostPath:\n          path: "/var/run/docker.sock"\n        name: "dockerdomainsocket"\n      - hostPath:\n          path: "/var/lib/docker"\n        name: "hostdocker"\n'})})]})]}),(0,s.jsx)(a,{value:"cs-helm",label:"Helm Chart",default:!0,children:(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"helm-\uCC28\uD2B8-\uAE30\uC900",children:"Helm \uCC28\uD2B8 \uAE30\uC900"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Helm \uCC28\uD2B8\uB97C \uD1B5\uD574 Kubernetes \uC5D0\uC774\uC804\uD2B8\uB97C \uBC30\uD3EC\uD55C \uACBD\uC6B0 ",(0,s.jsx)(n.em,{children:"values.yaml"}),"\uC5D0\uC11C \uB2E4\uC74C \uD56D\uBAA9\uC744 \uC218\uC815\uD558\uC138\uC694."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:"title='Helm' showLineNumbers{3}",children:'whatap:\n  license: # <license-key>\n  host: "61.109.237.237/61.109.238.166" # <whatap-server-host>\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\uC218\uC815\uD55C Helm \uCC28\uD2B8\uB97C \uC801\uC6A9\uD558\uC138\uC694."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm upgrade whatap-kube-agent whatap/kube -f values.yaml\n"})}),"\n"]}),"\n"]})]})})]})]})}function d(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}function h(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},84429:function(e,n,a){a.d(n,{R:()=>r,x:()=>l});var t=a(96540);let s={},o=t.createContext(s);function r(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);