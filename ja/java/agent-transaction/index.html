<!doctype html>
<html lang="ja-JP" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-java/agent-transaction" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">トランザクション | WhaTap Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" name="twitter:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" property="og:url" content="https://docs.whatap.io/whatap-docs/ja/java/agent-transaction"><meta data-rh="true" property="og:locale" content="ja_JP"><meta data-rh="true" property="og:locale:alternate" content="ko_KR"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="トランザクション | WhaTap Docs"><meta data-rh="true" name="description" content="Javaアプリケーション内の各トランザクションの性能データをエージェントが追跡し分析できる設定方法を案内します。トランザクションのリクエスト処理、応答時間、リソース使用量などを追跡して、アプリケーションの性能を評価します。"><meta data-rh="true" property="og:description" content="Javaアプリケーション内の各トランザクションの性能データをエージェントが追跡し分析できる設定方法を案内します。トランザクションのリクエスト処理、応答時間、リソース使用量などを追跡して、アプリケーションの性能を評価します。"><meta data-rh="true" name="keywords" content="Java,アプリケーション,Transaction,トランザクション,エージェント"><link data-rh="true" rel="icon" href="/whatap-docs/ja/img/whatap-favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.whatap.io/whatap-docs/ja/java/agent-transaction"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/whatap-docs/java/agent-transaction" hreflang="ko-KR"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/whatap-docs/en/java/agent-transaction" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/whatap-docs/ja/java/agent-transaction" hreflang="ja-JP"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/whatap-docs/java/agent-transaction" hreflang="x-default"><script>!function(e,t,a,o,r){e=e[r]=e[r]||{config:{projectAccessKey:"x4t5020boh2ln-z6pi7d91ds6c1a-z7t4b2lrgnub4o",pcode:29856,sampleRate:100,sessionReplaySampleRate:100,ignorePageUrls:[/^.*localhost.*$/i,/^.*ngrok-free.app.*$/i,/^.*whatap.github.io.*$/i],collectUserClick:!0}},(r=t.createElement(a)).async=1,r.src=o,(o=t.getElementsByTagName(a)[0]).parentNode.insertBefore(r,o)}(window,document,"script","https://repo.whatap-browser-agent.io/rum/prod/v1/whatap-browser-agent.js","WhatapBrowserAgent")</script>
<script>let curLang=document.documentElement.lang.split("-")[0];CRISP_RUNTIME_CONFIG={locale:curLang},window.$crisp=[],window.CRISP_WEBSITE_ID="9a0c342f-a5b1-4c4a-a22f-92c7b4b9b477",d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)</script>


<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-KT747XQX",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script>



<meta name="keywords" content="WhaTap, 와탭, 매뉴얼, 사용법, WhaTap 사용법, WhaTap 매뉴얼, 기술 문서, APM, 애플리케이션 모니터링, 로그 모니터링, 쿠버네티스 모니터링, 서버 모니터링, 데이터베이스 모니터링, URL 모니터링, 클라우드 모니터링, 브라우저 모니터링, Browser monitoring, Application Monitoring, Log Monitoring, Kubernetes Monitoring, Server Monitoring, Database Monitoring, URL Monitoring, Cloud Monitoring, Manual, User Guide, Docs, WhaTap Manual, WhaTap Docs, WhaTap Documents, 트랜잭션, Transaction, 트레이싱, Tracing, 마스터, Master, 노드, Node, 데드락, Deadlock, 락 트리, Lock tree, 멀티 트랜잭션, Multi Trancsaction, 메트릭스, Metrics, 소프트웨어 프록시, Software proxy, 스택, Stack, 슬로우 쿼리, Slow query, 액티브 트랜잭션, Active transaction, 컨테이너, Container, 히트맵, Hitmap, Garbage Collection, GC, MXQL, Method 추적, Trace method, OOM Killed 컨테이너, OOM Killed Container, Oracle, Tibero, PostgreSQL, MySQL, MongoDB, SQL Server, CUBRID, Altibase, Redis, WebLogic, WebSphere">
<meta name="description" content="WhaTap Docs 페이지입니다. 애플리케이션, 서버, 쿠버네티스, 데이터베이스, 브라우저 등 다양한 모니터링 솔루션의 사용법을 제공합니다.">
<meta name="naver-site-verification" content="0c21fc5664a467108fb762ade47a3f81ee9b88ed">
<meta name="google-site-verification" content="rIlfJkbbogFOIDc3DgJZmOGbUMJWytyvZSKEgV7EMsE"><link rel="stylesheet" href="/whatap-docs/ja/assets/css/styles.9a9f7b6e.css">
<script src="/whatap-docs/ja/assets/js/runtime~main.b3748045.js" defer="defer"></script>
<script src="/whatap-docs/ja/assets/js/main.4b9962b0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script>

<script async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&amp;version=v17.0&amp;appId=169051789422006&amp;autoLogAppEvents=1" nonce="y4U7YSrt"></script>
<div id="fb-root"></div>



<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KT747XQX" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="本文へスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">本文へスキップ</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:none;color:#ffffff" role="banner"><div class="content_knG7 announcementBarContent_xLdY"><div id="announce-banner"> <a class="left" href="https://event.whatap.io/ko/summit_/index.html#" target="_blank"> WhaTap Observe Summit 2025 등록 오픈 🚀 </a> <a class="right" href="https://event.whatap.io/ko/summit_/index.html#" target="_blank"> 11월 21일(금) 09:00, 삼성동 COEX ↗ </a> </div></div></div><nav aria-label="メイン" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="ナビゲーションバーをトーグルする" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/whatap-docs/ja/"><div class="navbar__logo"><img src="/whatap-docs/ja/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedComponent_mlkZ themedComponent--light_NVdE" height="43px" width="154px"><img src="/whatap-docs/ja/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="43px" width="154px"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">サービス</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/whatap-docs/ja/java/introduction">Java</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/php/introduction">PHP</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/nodejs/introduction">Node.js</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/python/introduction">Python</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/dotnet/introduction">.NET</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/golang/introduction">Go</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/server/introduction">Server</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/kubernetes/introduction">Kubernetes</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/postgresql/monitoring-intro">PostgreSQL</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/oracle/monitoring-intro">Oracle</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/oracle-pro/monitoring-intro">Oracle Pro</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/mysql/monitoring-intro">MySQL</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/mssql/monitoring-intro">SQL Server</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/tibero/monitoring-intro">Tibero</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/cubrid/monitoring-intro">CUBRID</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/altibase/monitoring-intro">Altibase</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/redis/monitoring-intro">Redis</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/mongodb/monitoring-intro">MongoDB</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/db2/monitoring-intro">IBM DB2</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/sapase/monitoring-intro">SAP ASE</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/url/url-intro">URL</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/browser">Browser</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/mobile/mobile-intro">Mobile</a></li><li><a class="dropdown__link narrow" href="/whatap-docs/ja/amazon-cloudwatch/install-agent">Amazon CloudWatch</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/amazon-ecs/introduction">Amazon ECS</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/aws-log/introduction">AWS Log</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/azure/install-agent">Azure Monitor</a></li><li><a class="dropdown__link narrow" href="/whatap-docs/ja/ncloud/install-agent">Naver Cloud Monitoring</a></li><li><a class="dropdown__link narrow" href="/whatap-docs/ja/oracle-cloud/install-agent">Oracle Cloud Monitor</a></li><li><a class="dropdown__link narrow" href="/whatap-docs/ja/npm/introduction">Network Performance Monitoring</a></li><li><a class="dropdown__link narrow" href="/whatap-docs/ja/nms/introduction">Network Management System</a></li><li><a class="dropdown__link narrow" href="/whatap-docs/ja/features/introduction">Feature Project</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/log/introduction">Log</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/extensions">Extensions</a></li><li><a class="dropdown__link" href="/whatap-docs/ja/openmetrics/introduction">OpenMetrics</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link hidden navbar__link--active" href="/whatap-docs/ja/java/introduction">Javaモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/php/introduction">PHPモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/nodejs/introduction">Node.jsモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/python/introduction">Pythonモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/dotnet/introduction">.NETモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/golang/introduction">Goモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/server/introduction">Serverモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/kubernetes/introduction">Kubernetesモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/postgresql/monitoring-intro">PostgreSQLモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/oracle/monitoring-intro">Oracle V2モニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/oracle-pro/monitoring-intro">Oracle Proモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/mysql/monitoring-intro">MySQLモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/mssql/monitoring-intro">SQL Server V2モニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/tibero/monitoring-intro">Tiberoモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/cubrid/monitoring-intro">CUBRID V2モニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/altibase/monitoring-intro">Altibase V2 モニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/redis/monitoring-intro">Redisモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/mongodb/monitoring-intro">MongoDBモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/db2/monitoring-intro">IBM DB2 モニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/sapase/monitoring-intro">SAP ASEモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/url/url-intro">URLモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/amazon-cloudwatch/install-agent">Amazon CloudWatch</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/amazon-ecs/introduction">Amazon ECS</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/aws-log/introduction">AWS Log</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/azure/install-agent">Azure Monitor</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/ncloud/install-agent">Naver Cloud Monitoring</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/oracle-cloud/install-agent">Oracle Cloud Monitor</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/log/introduction">Logモニタリング</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/browser">Browser</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/mobile/mobile-intro">Mobile 모니터링</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/npm/introduction">NPM</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/extensions">拡張ツール</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/opentelemetry/introduction">OpenTelemetry</a><a class="navbar__item navbar__link hidden" href="/whatap-docs/ja/openmetrics/introduction">OpenMetrics</a><a class="navbar__item navbar__link" href="/whatap-docs/ja/manage">管理機能</a><a class="navbar__item navbar__link" href="/whatap-docs/ja/openapi-spec">Open API</a><a class="navbar__item navbar__link" href="/whatap-docs/ja/faq/">FAQ</a><a class="navbar__item navbar__link iflang-link" href="/whatap-docs/ja/learning-guides">Learning</a><a class="navbar__item navbar__link" href="/whatap-docs/ja/release-notes">Release Notes</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link oneColumn localeDropdown"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span class="langLabel_L4uU">JPN</span></a><ul class="dropdown__menu"><li><a href="/whatap-docs/java/agent-transaction" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko-KR">KOR</a></li><li><a href="/whatap-docs/en/java/agent-transaction" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">ENG</a></li><li><a href="/whatap-docs/ja/java/agent-transaction" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja-JP">JPN</a></li></ul></div><div class="navbarSearchContainer_dCNk"><div id="docsearch"></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="システムモード" aria-label="ダークモードとライトモードの切り替え(現在 システムモード)"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10.9901 0H13.0099V4.06189C15.2205 4.33486 17.1538 5.49222 18.4373 7.16513L21.9901 5.13397L23 6.86603L19.4486 8.89635C19.8546 9.8507 20.0791 10.8994 20.0791 12C20.0791 13.1006 19.8546 14.1493 19.4486 15.1036L23 17.134L21.9901 18.866L18.4373 16.8349C17.1538 18.5078 15.2205 19.6651 13.0099 19.9381V24H10.9901V19.9381C8.77946 19.6651 6.84617 18.5078 5.56273 16.8349L2.00989 18.866L1 17.134L4.5514 15.1036C4.14535 14.1493 3.9209 13.1006 3.9209 12C3.9209 10.8994 4.14535 9.8507 4.5514 8.89635L1 6.86603L2.00989 5.13397L5.56273 7.16513C6.84617 5.49222 8.77946 4.33486 10.9901 4.06189V0ZM5.94068 12C5.94068 8.68629 8.65353 6 12 6C15.3465 6 18.0593 8.68629 18.0593 12C18.0593 15.3137 15.3465 18 12 18C8.65353 18 5.94068 15.3137 5.94068 12Z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M5.05011 4.409C6.46482 2.9943 8.14585 2.02264 9.90788 1.5C8.84446 5.08024 9.63565 8.99454 12.3303 11.6892C15.025 14.3839 18.9393 15.1751 22.5191 14.1129C21.9969 15.8737 21.0253 17.5548 19.6106 18.9695C15.322 23.2581 8.58587 23.4752 4.56511 19.4545C0.544352 15.4337 0.761495 8.69762 5.05011 4.409ZM7.26586 5.19608C6.97785 5.42391 6.70099 5.67022 6.43684 5.93437C2.99054 9.38066 2.80435 14.782 6.02096 17.9986C9.23756 21.2152 14.6389 21.029 18.0852 17.5827C18.4373 17.2307 18.7577 16.856 19.0448 16.4625C15.9881 16.4646 13.0552 15.3261 10.8743 13.1452C8.77411 11.045 7.6407 8.24751 7.56194 5.31354L7.55754 4.97444L7.26586 5.19608ZM17.3387 2.30478H19.3979V4.36394H21.4571V6.4231H19.3979V8.48226H17.3387V6.4231H15.2795V4.36394H17.3387V2.30478Z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="一番上へスクロールする" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_mhZE"><div class="hold-menu"><ul><li><a href="/ja" class="home">WhaTap Docs</a></li><li><a href="https://www.whatap.io/ja" target="_blank" rel="noopener noreferrer" class="ext">WhaTapのホームページへ移動します。</a></li></ul></div><nav aria-label="Docsサイドバー" class="menu thin-scrollbar menu_Y1UP menuWithAnnouncementBar_fPny"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/whatap-docs/ja/java/introduction">JAVAモニタリング</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/supported-spec">サポート環境</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/whatap-docs/ja/java/install-agent">エージェントのインストール</a><button aria-label="Expand sidebar category &#x27;エージェントのインストール&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-weaving">オープンソース追跡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/install-check">インストールチェックリスト</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-troubleshooting">インストール問題の解決</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/whatap-docs/ja/java/set-agent">設定</a><button aria-label="Collapse sidebar category &#x27;設定&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-name">エージェント名の識別</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-control-function">エージェント機能の制御</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-usage">CPU／メモリ／ディスク使用量の収集</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-network">エージェントの通信設定</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-performance">エージェント性能</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-log">エージェントログの設定</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/whatap-docs/ja/java/agent-transaction">トランザクション</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-dbsql">DB、SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-httpcapicall">HTTPC, API Call</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/script-plugin">スクリプトプラグイン</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-number-of-user">ユーザー数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-load-amount">負荷制御</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-notification">エージェント通知</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-apdex">Apdex</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-static">統計</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-toplogy">トポロジーマップ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-transaction-error-stack">トランザクションエラースタック</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/agent-additional-option">付加機能</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/async-tracking">非同期追跡</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/whatap-docs/ja/java/update-agent">管理</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/whatap-docs/ja/java/dashboard-intro">ダッシューボード</a><button aria-label="Expand sidebar category &#x27;ダッシューボード&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/whatap-docs/ja/java/analysis-report-intro">分析</a><button aria-label="Expand sidebar category &#x27;分析&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/whatap-docs/ja/java/metrics-intro">メトリクス</a><button aria-label="Expand sidebar category &#x27;メトリクス&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/whatap-docs/ja/java/track-transactions-intro">トランザクション</a><button aria-label="Expand sidebar category &#x27;トランザクション&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/whatap-docs/ja/java/topology">トポロジー</a><button aria-label="Expand sidebar category &#x27;トポロジー&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/analysis-apm-trs">統計</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/whatap-docs/ja/java/report-intro">レポート</a><button aria-label="Expand sidebar category &#x27;レポート&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/whatap-docs/ja/java/apm-set-notice">アラート通知</a><button aria-label="Expand sidebar category &#x27;アラート通知&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/instance-performance-analysis">インスタンスの性能管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/linked-projects">連携プロジェクト管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/log/introduction">Logモニタリング</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/whatap-docs/ja/java/labs">実験室</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホーム" class="breadcrumbs__link" href="/whatap-docs/ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item item-1"><a class="breadcrumbs__link" itemprop="item" href="/whatap-docs/ja/java/introduction"><span itemprop="name">JAVAモニタリング</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item item-2"><a class="breadcrumbs__link" itemprop="item" href="/whatap-docs/ja/java/set-agent"><span itemprop="name">設定</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active item-3"><span class="breadcrumbs__link" itemprop="name">トランザクション</span><meta itemprop="position" content="3"></li></ul><div class="breadcrumbs-hidden"><span itemprop="name">JAVAモニタリング<cite>&gt;</cite></span><span itemprop="name">設定<cite>&gt;</cite></span><span itemprop="name">トランザクション</span></div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_XdKt"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページでは</button></div><div class="theme-doc-markdown markdown"><header><h1>トランザクション</h1></header><p>トランザクションとは、ユーザーのブラウザからのリクエストを処理するためのサーバーサイドのLogical Unit of Work(KUW)です。個々のウェブサービス(URL)のリクエストを処理する過程がトランザクションです。ウェブアプリケーションにおいてトランザクションは、ウェブサービス(URL)に対するHTTP Requestを受信し、Responseを返すプロセスです。</p>
<p>アプリケーションの性能は、これらのトランザクションの性能であると言えます。トランザクションの性能には、トランザクションの開始から終了までの時間、レスポンス時間およびリソースの使用量、トランザクション呼び出し元の属性などの情報が含まれます。</p>
<p>基本的には、トランザクションのレスポンス分布とトランザクション統計を使用してトランザクションの性能を分析できます。</p>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="トランザクショントレーシング">トランザクショントレーシング<a href="#トランザクショントレーシング" class="hash-link" aria-label="トランザクショントレーシングへの直接リンク" title="トランザクショントレーシングへの直接リンク">​</a></h2><p>以下は、アプリケーションの各トランザクションの実行パスを詳細に追跡できるエージェントのオプションです。最小応答時間からトランザクションの実行ステップ数まで、様々な部分を調整可能です。</p><ul>
<li>
<p><strong>profile_basetime</strong> <span class="type">MiliSecond</span></p>
<p>既定値<code>500</code></p>
<p>トレースの詳細情報を収集する最少応答時間を設定します。設定した値以下の時間内にトランザクションが終了した場合、トレース情報を収集しません。ただし、5分単位で最初に呼び出されたURLとエラーが発生したトランザクションに関するトレース情報は収集します。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p><code>profile_basetime</code>オプションに関係なくエラーを収集するには、<code>profile_concern_error_enabled</code>オプションを<code>true</code>に設定します。デフォルトを<code>false</code>に設定すると、エラーがサンプリングされます。</p></div></div>
</li>
</ul><ul>
<li>
<p><strong>profile_step_normal_count</strong> <span class="type">Int</span></p>
<p>既定値 <code>1000</code></p>
<p>トランザクショントレースの最大ステップ数を設定します。</p>
</li>
<li>
<p><strong>profile_step_heavy_count</strong> <span class="type">Int</span></p>
<p>既定値<code>1020</code></p>
<p>Heavyなステップの場合、トレースの基本ステップ数を超えても決められた値だけ記録します。</p>
</li>
<li>
<p><strong>profile_step_max_count</strong> <span class="type">Int</span></p>
<p>既定値 <code>1024</code></p>
<p>トレースステップの最大数を設定します。収集されたトレースステップの数が設定値を超えると、その後に収集されるステップはすべて破棄されます。<code>profile_step_heavy_count</code>を最大1000に設定すると、<code>profile_step_max_count</code>までアクティブスタックが収集されます。</p>
</li>
<li>
<p><strong>profile_step_heavy_time</strong> <span class="type">MiliSecond</span></p>
<p>既定値<code>100</code></p>
<p>Heavyなステップの基準を設定します。 設定した値より実行時間が長い場合、<code>profile_step_normal_count</code>の値を超えても、<code>profile_step_heavy_count</code>の設定値のみ記録します。</p>
</li>
<li>
<p><strong>active_stack_count</strong> <span class="type">Int</span></p>
<p>既定値<code>100</code></p>
<p>トランザクション内で収集するアクティブスタックの最大数を設定します。</p>
</li>
<li>
<p><strong>profile_method_resource_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>トレースからmethodステップを収集する場合は、そのステップで使用したCPUとメモリ使用量を追跡します。</p>
</li>
<li>
<p><strong>profile_position_method</strong> <span class="type">String</span></p>
<p>設定したメソッド実行時のStackTraceを記録します。</p>
</li>
<li>
<p><strong>profile_position_depth</strong> <span class="type">Int</span></p>
<p>既定値<code>50</code></p>
<p>position追跡のStackTraceを記録する場合、最大ライン数を設定します。</p>
</li>
<li>
<p><strong>trace_error_callstack_depth</strong> <span class="type">Int</span></p>
<p>既定値<code>50</code></p>
<p>Error発生時に収集するStackTraceの最大ライン数を設定します。</p>
</li>
<li>
<p><strong>trace_active_callstack_depth</strong> <span class="type">Int</span></p>
<p>既定値<code>50</code></p>
<p>アクティブスタックから収集するStackTraceの最大ライン数を設定します。</p>
</li>
</ul>
<!-- -->
<ul>
<li>
<p><strong>trace_active_transaction_yellow_time</strong> <span class="type">MiliSecond</span></p>
<p>既定値 <code>3000</code></p>
<p>アクティブトランザクションのアークイコライザーで黄色で表現する基準を設定します。</p>
</li>
<li>
<p><strong>trace_active_transaction_red_time</strong> <span class="type">MiliSecond</span></p>
<p>既定値 <code>8000</code></p>
<p>アクティブトランザクションのアークイコライザーで赤色で表現する基準を設定します。</p>
</li>
</ul>
<ul>
<li>
<p><strong>hook_method_patterns</strong> <span class="type">String</span></p>
<p>レスポンス時間を測定するメソッドを設定します。最後のピリオド(.)を区切り文字としてクラスのFullNameとメソッドに区分され、アスタリスク(*)をワイルドカードとして使用できます。対象が複数ある場合は、コンマ(,)で区切ります。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key attr-name" style="color:rgb(255, 203, 107)">hook_method_patterns</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">a.b.C1.*</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><ul>
<li>
<p>このオプションで登録したメソッドは、<span class="uitext">トレース分析</span>または<span class="uitext">トランザクション情報</span>画面からMethodのステップで確認できます。</p>
</li>
<li>
<p>なるべく小さい範囲に適用してください。広い範囲に適用すると、アプリケーションの性能が低下する恐れがあります。</p>
</li>
</ul></div></div>
</li>
<li>
<p><strong>hook_method_supers</strong> <span class="type">String</span></p>
<p>特定のクラスを継承するメソッドの応答時間を測定する場合は、Super Classを設定します。 クラスFullNameを設定し、対象が複数ある場合は、コンマ(,)で区切ります。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key attr-name" style="color:rgb(255, 203, 107)">hook_method_supers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">a.b.C1</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>hook_method_interfaces</strong> <span class="type">String</span></p>
<p>特定のインターフェイスを実装するメソッドの応答時間を測定する場合は、Interfaceを設定します。インターフェイスのFullNameを設定し、対象が複数ある場合は、コンマ(,)で区切ります。</p>
</li>
<li>
<p><strong>hook_method_ignore_classes</strong> <span class="type">String</span></p>
<p>メソッドトレースを設定する場合は、トレースから除外するクラスをprefixに設定します。</p>
</li>
<li>
<p><strong>hook_method_access_public_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>メソッドトレースを設定する場合、publicメソッドを個別のターゲットとしてのみ処理するかどうかを設定します。</p>
</li>
<li>
<p><strong>hook_method_access_private_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>メソッドトレースを設定する場合、privateメソッドに限り、個別の対象として処理するかどうかを設定します。</p>
</li>
<li>
<p><strong>hook_method_access_protected_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>メソッドトレースを設定する場合、protectedメソッドに限り、個別の対象として処理するかどうかを設定します。</p>
</li>
<li>
<p><strong>hook_method_access_none_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>メソッドトレースを設定する際、no access indicatedメソッドに限り、別途対象として処理するかを設定します。</p>
</li>
<li>
<p><strong>stacklog_socket_port</strong> <span class="type">TCP_PortNumber</span></p>
<p>既定値<code>0</code></p>
<p>宛先のTCPポートを設定すると、Socket.connect()は、特定の時点でStackTraceをエージェントログとして記録します。基本設定で確認されていないDB接続、HTTPC接続などを追跡する場合に使用できます。</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>注意</div><div class="admonitionContent_BuS1"><p>設定した宛先への接続は、毎回StackTraceを記録します。これらを行うと、パフォーマンスが低下する可能性があります。デバッグ用に選択したエージェントに一時的に使用する必要があります。</p><p>DB接続状態追跡の例）<code>stacklog_socket_port=1521</code></p></div></div>
</li>
<li>
<p><strong>trace_concern_error_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p><code>trace_basetime</code>または<code>profile_basetime</code>オプションに関係なく、エラーのある詳細なトレースの収集有無を設定します。</p>
</li>
</ul></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="exception">例外処理<a href="#exception" class="hash-link" aria-label="例外処理への直接リンク" title="例外処理への直接リンク">​</a></h2><p>以下は、アプリケーションで発生する例外を管理およびモニタリングするためのオプションです。ビジネス例外を登録し、関連する統計を収集することで、アプリケーションの安定性を確認できます。また、特定の例外を無視したりHTTPステータスコードがエラーの場合、エラーとして処理するかどうかを設定できます。例外として処理された項目は、<span class="uitext">ヒットマップ</span>または<span class="uitext">トレース分析</span>画面で、正常なトランザクションとして表示されます。</p><div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>Javaエージェントの、例外処理基準についての詳細は、<a href="/whatap-docs/ja/java/trs-view#java-agent-exception">次の文書</a>を参照してください。</p></div></div><ul>
<li>
<p><strong>biz_exceptions</strong> <span class="type">String</span></p>
<p>Business Exceptionを登録します。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">biz_exceptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">com.home.test.exception.BizException</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>エラークラス収集 / ヒットマップ表示レベル：<span class="normal">INFO</span>(青色) / エラー統計を含む</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>Javaエージェント<a href="/whatap-docs/ja/release-notes/java/java-2_2_20">v2.2.20</a> 以降では、登録したビジネスExceptionをエラー統計で収集します。 v2.2.20未満では、登録したビジネスExceptionをエラー統計から除外します。 ただし、トレースの詳細では表示されます。</p></div></div>
</li>
<li>
<p><strong>biz_exceptions_status</strong> <span class="type">String</span> <code class="my">Java Agent v2.2.20 or later</code></p>
<p>Business Exception発生時、イベント通知を抑制するBusiness ExceptionとStatusを設定します。 このオプションで設定した<strong>Business Exception<!-- -->:Status</strong>については、イベントレベルが<span class="normal">INFO</span>に変更されます。 Business ExceptionとStatusはコロン(:)で区分し、一つのBusiness Exceptionに複数のStatusを使用する場合、アンパサンド(&amp;)で区分します。 コンマを区切り文字として使用して複数設定できます。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">biz_exceptions_status</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">java.util.concurrent.TimeoutException:400&amp;404&amp;408,java.lang.Exception:200</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>エラークラス収集 / ヒットマップ表示レベル：<span class="normal">INFO</span>(青色) / エラー統計を含む</p></div></div>
</li>
<li>
<p><strong>ignore_exceptions</strong> <span class="type">String</span></p>
<p>登録したExceptionエラを無視します。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">ignore_exceptions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">com.home.test.exception.BizException</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>エラークラス無視 / ヒットマップ表示レベル：<span class="normal">INFO</span>(青色) / エラー統計を含まない</p></div></div>
</li>
<li>
<p><strong>transaction_status_error_enable</strong> <span class="type">Boolean</span> <a href="/whatap-docs/ja/java/agent-transaction#transaction_status_error_enable" class="hash-link"><span id="transaction_status_error_enable">​</span></a></p>
<p>既  定値 <code>true</code></p>
<p>正常応答ではなくHTTP401、403のようなステータスコードがリターンされた場合、エラーとして処理するかどうかを設定します。</p>
</li>
<li>
<p><strong>status_ignore</strong> <span class="type">String</span></p>
<p>無視しようとするHTTPステータスコードを設定できます。 複数の値を対象とする場合は、コンマ（,）を区切り文字として使用してください。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">status_ignore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">408,500</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>Statusエラー無視 / ヒットマップ表示レベル：<span class="normal">INFO</span>(青色) / エラー統計を含まない</p></div></div>
</li>
<li>
<p><strong>status_ignore_set</strong> <span class="type">String</span></p>
<p><code>whatap.error.STATUS_ERROR</code>を無視します。 複数の値を対象とする場合は、コンマ（,）を区切り文字として使用してください。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">status_ignore_set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">/api/test/timeout/{time}:408,/error:500</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>Status エラーセット無視 / ヒットマップ表示レベル：<span class="normal">INFO</span>(青色) / エラー統計を含まない</p></div></div>
</li>
<li>
<p><strong>httpc_status_error_enable</strong> <span class="type">Boolean</span> <a href="/whatap-docs/ja/java/agent-transaction#httpc_status_error_enable" class="hash-link"><span id="httpc_status_error_enable">​</span></a></p>
<p>既定値 <code>true</code></p>
<p>HTTPステータスコードがエラーの場合は、収集有無を設定します。 クライアントエラーレスポンス(<code>400</code>以上)、サーバーエラーレスポンス(<code>500</code>以上)が該当します。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>HTTPステータスコードの詳細については、<a href="https://developer.mozilla.org/docs/Web/HTTP/Status" target="_blank" rel="noopener noreferrer">次のリンク</a>を参考にしてください。</p></div></div>
</li>
<li>
<p><strong>httpc_status_ignore</strong> <span class="type">String</span></p>
<p>HTTPのステータスコードがエラー(<code>HTTPC_ERROR</code>)の場合、無視します。 複数の値を対象とする場合は、コンマ（,）を区切り文字として使用してください。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">httpc_status_ignore</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">404,500</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>HTTPステータスエラーコード無視 / エラー統計を含まない</p></div></div>
</li>
<li>
<p><strong>httpc_status_url_ignore_set</strong> <span class="type">String</span></p>
<p><code>whatap.error.HTTPC_ERROR</code>を無視します。 複数の値を対象とする場合は、コンマ（,）を区切り文字として使用してくだ さい。</p>
<p><code>httpc_status_url_ignore_set=/a/b/c:400,/a/ab/c:404</code>のように設定してください。 この場合、URLは統計/エラー分析に<code>HTPC_URL</code>の値を入力します。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">httpc_status_url_ignore_set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">/a/b/c:404,/d/e/f:500</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p>HTTPステータスエラーコード無視 / エラー統計を含まない</p></div></div>
</li>
<li>
<p><strong>trace_sql_exception_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>JDBCドライバーでSqlException発生時に追跡可否を設定します。 オプション値を<code>false</code>に設定すると、ユーザー定義の例外処理により<code>biz_exceptions</code>処理できます。</p>
</li>
<li>
<p><strong>trace_exception_handler_overwrite_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>spring-boot ExceptionHandlerを通過する例外(exception)が発生すると、以前に発生した例外に置き換えできます。 <span class="uitext">トレース分析</span>画面の<span class="uitext">レコード要約</span>タブで例外(exception)を、spring-bootのExceptionHandlerに登録した例外で表示できます。</p>
</li>
</ul></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="httpトランザクションの追跡">HTTPトランザクションの追跡<a href="#httpトランザクションの追跡" class="hash-link" aria-label="HTTPトランザクションの追跡への直接リンク" title="HTTPトランザクションの追跡への直接リンク">​</a></h2><p>以下は、HTTPリクエストと応答に関連する様々な情報を追跡および記録するエージェントのオプションです。これにより、ユーザーはアプリケーションのHTTPトランザクションを細かくモニタリングし分析できます。トランザクション名にパラメータ値を追加または特定のURLやHTTPメソッドを除外できます。またHTTPヘッダー情報やパラメータ情報を含め、トランザクションをより詳細に記録できます。</p><ul>
<li>
<p><strong>trace_normalize_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>トランザクションURLをパーシングし、正規化する機能を有効にします。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p><code>false</code>に値を変更すると、パスパラメータのパーシングが無効になります。この場合、統計データの意味が弱くなるため、デバッグ目的のみで使用することをお勧めします。</p></div></div>
</li>
<li>
<p><strong>trace_auto_normalize_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>トランザクションURLを正規化すると、パターン値をアノテーションから抽出して自動的にパーシングする機能がアクティブになります。</p>
</li>
<li>
<p><strong>trace_normalize_urls</strong> <span class="type">String</span></p>
<p>正規化するトランザクションURLパターンを設定します。呼び出しURLパターンをパーシングして、パスパラメータを削除します。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>例）<code>/a/{v}/b</code>を宣言する場合は、<code>a/123/b</code> → <code>a/{v}/b</code>に置き換えます。複数登録する場合は、コンマ(,)を区切り文字として使用します。置換パターンをクリーンアップした後、補足する必要があります。</p></div></div>
</li>
<li>
<p><strong>web_static_content_extensions</strong> <span class="type">String</span></p>
<p>既定値<code>js, htm, html, gif, png, jpg, css, swf, ico</code></p>
<p>静的コンテンツであると判断する拡張子を設定します。このオプションで設定した拡張子を持つトランザクションは、トレース追跡とカウントから除外されます。</p>
</li>
<li>
<p><strong>trace_transaction_name_header_key</strong> <span class="type">String</span></p>
<p>設定したHTTP header keyから抽出した値をトランザクションの名前の末尾に追加します。</p>
</li>
</ul><ul>
<li>
<p><strong>profile_http_header_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>トレース履歴にHTTPヘッダー情報を記録するには、<code>true</code>に設定します。</p>
</li>
<li>
<p><strong>profile_http_parameter_enabled</strong> <span class="type">Boolean</span><a href="/whatap-docs/ja/java/agent-transaction#profile_http_parameter" class="hash-link"><span id="profile_http_parameter">​</span></a></p>
<p>既定値<code>false</code></p>
<p>トレース履歴にHTTPパラメータ情報を記録するには、<code>true</code>に設定します。パラメータは、他のセキュリティ キーを入力して参照できます。</p>
<!-- -->
<!-- -->
</li>
<li>
<p><strong>profile_http_header_url_prefix</strong> <span class="type">String</span></p>
<p>トレース履歴にHTTPヘッダー情報を書き込むための宛先URLのprefixを定義するために使用します。</p>
</li>
<li>
<p><strong>profile_http_parameter_url_prefix</strong> <span class="type">String</span></p>
<p>トレース履歴にhttpパラメータ情報を記録する対象URLのprefixを定義するときに使用します。</p>
</li>
</ul><ul>
<li>
<p><strong>trace_transaction_name_key</strong> <span class="type">String</span></p>
<p>HTTPリクエストパラメータの変数名を設定すると、その変数の値を取得してトランザクション名の最後に追加します。</p>
<p>例えば、HTTPパラメータで変数名<code>paramKey</code>を持った<code>/api/test</code>というURLを呼び出す場合、次の例のように設定すると、トレース履歴に<code>/api/test$paramKey={value}</code>の形式で表示されます。ただし、複数のパラメータを登録できません。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">trace_transaction_name_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">paramKey</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>recursive_max</strong> <span class="type">Int</span></p>
<p>既定値<code>1000000</code></p>
<p>トランザクションが再帰呼び出されているかどうかを検知するためのオプションです。１つのトランザクションから派生する再帰呼び出し回数をカウントすると、イベント通知を発行するための条件が設定されます。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>HTTP URLの再帰呼び出しを対象とします。jsp<!-- -->:forward<!-- -->によって再呼び出しするケースもカウントに含まれます。</p></div></div>
</li>
<li>
<p><strong>hook_httpservlet_classes</strong> <span class="type">String</span></p>
<p>HTTPトランザクションのEND POINTを設定します。メソッドの2つのパラメータは、<code>HttpServletRequest</code>と<code>HttpServletResponse</code>を設定できます。</p>
</li>
<li>
<p><strong>hook_jsp_patterns</strong> <span class="type">String</span></p>
<p>既定値<code>org.apache.jasper.servlet.JspServlet.serviceJspFile</code></p>
<p>JSPファイルをロードするためのメソッドを設定します。トランザクションの呼び出しの結果として戻されたJSP情報をトレースに表示します。このオプションで追加された設定に既定値が自動的に追加されます。</p>
</li>
<li>
<p><strong>trace_ignore_url_set</strong> <span class="type">String</span></p>
<p>トランザクション追跡から除外するURLを設定します。2つ以上の値を設定する場合は、コンマ(,)を区切り文字として使用します。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>このオプションを通じて登録したURLは、<span class="uitext">ヒットマップ</span>, <span class="uitext">トレース分析</span>または<span class="uitext">トランザクション情報</span>画面で収集が除外されます。</p></div></div>
</li>
<li>
<p><strong>trace_ignore_url_prefix</strong> <span class="type">String</span></p>
<p>トランザクション追跡から除外するURL prefixを設定します。2つ以上の値を設定する場合は、コンマ(,)を区切り文字として使用します。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>このオプションを通じて登録したURLは、<span class="uitext">ヒットマップ</span>, <span class="uitext">トレース分析</span>または<span class="uitext">トランザクション情報</span>画面で収集が除外されます。</p></div></div>
</li>
<li>
<p><strong>ignore_http_method</strong> <span class="type">String</span></p>
<p>既定値 <code>PATCH,OPTIONS,HEAD,TRACE</code></p>
<p>設定したHTTPメソッド(Method)で要求されたトランザクション情報は収集しません。複数設定するには、コンマ(,)を区切り文字として利用してください。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># e.g. http_methodがOPTIONS、HEADであるトランザクションを「追跡」</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">ignore_http_method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">PATCH,TRACE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># e.g. http_methodがOPTIONS、HEADであるトランザクションを「無視」</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">ignore_http_method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">OPTIONS,HEAD</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>このオプションを通じて登録したHTTPメソッドは、<span class="uitext">ヒットマップ</span>, <span class="uitext">トレース分析</span>または<span class="uitext">トランザクション情報</span>画面で収集が除外されます。</p></div></div>
</li>
<li>
<p><strong>trace_tx_name_with_method_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>統計データでURLを変更したURL+methodで収集できます。<span class="uitext">統計</span>または<span class="uitext">TX検索</span>メニューでURL+methodで確認できます。</p>
<blockquote>
<p>例、/api/user+GET、/api/user+POST</p>
</blockquote>
</li>
</ul></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="非httpトランザクションのトレース">非HTTPトランザクションのトレース<a href="#非httpトランザクションのトレース" class="hash-link" aria-label="非HTTPトランザクションのトレースへの直接リンク" title="非HTTPトランザクションのトレースへの直接リンク">​</a></h2><p>以下は、HTTP以外のトランザクションを追跡してモニタリングするためのオプションです。このオプションにより、ユーザーはバックグラウンド作業や他のプロトコルに対するトランザクションを細かく追跡できます。</p><ul>
<li>
<p><strong>trace_auto_transaction_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>トレース対象メソッドがトランザクション開始点(<code>Javax.http.httpservlet</code>, <code>hook_service_*</code>)内で実行されない限り、収集されません。 この場合、トレース対象メソッドをトランザクションの開始点になるように設定します。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>主に開発環境でバックグラウンドトランザクションのEND POINTを見つめるために使用します。</p></div></div>
</li>
<li>
<p><strong>trace_auto_transaction_backstack_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p><code>trace_auto_transaction_enabled</code>オプションの値が<code>true</code>の場合、トランザクション開始時にStackTraceを記録します。これを通じて、トランザクションの開始点を見つけることができます。</p>
</li>
<li>
<p><strong>trace_background_socket_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>トランザクションではなく、バックグラウンドスレッドによるソケットがオープンしたときも記録します。</p>
</li>
<li>
<p><strong>async_stack_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>バックグラウンドスレッドに対するActive Stack機能を使用するかどうかを設定します。</p>
</li>
<li>
<p><strong>async_thread_match</strong> <span class="type">String</span></p>
<p>アクティブスタックをダンプするバックグラウンドスレッド名を設定します。複数を設定するには、コンマ(,)を区切り文字として使用します。 名前を設定時、「Thread-*」のようにアスタリスク(*)を使用して比較パターンを使用できます。</p>
</li>
<li>
<p><strong>async_thread_parking_class</strong> <span class="type">String</span></p>
<p>既定値<code>sun.misc.Unsafe</code></p>
<p>スタックの上位メソッドが<code>async_thread_parking</code>に登録されたクラス/メソッドの場合、スレッドがパーキング状態にあると判断してダンプを生成しません。</p>
</li>
<li>
<p><strong>hook_service_patterns</strong> <span class="type">String</span></p>
<p>NON-Httpトランザクション追跡のための開始点パターンを設定します。ワイルドカード文字は使用できません。2つ以上の値を設定するにはコンマ(,)を区切り文字として利用します。</p>
</li>
<li>
<p><strong>hook_serivce_ignore_methods</strong> <span class="type">String</span></p>
<p><code>hook_service_patterns</code>で設定した項目のうち、出発点として不要なメソッドを追加できます。</p>
</li>
<li>
<p><strong>hook_service_supers</strong> <span class="type">String</span></p>
<p>NON-HTTPトランザクション追跡のための始点の共通分母が特定のクラスのメソッドを継承した場合、共通分母のメソッドを設定します。メソッド全体のパスを入力します。ワイルドカード(<code>*</code>)が使用でき、コンマ(,)を区切り文字として利用して複数のメソッドを登録できます。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key attr-name" style="color:rgb(255, 203, 107)">hook_service_supers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">a.b.C.method,a.b.C.*</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>hook_service_interfaces</strong> <span class="type">String</span></p>
<p>NON-HTTPトランザクション追跡のための開始点の共通分母が特定のインターフェイスを実装している場合は、これを設定します。</p>
</li>
<li>
<p><strong>hook_service_access_public_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>NON-HTTP Demonプロセスのプロセスのトランザクションを設定する場合は、publicメソッドに対してのみAccess権限条件をon/offで設定します。</p>
</li>
<li>
<p><strong>hook_service_access_private_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>NON-HTTP Demonプロセスのトランザクションを設定する場合は、privateメソッドに対してのみAccess権限条件をon/offで設定します。</p>
</li>
<li>
<p><strong>hook_service_access_protected_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>NON-HTTP Demonプロセスのトランザクションを設定する場合は、protectedメソッドに対してのみAccess権限条件をon/offで設定します。</p>
</li>
<li>
<p><strong>service_name_mode</strong> <span class="type">String</span></p>
<p>既定値<code>full</code></p>
<p>トランザクション名には、次のオプションを使用できます。</p>
<ul>
<li><code>full</code>: Full Class名を使用</li>
<li><code>class</code>: サービス名をClass名として使用</li>
<li><code>method</code>: サービス名をMethod名として使用</li>
<li><code>string</code>: サービス名を文字列の最初のパラメータとして使用します。</li>
<li><code>arg</code>: パラメータで、<code>service_name_index</code>オプションで設定されたインデックスにパラメータをサービス名として使用します。</li>
</ul>
</li>
</ul></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="マルチトランザクショントレース">マルチトランザクショントレース<a href="#マルチトランザクショントレース" class="hash-link" aria-label="マルチトランザクショントレースへの直接リンク" title="マルチトランザクショントレースへの直接リンク">​</a></h2><p>以下は、アプリケーション間の呼び出しを追跡 しモニタリングするためのオプションです。このオプションにより、ユーザーは複数のアプリケーション間の相互作用を理解できます。提供する様々なオプションにより、マルチトランザクションの追跡に対する詳細な動作を調整できます。</p><ul>
<li>
<p><strong>mtrace_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>マルチトランザクション追跡機能(Multi Transaction ID、以下MTID) の使用有無を設定します。MTIDを追跡することで、登録したすべてのアプリケーション間の呼び出しを確認できます。</p>
</li>
<li>
<p><strong>mtrace_rate</strong> <span class="type">Percentage</span></p>
<p>既定値<code>10</code></p>
<p>最初のトランザクションが発生したときに発行されるMTIDの発行比率を設定するオプションです。</p>
</li>
<li>
<p><strong>mtrace_caller_key</strong> <span class="type">String</span></p>
<p>既定値 <code>x-wtap-mst</code></p>
<p>MTID追跡に使用するCaller Key Nameを設定します。</p>
</li>
<li>
<p><strong>mtrace_callee_key</strong> <span class="type">String</span></p>
<p>既定値 <code>x-wtap-tx</code></p>
<p>MTID追跡に使用するCallee Key Nameを定義します。</p>
</li>
<li>
<p><strong>mtrace_send_url_length</strong> <span class="type">Int</span></p>
<p>既定値<code>80</code></p>
<p>Http Callerは、CalleeにそのURLを渡します。このとき、URLの長さが制限され、この長さの値が設定されます。</p>
</li>
<li>
<p><strong>mtrace_callee_id_send_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>MTIDを追跡する場合、HTTPC呼び出しで発行されたCallee IDをトレースに表示します。</p>
</li>
<li>
<p><strong>mtrace_callee_id_recv_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>MTID追跡時に受信したCallee IDのトレースを 表します。</p>
</li>
<li>
<p><strong>mtrace_alltx_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>log4jなどのロギングシステムに接続するために、すべてのトランザクションのMTIDを追跡できます。</p>
</li>
<li>
<p><strong>mtrace_basetime</strong> <span class="type">Miliseconds</span></p>
<p>既定値<code>100</code></p>
<p><code>mtrace_alltx_enabled</code>オプションの値が<code>true</code>の場合、多くのログが残る可能性があります。この場合、トレースログの量を減らす必要があります。</p>
</li>
<li>
<p><strong>stat_mtrace_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>CallerとCalleeの相関統計を収集します。Callerに適用するとCallerの詳細情報が送信され、Calleeを適用するとurl単位のCaller-Calleeの呼び出し統計情報が収集サーバーに送信されます。</p>
</li>
</ul></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="トレースデータサンプリング">トレースデータサンプリング<a href="#トレースデータサンプリング" class="hash-link" aria-label="トレースデータサンプリングへの直接リンク" title="トレースデータサンプリングへの直接リンク">​</a></h2><p>以下は、トレースデータのサンプリングを調整し、データの送信有無を設定するオプションです。このオプションにより、ユーザーはアプリケーションの性能とデータ転送量を管理できます。</p><p>エージェント対応の範囲：<code class="my">Java Agent v2.2.4以降</code></p><ul>
<li>
<p><strong>trace_sampling_enabled</strong> <span class="api">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>トレースデータサンプリングの収集有無を設定できます。</p>
</li>
<li>
<p><strong>trace_sampling_tps</strong> <span class="type">Int</span></p>
<p>既定値<code>10000</code></p>
<p>トレースデータサンプリングの数を設定できます。設定したサンプリング数を超えるデータは送信せず、5秒ごとに初期化します。</p>
</li>
<li>
<p><strong>trace_send_enabled</strong> <span class="api">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p>トレースデータの送信有無を設定できます。</p>
</li>
<li>
<p><strong>debug_trace_samling</strong> <span class="api">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>トレースデータサンプリングのデバッグオプションをオンまたはオフにできます。</p>
</li>
</ul></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="トレースurl名を修正する">トレースURL名を修正する<a href="#トレースurl名を修正する" class="hash-link" aria-label="トレースURL名を修正するへの直接リンク" title="トレースURL名を修正するへの直接リンク">​</a></h2><ul>
<li>
<p><strong>hook_tx_name_patterns / hook_tx_name_mode</strong> <span class="type">String</span> <code class="my">Java Agent v2.2.4 or later</code></p>
<p>特定URLおよび特定メソッド(method)を呼び出す時にトレースURLの名前を修正できます。例えば<code>io.home.test.TestController.test1</code>に登録したURLを呼び出すと<code>test100000()</code>メソッドが呼び出される場合、サービス画面から<code>/api/100000+test1+test100000</code>で確認できます。</p>
<p><code>hook_tx_name_mode</code>オプションを通じて<strong>class</strong>、<strong>method</strong>、<strong>string</strong>、<strong>return</strong>の中で1つを選択できます。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># 呼び出しメソッドのフルパス、ワイルドカード(*)使用可能</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">hook_tx_name_patterns</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">ab.cd.ef.GH.ij</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># class, method, string, returnから1つを選択</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(255, 203, 107)">hook_tx_name_mode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">method</span><br></span></code></pre></div></div>
</li>
</ul></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="特定のexceptionを無視する">特定のexceptionを無視する<a href="#特定のexceptionを無視する" class="hash-link" aria-label="特定のexceptionを無視するへの直接リンク" title="特定のexceptionを無視するへの直接リンク">​</a></h2><ul>
<li>
<p><strong>ignore_exception_tx_pattern</strong> <span class="type">String</span> <code class="my">Java Agent v2.2.4 or later</code></p>
<p>特定のサービスで特定のexceptionを無視できるように設定できます。複数登録するときは、コンマ(,)を区切り文字として利用してください。</p>
<div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockTitle_OeMC">whatap.conf</div><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key attr-name" style="color:rgb(255, 203, 107)">ignore_exception_tx_pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token value attr-value">exception:service_url</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># e.g. java.util.concurrent.TimeoutException:/api/test/timeout,org.springframework.web.util.NestedServletException:/api/posts/test/cexception</span><br></span></code></pre></div></div>
</li>
</ul></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="httpurlconnectionを追跡する">HttpURLConnectionを追跡する<a href="#httpurlconnectionを追跡する" class="hash-link" aria-label="HttpURLConnectionを追跡するへの直接リンク" title="HttpURLConnectionを追跡するへの直接リンク">​</a></h2><p>次は、<code>HttpURLConnection</code>クラスを使ってHTTP呼び出しを追跡するためのオプションです。</p><ul>
<li>
<p><strong>HttpURLConnection</strong> <span class="type">Boolean</span></p>
<p>既定値 <code>true</code></p>
<p><code>HttpURLConnection</code>クラスのメソッドを追跡するためのオプションです。</p>
</li>
<li>
<p><strong>hook_HttpURLConnection_startup_enabled</strong> <span class="type">Boolean</span> <code class="my">Java Agent v2.2.4 or later</code></p>
<p>既定値<code>false</code></p>
<p><code>HttpURLConnection</code>クラスのメソッドの最初の呼び出し時にも追跡できるように設定できます。</p>
</li>
<li>
<p><strong>HttpURLConnection_weblogic</strong> <span class="type">Boolean</span> <code class="my">Java Agent v2.2.4 or later</code></p>
<p>既定値 <code>true</code></p>
<p>Weblogicで<code>HttpURLConnection</code>でhttp呼び出しをする場合、<code>weblogic.net.http.HttpURLConnection</code>クラスのメソッドを追跡するためのオプションです。</p>
</li>
<li>
<p><strong>hook_HttpURLConnection_weblogic_startup_enabled</strong> <span class="type">Boolean</span> <code class="my">Java Agent v2.2.4 or later</code></p>
<p>既定値<code>false</code></p>
<p><code>weblogic.net.http.HttpURLConnection</code>クラスのメソッドの最初の呼び出し時にも追跡できるように設定できます。</p>
</li>
</ul></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="メモリ割当量の収集">メモリ割当量の収集<a href="#メモリ割当量の収集" class="hash-link" aria-label="メモリ割当量の収集への直接リンク" title="メモリ割当量の収集への直接リンク">​</a></h2><ul>
<li>
<p><strong>trace_malloc_enabled</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>トランザクションごとの平均メモリ割当量を収集します。</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p>当該オプションの値を<code>true</code>に設定し、活性化時に<span class="uitext">トレース分析</span>画面の<span class="uitext">レコード要約</span>タップで<span class="uitext">メモリ割当量</span>が確認できます。詳細は<a href="/whatap-docs/ja/java/dashboard-hitmap-trace#anlaysis-trace-record-summary">次の文書</a>を参照してください。</p></div></div>
</li>
</ul></section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">フィードバック</button></div></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文書検索"><a class="pagination-nav__link pagination-nav__link--prev" href="/whatap-docs/ja/java/agent-log"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">エージェントログの設定</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/whatap-docs/ja/java/agent-dbsql"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">DB、SQL</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pzBX thin-scrollbar"></div><div class="fbsharebutton_dZBI" data-href="https://docs.whatap.io/whatap-docs/ja/java/agent-transaction" data-layout="" data-size=""><button type="button" class="fb_xfbml_parse_ignore_BpHP">共有</button></div><div class="btnprint_EBmh"><button>PDF</button></div><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">フィードバック</button></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 WhaTap Labs Inc. All rights reserved. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>