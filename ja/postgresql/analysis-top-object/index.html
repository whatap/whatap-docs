<!doctype html>
<html lang="ja-JP" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-postgresql/analysis-top-object" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Topオブジェクト | WhaTap Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" name="twitter:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" property="og:url" content="https://docs.whatap.io/ja/postgresql/analysis-top-object"><meta data-rh="true" property="og:locale" content="ja_JP"><meta data-rh="true" property="og:locale:alternate" content="ko_KR"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="naver-site-verification" content="0c21fc5664a467108fb762ade47a3f81ee9b88ed"><meta data-rh="true" name="google-site-verification" content="rIlfJkbbogFOIDc3DgJZmOGbUMJWytyvZSKEgV7EMsE"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Topオブジェクト | WhaTap Docs"><meta data-rh="true" name="description" content="ユーザーが適切なチューニングを進め、データベースを最適化するように情報を提供します。"><meta data-rh="true" property="og:description" content="ユーザーが適切なチューニングを進め、データベースを最適化するように情報を提供します。"><meta data-rh="true" name="keywords" content="PostgreSQL,データベース,Topオブジェクト"><link data-rh="true" rel="icon" href="/ja/img/whatap-favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.whatap.io/ja/postgresql/analysis-top-object"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/postgresql/analysis-top-object" hreflang="ko-KR"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/en/postgresql/analysis-top-object" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/ja/postgresql/analysis-top-object" hreflang="ja-JP"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/postgresql/analysis-top-object" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/ja/blog/rss.xml" title="WhaTap Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/ja/blog/atom.xml" title="WhaTap Docs Atom Feed">








<script>!function(e,t,a,o,r,s){e=e[r]=e[r]||{config:{projectAccessKey:"x4t5020boh2ln-z6pi7d91ds6c1a-z7t4b2lrgnub4o",pcode:29856,sampleRate:100,sessionReplaySampleRate:100,ignoreOrigins:[/^.*localhost.*$/i,/^.*ngrok-free.app.*$/i,/^.*whatap.github.io.*$/i],collectUserClick:!0}},(r=t.createElement(a)).async=1,r.src=o,(o=t.getElementsByTagName(a)[0]).parentNode.insertBefore(r,o)}(window,document,"script","https://repo.whatap-browser-agent.io/rum/prod/v1/whatap-browser-agent.js","WhatapBrowserAgent")</script>
<script>let curLang=document.documentElement.lang.split("-")[0];CRISP_RUNTIME_CONFIG={locale:curLang},window.$crisp=[],window.CRISP_WEBSITE_ID="9a0c342f-a5b1-4c4a-a22f-92c7b4b9b477",d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)</script>


<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E46TQ5VSCT"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E46TQ5VSCT",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-WJSZDJR",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/ja/assets/css/styles.3066c714.css">
<script src="/ja/assets/js/runtime~main.2cfee2d1.js" defer="defer"></script>
<script src="/ja/assets/js/main.5807d148.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script>

<script async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&amp;version=v17.0&amp;appId=169051789422006&amp;autoLogAppEvents=1" nonce="y4U7YSrt"></script>
<div id="fb-root"></div>




<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WJSZDJR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus"><div role="region" aria-label="本文へスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">本文へスキップ</a></div><nav aria-label="メイン" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="ナビゲーションバーをトーグルする" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ja/"><div class="navbar__logo"><img src="/ja/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedComponent_mlkZ themedComponent--light_NVdE" height="43px" width="154px"><img src="/ja/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="43px" width="154px"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/ja/whatap-overview">はじめに</a><a class="navbar__item navbar__link" href="/ja/learning-guides">WhaTap活用</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">製品</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ja/java/introduction">Java</a></li><li><a class="dropdown__link" href="/ja/php/introduction">PHP</a></li><li><a class="dropdown__link" href="/ja/nodejs/introduction">Node.js</a></li><li><a class="dropdown__link" href="/ja/python/introduction">Python</a></li><li><a class="dropdown__link" href="/ja/dotnet/introduction">.NET</a></li><li><a class="dropdown__link" href="/ja/golang/introduction">Go</a></li><li><a class="dropdown__link" href="/ja/server/introduction">Server</a></li><li><a class="dropdown__link" href="/ja/kubernetes/introduction">Kubernetes</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/ja/postgresql/monitoring-intro">PostgreSQL</a></li><li><a class="dropdown__link" href="/ja/oracle/monitoring-intro">Oracle</a></li><li><a class="dropdown__link" href="/ja/oracle-pro/monitoring-intro">Oracle Pro</a></li><li><a class="dropdown__link" href="/ja/mysql/monitoring-intro">MySQL</a></li><li><a class="dropdown__link" href="/ja/mssql/monitoring-intro">SQL Server</a></li><li><a class="dropdown__link" href="/ja/tibero/monitoring-intro">Tibero</a></li><li><a class="dropdown__link" href="/ja/cubrid/monitoring-intro">CUBRID</a></li><li><a class="dropdown__link" href="/ja/altibase/monitoring-intro">Altibase</a></li><li><a class="dropdown__link" href="/ja/redis/monitoring-intro">Redis</a></li><li><a class="dropdown__link" href="/ja/mongodb/monitoring-intro">MongoDB</a></li><li><a class="dropdown__link" href="/ja/url/url-intro">URL</a></li><li><a class="dropdown__link" href="/ja/browser">Browser</a></li><li><a class="dropdown__link narrow" href="/ja/amazon-cloudwatch/install-agent">Amazon CloudWatch</a></li><li><a class="dropdown__link" href="/ja/amazon-ecs/introduction">Amazon ECS</a></li><li><a class="dropdown__link" href="/ja/aws-log/introduction">AWS Log</a></li><li><a class="dropdown__link" href="/ja/azure/install-agent">Azure Monitor</a></li><li><a class="dropdown__link narrow" href="/ja/ncloud/install-agent">Naver Cloud Monitoring</a></li><li><a class="dropdown__link narrow" href="/ja/oracle-cloud/install-agent">Oracle Cloud Monitor</a></li><li><a class="dropdown__link narrow" href="/ja/npm/introduction">Network Performance Monitoring</a></li><li><a class="dropdown__link narrow" href="/ja/features/introduction">Feature Project</a></li><li><a class="dropdown__link" href="/ja/log/introduction">Log</a></li><li><a class="dropdown__link" href="/ja/extensions">Extensions</a></li></ul></div><a class="navbar__item navbar__link hidden" href="/ja/java/introduction">Javaモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/php/introduction">PHPモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/nodejs/introduction">Node.jsモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/python/introduction">Pythonモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/dotnet/introduction">.NETモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/golang/introduction">Goモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/server/introduction">Serverモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/kubernetes/introduction">Kubernetesモニタリング</a><a aria-current="page" class="navbar__item navbar__link hidden navbar__link--active" href="/ja/postgresql/monitoring-intro">PostgreSQLモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/oracle-v1/monitoring-intro">Oracle V1モニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/oracle/monitoring-intro">Oracle V2モニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/oracle-pro/monitoring-intro">Oracle Proモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/mysql/monitoring-intro">MySQLモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/mssql/monitoring-intro">SQL Serverモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/tibero/monitoring-intro">Tiberoモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/cubrid/monitoring-intro">CUBRIDモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/altibase/monitoring-intro">Altibaseモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/redis/monitoring-intro">Redisモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/mongodb/monitoring-intro">MongoDBモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/url/url-intro">URLモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/amazon-cloudwatch/install-agent">Amazon CloudWatch</a><a class="navbar__item navbar__link hidden" href="/ja/amazon-ecs/introduction">Amazon ECS</a><a class="navbar__item navbar__link hidden" href="/ja/aws-log/introduction">AWS Log</a><a class="navbar__item navbar__link hidden" href="/ja/azure/install-agent">Azure Monitor</a><a class="navbar__item navbar__link hidden" href="/ja/ncloud/install-agent">Naver Cloud Monitoring</a><a class="navbar__item navbar__link hidden" href="/ja/oracle-cloud/install-agent">Oracle Cloud Monitor</a><a class="navbar__item navbar__link hidden" href="/ja/log/introduction">Logモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/browser">Browser</a><a class="navbar__item navbar__link hidden" href="/ja/npm/introduction">NPM</a><a class="navbar__item navbar__link hidden" href="/ja/extensions">拡張ツール</a><a class="navbar__item navbar__link hidden" href="/ja/opentelemetry/introduction">OpenTelemetry</a><a class="navbar__item navbar__link" href="/ja/manage">管理機能</a><a class="navbar__item navbar__link" href="/ja/openapi-spec">Open API</a><a class="navbar__item navbar__link" href="/ja/license/licenses">ライセンス</a><a class="navbar__item navbar__link" href="/ja/release-notes">リリースノート</a><a class="navbar__item navbar__link" href="/ja/faq/">FAQ</a><a class="navbar__item navbar__link" href="/ja/blog">新しい機能</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link oneColumn localeDropdown"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg><span class="langLabel_L4uU">JPN</span></a><ul class="dropdown__menu"><li><a href="/postgresql/analysis-top-object" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko-KR">KOR</a></li><li><a href="/en/postgresql/analysis-top-object" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">ENG</a></li><li><a href="/ja/postgresql/analysis-top-object" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja-JP">JPN</a></li></ul></div><div class="navbarSearchContainer_dCNk"><div id="docsearch"></div></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードとライトモードの切り替え(現在 ライトモード)" aria-label="ダークモードとライトモードの切り替え(現在 ライトモード)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" class="lightToggleIcon_pyhR"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10.9901 0H13.0099V4.06189C15.2205 4.33486 17.1538 5.49222 18.4373 7.16513L21.9901 5.13397L23 6.86603L19.4486 8.89635C19.8546 9.8507 20.0791 10.8994 20.0791 12C20.0791 13.1006 19.8546 14.1493 19.4486 15.1036L23 17.134L21.9901 18.866L18.4373 16.8349C17.1538 18.5078 15.2205 19.6651 13.0099 19.9381V24H10.9901V19.9381C8.77946 19.6651 6.84617 18.5078 5.56273 16.8349L2.00989 18.866L1 17.134L4.5514 15.1036C4.14535 14.1493 3.9209 13.1006 3.9209 12C3.9209 10.8994 4.14535 9.8507 4.5514 8.89635L1 6.86603L2.00989 5.13397L5.56273 7.16513C6.84617 5.49222 8.77946 4.33486 10.9901 4.06189V0ZM5.94068 12C5.94068 8.68629 8.65353 6 12 6C15.3465 6 18.0593 8.68629 18.0593 12C18.0593 15.3137 15.3465 18 12 18C8.65353 18 5.94068 15.3137 5.94068 12Z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M5.05011 4.409C6.46482 2.9943 8.14585 2.02264 9.90788 1.5C8.84446 5.08024 9.63565 8.99454 12.3303 11.6892C15.025 14.3839 18.9393 15.1751 22.5191 14.1129C21.9969 15.8737 21.0253 17.5548 19.6106 18.9695C15.322 23.2581 8.58587 23.4752 4.56511 19.4545C0.544352 15.4337 0.761495 8.69762 5.05011 4.409ZM7.26586 5.19608C6.97785 5.42391 6.70099 5.67022 6.43684 5.93437C2.99054 9.38066 2.80435 14.782 6.02096 17.9986C9.23756 21.2152 14.6389 21.029 18.0852 17.5827C18.4373 17.2307 18.7577 16.856 19.0448 16.4625C15.9881 16.4646 13.0552 15.3261 10.8743 13.1452C8.77411 11.045 7.6407 8.24751 7.56194 5.31354L7.55754 4.97444L7.26586 5.19608ZM17.3387 2.30478H19.3979V4.36394H21.4571V6.4231H19.3979V8.48226H17.3387V6.4231H15.2795V4.36394H17.3387V2.30478Z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="一番上へスクロールする" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_mhZE"><div class="hold-menu"><ul><li><a href="/ja" class="home">WhaTap Docs</a></li><li><a href="https://www.whatap.io/ja" target="_blank" rel="noopener noreferrer" class="ext">WhaTapのホームページへ移動します。</a></li></ul></div><nav aria-label="Docsサイドバー" class="menu thin-scrollbar menu_Y1UP"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/ja/postgresql/monitoring-intro">PostgreSQLモニタリング</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/postgresql/monitoring-support">サポート環境</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ja/postgresql/install-agent">インストール</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/postgresql/agent-settings">設定</a><button aria-label="Expand sidebar category &#x27;設定&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/postgresql/agent-manage">管理</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ja/postgresql/dashboard-intro">メインメニュー</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/postgresql/dashboard-intro">ダッシューボード</a><button aria-label="Expand sidebar category &#x27;ダッシューボード&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/postgresql/flex-board">Flexボード</a><button aria-label="Expand sidebar category &#x27;Flexボード&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/ja/postgresql/analysis-count-trend">分析</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/postgresql/analysis-count-trend">カウント推移の比較</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/postgresql/analysis-lock-and-deadlock">ロックツリー</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/postgresql/analysis-session-history">セッション履歴</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/postgresql/analysis-wait-events">Wait分析</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ja/postgresql/analysis-top-object">Topオブジェクト</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/postgresql/analysis-compare-top-sql">Top SQL比較</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/postgresql/analysis-databaseparameter">データベースパラメータ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/postgresql/metrics-intro">メトリックス</a><button aria-label="Expand sidebar category &#x27;メトリックス&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/ja/postgresql/stat">統計/レポート</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/postgresql/log-main">ログ</a><button aria-label="Expand sidebar category &#x27;ログ&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/ja/postgresql/set-notice">アラート通知</a><button aria-label="Expand sidebar category &#x27;アラート通知&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ja/postgresql/labs">ラボラトリー</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Alpn" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ホーム" class="breadcrumbs__link" href="/ja/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_xK9p"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/ja/postgresql/monitoring-intro"><span itemprop="name">PostgreSQLモニタリング</span></a><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">メインメニュー</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">分析</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Topオブジェクト</span><meta itemprop="position" content="4"></li></ul><div class="breadcrumbs-hidden"><span itemprop="name">PostgreSQLモニタリング<cite>&gt;</cite></span><span>メインメニュー<cite>&gt;</cite></span><span>分析<cite>&gt;</cite></span><span itemprop="name">Topオブジェクト</span></div></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_XdKt"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページでは</button></div><div class="theme-doc-markdown markdown"><header><h1>Topオブジェクト</h1></header><p>ホーム画面 &gt; プロジェクト選択 &gt; <span class="uitext">分析</span> &gt; <span class="uitext">Topオブジェクト</span></p>
<p>個別インスタンスのオブジェクト（テーブル、インデックス）別のBloatingサイズ、Scan数、DML実行数、Dead tupleが多いオブジェクトを提供します。また、使用の多いオブジェクトを把握し、VacuumやAnalyzeを適切な時期に実行できるように情報を提供します。</p>
<p><img loading="lazy" src="/ja/img/db-top-object-ja.png" alt="Top object" width="1200" height="541"></p>
<ul>
<li>
<p>画面で照会したい <span class="uitext">日付</span>と <span class="uitext">インスタンス</span>、<span class="uitext">照会基準</span>、<span class="uitext">照会件数</span>を設定した上で<img decoding="async" loading="lazy" alt="検索アイコン" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAdCAYAAAAgqdWEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMC1jMDAwIDc5LjE3MWMyN2ZhYiwgMjAyMi8wOC8xNi0yMjozNTo0MSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NGYxMDZkYi1mOWQ1LTRkNWItYjg1Mi01N2E4OWQ4N2NiODAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkM0RjAyQzM1MTBFMTFFRDk1NTBFNTZGQjUwMkEyQzYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkM0RjAyQzI1MTBFMTFFRDk1NTBFNTZGQjUwMkEyQzYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjAgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphMzM1ZWVmNC1mYjZhLTRkNzctOWI5MS0yZDViNTU2OTE4YTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTRmMTA2ZGItZjlkNS00ZDViLWI4NTItNTdhODlkODdjYjgwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+xFhE8QAAA2NJREFUeNrMl0tIVGEUx//fd2fm3nGaZHwkA+KjFylBWG5amG10GRGW9AKjRVFRCSJEQUPRokioNulCAhFsV2LiKogIwl7SoiyVsdJ8Vb5G5z3f1/luumk12lynw2WGy1zm/L7z+J9zmZRy4u1gIs/XEV78OC5g0xjostwSEojTR6mXw3fYcO3aok2y15/j83suL7rBgeI8bj4opfUwbOnAw5MCoOv5DVdAG8luvPR1RuqbCUSsAcTfluNmmA5J+MdFlA8Q2cZcjrhAWkz5Vf4VB3dQgUik15R/xcFV7mSaaZR/xcH/9U9SeRDbarpAUJ5HpgVkhO6X4pyZzZDjYogl1ghG04DpRYm5XxKHKm3YV26HywkMjAnc64nBPyxQULh6eUgahpOPnwGJBYrGk6sZ2LvDhukFIEhtWbWToa5Kx/nmEDpexFDs5dZGJhKTCISBRw1OE+Ts/RAePIubVWfYgYcXDbRecELjEh29CRR4Vt6lSR9hbFbi+G4NVWU2HL0dRHtXFN4sIN8D2DWJGl8IbwYTuFLrhJ2OGFuFbvGkW4+iUlvhwMB3gc6XceQVa9BtzJxluW6OGNVO0+MICjYwVJdwTAWkNTBqqAkHQyZ1y3xQQvw1TNUYcdDvs4t/ALLWUVfFLYqMjZ5iVDOfRhIo26TByABmCIovAdmpyySlsWKbRrUFvKKu8mRYBKPMlcnQ1B2lAgVaTuoI07rhnxCYmJMY9gtkehnqDxjo7o2i/wvdZzDruimXQt9PJ/a1h+E7ZmB7iw3NPREMEFRlqYb6/QZ0BzA+Q3pE7R+MSLh0tqJNYEWil0/6cas7ZgLcrHPi7imnOXVVeNueRjFFqWo8qMPjAk7fCUN4AbfBTMVOKYzqKFU7RTkMne/i6Hq/gHJS2zxKX983gbFRWgGoXlQdNdTocFOxn2kNmxEy7Cz1kVmW+CLaP9QM+kAR6hsF1uu0JRJYiIr8WlsEBqXrRLWOwuwohmhPUaKY1NwrOReYp293qlbJWFzS5gZku1R6JBykRUnOqQBHCk05tZNzDwlgMCrNhUlaVcBJAxGEqT1W6cxaGF9e+dJpy6svj9LgSTOL6V9x8K30vuT/IUwNSYcpv8q/4uDXjxj08gIM0ZxR4VqrlC37Un6Vf8XB/qd37d8CDAAmlWmEg71//QAAAABJRU5ErkJggg==" width="35" height="29" class="img_ev3q">ボタンを選択します。 選択した条件に応じた結果がテーブルに表示されます。</p>
</li>
<li>
<p>照会リストで<strong><em>tablename</em></strong>または<strong><em>indexname</em></strong>カラム項目を選択すると <strong>column</strong>、<strong>index</strong>構成が確認できる<strong><em>Object detail</em></strong>ウィンドウが表示されます。</p>
<p><img decoding="async" loading="lazy" alt="Object detail" src="/ja/assets/images/release-db-object-details-topobject-a412814c2bc24c28b2144343bf70181e.png" width="1200" height="423" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><p><strong><em>Object detail</em></strong>機能は、DBXエージェントの1.6.15バージョン以降に対応します。 データベース権限に関する設定は、<a href="/ja/postgresql/install-agent#uid">次の文書</a>を参考にしてください。</p></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ノート</div><div class="admonitionContent_BuS1"><ul>
<li>
<p><span>Topオブジェクト</span>についての情報は1日に1回収集します。 関連するエージェント設定の詳細については、<a href="#set-agent-topObject">次の文書</a>を参照してください。</p>
</li>
<li>
<p>データ照会のためには、DBモニタリングアカウントに次の権限が必要です。</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">grant</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">select</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">on</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">all</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">tables</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">in</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">schema</span><span class="token plain"> {schema_name} </span><span class="token keyword" style="font-style:italic">to</span><span class="token plain"> whatap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>この機能は、DBXエージェント1.6.13バージョン以降に対応しています。</p>
</li>
</ul></div></div>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bloating">Bloating<a href="#bloating" class="hash-link" aria-label="Bloatingへの直接リンク" title="Bloatingへの直接リンク">​</a></h2><p><strong>Bloating</strong>は実際に使用されていないtupleが増加してオブジェクトサイズが大きくなる現象です。</p><p>エージェント設定(<em>whatap.conf</em>)の<code>table[index]_bloat_ratio[bytes]</code>に設定された収集基準よりも大きな値を持つテーブルとインデックスをリストに表示します。 該当するオブジェクトがないと、データが照会されない場合があります。</p><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p><strong>チューニングTips</strong></p><p><code>Bloat_ratio</code>が高いテーブルはVacuumの実行を検討してください。 詳細については、次の文書を参照してください。</p><ul>
<li>
<p><a href="https://postgresql.kr/blog/postgresql_table_bloating.html" target="_blank" rel="noopener noreferrer">PostgreSQLテーブルの膨張現象への対処方法</a></p>
</li>
<li>
<p><a href="https://medium.com/compass-true-north/dealing-with-significant-postgres-database-bloat-what-are-your-options-a6c1814a03a5" target="_blank" rel="noopener noreferrer">Dealing with significant Postgres database bloat — what are your options?</a></p>
</li>
</ul></div></div><p>次は<span class="uitext">Bloating</span>を照会すると表示されるカラム項目です。</p><table><thead><tr><th style="text-align:center">区分</th><th>カラム名</th><th>説明</th></tr></thead><tbody><tr><td rowspan="7" style="text-align:center"><strong>Table</strong></td><td><code>datname</code></td><td>データベース名</td></tr><tr><td><code>schemaname</code></td><td>スキーマ(schema)名</td></tr><tr><td><code>tablename</code></td><td>テーブル名</td></tr><tr><td><code>est_rows</code></td><td><strong>Dead tuple</strong> + <strong>Live tuple</strong>件数で予測した値</td></tr><tr><td><code>table_size</code></td><td>テーブルサイズ</td></tr><tr><td><code>bloat_size</code></td><td><strong>Dead tuple</strong>で膨らませた予想テーブルサイズ</td></tr><tr><td><code>bloat_ratio</code></td><td>膨らませたサイズの比率です。</td></tr><tr><td rowspan="9" style="text-align:center"><strong>Index</strong></td><td><code>datname</code></td><td>データベース名</td></tr><tr><td><code>schemaname</code></td><td> スキーマ(schema)名</td></tr><tr><td><code>tablename</code></td><td>テーブル名</td></tr><tr><td><code>indexname</code></td><td>インデックス名</td></tr><tr><td><code>table_size</code></td><td>テーブルサイズ</td></tr><tr><td><code>index_size</code></td><td>インデックスサイズ</td></tr><tr><td><code>bloat_size</code></td><td><strong>Dead tuple</strong>によって膨らませた予想インデックスサイズ</td></tr><tr><td><code>bloat_ratio</code></td><td>膨らませたサイズ比率</td></tr><tr><td><code>index_scans</code></td><td>インデックスを使用した場合、index scan回収</td></tr></tbody></table></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="scan">Scan<a href="#scan" class="hash-link" aria-label="Scanへの直接リンク" title="Scanへの直接リンク">​</a></h2><p><code>Seq_scan</code>はインデックスを使用していないFull Scanを意味し、<code>idx_scan</code>はインデックスを使用した数を意味します。</p><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p><strong>チューニングTips</strong></p><p><code>Seq_scan</code>が高いテーブルはインデックス作成を、<code>idx_scan</code>が低いインデックスは削除を検討してください。 詳細については、<a href="https://www.postgresql.org/docs/8.1/performance-tips.html" target="_blank" rel="noopener noreferrer">次の文書</a>を参照してください。</p></div></div><p>次は<span class="uitext">Scan</span>を照会すると表示されるカラム項目です。</p><table><thead><tr><th style="text-align:center">区分</th><th>カラム名</th><th>説明</th></tr></thead><tbody><tr><td rowspan="7" style="text-align:center"><strong>Table</strong></td><td><code>datname</code></td><td>データベース名</td></tr><tr><td><code>schemaname</code></td><td>スキーマ(schema)名</td></tr><tr><td><code>tablename</code></td><td>テーブル名</td></tr><tr><td><code>seq_scan</code></td><td>該当テーブルを順次スキャン(Full scan)した数</td></tr><tr><td><code>seq_tup_read</code></td><td>順次スキャンから読取りされたライブ行数</td></tr><tr><td><code>idx_scan</code></td><td>該当テーブルのインデックススキャン数</td></tr><tr><td><code>idx_tup_fetch</code></td><td>インデックススキャンで読み取ったライブ行数</td></tr><tr><td rowspan="7" style="text-align:center"><strong>Index</strong></td><td><code>datname</code></td><td>データベース名</td></tr><tr><td><code>schemaname</code></td><td>スキーマ(schema)名</td></tr><tr><td><code>tablename</code></td><td>テーブル名</td></tr><tr><td><code>indexname</code></td><td>インデックス名</td></tr><tr><td><code>idx_scan</code></td><td>インデックススキャン実行数</td></tr><tr><td><code>idx_tup_fetch</code></td><td>該当インデックスを使用してインデックススキャンから抽出された有効テーブル行数</td></tr><tr><td><code>idx_tup_read</code></td><td>インデックススキャンに返されたインデックス項目の数</td></tr></tbody></table></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dml">DML<a href="#dml" class="hash-link" aria-label="DMLへの直接リンク" title="DMLへの直接リンク">​</a></h2><p><code>dml_count</code>値が高いテーブルは、使用の多い主要なテーブルです。</p><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p><strong>チューニングTips</strong></p><p>使用するシステムの主要なテーブルを把握し、テーブルの変更やアーキテクチャ設計の際に参考にしてください。</p></div></div><p>次は<span class="uitext">DML</span>を照会すると表示されるカラム項目です。</p><table><thead><tr><th>カラム名</th><th>説明</th></tr></thead><tbody><tr><td><code>datname</code></td><td>データベース名</td></tr><tr><td><code>schemaname</code></td><td>スキーマ(schema)名</td></tr><tr><td><code>tablename</code></td><td>テーブル名</td></tr><tr><td><code>dml_count</code></td><td><code>n_tup_ins</code> + <code>n_tup_upd</code> + <code>n_tup_del</code></td></tr><tr><td><code>n_tup_ins</code></td><td>挿入(Insert)された行数</td></tr><tr><td><code>n_tup_upd</code></td><td>アップデート(Update)された行数</td></tr><tr><td><code>n_tup_del</code></td><td>削除(Delete)された行数</td></tr><tr><td><code>n_tup_hot_upd</code></td><td>HOTアップデートされた行数（例：別途のインデックスアップデートが不要）</td></tr></tbody></table></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="analyze-time">Analyze Time<a href="#analyze-time" class="hash-link" aria-label="Analyze Timeへの直接リンク" title="Analyze Timeへの直接リンク">​</a></h2><p>AnalyzeとVacuum実行の日付が古いオブジェクトの一覧です。</p><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p><strong>チューニングTips</strong></p><p>日付の古いテーブルは、統計情報が正しくないことがあります。 実行を検討してください。 詳細については、<a href="https://www.enterprisedb.com/blog/postgresql-vacuum-and-analyze-best-practice-tips" target="_blank" rel="noopener noreferrer">次の文書</a>を参照してください。</p></div></div><p>次は<span class="uitext">Analyze Time</span>を照会すると表示されるカラム項目です。</p><table><thead><tr><th>カラム名</th><th>説明</th></tr></thead><tbody><tr><td><code>datname</code></td><td>データベース名</td></tr><tr><td><code>schemaname</code></td><td>スキーマ(schema)名</td></tr><tr><td><code>tablename</code></td><td>テーブル名</td></tr><tr><td><code>last_analyze</code></td><td>テーブルを手動分析した最後の時間</td></tr><tr><td><code>last_autoanalyze</code></td><td>autovacuumデーモンでテーブルを分析した最後の時間</td></tr><tr><td><code>last_autovacuum</code></td><td>autovacuumデーモンでテーブルをバキューム(vacuum)した最後の時間</td></tr><tr><td><code>analyze_count</code></td><td>手動で分析した回数</td></tr><tr><td><code>last_vacuum</code></td><td>テーブルが手動でバキューム(vacuum)した最後の時間(VACUUM FULLは除く)</td></tr><tr><td><code>autoanalyze_count</code></td><td>autovacuumデーモンで分析した回数</td></tr><tr><td><code>autovacuum_count</code></td><td>autovacuumデーモンでバキューム(vacuum)した回数</td></tr><tr><td><code>vacuum_count</code></td><td>手動でバキューム(vacuum)した回数(VACUUM FULLを除く)</td></tr><tr><td><code>n_mod_since_analyze</code></td><td>最後の分析(analyze)から変更された行数(推定値)</td></tr></tbody></table></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="age">Age<a href="#age" class="hash-link" aria-label="Ageへの直接リンク" title="Ageへの直接リンク">​</a></h2><p>PostgreSQLではXID(transaction id)を循環的に使用しているため、ある時点でXIDがラップアラウンド(Wraparound)されることがあります。 この現象を防止するために、<code>xid_age</code>(Current XID - 作成時点のXID)が増え続けないように管理する必要があります。 <code>autovacuum_freeze_max_age</code>を超えたらAnti-Wraparound Vacuumが自動的に行わるため、<code>autovacuum_freeze_max_age</code>以下で<code>xid_age</code>を管理します。</p><p>この一覧は、以下の基準に該当するvacuum対象があるか照会します。 対象がないと、データが照会されない場合があります。</p><ul>
<li>
<p>dead tupleの数がvacuum threshold(<code>autovacuum_threshold</code> + <code>autovacuum_scale_factor</code> * <code>number-of-tuples</code>) より多いテーブル</p>
</li>
<li>
<p>age(<code>relfrozenxid</code>)が<code>autovacuum_freeze_max_age</code>より大きなテーブル</p>
</li>
</ul><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p><strong>チューニングTips</strong></p><p><code>xid_age</code>が増加し続けている場合は、現在設定されたAuto Vaccum条件としてXID整理作業が進まない可能性があります。 auto vacuumパラメータを調整するか、手動でVacuumの実行を検討してください。</p><p>詳細については、<a href="https://www.postgresql.org/docs/current/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND" target="_blank" rel="noopener noreferrer">次の文書</a>を参照してください。</p></div></div><p>次は<span class="uitext">Age</span>を照会すると表示されるカラム項目です。</p><table><thead><tr><th>カラム名</th><th>説明</th></tr></thead><tbody><tr><td><code>datname</code></td><td>データベース名</td></tr><tr><td><code>schemaname</code></td><td>スキーマ(schema)名</td></tr><tr><td><code>tablename</code></td><td>テーブル名</td></tr><tr><td><code>xid_age</code></td><td>テーブルのmax age、最も古いレコードの<code>xid</code>(トランザクションID)</td></tr><tr><td><code>per_to_wraparound</code></td><td><code>xid</code>(トランザクションID) ラッピングまでの残りの余裕をパーセンテージで表示した指標<br>計算式：<code>per_to_wraparound</code>(%) = <code>xid_age</code> / <code>Autovacuum_freeze_max_age</code> * 100</td></tr><tr><td><code>table_size</code></td><td>テーブルサイズ</td></tr><tr><td><code>autovacuum_vacuum_tuples</code></td><td>この値よりDead tupleの数が多くなると、autovacuumを実行します。</td></tr><tr><td><code>dead_tuples</code></td><td>Dead tuple数</td></tr><tr><td><code>autovacuum_freeze_max_age</code></td><td>既定値は２億に設定</td></tr></tbody></table></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dead-tuple">Dead Tuple<a href="#dead-tuple" class="hash-link" aria-label="Dead Tupleへの直接リンク" title="Dead Tupleへの直接リンク">​</a></h2><p>Dead tupleはDeleteやUpdateですでに削除された資料です。 free spaceに変えるためにVacuum実行を検討します。</p><div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Tips</div><div class="admonitionContent_BuS1"><p><strong>チューニングTips</strong></p><p>Dead tupleを減らすためにはVacuum実行を検討してください。 詳細については、<a href="https://www.postgresql.org/docs/current/routine-vacuuming.html" target="_blank" rel="noopener noreferrer">次の文書</a>を参照してください。</p></div></div><p>次は<span class="uitext">Dead Tuple</span>を照会すると表示されるカラム項目です。</p><table><thead><tr><th>カラム名</th><th>説明</th></tr></thead><tbody><tr><td><code>datname</code></td><td>データベース名</td></tr><tr><td><code>schemaname</code></td><td>スキーマ(schema)名</td></tr><tr><td><code>tablename</code></td><td>テーブル名</td></tr><tr><td><code>dead_tuple</code></td><td>DeleteやUpdate等により使用しないタプル(Tuple)の数</td></tr><tr><td><code>dead_tuple_ratio</code></td><td>使用しないタプル(Tuple)の割合</td></tr><tr><td><code>live_tuple</code></td><td>使用するタプル(Tuple)の数</td></tr><tr><td><code>live_tuple_ratio</code></td><td>使用するタプル(Tuple)の割合</td></tr><tr><td><code>total_relation_size</code></td><td>リレーションの全体サイズ、インデックスとTOASTデータを含む</td></tr><tr><td><code>total_tuple</code></td><td>全体タプル(Tuple)の数</td></tr></tbody></table></section>
<section class="remark-sectionize-h2"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-agent-topObject">エージェント設定<a href="#set-agent-topObject" class="hash-link" aria-label="エージェント設定への直接リンク" title="エージェント設定への直接リンク">​</a></h2><p>次は<span>Topオブジェクト</span>に関する情報を照会するためのエージェント設定です。 <em>whatap.conf</em>ファイルに必要なオプションを設定してください。</p><ul>
<li>
<p><strong>pg_object</strong> <span class="type">Boolean</span></p>
<p>既定値<code>false</code></p>
<p>Topオブジェクト情報の収集有無を設定します。 情報を収集するには<code>true</code>に変更してください。</p>
</li>
<li>
<p><strong>pg_object_hour</strong> <span class="type">Int</span></p>
<p>既定値<code>5</code></p>
<p>Topオブジェクト情報の収集時間を設定します。 既定値は<code>5</code>で、午前5時に収集を始めます。</p>
</li>
<li>
<p><strong>table_bloat_ratio</strong> <span class="type">Percentage</span></p>
<p>既定値<code>50</code></p>
<p>テーブルbloating ratio値が設定値以上の場合は、情報を収集します。 既定値は50%です。</p>
</li>
<li>
<p><strong>table_bloat_bytes</strong> <span class="type">Byte</span></p>
<p>既定値<code>10485760</code></p>
<p>テーブルbloatingbytes値が設定値以上の場合、情報を収集します。 既定値は10MBです。</p>
</li>
<li>
<p><strong>index_bloat_ratio</strong> <span class="type">Percentage</span></p>
<p>既定値<code>50</code></p>
<p>インデックスbloatingratio値が設定値以上の場合、情報を収集します。 既定値は50%です。</p>
</li>
<li>
<p><strong>index_bloat_bytes</strong> <span class="type">Byte</span></p>
<p>既定値<code>10485760</code></p>
<p>インデックスbloating bytes値が設定値以上の場合、情報を収集します。 既定値は10MBです。</p>
</li>
<li>
<p><strong>autovacuum_list_limit</strong>  <span class="type">Int</span></p>
<p>既定値<code>50</code></p>
<p>日付の古いage(<code>relfrozenxid</code>)順に設定値程のテーブル情報を収集します。 既定値は50件です。</p>
</li>
</ul></section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">フィードバック</button></div></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文書検索"><a class="pagination-nav__link pagination-nav__link--prev" href="/ja/postgresql/analysis-wait-events"><div class="pagination-nav__sublabel">前へ</div><div class="pagination-nav__label">Wait分析</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ja/postgresql/analysis-compare-top-sql"><div class="pagination-nav__sublabel">次へ</div><div class="pagination-nav__label">Top SQL比較</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_pzBX thin-scrollbar"></div><div class="fbsharebutton_dZBI" data-href="https://docs.whatap.io/ja/postgresql/analysis-top-object" data-layout="" data-size=""><button type="button" class="fb_xfbml_parse_ignore_BpHP">共有</button></div><div class="btnprint_EBmh"><button>PDF</button></div><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">フィードバック</button></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WhaTap Labs Inc. All right reserved. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>