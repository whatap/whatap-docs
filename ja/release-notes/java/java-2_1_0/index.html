<!doctype html>
<html lang="ja-JP" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-release-notes/java/java-2_1_0" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Java Agent v2.1.0 | WhaTap</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" name="twitter:image" content="https://www.whatap.io/img/og/whatap.png"><meta data-rh="true" property="og:url" content="https://docs.whatap.io/ja/release-notes/java/java-2_1_0"><meta data-rh="true" name="docusaurus_locale" content="ja"><meta data-rh="true" name="docsearch:language" content="ja"><meta data-rh="true" name="keywords" content="WhaTap, 와탭, 매뉴얼, 사용법, WhaTap 사용법, WhaTap 매뉴얼, 기술 문서, APM, 애플리케이션 모니터링, 로그 모니터링, 쿠버네티스 모니터링, 서버 모니터링, 데이터베이스 모니터링, URL 모니터링, 클라우드 모니터링, 브라우저 모니터링, Browser monitoring, Application Monitoring, Log Monitoring, Kubernetes Monitoring, Server Monitoring, Database Monitoring, URL Monitoring, Cloud Monitoring, Manual, User Guide, Docs, WhaTap Manual, WhaTap Docs, WhaTap Documents, 트랜잭션, Transaction, 트레이싱, Tracing, 마스터, Master, 노드, Node, 데드락, Deadlock, 락 트리, Lock tree, 멀티 트랜잭션, Multi Trancsaction, 메트릭스, Metrics, 소프트웨어 프록시, Software proxy, 스택, Stack, 슬로우 쿼리, Slow query, 액티브 트랜잭션, Active transaction, 컨테이너, Container, 히트맵, Hitmap, Garbage Collection, GC, MXQL, Method 추적, Trace method, OOM Killed 컨테이너, OOM Killed Container, Oracle, Tibero, PostgreSQL, MySQL, MongoDB, SQL Server, CUBRID, Altibase, Redis, WebLogic, WebSphere"><meta data-rh="true" name="naver-site-verification" content="0c21fc5664a467108fb762ade47a3f81ee9b88ed"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Java Agent v2.1.0 | WhaTap"><meta data-rh="true" name="description" content="2021-12-15"><meta data-rh="true" property="og:description" content="2021-12-15"><link data-rh="true" rel="icon" href="/ja/img/whatap-favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.whatap.io/ja/release-notes/java/java-2_1_0"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/release-notes/java/java-2_1_0" hreflang="ko-KR"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/en/release-notes/java/java-2_1_0" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/ja/release-notes/java/java-2_1_0" hreflang="ja-JP"><link data-rh="true" rel="alternate" href="https://docs.whatap.io/release-notes/java/java-2_1_0" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://38IOA0JIBS-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="WhaTap" href="/ja/opensearch.xml">

<script>!function(e,t,r,o,a,n){e=e[a]=e[a]||{config:{projectAccessKey:"x4t5020boh2ln-z6pi7d91ds6c1a-z7t4b2lrgnub4o",pcode:29856,sampleRate:100,ignoreOrigins:[/^.*localhost.*$/i,/^.*ngrok-free.app.*$/i]}},(a=t.createElement(r)).async=1,a.src=o,(o=t.getElementsByTagName(r)[0]).parentNode.insertBefore(a,o)}(window,document,"script","https://repo.whatap-browser-agent.io/rum/prod/v1/whatap-browser-agent.js","WhatapBrowserAgent")</script>
<script>let curLang=(new Intl.DateTimeFormat).resolvedOptions().locale;CRISP_RUNTIME_CONFIG={locale:curLang},window.$crisp=[],window.CRISP_WEBSITE_ID="9a0c342f-a5b1-4c4a-a22f-92c7b4b9b477",d=document,s=d.createElement("script"),s.src="https://client.crisp.chat/l.js",s.async=1,d.getElementsByTagName("head")[0].appendChild(s)</script>



<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-E46TQ5VSCT"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-E46TQ5VSCT",{anonymize_ip:!0})</script>
<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-WJSZDJR",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/ja/assets/css/styles.8a109d0d.css">
<link rel="preload" href="/ja/assets/js/runtime~main.0cde96f1.js" as="script">
<link rel="preload" href="/ja/assets/js/main.9b92f7f5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script>

<script async defer="defer" crossorigin="anonymous" src="https://connect.facebook.net/ko_KR/sdk.js#xfbml=1&amp;version=v17.0&amp;appId=169051789422006&amp;autoLogAppEvents=1" nonce="y4U7YSrt"></script>
<div id="fb-root"></div>





<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WJSZDJR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="__docusaurus">
<div role="region" aria-label="本文へスキップ"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">本文へスキップ</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ja/"><div class="navbar__logo"><img src="/ja/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedImage_ToTc themedImage--light_HNdA" height="28" width="152"><img src="/ja/img/whatap-docs-logo.svg" alt="WhaTap Docs" class="themedImage_ToTc themedImage--dark_i4oU" height="28" width="152"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/ja/whatap-overview">はじめに</a><a class="navbar__item navbar__link" href="/ja/learning-guides">学習資料</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">製品</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ja/java/introduction">Java</a></li><li><a class="dropdown__link" href="/ja/php/introduction">PHP</a></li><li><a class="dropdown__link" href="/ja/nodejs/introduction">Node.js</a></li><li><a class="dropdown__link" href="/ja/python/introduction">Python</a></li><li><a class="dropdown__link" href="/ja/dotnet/introduction">.NET</a></li><li><a class="dropdown__link" href="/ja/golang/introduction">Go</a></li><li><a class="dropdown__link" href="/ja/server/introduction">Server</a></li><li><a class="dropdown__link" href="/ja/kubernetes/introduction">Kubernetes</a></li><li><a class="dropdown__link" href="/ja/postgresql/monitoring-intro">PostgreSQL</a></li><li><a class="dropdown__link" href="/ja/oracle/monitoring-intro">Oracle</a></li><li><a class="dropdown__link" href="/ja/mysql/monitoring-intro">MySQL</a></li><li><a class="dropdown__link" href="/ja/mssql/monitoring-intro">SQL Server</a></li><li><a class="dropdown__link" href="/ja/tibero/monitoring-intro">Tibero</a></li><li><a class="dropdown__link" href="/ja/cubrid/monitoring-intro">CUBRID</a></li><li><a class="dropdown__link" href="/ja/altibase/monitoring-intro">Altibase</a></li><li><a class="dropdown__link" href="/ja/redis/monitoring-intro">Redis</a></li><li><a class="dropdown__link" href="/ja/mongodb/monitoring-intro">MongoDB</a></li><li><a class="dropdown__link" href="/ja/url/url-intro">URL</a></li><li><a class="dropdown__link" href="/ja/browser">Browser</a></li><li><a class="dropdown__link narrow" href="/ja/amazon-cloudwatch/install-agent">Amazon CloudWatch</a></li><li><a class="dropdown__link" href="/ja/amazon-ecs/introduction">Amazon ECS</a></li><li><a class="dropdown__link" href="/ja/aws-log/introduction">AWS Log</a></li><li><a class="dropdown__link" href="/ja/azure/install-agent">Azure Monitor</a></li><li><a class="dropdown__link narrow" href="/ja/ncloud/install-agent">Naver Cloud Monitoring</a></li><li><a class="dropdown__link narrow" href="/ja/oracle-cloud/install-agent">Oracle Cloud Monitor</a></li><li><a class="dropdown__link narrow" href="/ja/npm/introduction">Network Performance Monitoring</a></li><li><a class="dropdown__link" href="/ja/log/introduction">Log</a></li><li><a class="dropdown__link" href="/ja/extensions">Extensions</a></li></ul></div><a class="navbar__item navbar__link hidden" href="/ja/java/introduction">Javaモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/php/introduction">PHPモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/nodejs/introduction">Node.jsモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/python/introduction">Pythonモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/dotnet/introduction">.NETモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/golang/introduction">Goモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/server/introduction">Serverモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/kubernetes/introduction">Kubernetesモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/postgresql/monitoring-intro">PostgreSQL V2 モニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/postgresql-v1/monitoring-intro">PostgreSQLモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/oracle/monitoring-intro">Oracleモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/mysql-v1/monitoring-intro">MySQLモニタリングV1</a><a class="navbar__item navbar__link hidden" href="/ja/mysql/monitoring-intro">MySQLモニタリングV2</a><a class="navbar__item navbar__link hidden" href="/ja/mssql/monitoring-intro">SQL Serverモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/tibero/monitoring-intro">Tiberoモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/cubrid/monitoring-intro">CUBRIDモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/altibase/monitoring-intro">Altibaseモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/redis/monitoring-intro">Redisモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/mongodb/monitoring-intro">MongoDBモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/url/url-intro">URLモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/amazon-cloudwatch/install-agent">Amazon CloudWatch</a><a class="navbar__item navbar__link hidden" href="/ja/amazon-ecs/introduction">Amazon ECS</a><a class="navbar__item navbar__link hidden" href="/ja/aws-log/introduction">AWS Log</a><a class="navbar__item navbar__link hidden" href="/ja/azure/install-agent">Azure Monitor</a><a class="navbar__item navbar__link hidden" href="/ja/ncloud/install-agent">Naver Cloud Monitoring</a><a class="navbar__item navbar__link hidden" href="/ja/oracle-cloud/install-agent">Oracle Cloud Monitor</a><a class="navbar__item navbar__link hidden" href="/ja/log/introduction">Logモニタリング</a><a class="navbar__item navbar__link hidden" href="/ja/browser">Browser</a><a class="navbar__item navbar__link hidden" href="/ja/npm/introduction">NPM</a><a class="navbar__item navbar__link hidden" href="/ja/extensions">拡張ツール</a><a class="navbar__item navbar__link" href="/ja/manage">管理機能</a><a class="navbar__item navbar__link" href="/ja/openapi">Open API</a><a class="navbar__item navbar__link" href="/ja/license/licenses">ライセンス</a><a class="navbar__item navbar__link" href="/ja/reference">リファレンス文書</a><a class="navbar__item navbar__link" href="/ja/release-notes">リリースノート</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link oneColumn localeDropdown"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="iconLanguage_DSK9"><path fill-rule="evenodd" clip-rule="evenodd" d="M11.99 2C6.47 2 2 6.48 2 12C2 17.52 6.47 22 11.99 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 11.99 2ZM18.92 8H15.97C15.65 6.75 15.19 5.55 14.59 4.44C16.43 5.07 17.96 6.35 18.92 8ZM12 4.04C12.83 5.24 13.48 6.57 13.91 8H10.09C10.52 6.57 11.17 5.24 12 4.04ZM4.26 14C4.1 13.36 4 12.69 4 12C4 11.31 4.1 10.64 4.26 10H7.64C7.56 10.66 7.5 11.32 7.5 12C7.5 12.68 7.56 13.34 7.64 14H4.26ZM5.08 16H8.03C8.35 17.25 8.81 18.45 9.41 19.56C7.57 18.93 6.04 17.66 5.08 16ZM8.03 8H5.08C6.04 6.34 7.57 5.07 9.41 4.44C8.81 5.55 8.35 6.75 8.03 8ZM12 19.96C11.17 18.76 10.52 17.43 10.09 16H13.91C13.48 17.43 12.83 18.76 12 19.96ZM14.34 14H9.66C9.57 13.34 9.5 12.68 9.5 12C9.5 11.32 9.57 10.65 9.66 10H14.34C14.43 10.65 14.5 11.32 14.5 12C14.5 12.68 14.43 13.34 14.34 14ZM14.59 19.56C15.19 18.45 15.65 17.25 15.97 16H18.92C17.96 17.65 16.43 18.93 14.59 19.56ZM16.36 14C16.44 13.34 16.5 12.68 16.5 12C16.5 11.32 16.44 10.66 16.36 10H19.74C19.9 10.64 20 11.31 20 12C20 12.69 19.9 13.36 19.74 14H16.36Z" fill="currentColor"></path></svg><span class="langLabel_L4uU">JPN</span></a><ul class="dropdown__menu"><li><a href="/release-notes/java/java-2_1_0" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ko-KR">KOR</a></li><li><a href="/en/release-notes/java/java-2_1_0" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">ENG</a></li><li><a href="/ja/release-notes/java/java-2_1_0" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ja-JP">JPN</a></li></ul></div><div class="searchBox_H2mL"><button type="button" class="DocSearch DocSearch-Button" aria-label="検索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">検索</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="ダークモードとライトモードの切り替え（現在 ライトモード）" aria-label="ダークモードとライトモードの切り替え（現在 ライトモード）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" fill="none" class="lightToggleIcon_pyhR"><path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M10.9901 0H13.0099V4.06189C15.2205 4.33486 17.1538 5.49222 18.4373 7.16513L21.9901 5.13397L23 6.86603L19.4486 8.89635C19.8546 9.8507 20.0791 10.8994 20.0791 12C20.0791 13.1006 19.8546 14.1493 19.4486 15.1036L23 17.134L21.9901 18.866L18.4373 16.8349C17.1538 18.5078 15.2205 19.6651 13.0099 19.9381V24H10.9901V19.9381C8.77946 19.6651 6.84617 18.5078 5.56273 16.8349L2.00989 18.866L1 17.134L4.5514 15.1036C4.14535 14.1493 3.9209 13.1006 3.9209 12C3.9209 10.8994 4.14535 9.8507 4.5514 8.89635L1 6.86603L2.00989 5.13397L5.56273 7.16513C6.84617 5.49222 8.77946 4.33486 10.9901 4.06189V0ZM5.94068 12C5.94068 8.68629 8.65353 6 12 6C15.3465 6 18.0593 8.68629 18.0593 12C18.0593 15.3137 15.3465 18 12 18C8.65353 18 5.94068 15.3137 5.94068 12Z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M5.05011 4.409C6.46482 2.9943 8.14585 2.02264 9.90788 1.5C8.84446 5.08024 9.63565 8.99454 12.3303 11.6892C15.025 14.3839 18.9393 15.1751 22.5191 14.1129C21.9969 15.8737 21.0253 17.5548 19.6106 18.9695C15.322 23.2581 8.58587 23.4752 4.56511 19.4545C0.544352 15.4337 0.761495 8.69762 5.05011 4.409ZM7.26586 5.19608C6.97785 5.42391 6.70099 5.67022 6.43684 5.93437C2.99054 9.38066 2.80435 14.782 6.02096 17.9986C9.23756 21.2152 14.6389 21.029 18.0852 17.5827C18.4373 17.2307 18.7577 16.856 19.0448 16.4625C15.9881 16.4646 13.0552 15.3261 10.8743 13.1452C8.77411 11.045 7.6407 8.24751 7.56194 5.31354L7.55754 4.97444L7.26586 5.19608ZM17.3387 2.30478H19.3979V4.36394H21.4571V6.4231H19.3979V8.48226H17.3387V6.4231H15.2795V4.36394H17.3387V2.30478Z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="一番上にスクロールする" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">このページでは</button></div><div class="theme-doc-markdown markdown"><header><h1>Java Agent v2.1.0</h1></header><div class="fbsharebutton_dZBI" data-href="https://docs.whatap.io/ja/release-notes/java/java-2_1_0" data-layout="" data-size=""><button type="button" class="fb_xfbml_parse_ignore_BpHP">共有</button></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2021-12-15">2021-12-15<a href="#2021-12-15" class="hash-link" aria-label="2021-12-15への直接リンク" title="2021-12-15への直接リンク">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="エージェント管理体系の修正">エージェント管理体系の修正<a href="#エージェント管理体系の修正" class="hash-link" aria-label="エージェント管理体系の修正への直接リンク" title="エージェント管理体系の修正への直接リンク">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="エージェントのバージョン体系の変更">エージェントのバージョン体系の変更<a href="#エージェントのバージョン体系の変更" class="hash-link" aria-label="エージェントのバージョン体系の変更への直接リンク" title="エージェントのバージョン体系の変更への直接リンク">​</a></h4><p>エージェントのバージョン体系を2.1.xに変更しました。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="javaエージェントのデプロイパッケージの構成変更">Javaエージェントのデプロイパッケージの構成変更<a href="#javaエージェントのデプロイパッケージの構成変更" class="hash-link" aria-label="Javaエージェントのデプロイパッケージの構成変更への直接リンク" title="Javaエージェントのデプロイパッケージの構成変更への直接リンク">​</a></h3><p>whatap.agent-2.1.0以降からWhaTap LabsのJavaエージェントのパッケージ構成を変更しました。</p><ul><li><em>whatap.agent-2.1.0.jar</em>：エージェントのコアjar</li><li><em>whatap.agent.proxy-2.1.0.jar</em>：WhaTapサーバーに接続が困難ため、迂回接続がサポートされています。</li><li><em>whatap-logsink-lz4-1.7.0.jar</em>：ログモニタリング(LogSink) でデータを圧縮するためのプラグモジュール (デフォルトでは、JDKが提供するGZIPを使用)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="java対応範囲の拡大">JAVA対応範囲の拡大<a href="#java対応範囲の拡大" class="hash-link" aria-label="JAVA対応範囲の拡大への直接リンク" title="JAVA対応範囲の拡大への直接リンク">​</a></h3><p>Asmライブラリv9.2を使用することで、WhaTap LabsのJavaエージェントの対応範囲をjava14からjava17に拡大しました。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="マルチサーバー追跡mtrace-の自動化">マルチサーバー追跡(mtrace) の自動化<a href="#マルチサーバー追跡mtrace-の自動化" class="hash-link" aria-label="マルチサーバー追跡(mtrace) の自動化への直接リンク" title="マルチサーバー追跡(mtrace) の自動化への直接リンク">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="マルチサーバー接続追跡の基本ポリシーの変更">マルチサーバー接続追跡の基本ポリシーの変更<a href="#マルチサーバー接続追跡の基本ポリシーの変更" class="hash-link" aria-label="マルチサーバー接続追跡の基本ポリシーの変更への直接リンク" title="マルチサーバー接続追跡の基本ポリシーの変更への直接リンク">​</a></h4><p>エージェント間の呼び出し性能追跡のデフォルト値をオンに変更しました。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">tx_caller_meter_enabled</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">sql_dbc_meter_enabled</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">httpc_host_meter_enabled</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">actx_meter_enabled</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">actx_slice_meter_enabled</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">tx_caller_meter_pkind_enabled</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">actx_meter_pkind_enabled</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="マルチサーバー追跡の自動適用">マルチサーバー追跡の自動適用<a href="#マルチサーバー追跡の自動適用" class="hash-link" aria-label="マルチサーバー追跡の自動適用への直接リンク" title="マルチサーバー追跡の自動適用への直接リンク">​</a></h4><p>User Agentに基づいてブラウザに呼び出されたトランザクションのみ自動的に処理するよう変更しました。
(User Agent が「Moz」で始まる場合のみ、mtrace_rateが機能する)</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">mtrace_auto_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">true (デフォルト値)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">mtraceable_user_agent</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">Moz  (デフォルト値)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="マルチサーバー追跡比率の自動調整">マルチサーバー追跡比率の自動調整<a href="#マルチサーバー追跡比率の自動調整" class="hash-link" aria-label="マルチサーバー追跡比率の自動調整への直接リンク" title="マルチサーバー追跡比率の自動調整への直接リンク">​</a></h4><p>明示的にmtrace_rateを指定しない場合、500tpsを超える環境で自動的にrateを下げる機能を追加しました。１つのプロセスでは、500tpsに基づくmtrace_rateは基本10%であり、tpsが増加するのと同じ割合でmtrace_rateを自動調整します。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="サーバーエージェント間の依存関係情報の収集内容の変更">サーバー(エージェント)間の依存関係情報の収集内容の変更<a href="#サーバーエージェント間の依存関係情報の収集内容の変更" class="hash-link" aria-label="サーバー(エージェント)間の依存関係情報の収集内容の変更への直接リンク" title="サーバー(エージェント)間の依存関係情報の収集内容の変更への直接リンク">​</a></h4><p>異なるプロジェクトに属するエージェント間で呼び出しが発生した場合、caller情報をOID単位で収集するよう修正しました。</p><p>以前のバージョンでは、PKIND(pcode＋okind) 単位からPOID(pcode＋oid)単位で収集するよう修正しました。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="追跡情報の改善">追跡情報の改善<a href="#追跡情報の改善" class="hash-link" aria-label="追跡情報の改善への直接リンク" title="追跡情報の改善への直接リンク">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="db接続のurlから以下を削除">DB接続のURLから「?」以下を削除<a href="#db接続のurlから以下を削除" class="hash-link" aria-label="DB接続のURLから「?」以下を削除への直接リンク" title="DB接続のURLから「?」以下を削除への直接リンク">​</a></h4><p>SQLの実行性能を追跡するためにJDBC接続情報を収集する際、「?」以下を削除しました。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="url正規化作業によるcontextpathを反映">URL正規化作業によるContextPathを反映<a href="#url正規化作業によるcontextpathを反映" class="hash-link" aria-label="URL正規化作業によるContextPathを反映への直接リンク" title="URL正規化作業によるContextPathを反映への直接リンク">​</a></h4><p>URL正規化作業によるContextPathを反映できるように変更しました。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="urlパターンをサーバーに設定するように変更">URLパターンをサーバーに設定するように変更<a href="#urlパターンをサーバーに設定するように変更" class="hash-link" aria-label="URLパターンをサーバーに設定するように変更への直接リンク" title="URLパターンをサーバーに設定するように変更への直接リンク">​</a></h4><p>WhaTap Labsでは、Serviceまたは HttpClient URLのパターンを、WhaTapサーバーで設定および、収集するように変更しました。</p><p>URL パターン設定対象</p><ul><li>Service URL</li><li>HttpClient URL</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionContent_vXIg"><p>既存エージェント設定方法では、Kubernetes環境での変更が難しいです。</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="エージェントログにoname出力">エージェントログにONAME出力<a href="#エージェントログにoname出力" class="hash-link" aria-label="エージェントログにONAME出力への直接リンク" title="エージェントログにONAME出力への直接リンク">​</a></h4><p>エージェントログの出力を (日付)(PID)(メッセージ) の形式から (日付)(エージェント名)(メッセージ) の形式に変更しました。</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token number">20211224</span><span class="token plain"> 05:12:31</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GMT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">JA-161-111</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">UrlNorm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> Service PathTree done. </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PathTree</span><span class="token operator">=</span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">20211224</span><span class="token plain"> 05:12:31</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GMT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">JA-161-111</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">HttpcUrlNorm</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> PathTree build done. </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">PathTree</span><span class="token operator">=</span><span class="token number">0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ユーザー定義カウンター追加">ユーザー定義カウンター追加<a href="#ユーザー定義カウンター追加" class="hash-link" aria-label="ユーザー定義カウンター追加への直接リンク" title="ユーザー定義カウンター追加への直接リンク">​</a></h4><p>App Extra Counterのプラグインを使用できるように修正しました。 ただし、エージェントには、プラグインExtraCounter.xの実装が必要です。</p><ul><li><em><code>${WHATAP}</code>/plugin/ExtraCounter.x</em></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$pack.put(&quot;mycount&quot;,100);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$pack.put(&quot;myrandom&quot;,(float)( whatap.util.KeyGen.next()%100));</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="アプリケーションログモニタリング">アプリケーションログモニタリング<a href="#アプリケーションログモニタリング" class="hash-link" aria-label="アプリケーションログモニタリングへの直接リンク" title="アプリケーションログモニタリングへの直接リンク">​</a></h3><p>アプリケーションログを統合モニタリングする機能を追加しました。Javaアプリケーションでログモニタリング機能を使用するには、whatap.agent-2.1.0以降のバージョンが必要です。</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class="admonitionContent_vXIg"><p>whatap.agent-2.1.0以降のバージョン</p></div></div><p>WhaTapのアプリケーションログモニタリングの機能は、ログシンク(LogSink) です。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ログモニタリング機能の有効化">ログモニタリング機能の有効化<a href="#ログモニタリング機能の有効化" class="hash-link" aria-label="ログモニタリング機能の有効化への直接リンク" title="ログモニタリング機能の有効化への直接リンク">​</a></h4><p>ログモニタリングでは、<em>whatap.conf</em>設定ファイルで<code>logsink_enabled</code>を<code>true</code>に設定する必要があります。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Javaアプリケーションで発生するSystem.out、System.err、そしてフレームワークで実装したLOGBACK、LOG4Jログを収集します。 デフォルト値は<code>logsink_enabled</code>の設定と同じです。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_stdout_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">logsink_enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_stderr_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">logsink_enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_logback_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">logsink_enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_log4j_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">logsink_enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_tomcat_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">logsink_enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_custom_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">logsink_enabled</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="フレームワークにおけるログ内容の収集">フレームワークにおけるログ内容の収集<a href="#フレームワークにおけるログ内容の収集" class="hash-link" aria-label="フレームワークにおけるログ内容の収集への直接リンク" title="フレームワークにおけるログ内容の収集への直接リンク">​</a></h4><p>フレームワークで収集するログをモニタリングするには、モジュールでログを横取りするための設定とプラグインを追加する必要があります。フレームワークで収集するログの基本カテゴリ名を「AppLog」に設定します。</p><p>デフォルト値は、<code>hooklog_enabled</code>の設定と同じです。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">hooklog_logback_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">hooklog_enabled;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">hooklog_log4j_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">hooklog_enabled;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">hooklog_tomcat_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">hooklog_enabled;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">hooklog_custom_methods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token plain"> </span><span class="token value attr-value">(ユーザーメソッドでログ収集を設定)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ただし、<code>hooklog_enabled</code>はデフォルト値として<code>logsink_enabled</code>値が適用され、起動前に<code>true</code>に設定する必要があります。</p><p>運用中に<code>hooklog_enabled=true</code>に変更すると、再起動後にログを収集できます。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionContent_vXIg"><p><code>logsink_enabled=true</code>を変更後に再起動します。</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ユーザーメソッドからログを収集する">ユーザーメソッドからログを収集する<a href="#ユーザーメソッドからログを収集する" class="hash-link" aria-label="ユーザーメソッドからログを収集するへの直接リンク" title="ユーザーメソッドからログを収集するへの直接リンク">​</a></h4><p><code>hooklog_custom_methods</code>は任意のログフレームワークの内容を伝えます。サイトで個別に作成されたログモジュールのログを追跡するときに使用します。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">hooklog_custom_methods</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">com.greatshop.common.Log.print</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ログ転送の設定">ログ転送の設定<a href="#ログ転送の設定" class="hash-link" aria-label="ログ転送の設定への直接リンク" title="ログ転送の設定への直接リンク">​</a></h4><p>１つのラインの最大サイズや送信時のキューサイズを設定することが可能です。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_queue_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_line_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">512</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ログ圧縮転送の活性化非活性化">ログ圧縮転送の活性化・非活性化<a href="#ログ圧縮転送の活性化非活性化" class="hash-link" aria-label="ログ圧縮転送の活性化・非活性化への直接リンク" title="ログ圧縮転送の活性化・非活性化への直接リンク">​</a></h4><p><code>logsink_zip_enabled=true</code>設定でログを圧縮することができます。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_zip_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">debug_logsink_zip_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>すべてのデータを圧縮するわけではなく、圧縮が送信されたかどうかを確認するために、debugオプションを使用します。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ログ圧縮転送の最小サイズ">ログ圧縮転送の最小サイズ<a href="#ログ圧縮転送の最小サイズ" class="hash-link" aria-label="ログ圧縮転送の最小サイズへの直接リンク" title="ログ圧縮転送の最小サイズへの直接リンク">​</a></h4><p>送信データが100 bytes以下の場合、データは圧縮されません。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_zip_min_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">100</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ログ圧縮送信の最小サイズ">ログ圧縮送信の最小サイズ<a href="#ログ圧縮送信の最小サイズ" class="hash-link" aria-label="ログ圧縮送信の最小サイズへの直接リンク" title="ログ圧縮送信の最小サイズへの直接リンク">​</a></h4><p>圧縮の場合、データをまとめて転送する必要があります。次のデータを待つことができないため、最大時間が指定されます。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">max_buffer_size</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">65536</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">max_wait_time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">2000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>エージェントは、データ収集サイズが<code>max_buffer_size</code>の超過または、ログをまとめる待機時間が <code>max_wait_time</code>を超過すると、ログデータをサーバーに送信します。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ログ圧縮アルゴリズムの選択">ログ圧縮アルゴリズムの選択<a href="#ログ圧縮アルゴリズムの選択" class="hash-link" aria-label="ログ圧縮アルゴリズムの選択への直接リンク" title="ログ圧縮アルゴリズムの選択への直接リンク">​</a></h4><p>ログを圧縮転送する場合、圧縮アルゴリズムの変更が可能です。 基本アルゴリズムはGZIPで、lz4も選択可能です。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">logsink_zip_libpath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">/whatap/whatap-logsink-lz4-1.7.0.jar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionContent_vXIg"><p>アルゴリズム選択は、<code>logsink_zip_libpath</code>にjarファイルを指定することで処理されます。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ibm-java6-websphere環境でエージェントが動作しない問題を修正">IBM Java6 Websphere環境でエージェントが動作しない問題を修正<a href="#ibm-java6-websphere環境でエージェントが動作しない問題を修正" class="hash-link" aria-label="IBM Java6 Websphere環境でエージェントが動作しない問題を修正への直接リンク" title="IBM Java6 Websphere環境でエージェントが動作しない問題を修正への直接リンク">​</a></h3><p>IBM Java6 Websphere環境でWhaTap Agentが初期化および、データを収集できない問題を修正しました。</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionContent_vXIg"><p><code>Management Factory.get PlatformMBean Server()</code>ロジックで内部的にエラーが発生し、WhaTap Agentが初期化されない問題</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="counterpackのデバッグオプションの追加">CounterPackのデバッグオプションの追加<a href="#counterpackのデバッグオプションの追加" class="hash-link" aria-label="CounterPackのデバッグオプションの追加への直接リンク" title="CounterPackのデバッグオプションの追加への直接リンク">​</a></h3><p>エージェントから転送されるリアルタイムの性能データが転送有無をデバッグするためのオプションを追加しました。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">debug_counterpack_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">true (デフォルト値)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">debug_counterpack_factor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">3 (デフォルト値)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">debug_counterpack_recvtime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">9000 (デフォルト値)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>エージェントのキューに待機状態のCounterPackが3以上増加または、最期に受信したサーバーデータの転送速度が9000msを超える場合はログとして表示します。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="text--activestack情報の収集時に圧縮オプションを追加">Text &amp; ActiveStack情報の収集時に圧縮オプションを追加<a href="#text--activestack情報の収集時に圧縮オプションを追加" class="hash-link" aria-label="Text &amp; ActiveStack情報の収集時に圧縮オプションを追加への直接リンク" title="Text &amp; ActiveStack情報の収集時に圧縮オプションを追加への直接リンク">​</a></h3><p>TextデータとActiveStack情報を収集時に圧縮できるオプションを追加しました。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">active_stack_zip_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">false (デフォルト値)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">text_zip_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">false (デフォルト値)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="システムメトリクス収集ライブラリの変更とメモリデータ収集エラーの修正">システムメトリクス収集ライブラリの変更とメモリデータ収集エラーの修正<a href="#システムメトリクス収集ライブラリの変更とメモリデータ収集エラーの修正" class="hash-link" aria-label="システムメトリクス収集ライブラリの変更とメモリデータ収集エラーの修正への直接リンク" title="システムメトリクス収集ライブラリの変更とメモリデータ収集エラーの修正への直接リンク">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="oshi追加">OSHI追加<a href="#oshi追加" class="hash-link" aria-label="OSHI追加への直接リンク" title="OSHI追加への直接リンク">​</a></h4><p>OSHI(Operating System and Hardware Information)は、システムインフラストラクチャメトリクスを収集するためのライブラリであり、頻繁にアップデートされるため、システム性能指標を収集するためのライブラリとして選択しました。 ただし、Java8以降の環境で使用できます。</p><ul><li><code>oshi_enabled=false</code> (デフォルト値)</li><li>jdk8以降で使用可能</li><li>disk=&quot;.&quot;使用状況の測定及びアラート機能が可能</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sigar機能をdeprecated処理">Sigar機能をdeprecated処理<a href="#sigar機能をdeprecated処理" class="hash-link" aria-label="Sigar機能をdeprecated処理への直接リンク" title="Sigar機能をdeprecated処理への直接リンク">​</a></h4><p>5年以上更新されていないため、初期設定から除外しました。</p><ul><li>sigar_enabled=false (デフォルト値)</li><li>lib1に対して、aixのみを含む</li></ul><p>Sigar機能を使用するためには、明示的に<code>sigar_enabled=true</code>設定後に使用できます。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="linux-memory収集エラーの修正">Linux memory収集エラーの修正<a href="#linux-memory収集エラーの修正" class="hash-link" aria-label="Linux memory収集エラーの修正への直接リンク" title="Linux memory収集エラーの修正への直接リンク">​</a></h4><p>Linux環境でのメモリ使用量と使用率の収集エラーを修正しました。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="環境変数の照会機能をオプション処理">環境変数の照会機能をオプション処理<a href="#環境変数の照会機能をオプション処理" class="hash-link" aria-label="環境変数の照会機能をオプション処理への直接リンク" title="環境変数の照会機能をオプション処理への直接リンク">​</a></h3><p>エージェントで環境変数を設定時、機能をON/OFFできるようにオプションを追加しました。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">agent_env_system_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key attr-name" style="color:rgb(241, 250, 140)">agent_env_jvm_enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>プロセス環境変数とJava環境変数の表示可否をオプションで制御できます。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="エージェント環境変数の検索時に特定のキーを除くオプション">エージェント環境変数の検索時に、特定のキーを除くオプション<a href="#エージェント環境変数の検索時に特定のキーを除くオプション" class="hash-link" aria-label="エージェント環境変数の検索時に、特定のキーを除くオプションへの直接リンク" title="エージェント環境変数の検索時に、特定のキーを除くオプションへの直接リンク">​</a></h3><p>Java実行環境を表示有無の機能から特定の環境変数を制御できるオプションを追加しました。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">agent_env_ignore_keys</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">USER,Address</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>「,」を区切り文字を使用してオプションを指定し、大文字と小文字を区別しません。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tomcat10対応">TOMCAT10対応<a href="#tomcat10対応" class="hash-link" aria-label="TOMCAT10対応への直接リンク" title="TOMCAT10対応への直接リンク">​</a></h3><p>Tomcat10に jakartaライブラリを追跡するための対応範囲を拡張しました。
weavingオプションにtomcat10を指定して追跡することができます。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">weaving</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">tomcat10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_WoCw"><div class="admonitionContent_vXIg"><p>weavingオプションは、<code>weaving_reserved</code>オプションを省略してv2.1.1から追加しました。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="httpcallの詳細情報を追跡">HttpCallの詳細情報を追跡<a href="#httpcallの詳細情報を追跡" class="hash-link" aria-label="HttpCallの詳細情報を追跡への直接リンク" title="HttpCallの詳細情報を追跡への直接リンク">​</a></h3><p>トランザクション追跡でHttpcallに関する追跡情報を追加しました。</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_WoCw"><div class="admonitionContent_vXIg"><p>OLDバージョンの収集サーバーでは、トランザクション詳細ステップ情報の確認できません。</p></div></div><p>OLD収集サーバーにデータを送信する場合は、<code>trace_htpc_version</code>オプションを<em>whatap.conf</em>ファイルに追加する必要があります。</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">whatap.conf</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key attr-name" style="color:rgb(241, 250, 140)">trace_httpc_version</span><span class="token punctuation" style="color:rgb(248, 248, 242)">=</span><span class="token value attr-value">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="クリップボードにコードをコピーする" title="コピー" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">Feedback</button></div></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文書検索"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#2021-12-15" class="table-of-contents__link toc-highlight">2021-12-15</a></li></ul></div><div class="fbsharebutton_dZBI" data-href="https://docs.whatap.io/ja/release-notes/java/java-2_1_0" data-layout="" data-size=""><button type="button" class="fb_xfbml_parse_ignore_BpHP">共有</button></div><div class="btnprint_EBmh"><button>PDF</button></div><div class="btnwrapper_gsW7"><button class="modalopenbtn_jIdz">Feedback</button></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WhaTap Labs Inc. All right reserved. Built with Docusaurus.</div></div></div></footer></div>
<script src="/ja/assets/js/runtime~main.0cde96f1.js"></script>
<script src="/ja/assets/js/main.9b92f7f5.js"></script>
</body>
</html>