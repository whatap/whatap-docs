"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["95449"],{62447:function(e,n,s){s.r(n),s.d(n,{metadata:()=>t,default:()=>x,frontMatter:()=>l,contentTitle:()=>c,toc:()=>d,assets:()=>o});var t=JSON.parse('{"id":"best-practice-guides/about-openmetrics-explorer","title":"OpenMetrics \u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC","description":"OpenMetrics \u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC\u306E\u30AC\u30A4\u30C9\u3067\u3059\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/best-practice-guides/about-openmetrics-explorer.mdx","sourceDirName":"best-practice-guides","slug":"/best-practice-guides/about-openmetrics-explorer","permalink":"/whatap-docs/ja/best-practice-guides/about-openmetrics-explorer","draft":false,"unlisted":false,"editUrl":"undefined/docs/best-practice-guides/about-openmetrics-explorer.mdx","tags":[],"version":"current","frontMatter":{"id":"about-openmetrics-explorer","title":"OpenMetrics \u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC","description":"OpenMetrics \u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC\u306E\u30AC\u30A4\u30C9\u3067\u3059\u3002","toc_max_heading_level":3,"keywords":["OpenMetrics \u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC"],"isTranslationMissing":false},"sidebar":"learningSidebar","previous":{"title":"WhaTap\u6D3B\u7528","permalink":"/whatap-docs/ja/learning-guides"},"next":{"title":"\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9\u5206\u6790","permalink":"/whatap-docs/ja/best-practice-guides/about-dashboard"}}'),r=s(74848),i=s(84429);let l={id:"about-openmetrics-explorer",title:"OpenMetrics \u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC",description:"OpenMetrics \u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC\u306E\u30AC\u30A4\u30C9\u3067\u3059\u3002",toc_max_heading_level:3,keywords:["OpenMetrics \u30A8\u30AF\u30B9\u30D7\u30ED\u30FC\u30E9\u30FC"],isTranslationMissing:!1},c,o={},d=[{value:"\u4E3B\u306A\u6A5F\u80FD",id:"\u4E3B\u306A\u6A5F\u80FD",level:4},{value:"\u753B\u9762\u69CB\u6210",id:"\u753B\u9762\u69CB\u6210",level:4},{value:"\u306A\u305C PromQL \u304C\u5FC5\u8981\u304B",id:"\u306A\u305C-promql-\u304C\u5FC5\u8981\u304B",level:4},{value:"PromQL \u30E6\u30FC\u30B6\u30FC\u30AC\u30A4\u30C9",id:"promql-\u30E6\u30FC\u30B6\u30FC\u30AC\u30A4\u30C9",level:2},{value:"\u30AF\u30A8\u30EA\u5B9F\u884C\u65B9\u5F0F",id:"\u30AF\u30A8\u30EA\u5B9F\u884C\u65B9\u5F0F",level:3},{value:"\u30C7\u30FC\u30BF\u578B",id:"\u30C7\u30FC\u30BF\u578B",level:3},{value:"\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9",id:"\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9",level:3},{value:"1. \u30E1\u30C8\u30EA\u30AF\u30B9\u9078\u629E\uFF08Instant Vector \u30BB\u30EC\u30AF\u30BF\u30FC\uFF09",id:"1-\u30E1\u30C8\u30EA\u30AF\u30B9\u9078\u629Einstant-vector-\u30BB\u30EC\u30AF\u30BF\u30FC",level:4},{value:"2. \u30E9\u30D9\u30EB\u30DE\u30C3\u30C1\u6F14\u7B97\u5B50",id:"2-\u30E9\u30D9\u30EB\u30DE\u30C3\u30C1\u6F14\u7B97\u5B50",level:4},{value:"3. Range Vector \u30BB\u30EC\u30AF\u30BF\u30FC",id:"3-range-vector-\u30BB\u30EC\u30AF\u30BF\u30FC",level:4},{value:"4. Offset \u30E2\u30C7\u30A3\u30D5\u30A1\u30A4\u30A2",id:"4-offset-\u30E2\u30C7\u30A3\u30D5\u30A1\u30A4\u30A2",level:4},{value:"\u5B9F\u7528\u4F8B",id:"\u5B9F\u7528\u4F8B",level:3},{value:"\u96C6\u8A08\u95A2\u6570",id:"\u96C6\u8A08\u95A2\u6570",level:3},{value:"sum()",id:"sum",level:4},{value:"avg()",id:"avg",level:4},{value:"count()",id:"count",level:4},{value:"max() / min()",id:"max--min",level:4},{value:"topk() / bottomk()",id:"topk--bottomk",level:4},{value:"\u6642\u7CFB\u5217\u95A2\u6570",id:"\u6642\u7CFB\u5217\u95A2\u6570",level:3},{value:"rate()",id:"rate",level:4},{value:"increase()",id:"increase",level:4},{value:"irate()",id:"irate",level:4},{value:"\u6642\u9593\u7BC4\u56F2\u95A2\u6570",id:"\u6642\u9593\u7BC4\u56F2\u95A2\u6570",level:3},{value:"avg_over_time()",id:"avg_over_time",level:4},{value:"max_over_time() / min_over_time()",id:"max_over_time--min_over_time",level:4},{value:"sum_over_time()",id:"sum_over_time",level:4},{value:"\u91CD\u8981\u30EB\u30FC\u30EB: Rate then Sum",id:"\u91CD\u8981\u30EB\u30FC\u30EB-rate-then-sum",level:3},{value:"\u5B9F\u8DF5\u4F8B",id:"\u5B9F\u8DF5\u4F8B",level:3},{value:"\u6570\u5B66\u6F14\u7B97\u5B50",id:"\u6570\u5B66\u6F14\u7B97\u5B50",level:3},{value:"\u7B97\u8853\u6F14\u7B97",id:"\u7B97\u8853\u6F14\u7B97",level:4},{value:"\u6BD4\u8F03\u6F14\u7B97",id:"\u6BD4\u8F03\u6F14\u7B97",level:4},{value:"\u5B9F\u8DF5\u306E\u30D2\u30F3\u30C8",id:"\u5B9F\u8DF5\u306E\u30D2\u30F3\u30C8",level:3},{value:"\u305D\u306E\u4ED6\u306E\u95A2\u6570",id:"\u305D\u306E\u4ED6\u306E\u95A2\u6570",level:3},{value:"abs()",id:"abs",level:4},{value:"round()",id:"round",level:4},{value:"clamp_max() / clamp_min()",id:"clamp_max--clamp_min",level:4},{value:"\u6CE8\u610F\u4E8B\u9805",id:"\u6CE8\u610F\u4E8B\u9805",level:3},{value:"\u7A7A\u306E\u30E9\u30D9\u30EB\u5024\u306E\u30DE\u30C3\u30C1",id:"\u7A7A\u306E\u30E9\u30D9\u30EB\u5024\u306E\u30DE\u30C3\u30C1",level:4},{value:"\u5FC5\u9808\u30BB\u30EC\u30AF\u30BF\u30FC",id:"\u5FC5\u9808\u30BB\u30EC\u30AF\u30BF\u30FC",level:4},{value:"\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u4E0A\u306E\u8003\u616E",id:"\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u4E0A\u306E\u8003\u616E",level:4},{value:"Staleness\uFF08\u53E4\u3044\u30C7\u30FC\u30BF\uFF09",id:"staleness\u53E4\u3044\u30C7\u30FC\u30BF",level:4},{value:"\u6B63\u898F\u8868\u73FE",id:"\u6B63\u898F\u8868\u73FE",level:3},{value:"\u30B3\u30E1\u30F3\u30C8",id:"\u30B3\u30E1\u30F3\u30C8",level:3}];function h(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Cmdname:s}=n;return s||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Cmdname",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(s,{sid:"openmetrics_explorer",className:"uitext"})," \u306F WhaTap \u304C\u63D0\u4F9B\u3059\u308B\u30E1\u30C8\u30EA\u30AF\u30B9\u30C7\u30FC\u30BF\u306E\u7167\u4F1A\u3068\u53EF\u8996\u5316\u30C4\u30FC\u30EB\u3067\u3059\u3002\n\u53CE\u96C6\u3057\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u3092 PromQL \u3067\u7167\u4F1A\u3057\u3001\u7D50\u679C\u3092\u30C1\u30E3\u30FC\u30C8(Graph) \u3068\u30C6\u30FC\u30D6\u30EB(Table) \u3067\u53EF\u8996\u5316\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"\u4E3B\u306A\u6A5F\u80FD",children:"\u4E3B\u306A\u6A5F\u80FD"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PromQL \u30AF\u30A8\u30EA\u306B\u3088\u308B\u30E1\u30C8\u30EA\u30AF\u30B9\u7167\u4F1A"}),"\n",(0,r.jsx)(n.li,{children:"Graph \u3068 Table \u30D3\u30E5\u30FC\u3067\u306E\u30C7\u30FC\u30BF\u53EF\u8996\u5316"}),"\n",(0,r.jsx)(n.li,{children:"\u6642\u9593\u7BC4\u56F2\u3092\u9078\u629E\u3059\u308B\u3068 PromQL \u306B\u6642\u9593\u304C\u81EA\u52D5\u5165\u529B"}),"\n",(0,r.jsx)(n.li,{children:"\u30EA\u30A2\u30EB\u30BF\u30A4\u30E0\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u76E3\u8996"}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"\u753B\u9762\u69CB\u6210",children:"\u753B\u9762\u69CB\u6210"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4E0A\u90E8: \u6642\u9593\u7BC4\u56F2\u30BB\u30EC\u30AF\u30BF\u30FC\u3001\u30AF\u30A8\u30EA\u5165\u529B\u6B04"}),"\n",(0,r.jsx)(n.li,{children:"\u4E2D\u592E: Graph\u3001Table\u3001Stacked Bar \u306E\u30D3\u30E5\u30FC\u5207\u66FF\u30DC\u30BF\u30F3"}),"\n",(0,r.jsx)(n.li,{children:"\u4E0B\u90E8: \u7167\u4F1A\u7D50\u679C\u306E\u8868\u793A\uFF08\u30B0\u30E9\u30D5\u307E\u305F\u306F\u30C6\u30FC\u30D6\u30EB\uFF09"}),"\n"]}),(0,r.jsx)(n.hr,{})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"\u306A\u305C-promql-\u304C\u5FC5\u8981\u304B",children:"\u306A\u305C PromQL \u304C\u5FC5\u8981\u304B"}),(0,r.jsx)(n.p,{children:"OpenMetrics \u306F Prometheus \u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u5F62\u5F0F\u306B\u57FA\u3065\u304D\u3001\u3055\u307E\u3056\u307E\u306A\u30B7\u30B9\u30C6\u30E0\u3084\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u306E\u6642\u7CFB\u5217\u6307\u6A19\u3092\u53CE\u96C6\u3057\u307E\u3059\u3002Prometheus \u306F\u30AA\u30FC\u30D7\u30F3\u30BD\u30FC\u30B9\u306E\u76E3\u8996\u30C4\u30FC\u30EB\u3067\u3001CPU \u4F7F\u7528\u7387\u3001\u30E1\u30E2\u30EA\u4F7F\u7528\u91CF\u3001HTTP \u30EA\u30AF\u30A8\u30B9\u30C8\u6570\u3001\u30A8\u30E9\u30FC\u7387\u306A\u3069\u306E\u6642\u9593\u30D9\u30FC\u30B9\u6570\u5024\u30C7\u30FC\u30BF\u3092\u30E1\u30C8\u30EA\u30AF\u30B9\u6307\u6A19\u3068\u3057\u3066\u4FDD\u5B58\u3057\u307E\u3059\u3002"}),(0,r.jsx)(n.p,{children:"\u3053\u308C\u3089\u306E\u6307\u6A19\u306F\u591A\u304F\u304C\u6570\u79D2\u9593\u9694\u3067\u7D99\u7D9A\u7684\u306B\u53CE\u96C6\u3055\u308C\u3001\u6642\u9593\u3068\u3068\u3082\u306B\u7D76\u3048\u305A\u5909\u5316\u3059\u308B\u6642\u7CFB\u5217\u30C7\u30FC\u30BF\u306E\u5F62\u3092\u53D6\u308A\u307E\u3059\u3002"}),(0,r.jsx)(n.p,{children:"\u5358\u306B\u30C7\u30FC\u30BF\u3092\u96C6\u3081\u308B\u3060\u3051\u3067\u306F\u3001\u4ECA\u30B5\u30FC\u30D3\u30B9\u304C\u6B63\u5E38\u304B\u3001\u30A8\u30E9\u30FC\u7387\u304C\u901A\u5E38\u3088\u308A\u9AD8\u304F\u306A\u3063\u305F\u304B\u3001\u3069\u306E API \u304C\u9045\u304F\u306A\u3063\u305F\u304B\u3068\u3044\u3063\u305F\u610F\u5473\u3042\u308B\u5206\u6790\u306F\u96E3\u3057\u3044\u3067\u3059\u3002"}),(0,r.jsxs)(n.p,{children:["\u305D\u306E\u305F\u3081 ",(0,r.jsx)(s,{sid:"openmetrics_explorer",className:"uitext"})," \u306B\u306F\u53CE\u96C6\u30E1\u30C8\u30EA\u30AF\u30B9\u3092\u5206\u6790\u3059\u308B\u305F\u3081\u306E\u30AF\u30A8\u30EA\u8A00\u8A9E\u304C\u5FC5\u8981\u3067\u3001\u305D\u306E\u5F79\u5272\u3092\u62C5\u3046\u306E\u304C ",(0,r.jsx)("strong",{children:"PromQL\uFF08Prometheus Query Language\uFF09"})," \u3067\u3059\u3002"]}),(0,r.jsx)(n.p,{children:"PromQL \u3092\u4F7F\u3046\u3068\u6B21\u306E\u5206\u6790\u304C\u53EF\u80FD\u3067\u3059\u3002"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u30EA\u30A2\u30EB\u30BF\u30A4\u30E0\u76E3\u8996"}),": \u73FE\u5728\u306E\u30B7\u30B9\u30C6\u30E0\u72B6\u614B\u3092\u5373\u6642\u306B\u78BA\u8A8D\uFF08\u73FE\u5728\u306E CPU \u4F7F\u7528\u7387\u3001\u30A2\u30AF\u30C6\u30A3\u30D6\u30E6\u30FC\u30B6\u30FC\u6570\uFF09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u30C8\u30EC\u30F3\u30C9\u5206\u6790"}),": \u6642\u9593\u306B\u4F34\u3046\u5909\u5316\u30D1\u30BF\u30FC\u30F3\u306E\u628A\u63E1\uFF08\u76F4\u8FD11\u6642\u9593\u306E\u6BCE\u79D2\u30EA\u30AF\u30A8\u30B9\u30C8\u5897\u52A0\u7387\uFF09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6BD4\u8F03\u5206\u6790"}),": \u30B5\u30FC\u30D0\u30FC\u3084\u30B5\u30FC\u30D3\u30B9\u9593\u306E\u6307\u6A19\u6BD4\u8F03\uFF08\u30B5\u30FC\u30D0\u30FC\u5225\u30A8\u30E9\u30FC\u7387\u3001\u5730\u57DF\u5225\u5FDC\u7B54\u6642\u9593\uFF09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u96C6\u8A08\u3068\u8A08\u7B97"}),": \u8907\u96D1\u306A\u6570\u5F0F\u3084\u7D71\u8A08\u8A08\u7B97\uFF08\u5168\u4F53\u30A8\u30E9\u30FC\u7387\u3001\u5E73\u5747\u5FDC\u7B54\u6642\u9593\u3001\u9045\u3044 API \u4E0A\u4F4D10\u4EF6\uFF09"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u30A2\u30E9\u30FC\u30C8\u6761\u4EF6\u8A2D\u5B9A"}),": \u3057\u304D\u3044\u5024\u8D85\u904E\u6642\u306E\u81EA\u52D5\u901A\u77E5\uFF08\u30A8\u30E9\u30FC\u73875%\u4EE5\u4E0A\u3001\u30E1\u30E2\u30EA\u4F7F\u7528\u738790%\u4EE5\u4E0A\uFF09"]}),"\n"]}),(0,r.jsx)(n.hr,{})]}),"\n",(0,r.jsx)(n.section,{className:"remark-sectionize-h2",children:(0,r.jsx)(n.h2,{id:"promql-\u30E6\u30FC\u30B6\u30FC\u30AC\u30A4\u30C9",children:"PromQL \u30E6\u30FC\u30B6\u30FC\u30AC\u30A4\u30C9"})}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u30AF\u30A8\u30EA\u5B9F\u884C\u65B9\u5F0F",children:"\u30AF\u30A8\u30EA\u5B9F\u884C\u65B9\u5F0F"}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u30AF\u30A8\u30EA"}),(0,r.jsx)(n.th,{children:"\u8AAC\u660E"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Instant Query"})}),(0,r.jsx)(n.td,{children:"\u7279\u5B9A\u6642\u70B9\u306E\u30C7\u30FC\u30BF\u3092\u53D6\u5F97\u3002Table \u30BF\u30D6\u3067\u4F7F\u7528"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Range Query"})}),(0,r.jsx)(n.td,{children:"\u958B\u59CB\u6642\u9593\u3068\u7D42\u4E86\u6642\u9593\u306E\u9593\u3092\u4E00\u5B9A\u9593\u9694\u3067\u53D6\u5F97"})]})]})]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u30C7\u30FC\u30BF\u578B",children:"\u30C7\u30FC\u30BF\u578B"}),(0,r.jsx)(n.p,{children:"PromQL \u306E\u5F0F\u306F 4 \u7A2E\u985E\u306E\u578B\u306B\u8A55\u4FA1\u3055\u308C\u307E\u3059\u3002"}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u578B"}),(0,r.jsx)(n.th,{children:"\u8AAC\u660E"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Instant Vector"})}),(0,r.jsx)(n.td,{children:"\u5404\u6642\u7CFB\u5217\u304C\u5358\u4E00\u30B5\u30F3\u30D7\u30EB\u3092\u542B\u3080\u96C6\u5408\uFF08\u3059\u3079\u3066\u540C\u3058\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\uFF09"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Range Vector"})}),(0,r.jsx)(n.td,{children:"\u5404\u6642\u7CFB\u5217\u304C\u6642\u9593\u7BC4\u56F2\u306E\u30C7\u30FC\u30BF\u30DD\u30A4\u30F3\u30C8\u3092\u542B\u3080\u96C6\u5408"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Scalar"})}),(0,r.jsx)(n.td,{children:"\u5358\u4E00\u306E\u6570\u5024"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"String"})}),(0,r.jsx)(n.td,{children:"\u5358\u4E00\u306E\u6587\u5B57\u5217"})]})]})]})]}),"\n",(0,r.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,r.jsx)(n.h3,{id:"\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9",children:"\u57FA\u672C\u7684\u306A\u4F7F\u3044\u65B9"})}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"1-\u30E1\u30C8\u30EA\u30AF\u30B9\u9078\u629Einstant-vector-\u30BB\u30EC\u30AF\u30BF\u30FC",children:"1. \u30E1\u30C8\u30EA\u30AF\u30B9\u9078\u629E\uFF08Instant Vector \u30BB\u30EC\u30AF\u30BF\u30FC\uFF09"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u57FA\u672C\u30E1\u30C8\u30EA\u30AF\u30B9\u7167\u4F1A"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"nginx_http_response_count_total\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u30E9\u30D9\u30EB\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'nginx_http_response_count_total{status="200"}\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8907\u6570\u30E9\u30D9\u30EB\u6761\u4EF6"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'nginx_http_response_count_total{method="GET", status="200"}\n'})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"2-\u30E9\u30D9\u30EB\u30DE\u30C3\u30C1\u6F14\u7B97\u5B50",children:"2. \u30E9\u30D9\u30EB\u30DE\u30C3\u30C1\u6F14\u7B97\u5B50"}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"\u6F14\u7B97\u5B50"}),(0,r.jsx)(n.th,{children:"\u8AAC\u660E"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"="}),(0,r.jsx)(n.td,{children:"\u30E9\u30D9\u30EB\u5024\u304C\u5B8C\u5168\u4E00\u81F4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"!="}),(0,r.jsx)(n.td,{children:"\u30E9\u30D9\u30EB\u5024\u304C\u4E0D\u4E00\u81F4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"=~"}),(0,r.jsx)(n.td,{children:"\u30E9\u30D9\u30EB\u5024\u304C\u6B63\u898F\u8868\u73FE\u306B\u4E00\u81F4"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"!~"}),(0,r.jsx)(n.td,{children:"\u30E9\u30D9\u30EB\u5024\u304C\u6B63\u898F\u8868\u73FE\u306B\u4E0D\u4E00\u81F4"})]})]})]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6B63\u898F\u8868\u73FE\u4F8B"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# staging, testing, development \u74B0\u5883\u306E\u307F\u53D6\u5F97\nnginx_http_response_count_total{environment=~"staging|testing|development"}\n\n# GET \u30E1\u30BD\u30C3\u30C9\u3092\u9664\u5916\nnginx_http_response_count_total{method!="GET"}\n\n# "rep" \u3067\u59CB\u307E\u308B replica \u3092\u53D6\u5F97\nnginx_http_response_count_total{replica=~"rep.*"}\n'})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"3-range-vector-\u30BB\u30EC\u30AF\u30BF\u30FC",children:"3. Range Vector \u30BB\u30EC\u30AF\u30BF\u30FC"}),(0,r.jsx)(n.p,{children:"\u73FE\u5728\u304B\u3089\u904E\u53BB\u306E\u7279\u5B9A\u671F\u9593\u306E\u30C7\u30FC\u30BF\u3092\u9078\u629E\u3057\u307E\u3059\u3002"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u76F4\u8FD15\u5206\u306E\u30C7\u30FC\u30BF\nnginx_http_response_count_total[5m]\n\n# \u76F4\u8FD11\u6642\u9593\u306E\u30C7\u30FC\u30BF\nnginx_http_response_count_total{status="200"}[1h]\n'})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"4-offset-\u30E2\u30C7\u30A3\u30D5\u30A1\u30A4\u30A2",children:"4. Offset \u30E2\u30C7\u30A3\u30D5\u30A1\u30A4\u30A2"}),(0,r.jsx)(n.p,{children:"\u904E\u53BB\u306E\u7279\u5B9A\u6642\u70B9\u306E\u30C7\u30FC\u30BF\u3092\u53D6\u5F97\u3057\u307E\u3059\u3002"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# 5\u5206\u524D\u306E\u5024\nnginx_http_response_count_total offset 5m\n\n# 1\u9031\u9593\u524D\u306E5\u5206\u30EC\u30FC\u30C8\nrate(nginx_http_response_count_total[5m] offset 1w)\n\n# \u672A\u6765\u6BD4\u8F03\uFF08\u8CA0\u306E offset\uFF09\nrate(nginx_http_response_count_total[5m] offset -1w)\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u5B9F\u7528\u4F8B",children:"\u5B9F\u7528\u4F8B"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B1: \u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u5225\u30EA\u30AF\u30A8\u30B9\u30C8\u6570"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'nginx_http_response_count_total{instance="http://192.168.100.122:4040/metrics"}\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B2: \u7279\u5B9A\u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u306E\u307F\u53D6\u5F97"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# 200 \u5FDC\u7B54\u306E\u307F\nnginx_http_response_count_total{status="200"}\n\n# 4xx \u30A8\u30E9\u30FC\u306E\u307F\uFF08\u6B63\u898F\u8868\u73FE\uFF09\nnginx_http_response_count_total{status=~"4.."}\n\n# 5xx \u30A8\u30E9\u30FC\u306E\u307F\nnginx_http_response_count_total{status=~"5.."}\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B3: \u30E1\u30BD\u30C3\u30C9\u3068\u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u306E\u7D44\u307F\u5408\u308F\u305B"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# GET \u30EA\u30AF\u30A8\u30B9\u30C8\u3067 200 \u5FDC\u7B54\nnginx_http_response_count_total{method="GET", status="200"}\n\n# POST, PUT, DELETE \u30EA\u30AF\u30A8\u30B9\u30C8\u306E\u4E2D\u3067 404 \u5FDC\u7B54\nnginx_http_response_count_total{method=~"POST|PUT|DELETE", status="404"}\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B4: \u30E1\u30C8\u30EA\u30AF\u30B9\u540D\u3067\u691C\u7D22"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# "job:" \u3067\u59CB\u307E\u308B\u3059\u3079\u3066\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\n{__name__=~"job:.*"}\n\n# "nginx" \u3067\u59CB\u307E\u308B\u3059\u3079\u3066\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\n{__name__=~"nginx.*"}\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B5: \u76F4\u8FD1\u306E\u6642\u9593\u7BC4\u56F2\u30C7\u30FC\u30BF"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u76F4\u8FD15\u5206\u9593\u306E nginx \u5FDC\u7B54\nnginx_http_response_count_total{status="200"}[5m]\n\n# \u76F4\u8FD11\u6642\u9593\u306E 404 \u30A8\u30E9\u30FC\nnginx_http_response_count_total{status="404"}[1h]\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B6: \u6642\u9593\u5E2F\u6BD4\u8F03"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u73FE\u5728\u5024\u30681\u6642\u9593\u524D\u306E\u5024\u3092\u6BD4\u8F03\nnginx_http_response_count_total{status="200"}\nnginx_http_response_count_total{status="200"} offset 1h\n\n# \u6628\u65E5\u306E\u540C\u6642\u523B\u306E\u30C7\u30FC\u30BF\nnginx_http_response_count_total offset 1d\n'})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u96C6\u8A08\u95A2\u6570",children:"\u96C6\u8A08\u95A2\u6570"}),(0,r.jsx)(n.p,{children:"\u96C6\u8A08\u95A2\u6570\uFF08Aggregation Functions\uFF09\u306F\u3001\u8907\u6570\u306E\u6642\u7CFB\u5217\u30C7\u30FC\u30BF\u3092\u4E00\u3064\u306B\u7D50\u5408\u3057\u3066\u8A08\u7B97\u3057\u307E\u3059\u3002"})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"sum",children:"sum()"}),(0,r.jsx)(n.p,{children:"\u3059\u3079\u3066\u306E\u6642\u7CFB\u5217\u306E\u5024\u3092\u5408\u8A08\u3057\u307E\u3059\u3002"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u5168\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u306E\u30EA\u30AF\u30A8\u30B9\u30C8\u6570\u306E\u5408\u8A08\nsum(nginx_http_response_count_total)\n\n# \u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u5225\u306B\u30B0\u30EB\u30FC\u30D7\u5316\u3057\u3066\u5408\u8A08\nsum by (status) (nginx_http_response_count_total)\n\n# \u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u5225\u306B\u30B0\u30EB\u30FC\u30D7\u5316\u3057\u3066\u5408\u8A08\nsum by (instance) (nginx_http_response_count_total)\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"avg",children:"avg()"}),(0,r.jsxs)(n.p,{children:["\u3059\u3079\u3066\u306E\u6642\u7CFB\u5217\u306E ",(0,r.jsx)(n.strong,{children:"\u5E73\u5747"})," \u5024\u3092\u8A08\u7B97\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u5168\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u306E\u5E73\u5747\u5FDC\u7B54\u6570\navg(nginx_http_response_count_total)\n\n# \u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u5225\u306E\u5E73\u5747\navg by (status) (nginx_http_response_count_total)\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"count",children:"count()"}),(0,r.jsxs)(n.p,{children:["\u6642\u7CFB\u5217\u306E ",(0,r.jsx)(n.strong,{children:"\u4EF6\u6570"})," \u3092\u6570\u3048\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u5168\u4F53\u306E\u6642\u7CFB\u5217\u4EF6\u6570\ncount(nginx_http_response_count_total)\n\n# \u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u5225\u306E\u6642\u7CFB\u5217\u4EF6\u6570\ncount by (status) (nginx_http_response_count_total)\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"max--min",children:"max() / min()"}),(0,r.jsxs)(n.p,{children:["\u6642\u7CFB\u5217\u306E ",(0,r.jsx)(n.strong,{children:"\u6700\u5927\u5024\u3068\u6700\u5C0F\u5024"})," \u3092\u8A08\u7B97\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u6700\u5927\u5024\nmax(nginx_http_response_count_total)\n\n# \u6700\u5C0F\u5024\nmin(nginx_http_response_count_total)\n\n# \u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u5225\u6700\u5927\u5024\nmax by (status) (nginx_http_response_count_total)\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"topk--bottomk",children:"topk() / bottomk()"}),(0,r.jsxs)(n.p,{children:["\u6307\u5B9A\u3057\u305F\u6570 (K) \u306E ",(0,r.jsx)(n.strong,{children:"\u4E0A\u4F4D"})," \u307E\u305F\u306F ",(0,r.jsx)(n.strong,{children:"\u4E0B\u4F4D"})," \u306E\u6642\u7CFB\u5217\u3092\u8FD4\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u4E0A\u4F4D5\u4EF6\u306E\u6642\u7CFB\u5217\ntopk(5, nginx_http_response_count_total)\n\n# \u4E0B\u4F4D3\u4EF6\u306E\u6642\u7CFB\u5217\nbottomk(3, nginx_http_response_count_total)\n\n# \u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u5225\u4E0A\u4F4D3\u4EF6\ntopk(3, sum by (status) (nginx_http_response_count_total))\n"})})]}),"\n",(0,r.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,r.jsx)(n.h3,{id:"\u6642\u7CFB\u5217\u95A2\u6570",children:"\u6642\u7CFB\u5217\u95A2\u6570"})}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"rate",children:"rate()"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6700\u3082\u3088\u304F\u4F7F\u7528\u3055\u308C\u308B\u95A2\u6570"})," \u3067\u3042\u308A\u3001Counter \u30E1\u30C8\u30EA\u30AF\u30B9\u306E ",(0,r.jsx)(n.strong,{children:"\u6BCE\u79D2\u5E73\u5747\u5897\u52A0\u7387"})," \u3092\u8A08\u7B97\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u76F4\u8FD15\u5206\u9593\u306E\u6BCE\u79D2\u5E73\u5747\u30EA\u30AF\u30A8\u30B9\u30C8\u6570\nrate(nginx_http_response_count_total[5m])\n\n# \u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9200\u306E\u6BCE\u79D2\u5E73\u5747\u30EA\u30AF\u30A8\u30B9\u30C8\u6570\nrate(nginx_http_response_count_total{status="200"}[5m])\n\n# \u5168\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u306E\u6BCE\u79D2\u7DCF\u30EA\u30AF\u30A8\u30B9\u30C8\u6570\nsum(rate(nginx_http_response_count_total[5m]))\n'})}),(0,r.jsxs)(n.admonition,{type:"caution",children:[(0,r.jsx)(n.mdxAdmonitionTitle,{}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u6CE8\u610F\u4E8B\u9805"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Counter \u30E1\u30C8\u30EA\u30AF\u30B9\u5C02\u7528"}),"\n",(0,r.jsx)(n.li,{children:"\u6642\u9593\u7BC4\u56F2\u306F\u30B9\u30AF\u30EC\u30A4\u30D7\u9593\u9694\u306E\u5C11\u306A\u304F\u3068\u30822\u500D\u3092\u63A8\u5968\uFF08\u4F8B: \u30B9\u30AF\u30EC\u30A4\u30D7\u9593\u969430\u79D2 \u2192 [1m] \u4EE5\u4E0A\uFF09"}),"\n",(0,r.jsx)(n.li,{children:"\u30AB\u30A6\u30F3\u30BF\u30FC\u30EA\u30BB\u30C3\u30C8\uFF08\u30B5\u30FC\u30D0\u30FC\u518D\u8D77\u52D5\u306A\u3069\uFF09\u3092\u81EA\u52D5\u7684\u306B\u51E6\u7406"}),"\n"]})]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"increase",children:"increase()"}),(0,r.jsxs)(n.p,{children:["\u6307\u5B9A\u3057\u305F\u6642\u9593\u7BC4\u56F2\u5185\u306E ",(0,r.jsx)(n.strong,{children:"\u7DCF\u5897\u52A0\u91CF"})," \u3092\u8A08\u7B97\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u76F4\u8FD15\u5206\u9593\u306E\u7DCF\u30EA\u30AF\u30A8\u30B9\u30C8\u6570\nincrease(nginx_http_response_count_total[5m])\n\n# \u76F4\u8FD11\u6642\u9593\u306E\u30A8\u30E9\u30FC\u6570\nincrease(nginx_http_response_count_total{status=~"5.."}[1h])\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"rate() \u3068 increase() \u306E\u95A2\u4FC2"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"increase(v[5m]) = rate(v[5m]) \xd7 300\u79D2"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"rate(): \u6BCE\u79D2\u30EC\u30FC\u30C8"}),"\n",(0,r.jsx)(n.li,{children:"increase(): \u7D76\u5BFE\u5897\u52A0\u91CF"}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"irate",children:"irate()"}),(0,r.jsxs)(n.p,{children:["\u6700\u5F8C\u306E2\u3064\u306E\u30C7\u30FC\u30BF\u30DD\u30A4\u30F3\u30C8\u306B\u57FA\u3065\u3044\u3066 ",(0,r.jsx)(n.strong,{children:"\u77AC\u9593\u6BCE\u79D2\u5897\u52A0\u7387"})," \u3092\u8A08\u7B97\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u77AC\u9593\u5897\u52A0\u7387\nirate(nginx_http_response_count_total[5m])\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"irate() vs rate()"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"irate(): \u5909\u5316\u304C\u901F\u3044\u30AB\u30A6\u30F3\u30BF\u30FC\u306B\u9069\u3057\u3001\u77ED\u3044\u30B9\u30D1\u30A4\u30AF\u3092\u691C\u51FA\u3059\u308B\u306E\u306B\u6709\u52B9"}),"\n",(0,r.jsx)(n.li,{children:"rate(): \u30A2\u30E9\u30FC\u30C8\u3084\u7DE9\u3084\u304B\u306B\u5909\u5316\u3059\u308B\u30AB\u30A6\u30F3\u30BF\u30FC\u306B\u9069\u3057\u3001\u5E73\u5747\u5024\u3092\u63D0\u4F9B"}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u6642\u9593\u7BC4\u56F2\u95A2\u6570",children:"\u6642\u9593\u7BC4\u56F2\u95A2\u6570"}),(0,r.jsx)(n.p,{children:"\u7279\u5B9A\u306E\u6642\u9593\u7BC4\u56F2\u5185\u306E\u5024\u3092\u96C6\u8A08\u3057\u307E\u3059\u3002"})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"avg_over_time",children:"avg_over_time()"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6642\u9593\u7BC4\u56F2\u306E\u5E73\u5747"})," \u3092\u8A08\u7B97\u3059\u308B\u95A2\u6570\u3067\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u76F4\u8FD110\u5206\u9593\u306E\u5E73\u5747\u5024\navg_over_time(nginx_http_response_count_total[10m])\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"max_over_time--min_over_time",children:"max_over_time() / min_over_time()"}),(0,r.jsxs)(n.p,{children:["\u6307\u5B9A\u3057\u305F\u6642\u9593\u7BC4\u56F2\u5185\u306E ",(0,r.jsx)(n.strong,{children:"\u6700\u5927\u5024\uFF0F\u6700\u5C0F\u5024"})," \u3092\u8A08\u7B97\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u76F4\u8FD11\u6642\u9593\u306E\u6700\u5927\u5024\nmax_over_time(nginx_http_response_count_total[1h])\n\n# \u76F4\u8FD11\u6642\u9593\u306E\u6700\u5C0F\u5024\nmin_over_time(nginx_http_response_count_total[1h])\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"sum_over_time",children:"sum_over_time()"}),(0,r.jsxs)(n.p,{children:["\u6307\u5B9A\u3057\u305F\u671F\u9593\u306E\u5024\u3092\u5408\u8A08\u3059\u308B ",(0,r.jsx)(n.strong,{children:"\u6642\u9593\u7BC4\u56F2\u5408\u8A08"})," \u95A2\u6570\u3067\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u76F4\u8FD15\u5206\u9593\u306E\u3059\u3079\u3066\u306E\u5024\u306E\u5408\u8A08\nsum_over_time(nginx_http_response_count_total[5m])\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u91CD\u8981\u30EB\u30FC\u30EB-rate-then-sum",children:"\u91CD\u8981\u30EB\u30FC\u30EB: Rate then Sum"}),(0,r.jsxs)(n.p,{children:["\u3053\u306E\u30EB\u30FC\u30EB\u306F\u3001Counter \u30E1\u30C8\u30EA\u30AF\u30B9\u3067 ",(0,r.jsx)(n.code,{children:"rate()"}),"\u3001",(0,r.jsx)(n.code,{children:"increase()"}),"\u3001",(0,r.jsx)(n.code,{children:"irate()"})," \u306A\u3069\u306E\u6642\u7CFB\u5217\u95A2\u6570\u3092\u4F7F\u7528\u3059\u308B\u969B\u306B\u3001\u3059\u3079\u3066\u306E\u96C6\u8A08\u95A2\u6570\uFF08sum\u3001avg\u3001max\u3001min\u3001count \u306A\u3069\uFF09\u306B\u9069\u7528\u3055\u308C\u307E\u3059\u3002"]}),(0,r.jsxs)(n.admonition,{type:"caution",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5E38\u306B rate() \u3092\u5148\u306B\u3001\u305D\u306E\u5F8C sum()"})}),(0,r.jsx)(n.p,{children:"Counter \u30E1\u30C8\u30EA\u30AF\u30B9\u3092\u96C6\u8A08\u3059\u308B\u969B\u306F\u5FC5\u305A\u3053\u306E\u9806\u5E8F\u3092\u5B88\u3063\u3066\u304F\u3060\u3055\u3044\u3002"})]}),(0,r.jsxs)(n.p,{children:["\u{1F535} ",(0,r.jsx)(n.strong,{children:"\u6B63\u3057\u3044\u65B9\u6CD5"})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u5148\u306B rate() \u3092\u9069\u7528\u3057\u3001\u305D\u306E\u5F8C sum()\nsum(rate(nginx_http_response_count_total[5m]))\n"})}),(0,r.jsxs)(n.p,{children:["\u274C ",(0,r.jsx)(n.strong,{children:"\u8AA4\u3063\u305F\u65B9\u6CD5"})]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u5148\u306B sum() \u3092\u9069\u7528\u3059\u308B\u3068\u30AB\u30A6\u30F3\u30BF\u30FC\u30EA\u30BB\u30C3\u30C8\u6642\u306B\u554F\u984C\u304C\u767A\u751F\nrate(sum(nginx_http_response_count_total[5m]))\n"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sum()"})," \u3092\u5148\u306B\u9069\u7528\u3059\u308B\u3068\u3001\u5404\u30B5\u30FC\u30D0\u30FC\u306E\u30AB\u30A6\u30F3\u30BF\u30FC\u30EA\u30BB\u30C3\u30C8\uFF08\u518D\u8D77\u52D5\uFF09\u3092\u691C\u51FA\u3067\u304D\u306A\u304F\u306A\u308A\u307E\u3059\u3002\u30B5\u30FC\u30D0\u30FC\u304C1\u53F0\u518D\u8D77\u52D5\u3059\u308B\u3068\u5408\u8A08\u5024\u304C\u6025\u6E1B\u3057\u3001",(0,r.jsx)(n.code,{children:"rate()"})," \u306F\u305D\u308C\u3092\u8CA0\u306E\u5897\u52A0\u7387\u3084\u7570\u5E38\u306A\u30B9\u30D1\u30A4\u30AF\u3068\u3057\u3066\u8AA4\u3063\u3066\u8A08\u7B97\u3057\u307E\u3059\u3002\u4E00\u65B9\u3001",(0,r.jsx)(n.code,{children:"rate()"})," \u3092\u5148\u306B\u9069\u7528\u3059\u308C\u3070\u3001\u30B5\u30FC\u30D0\u30FC\u3054\u3068\u306E\u30AB\u30A6\u30F3\u30BF\u30FC\u30EA\u30BB\u30C3\u30C8\u3092\u6B63\u78BA\u306B\u691C\u51FA\u3057\u3001\u6B63\u3057\u304F\u51E6\u7406\u3067\u304D\u307E\u3059\u3002"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u5B9F\u8DF5\u4F8B",children:"\u5B9F\u8DF5\u4F8B"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B1. \u6BCE\u79D2\u30EA\u30AF\u30A8\u30B9\u30C8\u6570 (RPS) \u306E\u8A08\u7B97"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u5168\u4F53\u306E RPS\nsum(rate(nginx_http_response_count_total[5m]))\n\n# \u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u5225 RPS\nsum by (status) (rate(nginx_http_response_count_total[5m]))\n\n# \u30E1\u30BD\u30C3\u30C9\u5225 RPS\nsum by (method) (rate(nginx_http_response_count_total[5m]))\n"})}),(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5408\u8A08 Requests Per Second (RPS) PromQL \u306E\u8AAC\u660E"})}),(0,r.jsxs)(n.p,{children:["\u306A\u305C ",(0,r.jsx)(n.code,{children:"sum(rate(nginx_http_response_count_total[5m]))"})," \u304C RPS \u306A\u306E\u304B\uFF1F"]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"nginx_http_response_count_total"})," \u3068\u306F\uFF1F"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Counter \u30E1\u30C8\u30EA\u30AF\u30B9: \u30B5\u30FC\u30D0\u30FC\u8D77\u52D5\u4EE5\u964D\u306E\u7D2F\u7A4D\u5FDC\u7B54\u6570"}),"\n",(0,r.jsx)(n.li,{children:"\u4F8B: 1000 \u2192 1050 \u2192 1120 \u2192 1180 \u2192 1250..."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"rate(...[5m])"})," \u306F\u4F55\u3092\u3059\u308B\uFF1F"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u76F4\u8FD15\u5206\u306E\u30C7\u30FC\u30BF\u3092\u898B\u3066\u6BCE\u79D2\u5E73\u5747\u5897\u52A0\u7387\u3092\u8A08\u7B97\u3059\u308B\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u4F8B:",(0,r.jsx)(n.br,{}),"\n","5\u5206\u524D: 1000",(0,r.jsx)(n.br,{}),"\n","\u73FE\u5728: 1300",(0,r.jsx)(n.br,{}),"\n","\u5DEE\u5206: 300 \uFF085\u5206 = 300\u79D2\uFF09",(0,r.jsx)(n.br,{}),"\n","rate = 300 \xf7 300\u79D2 = 1.0 requests/second"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u2192 ",(0,r.jsx)(n.code,{children:"rate()"})," \u306E\u7D50\u679C = \u6BCE\u79D2\u30EA\u30AF\u30A8\u30B9\u30C8\u6570 (RPS)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u306A\u305C ",(0,r.jsx)(n.code,{children:"sum()"})," \u304C\u5FC5\u8981\uFF1F"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u8907\u6570\u30B5\u30FC\u30D0\u30FC\u3084\u30E9\u30D9\u30EB\u306E rate \u5024\u3092\u5408\u7B97\u3059\u308B\u305F\u3081\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u4F8B:",(0,r.jsx)(n.br,{}),"\n","server1, status=200 \u2192 10 req/s",(0,r.jsx)(n.br,{}),"\n","server1, status=404 \u2192 2 req/s",(0,r.jsx)(n.br,{}),"\n","server2, status=200 \u2192 15 req/s",(0,r.jsx)(n.br,{}),"\n","server2, status=404 \u2192 3 req/s",(0,r.jsx)(n.br,{}),"\n","\u5408\u8A08 = 30 req/s"]}),"\n"]}),"\n"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u7D50\u8AD6:"}),(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"sum(rate(nginx_http_response_count_total[5m]))"})," = \u3059\u3079\u3066\u306E\u30B5\u30FC\u30D0\u30FC\u306E\u5408\u8A08\u6BCE\u79D2\u30EA\u30AF\u30A8\u30B9\u30C8\u6570 (RPS)"]}),(0,r.jsx)("br",{}),(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u88DC\u8DB3:"})," 5\u5206\u9593\u306E\u7DCF\u30EA\u30AF\u30A8\u30B9\u30C8\u6570\u3092\u6C42\u3081\u308B\u5834\u5408\u306F ",(0,r.jsx)(n.code,{children:"increase()"})," \u3092\u4F7F\u7528\u3002",(0,r.jsx)(n.br,{}),"\n",(0,r.jsx)(n.code,{children:"sum(increase(nginx_http_response_count_total[5m]))"})," = 5\u5206\u9593\u306E\u7DCF\u30EA\u30AF\u30A8\u30B9\u30C8\u6570"]}),"\n"]})]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B2. \u30A8\u30E9\u30FC\u7387\u306E\u8A08\u7B97"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u5168\u30EA\u30AF\u30A8\u30B9\u30C8\u306B\u5BFE\u3059\u308B 5xx \u30A8\u30E9\u30FC\u306E\u5272\u5408\nsum(rate(nginx_http_response_count_total{status=~"5.."}[5m])) / sum(rate(nginx_http_response_count_total[5m])) * 100\n\n# \u5168\u30EA\u30AF\u30A8\u30B9\u30C8\u306B\u5BFE\u3059\u308B 4xx \u30A8\u30E9\u30FC\u306E\u5272\u5408\nsum(rate(nginx_http_response_count_total{status=~"4.."}[5m])) / sum(rate(nginx_http_response_count_total[5m]))\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B3. \u4E0A\u4F4D N \u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u306E\u691C\u51FA"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u30EA\u30AF\u30A8\u30B9\u30C8\u6570\u304C\u6700\u3082\u591A\u3044\u4E0A\u4F4D5\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\ntopk(5, sum by (instance) (rate(nginx_http_response_count_total[5m])))\n\n# \u30A8\u30E9\u30FC\u304C\u6700\u3082\u591A\u3044\u4E0A\u4F4D3\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\ntopk(3, sum by (instance) (rate(nginx_http_response_count_total{status=~"5.."}[5m])))\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B4. \u6642\u9593\u5E2F\u3054\u3068\u306E\u6BD4\u8F03"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u73FE\u5728\u306E RPS\nsum(rate(nginx_http_response_count_total[5m]))\n\n# 1\u6642\u9593\u524D\u306E RPS\nsum(rate(nginx_http_response_count_total[5m] offset 1h))\n\n# \u6628\u65E5\u306E\u540C\u6642\u523B\u306E RPS\nsum(rate(nginx_http_response_count_total[5m] offset 1d))\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u4F8B5. \u5E73\u5747\u5FDC\u7B54\u6570"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u5225\u5E73\u5747\u5FDC\u7B54\u6570\navg by (instance) (rate(nginx_http_response_count_total[5m]))\n\n# \u30B9\u30C6\u30FC\u30BF\u30B9\u30B3\u30FC\u30C9\u5225\u5E73\u5747\navg by (status) (rate(nginx_http_response_count_total[5m]))\n"})})]}),"\n",(0,r.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,r.jsx)(n.h3,{id:"\u6570\u5B66\u6F14\u7B97\u5B50",children:"\u6570\u5B66\u6F14\u7B97\u5B50"})}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"\u7B97\u8853\u6F14\u7B97",children:"\u7B97\u8853\u6F14\u7B97"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u52A0\u7B97\nsum(rate(nginx_http_response_count_total{status="200"}[5m]))\n+\nsum(rate(nginx_http_response_count_total{status="201"}[5m]))\n\n# \u6E1B\u7B97\nsum(rate(nginx_http_response_count_total[5m])) - sum(rate(nginx_http_response_count_total{status=~"5.."}[5m]))\n\n# \u4E57\u7B97\uFF08\u30D0\u30A4\u30C8\u3092 MB \u306B\u5909\u63DB\uFF09\nnginx_http_response_size_bytes / 1024 / 1024\n\n# \u9664\u7B97\uFF08\u6BD4\u7387\u3092\u8A08\u7B97\uFF09\nsum(rate(nginx_http_response_count_total{status=~"5.."}[5m])) / sum(rate(nginx_http_response_count_total[5m]))\n\n'})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"\u6BD4\u8F03\u6F14\u7B97",children:"\u6BD4\u8F03\u6F14\u7B97"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# 100 \u3088\u308A\u5927\u304D\u3044\u5024\nnginx_http_response_count_total > 100\n\n# \u7279\u5B9A\u306E\u5024\u3068\u7B49\u3057\u3044\u5834\u5408\nnginx_http_response_count_total == 200\n\n# \u7BC4\u56F2\u6307\u5B9A\nnginx_http_response_count_total > 100 and nginx_http_response_count_total < 1000\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u5B9F\u8DF5\u306E\u30D2\u30F3\u30C8",children:"\u5B9F\u8DF5\u306E\u30D2\u30F3\u30C8"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"1. \u30B9\u30AF\u30EC\u30A4\u30D7\u9593\u9694\u306B\u5FDC\u3058\u305F\u6642\u9593\u7BC4\u56F2\u306E\u9078\u629E"})}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"\u30B9\u30AF\u30EC\u30A4\u30D7\u9593\u9694"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"\u6700\u5C0F\u6642\u9593\u7BC4\u56F2"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"\u63A8\u5968\u6642\u9593\u7BC4\u56F2"}),(0,r.jsx)(n.th,{children:"\u7406\u7531"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"15\u79D2"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"[30s]"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"[1m] \u4EE5\u4E0A"}),(0,r.jsx)(n.td,{children:"2\u301C4\u500B\u306E\u30C7\u30FC\u30BF\u30DD\u30A4\u30F3\u30C8\u3092\u78BA\u4FDD"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"30\u79D2"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"[1m]"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"[2m] \u4EE5\u4E0A"}),(0,r.jsx)(n.td,{children:"2\u301C4\u500B\u306E\u30C7\u30FC\u30BF\u30DD\u30A4\u30F3\u30C8\u3092\u78BA\u4FDD"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"1\u5206"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"[2m]"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"[5m] \u4EE5\u4E0A"}),(0,r.jsx)(n.td,{children:"2\u301C4\u500B\u306E\u30C7\u30FC\u30BF\u30DD\u30A4\u30F3\u30C8\u3092\u78BA\u4FDD"})]})]})]}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"2. \u30B0\u30EB\u30FC\u30D4\u30F3\u30B0\u30E9\u30D9\u30EB\u306E\u9078\u629E"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u7D30\u5206\u5316\u3057\u3059\u304E\uFF08\u6642\u7CFB\u5217\u304C\u591A\u3059\u304E\u308B\uFF09\nsum by (instance, method, status, path) (rate(nginx_http_response_count_total[5m]))\n\n# \u9069\u5207\u306A\u30B0\u30EB\u30FC\u30D4\u30F3\u30B0\nsum by (status) (rate(nginx_http_response_count_total[5m]))\n"})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"3. \u30A2\u30E9\u30FC\u30C8\u30EB\u30FC\u30EB\u4F5C\u6210\u6642"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u76F4\u8FD15\u5206\u9593\u306E\u30A8\u30E9\u30FC\u7387\u304C5%\u4EE5\u4E0A\u306E\u5834\u5408\nsum(rate(nginx_http_response_count_total{status=~"5.."}[5m])) / sum(rate(nginx_http_response_count_total[5m]))\n> 0.05\n'})}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"4. \u95A2\u6570\u306E\u7D44\u307F\u5408\u308F\u305B\u9806\u5E8F"})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# 1. rate() \u3092\u5148\u306B\n# 2. \u96C6\u8A08\u95A2\u6570\uFF08sum, avg \u306A\u3069\uFF09\n# 3. \u6570\u5B66\u6F14\u7B97\n\n# \u6B63\u3057\u3044\u9806\u5E8F\nsum(rate(nginx_http_response_count_total[5m])) * 100\n"})})]}),"\n",(0,r.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,r.jsx)(n.h3,{id:"\u305D\u306E\u4ED6\u306E\u95A2\u6570",children:"\u305D\u306E\u4ED6\u306E\u95A2\u6570"})}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"abs",children:"abs()"}),(0,r.jsxs)(n.p,{children:["\u5024\u306E ",(0,r.jsx)(n.strong,{children:"\u7D76\u5BFE\u5024"})," \u3092\u8FD4\u3059\u95A2\u6570\u3067\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"abs(rate(nginx_http_response_count_total[5m]) - 100)\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"round",children:"round()"}),(0,r.jsxs)(n.p,{children:["\u5024\u3092\u6700\u3082\u8FD1\u3044\u6574\u6570\u307E\u305F\u306F\u6307\u5B9A\u3057\u305F\u5358\u4F4D\u306B ",(0,r.jsx)(n.strong,{children:"\u4E38\u3081\u307E\u3059"}),"\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u5C0F\u6570\u70B9\u3092\u4E38\u3081\u308B\nround(sum(rate(nginx_http_response_count_total[5m])))\n\n# 10\u5358\u4F4D\u3067\u4E38\u3081\u308B\nround(sum(rate(nginx_http_response_count_total[5m])), 10)\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"clamp_max--clamp_min",children:"clamp_max() / clamp_min()"}),(0,r.jsxs)(n.p,{children:["\u6307\u5B9A\u3057\u305F ",(0,r.jsx)(n.strong,{children:"\u6700\u5927\u5024"})," \u307E\u305F\u306F ",(0,r.jsx)(n.strong,{children:"\u6700\u5C0F\u5024"})," \u3092\u8D85\u3048\u306A\u3044\u3088\u3046\u306B\u5236\u9650\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# \u6700\u5927\u5024\u30921000\u306B\u5236\u9650\nclamp_max(nginx_http_response_count_total, 1000)\n\n# \u6700\u5C0F\u5024\u30920\u306B\u5236\u9650\nclamp_min(nginx_http_response_count_total, 0)\n"})})]}),"\n",(0,r.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,r.jsx)(n.h3,{id:"\u6CE8\u610F\u4E8B\u9805",children:"\u6CE8\u610F\u4E8B\u9805"})}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"\u7A7A\u306E\u30E9\u30D9\u30EB\u5024\u306E\u30DE\u30C3\u30C1",children:"\u7A7A\u306E\u30E9\u30D9\u30EB\u5024\u306E\u30DE\u30C3\u30C1"}),(0,r.jsx)(n.p,{children:"\u7A7A\u306E\u30E9\u30D9\u30EB\u5024\u3092\u6307\u5B9A\u3059\u308B\u3068\u3001\u305D\u306E\u30E9\u30D9\u30EB\u304C\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u306A\u3044\u3059\u3079\u3066\u306E\u6642\u7CFB\u5217\u3082\u9078\u629E\u3055\u308C\u307E\u3059\u3002"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# environment \u30E9\u30D9\u30EB\u304C\u5B58\u5728\u3057\u306A\u3044\u3001\u307E\u305F\u306F\u7A7A\u306E\u3059\u3079\u3066\u306E\u6642\u7CFB\u5217\nnginx_http_response_count_total{environment=""}\n'})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"\u5FC5\u9808\u30BB\u30EC\u30AF\u30BF\u30FC",children:"\u5FC5\u9808\u30BB\u30EC\u30AF\u30BF\u30FC"}),(0,r.jsx)(n.p,{children:"\u30D9\u30AF\u30BF\u30FC\u30BB\u30EC\u30AF\u30BF\u30FC\u306B\u306F\u3001\u30E1\u30C8\u30EA\u30AF\u30B9\u540D\u307E\u305F\u306F\u7A7A\u6587\u5B57\u5217\u306B\u4E00\u81F4\u3057\u306A\u3044\u30E9\u30D9\u30EB\u30DE\u30C3\u30C1\u30E3\u30FC\u3092\u5C11\u306A\u304F\u3068\u30821\u3064\u6307\u5B9A\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u274C \u8AA4\u3063\u305F\u4F8B\n{job=~".*"}\n\n# \u2705 \u6B63\u3057\u3044\u4F8B\n{job=~".+"}\n{job=~".*", method="get"}\n'})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u4E0A\u306E\u8003\u616E",children:"\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u4E0A\u306E\u8003\u616E"}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u52B9\u7387\u7684\u306A\u30AF\u30A8\u30EA\u306E\u305F\u3081\u306E\u30D2\u30F3\u30C8"})}),(0,r.jsx)(n.p,{children:"\u30E1\u30C8\u30EA\u30AF\u30B9\u540D\u306E\u307F\u3092\u4F7F\u7528\u3059\u308B\u3068\u3001\u6570\u5343\u306E\u6642\u7CFB\u5217\u304C\u9078\u629E\u3055\u308C\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u5E38\u306B\u9069\u5207\u306A\u30E9\u30D9\u30EB\u30D5\u30A3\u30EB\u30BF\u30FC\u3092\u4F7F\u7528\u3057\u3066\u7D50\u679C\u3092\u7D5E\u308A\u8FBC\u307F\u307E\u3057\u3087\u3046\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u307E\u305A Table \u30D3\u30E5\u30FC\u3067\u7D50\u679C\u3092\u78BA\u8A8D\u3057\u3001\u9069\u5207\u306A\u7BC4\u56F2\u306B\u7D5E\u3063\u305F\u5F8C\u306B\u30B0\u30E9\u30D5\u30D3\u30E5\u30FC\u306B\u5207\u308A\u66FF\u3048\u307E\u3057\u3087\u3046\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u6570\u767E\u4EF6\u4EE5\u4E0B\u306E\u6642\u7CFB\u5217\u304C\u7406\u60F3\u7684\u3067\u3059\u3002"}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"staleness\u53E4\u3044\u30C7\u30FC\u30BF",children:"Staleness\uFF08\u53E4\u3044\u30C7\u30FC\u30BF\uFF09"}),(0,r.jsx)(n.p,{children:"\u6642\u7CFB\u5217\u304C\u53CE\u96C6\u3055\u308C\u306A\u304F\u306A\u308B\u3068\u300Cstale\u300D\u3068\u30DE\u30FC\u30AF\u3055\u308C\u307E\u3059\u3002"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"stale \u3068\u30DE\u30FC\u30AF\u3055\u308C\u308B\u3068\u3001\u30AF\u30A8\u30EA\u7D50\u679C\u306B\u542B\u307E\u308C\u306A\u304F\u306A\u308A\u307E\u3059\u3002"}),"\n",(0,r.jsx)(n.li,{children:"\u65E2\u5B9A\u3067\u306F\u30015\u5206\u9593\u30C7\u30FC\u30BF\u304C\u53CE\u96C6\u3055\u308C\u306A\u3044\u3068 stale \u3068\u898B\u306A\u3055\u308C\u307E\u3059\u3002"}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u6B63\u898F\u8868\u73FE",children:"\u6B63\u898F\u8868\u73FE"}),(0,r.jsx)(n.p,{children:"Prometheus \u306F RE2 \u69CB\u6587\u3092\u4F7F\u7528\u3057\u307E\u3059\u3002"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u3059\u3079\u3066\u306E\u6B63\u898F\u8868\u73FE\u306F\u5B8C\u5168\u306B\u30A2\u30F3\u30AB\u30FC\u3055\u308C\u307E\u3059\uFF08",(0,r.jsx)(n.code,{children:"^"})," \u3068 ",(0,r.jsx)(n.code,{children:"$"})," \u304C\u81EA\u52D5\u7684\u306B\u8FFD\u52A0\u3055\u308C\u307E\u3059\uFF09\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'env=~"foo"'})," \u306F ",(0,r.jsx)(n.code,{children:'env=~"^foo$"'})," \u3068\u540C\u3058\u610F\u5473\u3067\u3059\u3002"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsx)(n.h3,{id:"\u30B3\u30E1\u30F3\u30C8",children:"\u30B3\u30E1\u30F3\u30C8"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'# \u3053\u308C\u306F\u30B3\u30E1\u30F3\u30C8\u3067\u3059\nnginx_http_response_count_total{status="200"} # \u884C\u672B\u30B3\u30E1\u30F3\u30C8\u3082\u53EF\u80FD\u3067\u3059\n'})}),(0,r.jsx)("br",{}),(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u5B66\u7FD2\u306E\u63A8\u5968\u9806\u5E8F"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u57FA\u790E: rate(), sum(), avg()"}),"\n",(0,r.jsx)(n.li,{children:"\u4E2D\u7D1A: increase(), irate(), topk()"}),"\n",(0,r.jsx)(n.li,{children:"\u4E0A\u7D1A: \u8907\u96D1\u306A\u6BD4\u7387\u8A08\u7B97\u3084\u8907\u6570\u95A2\u6570\u306E\u7D44\u307F\u5408\u308F\u305B"}),"\n"]})]}),(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u53C2\u8003\u8CC7\u6599"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/basics/",children:"PromQL \u57FA\u672C\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/",children:"PromQL \u95A2\u6570\u30C9\u30AD\u30E5\u30E1\u30F3\u30C8"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/examples/",children:"PromQL \u4F7F\u7528\u4F8B"})}),"\n"]})]})]})]})}function x(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},84429:function(e,n,s){s.d(n,{R:()=>l,x:()=>c});var t=s(96540);let r={},i=t.createContext(r);function l(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);