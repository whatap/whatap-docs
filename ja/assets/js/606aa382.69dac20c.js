"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["97097"],{67501:function(e,n,t){t.r(n),t.d(n,{metadata:()=>s,default:()=>h,frontMatter:()=>d,contentTitle:()=>i,toc:()=>a,assets:()=>l});var s=JSON.parse('{"id":"kubernetes/etcd-dashboard","title":"etcd \u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9","description":"etcd\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9\u3092\u3054\u6848\u5185\u3057\u307E\u3059\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/kubernetes/etcd-dashboard.mdx","sourceDirName":"kubernetes","slug":"/kubernetes/etcd-dashboard","permalink":"/whatap-docs/ja/kubernetes/etcd-dashboard","draft":false,"unlisted":false,"editUrl":"undefined/docs/kubernetes/etcd-dashboard.mdx","tags":[],"version":"current","frontMatter":{"id":"etcd-dashboard","title":"etcd \u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9","description":"etcd\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9\u3092\u3054\u6848\u5185\u3057\u307E\u3059\u3002","keywords":["Kubernetes","Kubernetes\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0","etcd","\u30B3\u30F3\u30C8\u30ED\u30FC\u30EB\u30D7\u30EC\u30FC\u30F3"],"toc_max_heading_level":3,"isTranslationMissing":false},"sidebar":"kubeSidebar","previous":{"title":"kube-apiserver\u30E1\u30C8\u30EA\u30AF\u30B9\u7167\u4F1A","permalink":"/whatap-docs/ja/kubernetes/kube-apiserver-metrics-search"},"next":{"title":"kube-scheduler \u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9","permalink":"/whatap-docs/ja/kubernetes/kube-scheduler-dashboard"}}'),r=t(74848),c=t(84429);let d={id:"etcd-dashboard",title:"etcd \u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9",description:"etcd\u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9\u3092\u3054\u6848\u5185\u3057\u307E\u3059\u3002",keywords:["Kubernetes","Kubernetes\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0","etcd","\u30B3\u30F3\u30C8\u30ED\u30FC\u30EB\u30D7\u30EC\u30FC\u30F3"],toc_max_heading_level:3,isTranslationMissing:!1},i,l={},a=[{value:"\u57FA\u672C\u753B\u9762\u30AC\u30A4\u30C9",id:"\u57FA\u672C\u753B\u9762\u30AC\u30A4\u30C9",level:2},{value:"etcd\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u6709\u52B9\u5316",id:"etcd\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u6709\u52B9\u5316",level:2},{value:"\u8A8D\u8A3C\u66F8\u306E\u78BA\u8A8D\u3068Secret\u3092\u4F5C\u6210\u3059\u308B",id:"\u8A8D\u8A3C\u66F8\u306E\u78BA\u8A8D\u3068secret\u3092\u4F5C\u6210\u3059\u308B",level:3},{value:"etcd\u8A8D\u8A3C\u66F8\u306E\u78BA\u8A8D",id:"etcd\u8A8D\u8A3C\u66F8\u306E\u78BA\u8A8D",level:4},{value:"Secret\u751F\u6210",id:"secret\u751F\u6210",level:4},{value:"root\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u4F7F\u7528\u3067\u304D\u306A\u3044\u5834\u5408",id:"root\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u4F7F\u7528\u3067\u304D\u306A\u3044\u5834\u5408",level:5},{value:"\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u304C\u306A\u3044\u5834\u5408",id:"\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u304C\u306A\u3044\u5834\u5408",level:5},{value:"WhaTap\u306EKubernetes\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8<em>YAML</em>\u3092\u4FEE\u6B63",id:"whatap\u306Ekubernetes\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8yaml\u3092\u4FEE\u6B63",level:3},{value:"\u30B3\u30F3\u30C6\u30CA\u8A2D\u5B9A",id:"\u30B3\u30F3\u30C6\u30CA\u8A2D\u5B9A",level:4},{value:"Secret\u63A5\u7D9A",id:"secret\u63A5\u7D9A",level:4},{value:"\u5168\u4F53<em>YAML</em>\u306E\u4F8B",id:"\u5168\u4F53yaml\u306E\u4F8B",level:4},{value:"etcd\u30E1\u30C8\u30EA\u30AF\u30B9",id:"etcd-metrics",level:2}];function o(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components},{Cmdname:t,ImgLang:s}=n;return t||m("Cmdname",!0),s||m("ImgLang",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["\u30DB\u30FC\u30E0\u753B\u9762>\u30AF\u30E9\u30B9\u30BF\u30FC\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8(",(0,r.jsx)("code",{class:"my",children:"CP"}),")\u9078\u629E> ",(0,r.jsx)(t,{sid:"side_controlPlane",className:"uitext"})," > ",(0,r.jsx)(t,{sid:"side_etcdDashboard",className:"uitext"})]}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.mdxAdmonitionTitle,{}),(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u8981\u6C42\u4E8B\u9805"})}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"WhaTap Kubernetes\u30A8\u30FC\u30B8\u30A7\u30F3\u30C81.7.16\u30D0\u30FC\u30B8\u30E7\u30F3\u4EE5\u964D\u304C\u5FC5\u8981\u3067\u3059\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Kubernetes\u30AF\u30E9\u30B9\u30BF\u30FC\u30D7\u30ED\u30B8\u30A7\u30AF\u30C8(",(0,r.jsx)("code",{class:"my",children:"CP"}),")\u306E\u5834\u5408\u3001\u8A72\u5F53\u30E1\u30CB\u30E5\u30FC\u3092\u7167\u4F1A\u3067\u304D\u307E\u3059\u3002"]}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"etcd"}),"\u306F\u3001Kubernetes\u74B0\u5883\u3067\u30AF\u30E9\u30B9\u30BF\u30FC\u72B6\u614B\u306B\u95A2\u9023\u3059\u308B\u30C7\u30FC\u30BF\u3092\u4FDD\u5B58\u3059\u308B\u91CD\u8981\u306A\u30B3\u30F3\u30DD\u30FC\u30CD\u30F3\u30C8\u3067\u3059\u3002 WhaTap\u306Fetcd\u306E\u6027\u80FD\u3068\u72B6\u614B\u3092\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u3067\u304D\u308B",(0,r.jsx)(t,{sid:"side_etcdDashboard",className:"uitext"}),"\u3092\u63D0\u4F9B\u3057\u307E\u3059\u3002 \u3053\u308C\u306B\u3088\u308A\u3001\u30AF\u30E9\u30B9\u30BF\u30FC\u306E\u5B89\u5B9A\u6027\u3092\u9AD8\u3081\u3001\u554F\u984C\u304C\u767A\u751F\u3057\u305F\u5834\u5408\u306E\u8FC5\u901F\u306A\u5BFE\u5FDC\u304C\u53EF\u80FD\u306B\u306A\u308A\u307E\u3059\u3002"]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,r.jsx)(n.h2,{id:"\u57FA\u672C\u753B\u9762\u30AC\u30A4\u30C9",children:"\u57FA\u672C\u753B\u9762\u30AC\u30A4\u30C9"}),(0,r.jsx)(s,{img:"k8s-etcd-dashboard.png",desc:"etcd \u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9"}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(t,{sid:"side_etcdDashboard",className:"uitext"}),"\u306F\u30011\u6642\u9593\u306E\u9593\u306B\u53CE\u96C6\u3055\u308C\u305F\u4E3B\u8981\u306Aetcd\u30E1\u30C8\u30EA\u30AF\u30B9\u30921\u5206\u5468\u671F\u3067\u63D0\u4F9B\u3057\u307E\u3059\u3002 \u30C0\u30C3\u30B7\u30E5\u30DC\u30FC\u30C9\u3067\u78BA\u8A8D\u3067\u304D\u308B\u4E3B\u30E1\u30C8\u30EA\u30AF\u30B9\u306F\u6B21\u306E\u901A\u308A\u3067\u3059\u3002 \u30E1\u30C8\u30EA\u30AF\u30B9\u8A73\u7D30\u306F\u3001\u4E0B\u6BB5\u306E",(0,r.jsx)(n.a,{href:"#etcd-metrics",children:"\u30E1\u30C8\u30EA\u30AF\u30B9\u6848\u5185"}),"\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\u3002"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"etcd\u304C\u4F7F\u7528\u3059\u308B\u30EA\u30BD\u30FC\u30B9\u3001Pod\u306E\u518D\u8D77\u52D5\u6570\u3001\u8A73\u7D30\u30ED\u30B0\u3092\u63D0\u4F9B\u3057\u307E\u3059\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"etcd\u5185\u90E8\u306Ecommit\u53CA\u3073apply\u56DE\u6570\u3092\u63D0\u4F9B\u3057\u307E\u3059\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"etcd\u30EA\u30FC\u30C0\u30FC\u306E\u5B58\u5728\u6709\u7121\u53CA\u3073\u30EA\u30FC\u30C0\u30FC\u306E\u5909\u66F4\u5C65\u6B74\u3092\u63D0\u4F9B\u3057\u307E\u3059\u3002"}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,r.jsx)(n.h2,{id:"etcd\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u6709\u52B9\u5316",children:"etcd\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u6709\u52B9\u5316"}),(0,r.jsxs)(n.p,{children:["WhaTap Kubernetes\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u6642\u306B\u30C0\u30A6\u30F3\u30ED\u30FC\u30C9\u3057\u305F",(0,r.jsx)(n.em,{children:"YAML"}),"\u30D5\u30A1\u30A4\u30EB\u306E\u4FEE\u6B63\u3068mTLS\u8A8D\u8A3C\u66F8\u3092\u767B\u9332\u3057\u3066\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\u3092\u6709\u52B9\u306B\u3057\u307E\u3059\u3002"]})]}),"\n",(0,r.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,r.jsx)(n.h3,{id:"\u8A8D\u8A3C\u66F8\u306E\u78BA\u8A8D\u3068secret\u3092\u4F5C\u6210\u3059\u308B",children:"\u8A8D\u8A3C\u66F8\u306E\u78BA\u8A8D\u3068Secret\u3092\u4F5C\u6210\u3059\u308B"})}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"etcd\u8A8D\u8A3C\u66F8\u306E\u78BA\u8A8D",children:"etcd\u8A8D\u8A3C\u66F8\u306E\u78BA\u8A8D"}),(0,r.jsx)(n.p,{children:"etcd\u306EmTLS\u8A8D\u8A3C\u66F8\u304C\u5FC5\u8981\u3067\u3059\u3002 etcd\u8A8D\u8A3C\u66F8\u306F\u4E00\u822C\u7684\u306BControl Plane\u30CE\u30FC\u30C9\u306E*/etc/kubernetes/pki/etcd*\u7D4C\u8DEF\u306B\u4FDD\u5B58\u3055\u308C\u307E\u3059\u3002 \u30D5\u30A1\u30A4\u30EB\u6240\u6709\u8005\u306Froot\u30A2\u30AB\u30A6\u30F3\u30C8\u3067\u3042\u308A\u3001\u5FC5\u8981\u306A\u8A3C\u660E\u66F8\u306F\u4EE5\u4E0B\u306E\u901A\u308A\u3067\u3059\u3002"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"ca.crt"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"server.crt"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"server.key"})}),"\n"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"kubectl"}),"\u30B3\u30DE\u30F3\u30C9\u3092\u5B9F\u884C\u3059\u308B\u30DE\u30B7\u30F3\u3067\u3001\u6B21\u306E\u30B3\u30DE\u30F3\u30C9\u3092\u4F7F\u7528\u3057\u3066\u8A3C\u660E\u66F8\u304C\u5B58\u5728\u3059\u308B\u3053\u3068\u3092\u78BA\u8A8D\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo ls /etc/kubernetes/pki/etcd\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"secret\u751F\u6210",children:"Secret\u751F\u6210"}),(0,r.jsx)(n.p,{children:"\u8A3C\u660E\u66F8\u304C\u5B58\u5728\u3059\u308B\u5834\u5408\u3001\u6B21\u306E\u30B3\u30DE\u30F3\u30C9\u3092\u4F7F\u7528\u3057\u3066Secret\u3092\u751F\u6210\u3057\u307E\u3059\u3002"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo kubectl create secret generic whatap-etcd-cert -n whatap-monitoring --from-file=ca.crt=/etc/kubernetes/pki/etcd/ca.crt --from-file=server.crt=/etc/kubernetes/pki/etcd/server.crt --from-file=server.key=/etc/kubernetes/pki/etcd/server.key\n"})}),(0,r.jsx)(n.p,{children:"\u6B63\u5E38\u306BSecret\u751F\u6210\u6642\u3001\u6B21\u306E\u3088\u3046\u306A\u30E1\u30C3\u30BB\u30FC\u30B8\u304C\u51FA\u529B\u3055\u308C\u307E\u3059\u3002"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"secret/whatap-etcd-cert created\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h5",children:[(0,r.jsx)(n.h5,{id:"root\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u4F7F\u7528\u3067\u304D\u306A\u3044\u5834\u5408",children:"root\u30A2\u30AB\u30A6\u30F3\u30C8\u304C\u4F7F\u7528\u3067\u304D\u306A\u3044\u5834\u5408"}),(0,r.jsxs)(n.p,{children:["root\u30A2\u30AB\u30A6\u30F3\u30C8\u3067",(0,r.jsx)(n.code,{children:"kubectl"}),"\u30B3\u30DE\u30F3\u30C9\u304C\u4F7F\u7528\u3067\u304D\u306A\u3044\u5834\u5408\u306F\u3001\u6B21\u306E\u30AC\u30A4\u30C9\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\u3002"]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u8A3C\u660E\u66F8\u306E\u8907\u88FD\u5F8C\u3001\u30A2\u30AF\u30BB\u30B9\u53EF\u80FD\u306A\u30D1\u30B9\u306B\u79FB\u52D5\u3057\u307E\u3059\u3002"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"\u8907\u88FD\u3055\u308C\u305F\u8A3C\u660E\u66F8\u30D5\u30A1\u30A4\u30EB\u306E\u6240\u6709\u8005\u3092\u3001\u73FE\u5728\u306E\u6240\u6709\u8005\u306B\u5909\u66F4\u3057\u307E\u3059\u3002"}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h5",children:[(0,r.jsx)(n.h5,{id:"\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u304C\u306A\u3044\u5834\u5408",children:"\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u304C\u306A\u3044\u5834\u5408"}),(0,r.jsxs)(n.p,{children:["Kubernetes\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8YAML\u306E\u9069\u7528\u524D\u306BSecret\u3092\u4F5C\u308B\u5834\u5408\u3001",(0,r.jsx)(n.code,{children:"whatap-monitoring"}),"\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u304C\u5B58\u5728\u3057\u306A\u3044\u305F\u3081\u3001Secret\u4F5C\u6210\u306B\u5931\u6557\u3059\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002 \u6B21\u306E\u30B3\u30DE\u30F3\u30C9\u3092\u4F7F\u7528\u3057\u3066\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u3092\u4F5C\u6210\u3057\u3001\u518D\u5EA6Secret\u3092\u751F\u6210\u3057\u307E\u3059\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl create namespace whatap-monitoring\n"})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,r.jsxs)(n.h3,{id:"whatap\u306Ekubernetes\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8yaml\u3092\u4FEE\u6B63",children:["WhaTap\u306EKubernetes\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8",(0,r.jsx)(n.em,{children:"YAML"}),"\u3092\u4FEE\u6B63"]}),(0,r.jsxs)(n.p,{children:["WhaTap\u306EKubernetes\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8",(0,r.jsx)(n.em,{children:"YAML"}),"\u30D5\u30A1\u30A4\u30EB\u3092\u4FEE\u6B63\u3057\u3066\u30B3\u30F3\u30C6\u30CA\u8A2D\u5B9A\u3092\u8FFD\u52A0\u3057\u3001Secret\u3092\u63A5\u7D9A\u3057\u307E\u3059\u3002"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"\u30B3\u30F3\u30C6\u30CA\u8A2D\u5B9A",children:"\u30B3\u30F3\u30C6\u30CA\u8A2D\u5B9A"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Deployment\u306E",(0,r.jsx)(n.code,{children:"whatap-control-plane-helper"}),"\u30B3\u30F3\u30C6\u30CA\u5185\u306Eargs\u30BB\u30AF\u30B7\u30E7\u30F3\u306Betcd\u95A2\u9023\u8A2D\u5B9A\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"-collect_etcd_monitoring_enabled=true\n-etcd_hosts=\u30E6\u30FC\u30B6\u30FC\u306E_etcd_ip\u3001\u30E6\u30FC\u30B6\u30FC\u306E_etcd_ip\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6B21\u306E\u4F8B\u3092\u53C2\u7167\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:"title='Example'",children:"-etcd_hosts=192.168.1.45,192.168.1.46,192.168.1.47\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Deployment\u306E",(0,r.jsx)(n.code,{children:"whatap-master-agent"}),"\u30B3\u30F3\u30C6\u30CA\u306E\u74B0\u5883\u5909\u6570(env)\u306B\u6B21\u306E\u5185\u5BB9\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'- name: "collect_etcd_monitoring_enabled"\n  value: "true"\n'})}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsx)(n.h4,{id:"secret\u63A5\u7D9A",children:"Secret\u63A5\u7D9A"}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Deployment\u306E",(0,r.jsx)(n.code,{children:"whatap-master-agent"}),"\u5185\u306Evolumes\u30BB\u30AF\u30B7\u30E7\u30F3\u306BSecret\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:"{3}",children:'- name: "whatap-etcd-cert"\n  secret:\n    secretName: "whatap-etcd-cert"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"whatap-control-plane-helper"}),"\u30B3\u30F3\u30C6\u30CA\u306B\u5F53\u8A72Secret\u3092\u30DE\u30A6\u30F3\u30C8\u3057\u307E\u3059\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:"{2}",children:'volumeMounts:\n  - name: "whatap-etcd-cert"\n    readOnly: true\n    mountPath: "/etc/kubernetes/pki/etcd"\n'})}),"\n"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,r.jsxs)(n.h4,{id:"\u5168\u4F53yaml\u306E\u4F8B",children:["\u5168\u4F53",(0,r.jsx)(n.em,{children:"YAML"}),"\u306E\u4F8B"]}),(0,r.jsxs)(n.p,{children:["\u4EE5\u4E0B\u306F\u3001\u3059\u3079\u3066\u306E\u8A2D\u5B9A\u304C\u9069\u7528\u3055\u308C\u305F",(0,r.jsx)(n.em,{children:"YAML"}),"\u30D5\u30A1\u30A4\u30EB\u306E\u4F8B\u3067\u3059\u3002 \u30CF\u30A4\u30E9\u30A4\u30C8\u3055\u308C\u305F\u90E8\u5206\u3092\u53C2\u7167\u3057\u3066\u304F\u3060\u3055\u3044\u3002"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:"{31-34,55-56,64-67,76-78}",children:'apiVersion: "apps/v1"\nkind: "Deployment"\nmetadata:\n  name: "whatap-master-agent"\n  namespace: "whatap-monitoring"\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: "whatap-master-agent"\n  template:\n    metadata:\n      labels:\n        name: "whatap-master-agent"\n    spec:\n      containers:\n      - command:\n        - "/bin/entrypoint.sh"\n        env:\n        - name: "WHATAP_LICENSE"\n          value: "x208gnc8i1kko-z2p19shk7npc4t-z788sgbj3n123a"\n        - name: "WHATAP_HOST"\n          value: "59.13.101.109"\n        - name: "WHATAP_PORT"\n          value: "61574"\n        - name: "WHATP_MEM_LIMIT"\n          valueFrom:\n            resourceFieldRef:\n              containerName: "whatap-master-agent"\n              resource: "limits.memory"\n        - name: "collect_control_plane_monitoring_enabled"\n          value: "true"\n        - name: "collect_etcd_monitoring_enabled"\n          value: "true"\n        image: "whatap/kube_mon"\n        name: "whatap-master-agent"\n        ports:\n        - containerPort: 6600\n        resources:\n          limits:\n            cpu: "200m"\n            memory: "350Mi"\n          requests:\n            cpu: "100m"\n            memory: "300Mi"\n        volumeMounts:\n        - mountPath: "/bin/entrypoint.sh"\n          name: "start-script-volume"\n          readOnly: true\n          subPath: "entrypoint.sh"\n        - mountPath: "/whatap_conf"\n          name: "whatap-config-volume"\n      - args:\n        - "-collect_control_plane_monitoring_enabled=true"\n        - "-collect_etcd_monitoring_enabled=true"\n        - "-etcd_hosts=192.168.1.45,192.168.1.46,192.168.1.47"\n        command:\n        - "/data/agent/master/whatap_control_plane_helper"\n        image: "whatap/kube_mon"\n        imagePullPolicy: "Always"\n        name: "whatap-control-plane-helper"\n        ports:\n        - containerPort: 9496\n        volumeMounts:\n          - name: "whatap-etcd-cert"\n            readOnly: true\n            mountPath: "/etc/kubernetes/pki/etcd"\n      serviceAccount: "whatap"\n      volumes:\n      - configMap:\n          defaultMode: 448\n          name: "master-start-script"\n        name: "start-script-volume"\n      - emptyDir: {}\n        name: "whatap-config-volume"\n      - name: "whatap-etcd-cert"\n        secret:\n          secretName: "whatap-etcd-cert" \n'})})]}),"\n",(0,r.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,r.jsx)(n.h2,{id:"etcd-metrics",children:"etcd\u30E1\u30C8\u30EA\u30AF\u30B9"}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u533A\u5206"}),(0,r.jsx)(n.th,{children:"\u8AAC\u660E"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Pod\u6570"})}),(0,r.jsx)(n.td,{children:"\u73FE\u5728\u5B58\u5728\u3059\u308Betcd Pod\u306E\u6570"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"etcd\u518D\u8D77\u52D5\u6570\u306E\u63A8\u79FB"})}),(0,r.jsx)(n.td,{children:"etcd Pod\u306E\u518D\u8D77\u52D5\u56DE\u6570\u306E\u5408\u8A08\u63A8\u79FB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u30EA\u30FC\u30C0\u30FC\u5909\u66F4\u306E\u63A8\u79FB"})}),(0,r.jsx)(n.td,{children:"etcd Pod\u30EA\u30FC\u30C0\u30FC\u306E\u5909\u66F4\u56DE\u6570\u63A8\u79FB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"\u30EA\u30FC\u30C0\u30FC\u306E\u5B58\u5728\u6709\u7121"})}),(0,r.jsx)(n.td,{children:"\u30EA\u30FC\u30C0\u30FC\u306E\u5F79\u5272\u3092\u3059\u308Betcd Pod\u306E\u5B58\u5728\u6709\u7121"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CPU\u306E\u5408\u8A08\u4F7F\u7528\u91CF"})}),(0,r.jsx)(n.td,{children:"etcd Pod\u306E\u5408\u8A08CPU\u4F7F\u7528\u91CF"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"CPU\u4F7F\u7528\u91CF"})}),(0,r.jsx)(n.td,{children:"etcd Pod\u306ECPU\u4F7F\u7528\u91CF\u306E\u63A8\u79FB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Memory\u306E\u5408\u8A08\u4F7F\u7528\u91CF"})}),(0,r.jsx)(n.td,{children:"etcd Pod\u306E\u5408\u8A08\u30E1\u30E2\u30EA\u4F7F\u7528\u91CF"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Memory\u4F7F\u7528\u91CF"})}),(0,r.jsx)(n.td,{children:"etcd Pod\u306E\u30E1\u30E2\u30EA\u4F7F\u7528\u91CF\u306E\u63A8\u79FB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Commit\u63A8\u79FB"})}),(0,r.jsx)(n.td,{children:"etcd\u5909\u66F4\u4E8B\u9805commit\u56DE\u6570"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Apply\u63A8\u79FB"})}),(0,r.jsx)(n.td,{children:"commit\u4EE5\u5F8Capply\u3055\u308C\u305F\u56DE\u6570"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"etcd\u30ED\u30B0"})}),(0,r.jsx)(n.td,{children:"etcd Pod\u3067\u767A\u751F\u3057\u305F\u30ED\u30B0"})]})]})]})]})]})}function h(e={}){let{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}function m(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},84429:function(e,n,t){t.d(n,{R:()=>d,x:()=>i});var s=t(96540);let r={},c=s.createContext(r);function d(e){let n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);