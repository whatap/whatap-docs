"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["58039"],{31612:function(e,n,s){s.r(n),s.d(n,{metadata:()=>r,default:()=>h,frontMatter:()=>l,contentTitle:()=>c,toc:()=>a,assets:()=>d});var r=JSON.parse('{"id":"kubernetes/openagent","title":"\u30AA\u30FC\u30D7\u30F3\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\u69CB\u6210","description":"OpenAgent\uFF08\u30AA\u30FC\u30D7\u30F3\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\uFF09\u306E\u69CB\u6210\u30AC\u30A4\u30C9\u3067\u3059\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/kubernetes/openagent.mdx","sourceDirName":"kubernetes","slug":"/kubernetes/openagent","permalink":"/whatap-docs/ja/kubernetes/openagent","draft":false,"unlisted":false,"editUrl":"undefined/docs/kubernetes/openagent.mdx","tags":[],"version":"current","frontMatter":{"id":"openagent","title":"\u30AA\u30FC\u30D7\u30F3\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\u69CB\u6210","description":"OpenAgent\uFF08\u30AA\u30FC\u30D7\u30F3\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\uFF09\u306E\u69CB\u6210\u30AC\u30A4\u30C9\u3067\u3059\u3002","keywords":["Kubernetes","Kubernetes\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0","Whatap Operator","\u30AA\u30FC\u30D7\u30F3\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8"],"toc_max_heading_level":3,"isTranslationMissing":false},"sidebar":"kubeSidebar","previous":{"title":"APM\u81EA\u52D5\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u69CB\u6210","permalink":"/whatap-docs/ja/kubernetes/install-auto-application-agent"},"next":{"title":"WhaTap CR \u8A2D\u5B9A\u30AA\u30D7\u30B7\u30E7\u30F3","permalink":"/whatap-docs/ja/kubernetes/whatap-cr-configuration-options"}}'),t=s(74848),i=s(84429);let l={id:"openagent",title:"\u30AA\u30FC\u30D7\u30F3\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\u69CB\u6210",description:"OpenAgent\uFF08\u30AA\u30FC\u30D7\u30F3\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\uFF09\u306E\u69CB\u6210\u30AC\u30A4\u30C9\u3067\u3059\u3002",keywords:["Kubernetes","Kubernetes\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0","Whatap Operator","\u30AA\u30FC\u30D7\u30F3\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8"],toc_max_heading_level:3,isTranslationMissing:!1},c,d={},a=[{value:"\u8A2D\u5B9A",id:"\u8A2D\u5B9A",level:2},{value:"PodMetrics\u304A\u3088\u3073ServiceMetrics\u306E\u8A2D\u5B9A\u8981\u7D20",id:"podmetrics\u304A\u3088\u3073servicemetrics\u306E\u8A2D\u5B9A\u8981\u7D20",level:3},{value:"StaticEndpoints \u8A2D\u5B9A\u8981\u7D20",id:"staticendpoints-\u8A2D\u5B9A\u8981\u7D20",level:3},{value:"addNodeLabel \u6A5F\u80FD",id:"addnodelabel-\u6A5F\u80FD",level:3},{value:"TLS \u8A2D\u5B9A",id:"tls-\u8A2D\u5B9A",level:2},{value:"HTTP vs HTTPS \u306E\u6C7A\u5B9A\u65B9\u6CD5",id:"http-vs-https-\u306E\u6C7A\u5B9A\u65B9\u6CD5",level:3},{value:"TLS \u8A2D\u5B9A\u30AA\u30D7\u30B7\u30E7\u30F3",id:"tls-\u8A2D\u5B9A\u30AA\u30D7\u30B7\u30E7\u30F3",level:3},{value:"insecureSkipVerify",id:"insecureskipverify",level:3},{value:"\u8A2D\u5B9A\u4F8B",id:"\u8A2D\u5B9A\u4F8B",level:3},{value:"\u30E1\u30C8\u30EA\u30C3\u30AF\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u8A2D\u5B9A",id:"metricRelabelConfigs",level:2},{value:"\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u8A2D\u5B9A\u9805\u76EE",id:"\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u8A2D\u5B9A\u9805\u76EE",level:3},{value:"\u5BFE\u5FDC\u3057\u3066\u3044\u308B\u30A2\u30AF\u30B7\u30E7\u30F3\uFF08action\uFF09",id:"\u5BFE\u5FDC\u3057\u3066\u3044\u308B\u30A2\u30AF\u30B7\u30E7\u30F3action",level:3},{value:"\u7279\u6B8A\u30E9\u30D9\u30EB",id:"\u7279\u6B8A\u30E9\u30D9\u30EB",level:3},{value:"\u4F8B\u984C",id:"\u4F8B\u984C",level:3},{value:"\u4F8B\u984C\uFF11. \u7279\u5B9A\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u3092\u4FDD\u6301",id:"\u4F8B\u984C\uFF11-\u7279\u5B9A\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u3092\u4FDD\u6301",level:4},{value:"\u4F8B\u984C\uFF12. \u6B63\u898F\u8868\u73FE\u3092\u4F7F\u7528\u3057\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0",id:"\u4F8B\u984C\uFF12-\u6B63\u898F\u8868\u73FE\u3092\u4F7F\u7528\u3057\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0",level:4},{value:"\u4F8B\u984C\uFF13. \u30E9\u30D9\u30EB\u540D\u306E\u5909\u66F4",id:"\u4F8B\u984C\uFF13-\u30E9\u30D9\u30EB\u540D\u306E\u5909\u66F4",level:4},{value:"\u4F8B\u984C 4. \u8907\u6570\u306E\u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u306E\u7D44\u307F\u5408\u308F\u305B",id:"\u4F8B\u984C-4-\u8907\u6570\u306E\u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u306E\u7D44\u307F\u5408\u308F\u305B",level:4},{value:"\u4F8B\u984C 5. \u9759\u7684\u30E9\u30D9\u30EB\u306E\u8FFD\u52A0",id:"\u4F8B\u984C-5-\u9759\u7684\u30E9\u30D9\u30EB\u306E\u8FFD\u52A0",level:4},{value:"\u4F8B\u984C. \u7DCF\u5408\u7684\u306A\u52D5\u4F5C",id:"\u4F8B\u984C-\u7DCF\u5408\u7684\u306A\u52D5\u4F5C",level:4},{value:"Kubernetes \u30E1\u30C8\u30EA\u30AF\u30B9\u53CE\u96C6\u306E\u4F8B",id:"kubernetes-\u30E1\u30C8\u30EA\u30AF\u30B9\u53CE\u96C6\u306E\u4F8B",level:2}];function o(e){let n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"OpenAgent\u306F\u3001Prometheus\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u304B\u3089\u30E1\u30C8\u30EA\u30AF\u30B9\u3092\u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u3057\u3001\u305D\u308C\u3092\u51E6\u7406\u3057\u3066WhaTap\u30B5\u30FC\u30D0\u30FC\u306B\u9001\u4FE1\u3059\u308B\u5F79\u5272\u3092\u62C5\u3044\u307E\u3059\u3002\nPrometheus\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u304B\u3089\u30E1\u30C8\u30EA\u30AF\u30B9\u3092\u53CE\u96C6\u3057\u3001WhaTap\u30B5\u30FC\u30D0\u30FC\u306B\u9001\u4FE1\u3059\u308BGo\u30D9\u30FC\u30B9\u306E\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\u3067\u3059\u3002"}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"\u8A2D\u5B9A",children:"\u8A2D\u5B9A"}),(0,t.jsxs)(n.p,{children:["WhatapOperator\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3057\u305F\u5F8C\u3001\u30E6\u30FC\u30B6\u30FC\u306F ",(0,t.jsx)(n.code,{children:"WhatapAgent"})," CR\uFF08\u30AB\u30B9\u30BF\u30E0\u30EA\u30BD\u30FC\u30B9\uFF09\u3092\u901A\u3058\u3066OpenMetrics\u306E\u5BFE\u8C61\u3092\u8A2D\u5B9A\u3057\u307E\u3059\u3002"]}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"PodMonitor"}),": Pod\u30E9\u30D9\u30EB\u30BB\u30EC\u30AF\u30BF\u30FC\u3092\u5229\u7528\u3057\u305F\u52D5\u7684\u30C7\u30A3\u30B9\u30AB\u30D0\u30EA\uFF08Prometheus Operator\u306EPodMonitor\u3068\u985E\u4F3C\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"ServiceMonitor"}),": Service\u30E9\u30D9\u30EB\u30BB\u30EC\u30AF\u30BF\u30FC\u3092\u5229\u7528\u3057\u305F\u52D5\u7684\u30C7\u30A3\u30B9\u30AB\u30D0\u30EA\uFF08Prometheus Operator\u306EServiceMonitor\u3068\u985E\u4F3C\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"StaticEndpoints"}),": \u56FA\u5B9A\u306EIP\u30A2\u30C9\u30EC\u30B9\u3068\u30DD\u30FC\u30C8\u3092\u76F4\u63A5\u5165\u529B\uFF08Prometheus\u306Estatic_configs\u3068\u985E\u4F3C\uFF09"]}),"\n"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'features:\n  openAgent:\n    enabled: true\n    targets:\n      # 1. PodMonitor: Pod\u30E9\u30D9\u30EB\u30BB\u30EC\u30AF\u30BF\u30FC\u3092\u5229\u7528\u3057\u305F\u52D5\u7684\u30C7\u30A3\u30B9\u30AB\u30D0\u30EA\u30FC\n      - targetName: my-app-pod-metrics\n        type: PodMonitor\n        namespaceSelector:\n          matchNames:\n            - "production"\n        selector:\n          matchLabels:\n            app: my-app\n        endpoints:\n        - port: "web-metrics"  # Pod Spec\u306B\u5B9A\u7FA9\u3055\u308C\u305FPort\u540D\u307E\u305F\u306F\u5B9F\u969B\u306EPort\u756A\u53F7\n          path: "/metrics"     # \u30C7\u30D5\u30A9\u30EB\u30C8\u306F /metrics\u3001\u5FC5\u8981\u306B\u5FDC\u3058\u3066\u518D\u5B9A\u7FA9\n          interval: "15s"      # \u30C7\u30D5\u30A9\u30EB\u30C8\u306F\u30B0\u30ED\u30FC\u30D0\u30EB\u8A2D\u5B9A\u3001\u5FC5\u8981\u306B\u5FDC\u3058\u3066\u518D\u5B9A\u7FA9\n          scheme: "http"\n          timeout: "10s"\n	        metricRelabelConfigs:  # \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5F8C\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u8A2D\u5B9A\n	          - source_labels: [__name__]\n	            regex: "http_requests_total"\n	            action: keep\n	          - source_labels: [method]\n	            target_label: http_method\n	            replacement: "${1}"\n	            action: replace\n\n      # 2. ServiceMonitor: Service\u30E9\u30D9\u30EB\u30BB\u30EC\u30AF\u30BF\u30FC\u3092\u5229\u7528\u3057\u305F\u52D5\u7684\u30C7\u30A3\u30B9\u30AB\u30D0\u30EA\u30FC\n      - targetName: my-service-metrics\n        type: ServiceMonitor\n        namespaceSelector:\n          matchNames:\n            - "default"\n        selector:\n          matchLabels:\n            service: my-backend-service\n        endpoints:\n        - port: "http-metrics"  # Service Spec\u306B\u5B9A\u7FA9\u3055\u308C\u305FPort\u540D\u307E\u305F\u306F\u5B9F\u969B\u306ETarget Port\u756A\u53F7\n          path: "/actuator/prometheus"\n          interval: "30s"\n          metricRelabelConfigs:\n            - source_labels: [__name__]\n              regex: "jvm_.*"\n              action: keep\n            - source_labels: [area]\n              target_label: memory_area\n              replacement: "${1}"\n              action: replace\n\n      # 3. StaticEndpoints: \u56FA\u5B9A\u3055\u308C\u305FIP\u30A2\u30C9\u30EC\u30B9\u3068\u30DD\u30FC\u30C8\u3092\u76F4\u63A5\u5165\u529B\n      - targetName: my-external-db-metrics\n        type: StaticEndpoints\n        # enabled: true  # \u30BF\u30FC\u30B2\u30C3\u30C8\u306E\u6709\u52B9\u5316\u6709\u7121\uFF08\u65E2\u5B9A\u5024: true\u3001\u7701\u7565\u53EF\u80FD\uFF09\n        endpoints:\n          - address: "192.168.1.100:9100"\n            scheme: "http"\n            path: "/metrics"\n            interval: "60s"\n            metricRelabelConfigs:\n              - source_labels: [__name__]\n                regex: "node_(cpu|memory).*"\n                action: keep\n              - source_labels: [instance]\n                target_label: server\n                replacement: "${1}"\n                action: replace\n'})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"podmetrics\u304A\u3088\u3073servicemetrics\u306E\u8A2D\u5B9A\u8981\u7D20",children:"PodMetrics\u304A\u3088\u3073ServiceMetrics\u306E\u8A2D\u5B9A\u8981\u7D20"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"targetName"}),": \u30BF\u30FC\u30B2\u30C3\u30C8\u306E\u540D\u524D\uFF08\u30ED\u30B0\u304A\u3088\u3073\u8B58\u5225\u7528\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"type"}),': \u30BF\u30FC\u30B2\u30C3\u30C8\u306E\u7A2E\u985E\uFF08"PodMetrics" \u307E\u305F\u306F "ServiceMetrics"\uFF09']}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"namespaceSelector"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5BFE\u8C61\u306E\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"matchNames"}),": \u540D\u524D\u3067\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u3092\u9078\u629E"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"matchLabels"}),": \u30E9\u30D9\u30EB\u3067\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u3092\u9078\u629E"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"matchExpressions"}),": \u5F0F\u3067\u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u3092\u9078\u629E"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"selector"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5BFE\u8C61\u306EPod\u307E\u305F\u306FService\u306E\u9078\u629E"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"matchLabels"}),": \u30E9\u30D9\u30EB\u3067Pod\u307E\u305F\u306FService\u3092\u9078\u629E"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"matchExpressions"}),": \u5F0F\u3067Pod\u307E\u305F\u306FService\u3092\u9078\u629E"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"endpoints"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5BFE\u8C61\u306E\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u5B9A\u7FA9"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"port"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u3059\u308B\u30DD\u30FC\u30C8\u540D\u307E\u305F\u306F\u756A\u53F7"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"path"}),": \u30E1\u30C8\u30EA\u30AF\u30B9\u30D1\u30B9\uFF08\u30C7\u30D5\u30A9\u30EB\u30C8\u306F globalPath\u3001\u5FC5\u8981\u306B\u5FDC\u3058\u3066\u4E0A\u66F8\u304D\u53EF\u80FD\uFF09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"interval"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u9593\u9694\uFF08\u30C7\u30D5\u30A9\u30EB\u30C8\u306F globalInterval\u3001\u5FC5\u8981\u306B\u5FDC\u3058\u3066\u4E0A\u66F8\u304D\u53EF\u80FD\uFF09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scheme"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u30D7\u30ED\u30C8\u30B3\u30EB\uFF08http \u307E\u305F\u306F https\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u306F http\uFF09"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"timeout"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u306E\u30BF\u30A4\u30E0\u30A2\u30A6\u30C8"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"honorLabels"}),": \u5BFE\u8C61\u304B\u3089\u63D0\u4F9B\u3055\u308C\u308B\u30E9\u30D9\u30EB\u3092\u512A\u5148\u3059\u308B\u304B\u3069\u3046\u304B"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"metricRelabelConfigs"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5F8C\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u8A2D\u5B9A\uFF08Prometheus \u306E metric_relabel_configs \u306B\u985E\u4F3C\uFF09"]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"staticendpoints-\u8A2D\u5B9A\u8981\u7D20",children:"StaticEndpoints \u8A2D\u5B9A\u8981\u7D20"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"targetName"}),": \u30BF\u30FC\u30B2\u30C3\u30C8\u306E\u540D\u524D\uFF08\u30ED\u30B0\u304A\u3088\u3073\u8B58\u5225\u7528\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"type"}),': \u30BF\u30FC\u30B2\u30C3\u30C8\u306E\u30BF\u30A4\u30D7\uFF08"StaticEndpoints"\uFF09']}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"endpoints"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5BFE\u8C61\u306E\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u5B9A\u7FA9"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"address"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5BFE\u8C61\u306E\u30A2\u30C9\u30EC\u30B9\uFF08IP",":PORT"," \u307E\u305F\u306F HOSTNAME",":PORT","\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"path"}),": \u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u30D1\u30B9\uFF08\u30C7\u30D5\u30A9\u30EB\u30C8: /metrics\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"scheme"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u30D7\u30ED\u30C8\u30B3\u30EB\uFF08http \u307E\u305F\u306F https\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u306F http\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"interval"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u9593\u9694\uFF08\u30C7\u30D5\u30A9\u30EB\u30C8: 60s\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"tlsConfig"}),": TLS\u8A2D\u5B9A"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"metricRelabelConfigs"}),": \u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5F8C\u306E\u30E1\u30C8\u30EA\u30C3\u30AF\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u8A2D\u5B9A"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"addnodelabel-\u6A5F\u80FD",children:"addNodeLabel \u6A5F\u80FD"}),(0,t.jsxs)(n.p,{children:["\u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5BFE\u8C61\u304C\u30CE\u30FC\u30C9\u306B\u30B9\u30B1\u30B8\u30E5\u30FC\u30EA\u30F3\u30B0\u3055\u308C\u3066\u3044\u308B\u5834\u5408\u3001 ",(0,t.jsx)(n.code,{children:"addNodeLabel"})," \u30AA\u30D7\u30B7\u30E7\u30F3\u3092\u4F7F\u7528\u3057\u3066\u3001\u30B9\u30B1\u30B8\u30E5\u30FC\u30EA\u30F3\u30B0\u3055\u308C\u305F\u30CE\u30FC\u30C9\u540D\u3092\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u30E9\u30D9\u30EB\u3068\u3057\u3066\u8FFD\u52A0\u3067\u304D\u307E\u3059\u3002"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u8A2D\u5B9A\u4F4D\u7F6E"}),"\uFF1A\u30BF\u30FC\u30B2\u30C3\u30C8\u30EC\u30D9\u30EB\u307E\u305F\u306F\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u30EC\u30D9\u30EB\u3067\u8A2D\u5B9A\u53EF\u80FD"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u65E2\u5B9A\u5024"}),": ",(0,t.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u52D5\u4F5C"}),"\uFF1A ",(0,t.jsx)(n.code,{children:"true"}),"\u306B\u8A2D\u5B9A\u3059\u308B\u3068\u3001\u3059\u3079\u3066\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306B",(0,t.jsx)(n.code,{children:"node"}),"\u30E9\u30D9\u30EB\u304C\u8FFD\u52A0\u3055\u308C\u3001\u30AA\u30D6\u30B8\u30A7\u30AF\u30C8\u304C\u5B9F\u884C\u3055\u308C\u3066\u3044\u308B\u30CE\u30FC\u30C9\u540D\u304C\u5024\u3068\u3057\u3066\u4ED8\u52A0\u3055\u308C\u307E\u3059\u3002"]}),"\n"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"title='\u4F7F\u7528\u4F8B'",children:'# \u30BF\u30FC\u30B2\u30C3\u30C8\u30EC\u30D9\u30EB\u3067 addNodeLabel \u3092\u8A2D\u5B9A\n- targetName: node-exporter\n  type: PodMonitor\n  namespaceSelector:\n    matchNames:\n      - "monitoring"\n  selector:\n    matchLabels:\n      app: node-exporter\n  endpoints:\n    - port: "metrics"\n      path: "/metrics"\n      interval: "30s"\n      addNodeLabel: true  # \u3053\u306E\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u306B\u30CE\u30FC\u30C9\u30E9\u30D9\u30EB\u3092\u8FFD\u52A0\n      metricRelabelConfigs:\n        # \u30CE\u30FC\u30C9\u30E9\u30D9\u30EB\u3092\u4F7F\u7528\u3057\u305F\u30EA\u30E9\u30D9\u30EA\u30F3\u30B0\u306E\u4F8B\n        - source_labels: [node]\n          target_label: kubernetes_node\n          action: replace\n\n# \u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u30EC\u30D9\u30EB\u3067 addNodeLabel \u3092\u8A2D\u5B9A\n- targetName: dcgm-exporter\n  type: PodMonitor\n  namespaceSelector:\n    matchNames:\n      - "kube-system"\n  selector:\n    matchLabels:\n      app: dcgm-exporter\n  endpoints:\n  - port: "metrics"\n    path: "/metrics"\n    interval: "30s"\n    addNodeLabel: true  # \u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u30EC\u30D9\u30EB\u3067 addNodeLabel \u3092\u8A2D\u5B9A\n		metricRelabelConfigs:\n      - source_labels: [node]\n        target_label: gpu_node\n        action: replace\n'})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"tls-\u8A2D\u5B9A",children:"TLS \u8A2D\u5B9A"}),(0,t.jsx)(n.p,{children:"OpenAgent \u306F\u3001HTTPS \u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u306B\u63A5\u7D9A\u3059\u308B\u969B\u306B TLS\uFF08Transport Layer Security\uFF09\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u307E\u3059\u3002\u4EE5\u4E0B\u306F TLS \u306B\u95A2\u3059\u308B\u8A2D\u5B9A\u30AA\u30D7\u30B7\u30E7\u30F3\u3067\u3059\u3002"})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"http-vs-https-\u306E\u6C7A\u5B9A\u65B9\u6CD5",children:"HTTP vs HTTPS \u306E\u6C7A\u5B9A\u65B9\u6CD5"}),(0,t.jsx)(n.p,{children:"OpenAgent \u306F\u4EE5\u4E0B\u306E\u30EB\u30FC\u30EB\u306B\u5F93\u3063\u3066\u3001HTTP \u307E\u305F\u306F HTTPS \u30D7\u30ED\u30C8\u30B3\u30EB\u3092\u4F7F\u7528\u3059\u308B\u304B\u3092\u6C7A\u5B9A\u3057\u307E\u3059\u3002"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"PodMonitor \u304A\u3088\u3073 ServiceMonitor \u30BF\u30FC\u30B2\u30C3\u30C8"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'\u30DD\u30FC\u30C8\u540D\u304C "https" \u306E\u5834\u5408\u306F\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u3067 HTTPS \u304C\u4F7F\u7528\u3055\u308C\u307E\u3059\u3002'}),"\n",(0,t.jsx)(n.li,{children:"\u305D\u308C\u4EE5\u5916\u306E\u5834\u5408\u306F\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u3067 HTTP \u304C\u4F7F\u7528\u3055\u308C\u307E\u3059\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"StaticEndpoints \u30BF\u30FC\u30B2\u30C3\u30C8"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"TLS \u8A2D\u5B9A\u304C\u5B58\u5728\u3059\u308B\u5834\u5408\u306F\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u3067 HTTPS \u304C\u4F7F\u7528\u3055\u308C\u307E\u3059\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u305D\u308C\u4EE5\u5916\u306E\u5834\u5408\u306F\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u3067 HTTP \u304C\u4F7F\u7528\u3055\u308C\u307E\u3059\u3002"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u3059\u3079\u3066\u306E\u30BF\u30FC\u30B2\u30C3\u30C8\u30BF\u30A4\u30D7"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u307E\u305F\u306F\u30BF\u30FC\u30B2\u30C3\u30C8\u306B ",(0,t.jsx)(n.code,{children:"scheme"})," \u8A2D\u5B9A\u304C\u660E\u793A\u7684\u306B\u3042\u308B\u5834\u5408\u3001\u305D\u306E\u8A2D\u5B9A\u304C\u30C7\u30D5\u30A9\u30EB\u30C8\u5024\u3092\u4E0A\u66F8\u304D\u3057\u307E\u3059\u3002"]}),"\n"]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"tls-\u8A2D\u5B9A\u30AA\u30D7\u30B7\u30E7\u30F3",children:"TLS \u8A2D\u5B9A\u30AA\u30D7\u30B7\u30E7\u30F3"}),(0,t.jsxs)(n.p,{children:["TLS \u306E\u8A2D\u5B9A\u306F ",(0,t.jsx)(n.code,{children:"tlsConfig"})," \u30BB\u30AF\u30B7\u30E7\u30F3\u3067\u69CB\u6210\u3067\u304D\u307E\u3059\u3002"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'endpoints:\n  - port: "https"\n    path: "/metrics"\n    scheme: "https"  # HTTPS \u3092\u660E\u793A\u7684\u306B\u4F7F\u7528\n    tlsConfig:\n      insecureSkipVerify: true  # \u8A3C\u660E\u66F8\u306E\u691C\u8A3C\u3092\u30B9\u30AD\u30C3\u30D7\n'})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"insecureskipverify",children:"insecureSkipVerify"}),(0,t.jsx)(n.p,{children:"insecureSkipVerify` \u30AA\u30D7\u30B7\u30E7\u30F3\u306F\u3001\u30B5\u30FC\u30D0\u30FC\u8A3C\u660E\u66F8\u306E\u6709\u52B9\u6027\u691C\u8A3C\u3092\u30B9\u30AD\u30C3\u30D7\u3059\u308B\u8A2D\u5B9A\u3067\u3059\u3002\u3053\u306E\u30AA\u30D7\u30B7\u30E7\u30F3\u306F\u4EE5\u4E0B\u306E\u3088\u3046\u306A\u5834\u5408\u306B\u6709\u7528\u3067\u3059\u3002"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u81EA\u5DF1\u7F72\u540D\u8A3C\u660E\u66F8\u3092\u4F7F\u7528\u3059\u308B\u30B5\u30FC\u30D0\u30FC\u306B\u63A5\u7D9A\u3059\u308B\u5834\u5408"}),"\n",(0,t.jsx)(n.li,{children:"\u958B\u767A\u307E\u305F\u306F\u30C6\u30B9\u30C8\u74B0\u5883\u3067\u8A3C\u660E\u66F8\u306E\u691C\u8A3C\u304C\u4E0D\u8981\u306A\u5834\u5408"}),"\n",(0,t.jsx)(n.li,{children:"\u5185\u90E8\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u5185\u3067\u4FE1\u983C\u3067\u304D\u308B\u30B5\u30FC\u30D0\u30FC\u306B\u63A5\u7D9A\u3059\u308B\u5834\u5408"}),"\n"]}),(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u6CE8\u610F"})}),(0,t.jsxs)(n.p,{children:["\u672C\u756A\u74B0\u5883\u3067\u306F\u30BB\u30AD\u30E5\u30EA\u30C6\u30A3\u4E0A\u306E\u7406\u7531\u304B\u3089\u3001",(0,t.jsx)(n.code,{children:"insecureSkipVerify: false"})," \u3092\u4F7F\u7528\u3059\u308B\u3053\u3068\u3092\u63A8\u5968\u3057\u307E\u3059\u3002\u81EA\u5DF1\u7F72\u540D\u8A3C\u660E\u66F8\u3092\u4F7F\u7528\u3059\u308B\u5834\u5408\u306F\u3001\u305D\u306E\u8A3C\u660E\u66F8\u3092\u4FE1\u983C\u3067\u304D\u308B\u8A8D\u8A3C\u5C40\uFF08CA\uFF09\u3068\u3057\u3066\u8FFD\u52A0\u3059\u308B\u65B9\u304C\u3001\u3088\u308A\u5B89\u5168\u306A\u65B9\u6CD5\u3067\u3059\u3002"]})]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"\u8A2D\u5B9A\u4F8B",children:"\u8A2D\u5B9A\u4F8B"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"title='ServiceMonitor\uC5D0\uC11C TLS \u8A2D\u5B9A\u4F8B'",children:'- targetName: kube-apiserver\n  type: ServiceMonitor\n  namespaceSelector:\n    matchNames:\n      - "default"\n  selector:\n    matchLabels:\n      component: apiserver\n      provider: kubernetes\n  endpoints:\n    - port: "https"  # \u30DD\u30FC\u30C8\u540D\u304C "https" \u306E\u305F\u3081\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u3067 HTTPS \u3092\u4F7F\u7528\n      path: "/metrics"\n      interval: "30s"\n      scheme: "https"  # \u660E\u793A\u7684\u306B HTTPS \u3092\u6307\u5B9A\uFF08\u4EFB\u610F\uFF09\n      tlsConfig:\n        insecureSkipVerify: true  # \u8A3C\u660E\u66F8\u306E\u691C\u8A3C\u3092\u30B9\u30AD\u30C3\u30D7\n      metricRelabelConfigs:\n        - source_labels: [__name__]\n          regex: "apiserver_request_total"\n          action: keep\n        - source_labels: [verb]\n          target_label: http_verb\n          replacement: "${1}"\n          action: replace\n'})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"metricRelabelConfigs",children:"\u30E1\u30C8\u30EA\u30C3\u30AF\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u8A2D\u5B9A"}),(0,t.jsxs)(n.p,{children:["OpenAgent \u306F\u3001Prometheus \u306E ",(0,t.jsx)(n.code,{children:"metric_relabel_configs"})," \u306B\u985E\u4F3C\u3057\u305F\u30E1\u30C8\u30EA\u30C3\u30AF\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u6A5F\u80FD\u3092\u30B5\u30DD\u30FC\u30C8\u3057\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u6A5F\u80FD\u3092\u4F7F\u7528\u3059\u308B\u3068\u3001\u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u5F8C\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u3092\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0\u3057\u305F\u308A\u3001\u30E9\u30D9\u30EB\u3092\u5909\u66F4\u3057\u305F\u308A\u3067\u304D\u307E\u3059\u3002"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u8A2D\u5B9A\u9805\u76EE",children:"\u518D\u30E9\u30D9\u30EA\u30F3\u30B0\u8A2D\u5B9A\u9805\u76EE"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"source_labels"}),": \u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u306E\u30EA\u30B9\u30C8\uFF08\u914D\u5217\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"separator"}),": \u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u306E\u5024\u3092\u9023\u7D50\u3059\u308B\u969B\u306B\u4F7F\u7528\u3059\u308B\u533A\u5207\u308A\u6587\u5B57\uFF08\u30C7\u30D5\u30A9\u30EB\u30C8\uFF1A",(0,t.jsx)(n.code,{children:";"}),")"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"target_label"}),": \u5BFE\u8C61\u30E9\u30D9\u30EB\uFF08\u7D50\u679C\u3092\u4FDD\u5B58\u3059\u308B\u30E9\u30D9\u30EB\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"regex"}),": \u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u306E\u5024\u306B\u9069\u7528\u3059\u308B\u6B63\u898F\u8868\u73FE"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"replacement"}),"\uFF1A\u7F6E\u63DB\u5024\uFF08\u6B63\u898F\u8868\u73FE\u30AD\u30E3\u30D7\u30C1\u30E3\u30B0\u30EB\u30FC\u30D7\u306E\u53C2\u7167\u304C\u53EF\u80FD\u3001\u4F8B\uFF1A",(0,t.jsx)(n.code,{children:"${1}"}),"\uFF09"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"action"}),"\uFF1A\u5B9F\u884C\u3059\u308B\u30A2\u30AF\u30B7\u30E7\u30F3\uFF08keep\u3001drop\u3001replace\uFF09"]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"\u5BFE\u5FDC\u3057\u3066\u3044\u308B\u30A2\u30AF\u30B7\u30E7\u30F3action",children:"\u5BFE\u5FDC\u3057\u3066\u3044\u308B\u30A2\u30AF\u30B7\u30E7\u30F3\uFF08action\uFF09"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"keep"}),"\uFF1A\u6B63\u898F\u8868\u73FE\u3068\u4E00\u81F4\u3059\u308B\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u3092\u4FDD\u6301"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"drop"}),"\uFF1A\u6B63\u898F\u8868\u73FE\u3068\u4E00\u81F4\u3059\u308B\u30E1\u30C8\u30EA\u30AF\u30B9\u3092\u524A\u9664"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"replace"}),"\uFF1A\u5BFE\u8C61\u30E9\u30D9\u30EB\u306E\u5024\u3092\u7F6E\u63DB\u5024\u306B\u5909\u66F4"]}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,t.jsx)(n.h3,{id:"\u7279\u6B8A\u30E9\u30D9\u30EB",children:"\u7279\u6B8A\u30E9\u30D9\u30EB"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"name"}),"\uFF1A\u30E1\u30C8\u30EA\u30AF\u30B9\u540D\u3092\u8868\u3059\u7279\u6B8A\u30E9\u30D9\u30EB"]}),"\n"]})]}),"\n",(0,t.jsx)(n.section,{className:"remark-sectionize-h3",children:(0,t.jsx)(n.h3,{id:"\u4F8B\u984C",children:"\u4F8B\u984C"})}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"\u4F8B\u984C\uFF11-\u7279\u5B9A\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u3092\u4FDD\u6301",children:"\u4F8B\u984C\uFF11. \u7279\u5B9A\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u3092\u4FDD\u6301"}),(0,t.jsxs)(n.p,{children:["\u3053\u306E\u8A2D\u5B9A\u306F ",(0,t.jsx)(n.code,{children:"http_requests_total"})," \u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u3092\u4FDD\u6301\u3057\u3001\u305D\u308C\u4EE5\u5916\u3092\u3059\u3079\u3066\u524A\u9664\u3057\u307E\u3059\u3002"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'metricRelabelConfigs:\n  - source_labels: [__name__]\n    regex: "http_requests_total"\n    action: keep\n'})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u52D5\u4F5C\u4F8B"})}),"\n",(0,t.jsx)(n.p,{children:"\u30B9\u30AF\u30EC\u30A4\u30D7\u3055\u308C\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u304C\u4EE5\u4E0B\u306E\u3088\u3046\u306A\u3082\u306E\u3060\u3068\u4EEE\u5B9A\u3057\u307E\u3059\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'http_requests_total{method="GET", status="200"} 100\nhttp_errors_total{method="GET", status="500"} 5\nnode_cpu_seconds_total{cpu="0", mode="idle"} 1000\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u4E0A\u8A18\u306E ",(0,t.jsx)(n.code,{children:"metricRelabelConfigs"})," \u3092\u9069\u7528\u3059\u308B\u3068\u3001",(0,t.jsx)(n.code,{children:"http_requests_total"})," \u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u304C\u4FDD\u6301\u3055\u308C\u3001\u305D\u306E\u4ED6\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306F\u3059\u3079\u3066\u524A\u9664\u3055\u308C\u307E\u3059\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'http_requests_total{method="GET", status="200"} 100\n'})}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"\u4F8B\u984C\uFF12-\u6B63\u898F\u8868\u73FE\u3092\u4F7F\u7528\u3057\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0",children:"\u4F8B\u984C\uFF12. \u6B63\u898F\u8868\u73FE\u3092\u4F7F\u7528\u3057\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0"}),(0,t.jsxs)(n.p,{children:["\u3053\u306E\u8A2D\u5B9A\u306F ",(0,t.jsx)(n.code,{children:"node_cpu"})," \u307E\u305F\u306F ",(0,t.jsx)(n.code,{children:"node_memory"})," \u3067\u59CB\u307E\u308B\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u3092\u4FDD\u6301\u3057\u307E\u3059\u3002"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'metricRelabelConfigs:\n  - source_labels: [__name__]\n    regex: "node_(cpu|memory).*"\n    action: keep\n'})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u52D5\u4F5C\u4F8B"})}),"\n",(0,t.jsx)(n.p,{children:"\u30B9\u30AF\u30EC\u30A4\u30D7\u3055\u308C\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u304C\u4EE5\u4E0B\u306E\u3088\u3046\u306A\u3082\u306E\u3060\u3068\u4EEE\u5B9A\u3057\u307E\u3059\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'node_cpu_seconds_total{cpu="0", mode="idle"} 1000\nnode_memory_MemTotal_bytes{} 16777216\nnode_disk_io_time_seconds_total{device="sda"} 100\nhttp_requests_total{method="GET", status="200"} 100\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u4E0A\u8A18\u306E ",(0,t.jsx)(n.code,{children:"metricRelabelConfigs"})," \u3092\u9069\u7528\u3059\u308B\u3068\u3001",(0,t.jsx)(n.code,{children:"node_cpu"})," \u3084 ",(0,t.jsx)(n.code,{children:"node_memory"})," \u3067\u59CB\u307E\u308B\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u304C\u4FDD\u6301\u3055\u308C\u3001\u305D\u308C\u4EE5\u5916\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306F\u3059\u3079\u3066\u524A\u9664\u3055\u308C\u307E\u3059\u3002\u6B63\u898F\u8868\u73FE\u3092\u4F7F\u3046\u3053\u3068\u3067\u3001\u8907\u6570\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u30D1\u30BF\u30FC\u30F3\u3092\u4E00\u5EA6\u306B\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'node_cpu_seconds_total{cpu="0", mode="idle"} 1000\nnode_memory_MemTotal_bytes{} 16777216\n'})}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"\u4F8B\u984C\uFF13-\u30E9\u30D9\u30EB\u540D\u306E\u5909\u66F4",children:"\u4F8B\u984C\uFF13. \u30E9\u30D9\u30EB\u540D\u306E\u5909\u66F4"}),(0,t.jsxs)(n.p,{children:["\u3053\u306E\u8A2D\u5B9A\u306F ",(0,t.jsx)(n.code,{children:"method"})," \u30E9\u30D9\u30EB\u306E\u5024\u3092 ",(0,t.jsx)(n.code,{children:"http_method"})," \u30E9\u30D9\u30EB\u306B\u30B3\u30D4\u30FC\u3057\u307E\u3059\u3002"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'metricRelabelConfigs:\n  - source_labels: [method]\n    target_label: http_method\n    replacement: "${1}"\n    action: replace\n\n'})}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u52D5\u4F5C\u4F8B"})}),"\n",(0,t.jsx)(n.p,{children:"\u30B9\u30AF\u30EC\u30A4\u30D7\u3055\u308C\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u304C\u4EE5\u4E0B\u306E\u3088\u3046\u306A\u3082\u306E\u3060\u3068\u4EEE\u5B9A\u3057\u307E\u3059\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'http_requests_total{method="GET", path="/api", status="200"} 100\nhttp_requests_total{method="POST", path="/api/users", status="201"} 50\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u4E0A\u8A18\u306E metricRelabelConfigs \u3092\u9069\u7528\u3059\u308B\u3068\u3001\u5404\u30E1\u30C8\u30EA\u30AF\u30B9\u306B ",(0,t.jsx)(n.code,{children:"method"})," \u30E9\u30D9\u30EB\u306E\u5024\u3092\u30B3\u30D4\u30FC\u3057\u305F ",(0,t.jsx)(n.code,{children:"http_method"})," \u30E9\u30D9\u30EB\u304C\u8FFD\u52A0\u3055\u308C\u307E\u3059\u3002\u5143\u306E\u30E9\u30D9\u30EB\u306F\u7DAD\u6301\u3055\u308C\u3001\u65B0\u3057\u3044\u30E9\u30D9\u30EB\u304C\u8FFD\u52A0\u3055\u308C\u307E\u3059\u3002",(0,t.jsx)(n.code,{children:"${1}"})," \u306F\u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u306E\u5024\u3092\u53C2\u7167\u3057\u307E\u3059\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'http_requests_total{method="GET", path="/api", status="200", http_method="GET"} 100\nhttp_requests_total{method="POST", path="/api/users", status="201", http_method="POST"} 50\n'})}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"\u4F8B\u984C-4-\u8907\u6570\u306E\u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u306E\u7D44\u307F\u5408\u308F\u305B",children:"\u4F8B\u984C 4. \u8907\u6570\u306E\u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u306E\u7D44\u307F\u5408\u308F\u305B"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'metricRelabelConfigs:\n  - source_labels: [__name__, status]\n    regex: "http_requests_total;(200|500)"\n    action: keep\n\n'})}),(0,t.jsxs)(n.p,{children:["\u3053\u306E\u8A2D\u5B9A\u3067\u306F\u3001",(0,t.jsx)(n.code,{children:"http_requests_total"})," \u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u3046\u3061\u3001",(0,t.jsx)(n.code,{children:"status"})," \u30E9\u30D9\u30EB\u304C ",(0,t.jsx)(n.code,{children:"200"})," \u307E\u305F\u306F ",(0,t.jsx)(n.code,{children:"500"})," \u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u3092\u4FDD\u6301\u3057\u307E\u3059\u3002"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u52D5\u4F5C\u4F8B"})}),"\n",(0,t.jsx)(n.p,{children:"\u30B9\u30AF\u30EC\u30A4\u30D7\u3055\u308C\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u304C\u4EE5\u4E0B\u306E\u3088\u3046\u306A\u3082\u306E\u3060\u3068\u4EEE\u5B9A\u3057\u307E\u3059\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'http_requests_total{method="GET", path="/api", status="200"} 100\nhttp_requests_total{method="POST", path="/api/users", status="201"} 50\nhttp_requests_total{method="GET", path="/api/error", status="500"} 10\nhttp_requests_total{method="GET", path="/api/error", status="404"} 5\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u4E0A\u8A18\u306E metricRelabelConfigs \u3092\u9069\u7528\u3059\u308B\u3068\u3001",(0,t.jsx)(n.code,{children:"http_requests_total"})," \u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u3046\u3061\u3001",(0,t.jsx)(n.code,{children:"status"})," \u30E9\u30D9\u30EB\u304C ",(0,t.jsx)(n.code,{children:"200"})," \u307E\u305F\u306F ",(0,t.jsx)(n.code,{children:"500"})," \u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u304C\u4FDD\u6301\u3055\u308C\u307E\u3059\u3002\u8907\u6570\u306E\u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u3092\u7D44\u307F\u5408\u308F\u305B\u308B\u5834\u5408\u3001\u30C7\u30D5\u30A9\u30EB\u30C8\u3067\u306F ",(0,t.jsx)(n.code,{children:";"})," \u533A\u5207\u308A\u3067\u9023\u7D50\u3055\u308C\u3001",(0,t.jsx)(n.code,{children:"separator"})," \u30D5\u30A3\u30FC\u30EB\u30C9\u3067\u5909\u66F4\u53EF\u80FD\u3067\u3059\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'http_requests_total{method="GET", path="/api", status="200"} 100\nhttp_requests_total{method="GET", path="/api/error", status="500"} 10\n'})}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"\u4F8B\u984C-5-\u9759\u7684\u30E9\u30D9\u30EB\u306E\u8FFD\u52A0",children:"\u4F8B\u984C 5. \u9759\u7684\u30E9\u30D9\u30EB\u306E\u8FFD\u52A0"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'metricRelabelConfigs:\n  - target_label: metric_src\n    replacement: "whatap-open-agent"\n    action: replace\n\n'})}),(0,t.jsxs)(n.p,{children:["\u3053\u306E\u8A2D\u5B9A\u3067\u306F\u3001\u3059\u3079\u3066\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306B ",(0,t.jsx)(n.code,{children:'metric_src="whatap-open-agent"'})," \u30E9\u30D9\u30EB\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002\u30BD\u30FC\u30B9\u30E9\u30D9\u30EB\u3092\u6307\u5B9A\u3057\u306A\u3044\u5834\u5408\u3001",(0,t.jsx)(n.code,{children:"replacement"})," \u306E\u5024\u304C\u305D\u306E\u307E\u307E\u30E9\u30D9\u30EB\u306E\u5024\u3068\u3057\u3066\u4F7F\u7528\u3055\u308C\u307E\u3059\u3002\u3053\u306E\u65B9\u6CD5\u3092\u5229\u7528\u3059\u308B\u3068\u3001\u3059\u3079\u3066\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306B\u74B0\u5883\u540D\u3001\u30EA\u30FC\u30B8\u30E7\u30F3\u3001\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u540D\u306A\u3069\u306E\u9759\u7684\u30E9\u30D9\u30EB\u3092\u8FFD\u52A0\u3067\u304D\u307E\u3059\u3002"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u52D5\u4F5C\u4F8B"})}),"\n",(0,t.jsx)(n.p,{children:"\u5143\u3005\u30B9\u30AF\u30EC\u30A4\u30D4\u30F3\u30B0\u3055\u308C\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u304C\u4EE5\u4E0B\u306E\u3088\u3046\u306A\u3082\u306E\u3067\u3042\u308B\u3068\u4EEE\u5B9A\u3057\u307E\u3059\uFF1A"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'http_requests_total{method="GET", path="/api", status="200"} 100\nnode_cpu_seconds_total{cpu="0", mode="idle"} 1000\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u4E0A\u8A18\u306E ",(0,t.jsx)(n.code,{children:"metricRelabelConfigs"})," \u3092\u9069\u7528\u3059\u308B\u3068\u3001\u3059\u3079\u3066\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306B ",(0,t.jsx)(n.code,{children:'metric_src="whatap-open-agent"'})," \u30E9\u30D9\u30EB\u304C\u8FFD\u52A0\u3055\u308C\u307E\u3059\u3002\u3053\u306E\u65B9\u6CD5\u306F\u3001\u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u51FA\u6240\u3092\u793A\u3057\u305F\u308A\u3001\u74B0\u5883\uFF08\u4F8B\uFF1Aproduction\u3001staging\uFF09\u3001\u30EA\u30FC\u30B8\u30E7\u30F3\uFF08\u4F8B\uFF1Aus-east\u3001eu-west\uFF09\u3001\u307E\u305F\u306F\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u540D\u306A\u3069\u3092\u793A\u3059\u306E\u306B\u6709\u7528\u3067\u3059\u3002"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'http_requests_total{method="GET", path="/api", status="200", metric_src="whatap-open-agent"} 100\nnode_cpu_seconds_total{cpu="0", mode="idle", metric_src="whatap-open-agent"} 1000\n'})}),"\n"]}),"\n"]})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h4",children:[(0,t.jsx)(n.h4,{id:"\u4F8B\u984C-\u7DCF\u5408\u7684\u306A\u52D5\u4F5C",children:"\u4F8B\u984C. \u7DCF\u5408\u7684\u306A\u52D5\u4F5C"}),(0,t.jsx)(n.p,{children:"\u30B9\u30AF\u30EC\u30A4\u30D7\u3055\u308C\u305F\u30E1\u30C8\u30EA\u30AF\u30B9\u304C\u4EE5\u4E0B\u306E\u3088\u3046\u306A\u3082\u306E\u3060\u3068\u4EEE\u5B9A\u3057\u307E\u3059\u3002"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'apiserver_request_total{code="200", resource="pods", verb="GET"} 100\nsome_other_metric{label="value"} 50\n'})}),(0,t.jsxs)(n.p,{children:["\u4E0A\u8A18\u306E ",(0,t.jsx)(n.code,{children:"metricRelabelConfigs"})," \u3092\u9069\u7528\u3059\u308B\u3068"]}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"1\u3064\u76EE\u306E\u30EB\u30FC\u30EB\uFF08keep apiserver_request_total\uFF09\u306E\u9069\u7528\uFF1A"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"apiserver_request_total \u30E1\u30C8\u30EA\u30AF\u30B9\u306F\u4FDD\u6301\u3055\u308C\u307E\u3059\u3002"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"some_other_metric\u30E1\u30C8\u30EA\u30AF\u30B9\u306F\u524A\u9664\u3055\u308C\u307E\u3059\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"2\u3064\u76EE\u306E\u30EB\u30FC\u30EB\uFF08replace verb \u2192 http_verb\uFF09\u306E\u9069\u7528\uFF1A"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u4FDD\u6301\u3055\u308C\u305F ",(0,t.jsx)(n.code,{children:"apiserver_request_total"})," \u30E1\u30C8\u30EA\u30AF\u30B9\u306B ",(0,t.jsx)(n.code,{children:"verb"})," \u30E9\u30D9\u30EB\u304C\u5B58\u5728\u3059\u308B\u305F\u3081\u3001\u3053\u306E\u30E9\u30D9\u30EB\u306E\u5024\uFF08\u4F8B\uFF1A",(0,t.jsx)(n.code,{children:"GET"}),"\uFF09\u304C ",(0,t.jsx)(n.code,{children:"http_verb"})," \u3068\u3044\u3046\u65B0\u3057\u3044\u30E9\u30D9\u30EB\u306B\u30B3\u30D4\u30FC\u3055\u308C\u307E\u3059\u3002"]}),"\n"]}),"\n"]}),"\n"]}),(0,t.jsx)(n.p,{children:"\u3057\u305F\u304C\u3063\u3066\u3001\u6700\u7D42\u7684\u306B\u53CE\u96C6\u3055\u308C\u308B\u30E1\u30C8\u30EA\u30AF\u30B9\u306F\u6B21\u306E\u3088\u3046\u306B\u306A\u308A\u307E\u3059\u3002"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'apiserver_request_total{code="200", resource="pods", verb="GET", http_verb="GET"} 100\n'})})]}),"\n",(0,t.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,t.jsx)(n.h2,{id:"kubernetes-\u30E1\u30C8\u30EA\u30AF\u30B9\u53CE\u96C6\u306E\u4F8B",children:"Kubernetes \u30E1\u30C8\u30EA\u30AF\u30B9\u53CE\u96C6\u306E\u4F8B"}),(0,t.jsx)(n.p,{children:"\u4EE5\u4E0B\u306F\u3001Kubernetes API \u30B5\u30FC\u30D0\u30FC\u304B\u3089\u30E1\u30C8\u30EA\u30AF\u30B9\u3092\u53CE\u96C6\u3059\u308B\u4F8B\u3067\u3059\u3002"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"\u3053\u306E\u8A2D\u5B9A\u3067\u306F\u3001kube-system \u30CD\u30FC\u30E0\u30B9\u30DA\u30FC\u30B9\u5185\u3067 component=apiserver \u304A\u3088\u3073 provider=kubernetes \u30E9\u30D9\u30EB\u3092\u6301\u3064\u30B5\u30FC\u30D3\u30B9\u3092\u5BFE\u8C61\u306B\u3001\u8A72\u5F53\u30B5\u30FC\u30D3\u30B9\u306E\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8\u304B\u3089\u30E1\u30C8\u30EA\u30AF\u30B9\u3092\u53CE\u96C6\u3057\u307E\u3059\u3002"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:'metricRelabelConfigs \u3092\u4F7F\u7528\u3057\u3066 apiserver_request_total \u30E1\u30C8\u30EA\u30AF\u30B9\u306E\u307F\u3092\u53CE\u96C6\u3057\u3001verb \u30E9\u30D9\u30EB\u3092 http_verb \u30E9\u30D9\u30EB\u306B\u5909\u63DB\u3057\u3001\u3059\u3079\u3066\u306E\u30E1\u30C8\u30EA\u30AF\u30B9\u306B metric_src="whatap-open-agent" \u3068\u3044\u3046\u9759\u7684\u30E9\u30D9\u30EB\u3092\u8FFD\u52A0\u3059\u308B\u3088\u3046\u6307\u5B9A\u3067\u304D\u307E\u3059\u3002'}),"\n"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:"title='Kubernetes \u30E1\u30C8\u30EA\u30AF\u30B9\u53CE\u96C6\u4F8B'",children:'# scrape_config.yaml\nfeatures:\n  openAgent:\n    enabled: true\n    targets:\n      - targetName: kube-apiserver\n        type: ServiceMonitor\n        namespaceSelector:\n          matchNames:\n            - "kube-system"\n        selector:\n          matchLabels:\n            component: apiserver\n            provider: kubernetes\n        endpoints:\n          - port: "https"\n            path: "/metrics"\n            interval: "30s"\n            metricRelabelConfigs:\n              - source_labels: [__name__]\n                regex: "apiserver_request_total"\n                action: keep\n              - source_labels: [verb]\n                target_label: http_verb\n                replacement: "${1}"\n                action: replace\n              # \u9759\u7684\u30E9\u30D9\u30EB\u306E\u8FFD\u52A0\n              - target_label: metric_src\n                replacement: "whatap-open-agent"\n                action: replace\n'})})]})]})}function h(e={}){let{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},84429:function(e,n,s){s.d(n,{R:()=>l,x:()=>c});var r=s(96540);let t={},i=r.createContext(t);function l(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);