"use strict";(self.webpackChunkwhatap_docs=self.webpackChunkwhatap_docs||[]).push([["81194"],{57957:function(e,n,a){a.r(n),a.d(n,{metadata:()=>t,default:()=>d,frontMatter:()=>o,contentTitle:()=>l,toc:()=>c,assets:()=>i});var t=JSON.parse('{"id":"kubernetes/k8s-collection-server-ip","title":"Kubernetes\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP\u5909\u66F4","description":"Kubernetes\u88FD\u54C1\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP\u306E\u5909\u66F4\u65B9\u6CD5\u3092\u6848\u5185\u3057\u307E\u3059\u3002","source":"@site/i18n/ja/docusaurus-plugin-content-docs/current/kubernetes/k8s-collection-server-ip.mdx","sourceDirName":"kubernetes","slug":"/kubernetes/k8s-collection-server-ip","permalink":"/whatap-docs/ja/kubernetes/k8s-collection-server-ip","draft":false,"unlisted":false,"editUrl":"undefined/docs/kubernetes/k8s-collection-server-ip.mdx","tags":[],"version":"current","frontMatter":{"id":"k8s-collection-server-ip","title":"Kubernetes\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP\u5909\u66F4","description":"Kubernetes\u88FD\u54C1\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP\u306E\u5909\u66F4\u65B9\u6CD5\u3092\u6848\u5185\u3057\u307E\u3059\u3002","keywords":["\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP"],"isTranslationMissing":false}}'),s=a(74848),r=a(84429);let o={id:"k8s-collection-server-ip",title:"Kubernetes\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP\u5909\u66F4",description:"Kubernetes\u88FD\u54C1\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP\u306E\u5909\u66F4\u65B9\u6CD5\u3092\u6848\u5185\u3057\u307E\u3059\u3002",keywords:["\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP"],isTranslationMissing:!1},l,i={},c=[{value:"Yaml\u30D5\u30A1\u30A4\u30EB\u57FA\u6E96",id:"yaml\u30D5\u30A1\u30A4\u30EB\u57FA\u6E96",level:2},{value:"\u4F8B",id:"\u4F8B",level:3},{value:"Helm\u30C1\u30E3\u30FC\u30C8\u57FA\u6E96",id:"helm\u30C1\u30E3\u30FC\u30C8\u57FA\u6E96",level:2}];function m(e){let n={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",ul:"ul",...(0,r.R)(),...e.components},{TabItem:a,Tabs:t}=n;return a||h("TabItem",!0),t||h("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Kubernetes\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u30B5\u30FC\u30D3\u30B9\u3092\u5229\u7528\u3059\u308B\u9867\u5BA2\u3092\u5BFE\u8C61\u306B\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP\u60C5\u5831\u306E\u5909\u66F4\u65B9\u6CD5\u3092\u6848\u5185\u3057\u307E\u3059\u3002 Kubernetes\u30E2\u30CB\u30BF\u30EA\u30F3\u30B0\u3092\u8A2D\u5B9A\u3057\u305F\u5F8C\u3001\u7279\u5B9A\u306E\u74B0\u5883\u3067\u53CE\u96C6\u30B5\u30FC\u30D0\u30FCIP\u306E\u5909\u66F4\u304C\u5FC5\u8981\u306A\u5834\u5408\u306F\u3001\u6B21\u306E\u904E\u7A0B\u3092\u53C2\u8003\u306B\u3057\u3066\u5909\u66F4\u3057\u307E\u3059\u3002"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsxs)(a,{value:"cs-yaml",label:"Yaml",default:!0,children:[(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"yaml\u30D5\u30A1\u30A4\u30EB\u57FA\u6E96",children:"Yaml\u30D5\u30A1\u30A4\u30EB\u57FA\u6E96"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u6B21\u306E\u4F4D\u7F6E\u3067",(0,s.jsx)(n.code,{children:"whatap_host"}),"\u5024\u3092\u5909\u66F4\u3057\u307E\u3059\u3002"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"yaml"}),"\u30D5\u30A1\u30A4\u30EB\u3067",(0,s.jsx)(n.code,{children:"whatap-master-agent"}),"\u30B3\u30F3\u30C6\u30CA\u306E\u4E0B\u4F4D\u306E",(0,s.jsx)(n.code,{children:"env"}),"\u9805\u76EE\u306E\u3046\u3061",(0,s.jsx)(n.code,{children:"WHATAP_HOST"}),"\u5024\u3092",(0,s.jsx)(n.code,{children:"61.109.237.237/61.109.238.166 "}),"\u306B\u5909\u66F4\u3057\u307E\u3059\u3002"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"yaml"}),"\u30D5\u30A1\u30A4\u30EB\u3067",(0,s.jsx)(n.code,{children:"whatap-node-agent"}),"\u30B3\u30F3\u30C6\u30CA\u306E\u4E0B\u4F4D\u306E",(0,s.jsx)(n.code,{children:"env"}),"\u9805\u76EE\u306E\u3046\u3061",(0,s.jsx)(n.code,{children:"WHATAP_HOST"}),"\u5024\u3092",(0,s.jsx)(n.code,{children:"61.109.237.237/61.109.238.166 "}),"\u306B\u5909\u66F4\u3057\u307E\u3059\u3002"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["\u5909\u66F4\u3057\u305F",(0,s.jsx)(n.em,{children:"yaml"}),"\u30D5\u30A1\u30A4\u30EB\u3092Kubernetes\u30AF\u30E9\u30B9\u30BF\u30FC\u306B\u9069\u7528\u3057\u307E\u3059\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f \u5909\u66F4\u3057\u305Fyaml\u30D5\u30A1\u30A4\u30EB\u540D.yaml\n"})}),"\n"]}),"\n"]})]}),(0,s.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,s.jsx)(n.h3,{id:"\u4F8B",children:"\u4F8B"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:"title='Yaml' showLineNumbers{22-23,121-122}",children:'apiVersion: "apps/v1"\nkind: "Deployment"\nmetadata:\n  name: "whatap-master-agent"\n  namespace: "whatap-monitoring"\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      name: "whatap-master-agent"\n  template:\n    metadata:\n      labels:\n        name: "whatap-master-agent"\n    spec:\n      containers:\n      - command:\n        - "/bin/entrypoint.sh"\n        env:\n        - name: "WHATAP_LICENSE"\n          value: "x22gg93735j9v-z63jpk29lgtn68-x52sdl202an6h"\n        - name: "WHATAP_HOST"\n          value: "61.109.237.237/61.109.238.166"\n        - name: "WHATAP_PORT"\n          value: "6600"\n        - name: "WHATP_MEM_LIMIT"\n          valueFrom:\n            resourceFieldRef:\n              containerName: "whatap-master-agent"\n              resource: "limits.memory"\n        image: "whatap/kube_mon"\n        name: "whatap-master-agent"\n        ports:\n        - containerPort: 6600\n        resources:\n          limits:\n            cpu: "200m"\n            memory: "350Mi"\n          requests:\n            cpu: "100m"\n            memory: "300Mi"\n        volumeMounts:\n        - mountPath: "/bin/entrypoint.sh"\n          name: "start-script-volume"\n          readOnly: true\n          subPath: "entrypoint.sh"\n        - mountPath: "/whatap_conf"\n          name: "whatap-config-volume"\n      serviceAccount: "whatap"\n      volumes:\n      - configMap:\n          defaultMode: 448\n          name: "master-start-script"\n        name: "start-script-volume"\n      - emptyDir: {}\n        name: "whatap-config-volume"\n---\napiVersion: "apps/v1"\nkind: "DaemonSet"\nmetadata:\n  labels:\n    name: "whatap-node-agent"\n  name: "whatap-node-agent"\n  namespace: "whatap-monitoring"\nspec:\n  selector:\n    matchLabels:\n      name: "whatap-node-agent"\n  template:\n    metadata:\n      labels:\n        name: "whatap-node-agent"\n    spec:\n      containers:\n      - command:\n        - "/data/agent/node/cadvisor_helper"\n        - "-port"\n        - "6801"\n        env:\n        - name: "NODE_NAME"\n          valueFrom:\n            fieldRef:\n              fieldPath: "spec.nodeName"\n        image: "whatap/kube_mon"\n        name: "whatap-node-helper"\n        ports:\n        - containerPort: 6801\n          name: "helperport"\n        resources:\n          limits:\n            cpu: "200m"\n            memory: "350Mi"\n          requests:\n            cpu: "100m"\n            memory: "100Mi"\n        volumeMounts:\n        - mountPath: "/rootfs"\n          name: "rootfs"\n          readOnly: true\n        - mountPath: "/sys"\n          name: "hostsys"\n          readOnly: true\n        - mountPath: "/dev/disk"\n          name: "hostdiskdevice"\n          readOnly: true\n        - mountPath: "/var/run/docker.sock"\n          name: "dockerdomainsocket"\n      - command:\n        - "/bin/entrypoint.sh"\n        env:\n        - name: "NODE_IP"\n          valueFrom:\n            fieldRef:\n              fieldPath: "status.hostIP"\n        - name: "NODE_NAME"\n          valueFrom:\n            fieldRef:\n              fieldPath: "spec.nodeName"\n        - name: "WHATAP_LICENSE"\n          value: "x22gg93735j9v-z63jpk29lgtn68-x52sdl202an6h"\n        - name: "WHATAP_HOST"\n          value: "61.109.237.237/61.109.238.166"\n        - name: "WHATAP_PORT"\n          value: "6600"\n        - name: "HOST_PREFIX"\n          value: "/rootfs"\n        - name: "WHATP_MEM_LIMIT"\n          valueFrom:\n            resourceFieldRef:\n              containerName: "whatap-node-agent"\n              resource: "limits.memory"\n        image: "whatap/kube_mon"\n        name: "whatap-node-agent"\n        ports:\n        - containerPort: 6600\n          name: "nodeport"\n        resources:\n          limits:\n            cpu: "200m"\n            memory: "350Mi"\n          requests:\n            cpu: "100m"\n            memory: "300Mi"\n        volumeMounts:\n        - mountPath: "/rootfs"\n          name: "rootfs"\n          readOnly: true\n        - mountPath: "/bin/entrypoint.sh"\n          name: "start-script-volume"\n          readOnly: true\n          subPath: "entrypoint.sh"\n        - mountPath: "/whatap_conf"\n          name: "whatap-config-volume"\n      initContainers:\n      - command:\n        - "/data/agent/tools/whatap_debugger"\n        - "run"\n        image: "whatap/kube_mon"\n        name: "whatap-node-debug"\n        volumeMounts:\n        - mountPath: "/rootfs"\n          name: "rootfs"\n          readOnly: true\n      serviceAccount: "whatap"\n      tolerations:\n      - effect: "NoSchedule"\n        key: "node-role.kubernetes.io/master"\n      - effect: "NoSchedule"\n        key: "node-role.kubernetes.io/control-plane"\n      volumes:\n      - hostPath:\n          path: "/"\n        name: "rootfs"\n      - hostPath:\n          path: "/sys"\n        name: "hostsys"\n      - hostPath:\n          path: "/dev/disk"\n        name: "hostdiskdevice"\n      - configMap:\n          defaultMode: 448\n          name: "node-start-script"\n        name: "start-script-volume"\n      - emptyDir: {}\n        name: "whatap-config-volume"\n      - hostPath:\n          path: "/var/run/docker.sock"\n        name: "dockerdomainsocket"\n      - hostPath:\n          path: "/var/lib/docker"\n        name: "hostdocker"\n'})})]})]}),(0,s.jsx)(a,{value:"cs-helm",label:"Helm Chart",default:!0,children:(0,s.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,s.jsx)(n.h2,{id:"helm\u30C1\u30E3\u30FC\u30C8\u57FA\u6E96",children:"Helm\u30C1\u30E3\u30FC\u30C8\u57FA\u6E96"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Helm\u30C1\u30E3\u30FC\u30C8\u3092\u901A\u3058\u3066Kubernetes\u30A8\u30FC\u30B8\u30A7\u30F3\u30C8\u3092\u914D\u5E03\u3057\u305F\u5834\u5408",(0,s.jsx)(n.em,{children:"values.yaml"}),"\u3067\u6B21\u306E\u9805\u76EE\u3092\u4FEE\u6B63\u3057\u307E\u3059\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:"title='Helm' showLineNumbers{3}",children:'whatap:\n  license: # <license-key>\n  host: "61.109.237.237/61.109.238.166" # <whatap-server-host>\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u4FEE\u6B63\u3057\u305FHelm\u30C1\u30E3\u30FC\u30C8\u3092\u9069\u7528\u3057\u307E\u3059\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"helm upgrade whatap-kube-agent whatap/kube -f values.yaml\n"})}),"\n"]}),"\n"]})]})})]})]})}function d(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(m,{...e})}):m(e)}function h(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},84429:function(e,n,a){a.d(n,{R:()=>o,x:()=>l});var t=a(96540);let s={},r=t.createContext(s);function o(e){let n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);