"use strict";(self.webpackChunkWhaTap_Docs=self.webpackChunkWhaTap_Docs||[]).push([[47050],{47621:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var o=t(74848),i=t(28453);const r={id:"set-aws-resource-options",title:"Options for collection of AWS resource data",description:"You can collect resource data from the AWS environment and display it on the topology screen.",tags:["Network performance monitoring","Agent","AWS","Amazon Linux"]},s=void 0,c={id:"npm/set-aws-resource-options",title:"Options for collection of AWS resource data",description:"You can collect resource data from the AWS environment and display it on the topology screen.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/npm/set-aws-resource-options.mdx",sourceDirName:"npm",slug:"/npm/set-aws-resource-options",permalink:"/npm/set-aws-resource-options",draft:!1,unlisted:!1,editUrl:"undefined/docs/npm/set-aws-resource-options.mdx",tags:[{inline:!0,label:"Network performance monitoring",permalink:"/tags/network-performance-monitoring"},{inline:!0,label:"Agent",permalink:"/tags/agent"},{inline:!0,label:"AWS",permalink:"/tags/aws"},{inline:!0,label:"Amazon Linux",permalink:"/tags/amazon-linux"}],version:"current",frontMatter:{id:"set-aws-resource-options",title:"Options for collection of AWS resource data",description:"You can collect resource data from the AWS environment and display it on the topology screen.",tags:["Network performance monitoring","Agent","AWS","Amazon Linux"]},sidebar:"npmsidebar",previous:{title:"Agent Installation",permalink:"/npm/install-agent"},next:{title:"Setting the tagRule",permalink:"/npm/set-tagrule"}},a={},l=[{value:"Configuring the AWS resource roles in the EC2 environment",id:"set-aws-resource-ec2",level:2},{value:"Configuring the AWS IAM",id:"configuring-the-aws-iam",level:3},{value:"Configuring the AWS resource roles in the EKS environment",id:"set-aws-resource-eks",level:2},{value:"Configuring the AWS IAM",id:"configuring-the-aws-iam-1",level:3},{value:"Configuring the service account",id:"configuring-the-service-account",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",section:"section",strong:"strong",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"To use the network performance monitoring in the AWS environment, you can collect data on the EC2 network interface (ENI) connected to each resource (e.g. LB) and then represent it in the topology. Because the agent cannot be installed directly as an AWS element, the associated ENI is displayed after checking based on the collected IP."}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Example",src:t(66606).A+"",width:"800",height:"316"})}),"\n",(0,o.jsxs)(n.p,{children:["When traffic is applied internally through AWS's ELB, it can appear in the topology through the data displayed in ENI, as shown in the figure. It appears based on the ",(0,o.jsx)(n.code,{children:"Description"})," field in AWS's ENI. If you do not leave any data in the ",(0,o.jsx)(n.code,{children:"Description"})," field, the ",(0,o.jsx)(n.code,{children:"NetworkInterfaceId"})," property is provided."]}),"\n",(0,o.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,o.jsx)(n.h2,{id:"set-aws-resource-ec2",children:"Configuring the AWS resource roles in the EC2 environment"}),(0,o.jsxs)(n.p,{children:["When you install the ",(0,o.jsx)(n.strong,{children:"NPM"})," agent on AWS EC2, you can collect resource data from AWS based on the IAM settings."]}),(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_switch-role-ec2.html",children:"AWS configuration guide"})})})]}),"\n",(0,o.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,o.jsx)(n.h3,{id:"configuring-the-aws-iam",children:"Configuring the AWS IAM"}),(0,o.jsxs)(n.p,{children:["AWS IAM requires you to specify minimum roles during policy configuration. To collect the AWS resource data from ",(0,o.jsx)(n.strong,{children:"NPM"}),", the ",(0,o.jsx)(n.code,{children:"ec2:DescribeNetworkInterfaces"})," role is required."]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Effect": "Allow",\n            "Action": [\n              //...\n              "ec2:DescribeNetworkInterfaces"\n            ],\n            "Resource": "*"\n        }\n    ]\n}\n'})}),(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["For more information about the policy and authorization, see ",(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html#policy-syntax/",children:"the following link"}),"."]})})]}),"\n",(0,o.jsxs)(n.section,{className:"remark-sectionize-h2",children:[(0,o.jsx)(n.h2,{id:"set-aws-resource-eks",children:"Configuring the AWS resource roles in the EKS environment"}),(0,o.jsxs)(n.p,{children:["While installing the ",(0,o.jsx)(n.strong,{children:"NPM"})," agent on AWS EKS, you can collect resource data from AWS through SeviceAccount."]}),(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html",children:"AWS configuration guide"})})})]}),"\n",(0,o.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,o.jsx)(n.h3,{id:"configuring-the-aws-iam-1",children:"Configuring the AWS IAM"}),(0,o.jsxs)(n.p,{children:["AWS IAM requires you to specify minimum roles during policy configuration. To collect the AWS resource data from ",(0,o.jsx)(n.strong,{children:"NPM"}),", the ",(0,o.jsx)(n.code,{children:"ec2:DescribeNetworkInterfaces"})," role is required."]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Effect": "Allow",\n            "Action": [\n              //...\n              "ec2:DescribeNetworkInterfaces"\n            ],\n            "Resource": "*"\n        }\n    ]\n}\n'})}),(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["For more information about the policy and authorization, see ",(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html#policy-syntax/",children:"the following link"}),"."]})})]}),"\n",(0,o.jsxs)(n.section,{className:"remark-sectionize-h3",children:[(0,o.jsx)(n.h3,{id:"configuring-the-service-account",children:"Configuring the service account"}),(0,o.jsxs)(n.p,{children:["During the AWS EKS configuration, connect IAM to the Kubernetes service account. To collect AWS resource data from ",(0,o.jsx)(n.strong,{children:"NPM"}),", connect IAM to the NPM service account."]}),(0,o.jsxs)(n.p,{children:["For ",(0,o.jsx)(n.strong,{children:"NPM"}),", use the following service account."]}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"namespace : whatap-npm-ns\nservice_account : whatap-npm\n"})}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",metastring:"title='example'",children:"kubectl annotate serviceaccount -n whatap-npm-ns whatap-npm eks.amazonaws.com/role-arn=arn:aws:iam::$account_id:role/$role\n"})})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},66606:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/npm-aws-resource-example-7283d5ee26552538c0cf9390ebac4d00.png"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>c});var o=t(96540);const i={},r=o.createContext(i);function s(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);